{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport PropTypes from '../_util/vue-types';\nimport addEventListener from '../vc-util/Dom/addEventListener';\nimport getScroll from '../_util/getScroll';\nimport BaseMixin from '../_util/BaseMixin';\nimport getTransitionProps from '../_util/getTransitionProps';\nimport { ConfigConsumerProps } from '../config-provider/configConsumerProps';\nimport Base from '../base';\nimport { getListeners } from '../_util/props-util';\nimport scrollTo from '../_util/scrollTo';\n\nfunction getDefaultTarget() {\n  return window;\n}\n\nvar BackTopProps = {\n  visibilityHeight: PropTypes.number,\n  // onClick?: React.MouseEventHandler<any>;\n  target: PropTypes.func,\n  prefixCls: PropTypes.string // visible: PropTypes.bool, // Only for test. Don't use it.\n\n};\nvar BackTop = {\n  name: 'ABackTop',\n  mixins: [BaseMixin],\n  props: _extends({}, BackTopProps, {\n    visibilityHeight: PropTypes.number.def(400)\n  }),\n  inject: {\n    configProvider: {\n      'default': function _default() {\n        return ConfigConsumerProps;\n      }\n    }\n  },\n  data: function data() {\n    this.scrollEvent = null;\n    return {\n      visible: false\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      var getTarget = _this.target || getDefaultTarget;\n      _this.scrollEvent = addEventListener(getTarget(), 'scroll', _this.handleScroll);\n\n      _this.handleScroll();\n    });\n  },\n  activated: function activated() {\n    var _this2 = this;\n\n    this.$nextTick(function () {\n      _this2.handleScroll();\n    });\n  },\n  beforeDestroy: function beforeDestroy() {\n    if (this.scrollEvent) {\n      this.scrollEvent.remove();\n    }\n  },\n  methods: {\n    getCurrentScrollTop: function getCurrentScrollTop() {\n      var getTarget = this.target || getDefaultTarget;\n      var targetNode = getTarget();\n\n      if (targetNode === window) {\n        return window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;\n      }\n\n      return targetNode.scrollTop;\n    },\n    scrollToTop: function scrollToTop(e) {\n      var _target = this.target,\n          target = _target === undefined ? getDefaultTarget : _target;\n      scrollTo(0, {\n        getContainer: target\n      });\n      this.$emit('click', e);\n    },\n    handleScroll: function handleScroll() {\n      var visibilityHeight = this.visibilityHeight,\n          _target2 = this.target,\n          target = _target2 === undefined ? getDefaultTarget : _target2;\n      var scrollTop = getScroll(target(), true);\n      this.setState({\n        visible: scrollTop > visibilityHeight\n      });\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    var customizePrefixCls = this.prefixCls,\n        $slots = this.$slots;\n    var getPrefixCls = this.configProvider.getPrefixCls;\n    var prefixCls = getPrefixCls('back-top', customizePrefixCls);\n    var defaultElement = h('div', {\n      'class': prefixCls + '-content'\n    }, [h('div', {\n      'class': prefixCls + '-icon'\n    })]);\n    var divProps = {\n      on: _extends({}, getListeners(this), {\n        click: this.scrollToTop\n      }),\n      'class': prefixCls\n    };\n    var backTopBtn = this.visible ? h('div', divProps, [$slots['default'] || defaultElement]) : null;\n    var transitionProps = getTransitionProps('fade');\n    return h('transition', transitionProps, [backTopBtn]);\n  }\n};\n/* istanbul ignore next */\n\nBackTop.install = function (Vue) {\n  Vue.use(Base);\n  Vue.component(BackTop.name, BackTop);\n};\n\nexport default BackTop;","map":{"version":3,"sources":["/Users/liulu/刘璐/vue3/hello-vue3/node_modules/ant-design-vue/es/back-top/index.js"],"names":["_extends","PropTypes","addEventListener","getScroll","BaseMixin","getTransitionProps","ConfigConsumerProps","Base","getListeners","scrollTo","getDefaultTarget","window","BackTopProps","visibilityHeight","number","target","func","prefixCls","string","BackTop","name","mixins","props","def","inject","configProvider","_default","data","scrollEvent","visible","mounted","_this","$nextTick","getTarget","handleScroll","activated","_this2","beforeDestroy","remove","methods","getCurrentScrollTop","targetNode","pageYOffset","document","body","scrollTop","documentElement","scrollToTop","e","_target","undefined","getContainer","$emit","_target2","setState","render","h","arguments","customizePrefixCls","$slots","getPrefixCls","defaultElement","divProps","on","click","backTopBtn","transitionProps","install","Vue","use","component"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport PropTypes from '../_util/vue-types';\nimport addEventListener from '../vc-util/Dom/addEventListener';\nimport getScroll from '../_util/getScroll';\nimport BaseMixin from '../_util/BaseMixin';\nimport getTransitionProps from '../_util/getTransitionProps';\nimport { ConfigConsumerProps } from '../config-provider/configConsumerProps';\nimport Base from '../base';\nimport { getListeners } from '../_util/props-util';\nimport scrollTo from '../_util/scrollTo';\n\nfunction getDefaultTarget() {\n  return window;\n}\n\nvar BackTopProps = {\n  visibilityHeight: PropTypes.number,\n  // onClick?: React.MouseEventHandler<any>;\n  target: PropTypes.func,\n  prefixCls: PropTypes.string\n  // visible: PropTypes.bool, // Only for test. Don't use it.\n};\n\nvar BackTop = {\n  name: 'ABackTop',\n  mixins: [BaseMixin],\n  props: _extends({}, BackTopProps, {\n    visibilityHeight: PropTypes.number.def(400)\n  }),\n  inject: {\n    configProvider: { 'default': function _default() {\n        return ConfigConsumerProps;\n      } }\n  },\n  data: function data() {\n    this.scrollEvent = null;\n    return {\n      visible: false\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      var getTarget = _this.target || getDefaultTarget;\n      _this.scrollEvent = addEventListener(getTarget(), 'scroll', _this.handleScroll);\n      _this.handleScroll();\n    });\n  },\n  activated: function activated() {\n    var _this2 = this;\n\n    this.$nextTick(function () {\n      _this2.handleScroll();\n    });\n  },\n  beforeDestroy: function beforeDestroy() {\n    if (this.scrollEvent) {\n      this.scrollEvent.remove();\n    }\n  },\n\n  methods: {\n    getCurrentScrollTop: function getCurrentScrollTop() {\n      var getTarget = this.target || getDefaultTarget;\n      var targetNode = getTarget();\n      if (targetNode === window) {\n        return window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;\n      }\n      return targetNode.scrollTop;\n    },\n    scrollToTop: function scrollToTop(e) {\n      var _target = this.target,\n          target = _target === undefined ? getDefaultTarget : _target;\n\n      scrollTo(0, {\n        getContainer: target\n      });\n      this.$emit('click', e);\n    },\n    handleScroll: function handleScroll() {\n      var visibilityHeight = this.visibilityHeight,\n          _target2 = this.target,\n          target = _target2 === undefined ? getDefaultTarget : _target2;\n\n      var scrollTop = getScroll(target(), true);\n      this.setState({\n        visible: scrollTop > visibilityHeight\n      });\n    }\n  },\n\n  render: function render() {\n    var h = arguments[0];\n    var customizePrefixCls = this.prefixCls,\n        $slots = this.$slots;\n\n\n    var getPrefixCls = this.configProvider.getPrefixCls;\n    var prefixCls = getPrefixCls('back-top', customizePrefixCls);\n\n    var defaultElement = h(\n      'div',\n      { 'class': prefixCls + '-content' },\n      [h('div', { 'class': prefixCls + '-icon' })]\n    );\n    var divProps = {\n      on: _extends({}, getListeners(this), {\n        click: this.scrollToTop\n      }),\n      'class': prefixCls\n    };\n\n    var backTopBtn = this.visible ? h(\n      'div',\n      divProps,\n      [$slots['default'] || defaultElement]\n    ) : null;\n    var transitionProps = getTransitionProps('fade');\n    return h(\n      'transition',\n      transitionProps,\n      [backTopBtn]\n    );\n  }\n};\n\n/* istanbul ignore next */\nBackTop.install = function (Vue) {\n  Vue.use(Base);\n  Vue.component(BackTop.name, BackTop);\n};\n\nexport default BackTop;"]},"metadata":{},"sourceType":"module"}