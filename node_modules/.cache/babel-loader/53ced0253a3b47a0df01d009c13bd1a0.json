{"ast":null,"code":"import _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _toConsumableArray from 'babel-runtime/helpers/toConsumableArray';\nimport _extends from 'babel-runtime/helpers/extends';\nimport classNames from 'classnames';\nimport omit from 'omit.js';\nimport PropTypes from '../_util/vue-types';\nimport VcMentions from '../vc-mentions';\nimport { mentionsProps } from '../vc-mentions/src/mentionsProps';\nimport Base from '../base';\nimport Spin from '../spin';\nimport BaseMixin from '../_util/BaseMixin';\nimport { ConfigConsumerProps } from '../config-provider/configConsumerProps';\nimport { getOptionProps, getComponentFromProp, getListeners, filterEmpty } from '../_util/props-util';\nvar Option = VcMentions.Option;\n\nfunction loadingFilterOption() {\n  return true;\n}\n\nfunction getMentions() {\n  var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  var config = arguments[1];\n\n  var _ref = config || {},\n      _ref$prefix = _ref.prefix,\n      prefix = _ref$prefix === undefined ? '@' : _ref$prefix,\n      _ref$split = _ref.split,\n      split = _ref$split === undefined ? ' ' : _ref$split;\n\n  var prefixList = Array.isArray(prefix) ? prefix : [prefix];\n  return value.split(split).map(function () {\n    var str = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var hitPrefix = null;\n    prefixList.some(function (prefixStr) {\n      var startStr = str.slice(0, prefixStr.length);\n\n      if (startStr === prefixStr) {\n        hitPrefix = prefixStr;\n        return true;\n      }\n\n      return false;\n    });\n\n    if (hitPrefix !== null) {\n      return {\n        prefix: hitPrefix,\n        value: str.slice(hitPrefix.length)\n      };\n    }\n\n    return null;\n  }).filter(function (entity) {\n    return !!entity && !!entity.value;\n  });\n}\n\nvar Mentions = {\n  name: 'AMentions',\n  mixins: [BaseMixin],\n  inheritAttrs: false,\n  model: {\n    prop: 'value',\n    event: 'change'\n  },\n  Option: _extends({}, Option, {\n    name: 'AMentionsOption'\n  }),\n  getMentions: getMentions,\n  props: _extends({}, mentionsProps, {\n    loading: PropTypes.bool\n  }),\n  inject: {\n    configProvider: {\n      'default': function _default() {\n        return ConfigConsumerProps;\n      }\n    }\n  },\n  data: function data() {\n    return {\n      focused: false\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      if (_this.autoFocus) {\n        _this.focus();\n      }\n    });\n  },\n  methods: {\n    onFocus: function onFocus() {\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      this.$emit.apply(this, ['focus'].concat(_toConsumableArray(args)));\n      this.setState({\n        focused: true\n      });\n    },\n    onBlur: function onBlur() {\n      for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      this.$emit.apply(this, ['blur'].concat(_toConsumableArray(args)));\n      this.setState({\n        focused: false\n      });\n    },\n    onSelect: function onSelect() {\n      for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      this.$emit.apply(this, ['select'].concat(_toConsumableArray(args)));\n      this.setState({\n        focused: true\n      });\n    },\n    onChange: function onChange(val) {\n      this.$emit('change', val);\n    },\n    getNotFoundContent: function getNotFoundContent(renderEmpty) {\n      var h = this.$createElement;\n      var notFoundContent = getComponentFromProp(this, 'notFoundContent');\n\n      if (notFoundContent !== undefined) {\n        return notFoundContent;\n      }\n\n      return renderEmpty(h, 'Select');\n    },\n    getOptions: function getOptions() {\n      var h = this.$createElement;\n      var loading = this.$props.loading;\n      var children = filterEmpty(this.$slots['default'] || []);\n\n      if (loading) {\n        return h(Option, {\n          attrs: {\n            value: 'ANTD_SEARCHING',\n            disabled: true\n          }\n        }, [h(Spin, {\n          attrs: {\n            size: 'small'\n          }\n        })]);\n      }\n\n      return children;\n    },\n    getFilterOption: function getFilterOption() {\n      var _$props = this.$props,\n          filterOption = _$props.filterOption,\n          loading = _$props.loading;\n\n      if (loading) {\n        return loadingFilterOption;\n      }\n\n      return filterOption;\n    },\n    focus: function focus() {\n      this.$refs.vcMentions.focus();\n    },\n    blur: function blur() {\n      this.$refs.vcMentions.blur();\n    }\n  },\n  render: function render() {\n    var _classNames;\n\n    var h = arguments[0];\n    var focused = this.$data.focused;\n    var _configProvider = this.configProvider,\n        getPrefixCls = _configProvider.getPrefixCls,\n        renderEmpty = _configProvider.renderEmpty;\n\n    var _getOptionProps = getOptionProps(this),\n        customizePrefixCls = _getOptionProps.prefixCls,\n        disabled = _getOptionProps.disabled,\n        getPopupContainer = _getOptionProps.getPopupContainer,\n        restProps = _objectWithoutProperties(_getOptionProps, ['prefixCls', 'disabled', 'getPopupContainer']);\n\n    var prefixCls = getPrefixCls('mentions', customizePrefixCls);\n    var otherProps = omit(restProps, ['loading']);\n    var mergedClassName = classNames((_classNames = {}, _defineProperty(_classNames, prefixCls + '-disabled', disabled), _defineProperty(_classNames, prefixCls + '-focused', focused), _classNames));\n    var mentionsProps = {\n      props: _extends({\n        prefixCls: prefixCls,\n        notFoundContent: this.getNotFoundContent(renderEmpty)\n      }, otherProps, {\n        disabled: disabled,\n        filterOption: this.getFilterOption(),\n        getPopupContainer: getPopupContainer,\n        children: this.getOptions()\n      }),\n      'class': mergedClassName,\n      attrs: _extends({\n        rows: 1\n      }, this.$attrs),\n      on: _extends({}, getListeners(this), {\n        change: this.onChange,\n        select: this.onSelect,\n        focus: this.onFocus,\n        blur: this.onBlur\n      }),\n      ref: 'vcMentions'\n    };\n    return h(VcMentions, mentionsProps);\n  }\n};\n/* istanbul ignore next */\n\nMentions.install = function (Vue) {\n  Vue.use(Base);\n  Vue.component(Mentions.name, Mentions);\n  Vue.component(Mentions.Option.name, Mentions.Option);\n};\n\nexport default Mentions;","map":{"version":3,"sources":["/Users/liulu/刘璐/vue3/hello-vue3/node_modules/ant-design-vue/es/mentions/index.js"],"names":["_defineProperty","_objectWithoutProperties","_toConsumableArray","_extends","classNames","omit","PropTypes","VcMentions","mentionsProps","Base","Spin","BaseMixin","ConfigConsumerProps","getOptionProps","getComponentFromProp","getListeners","filterEmpty","Option","loadingFilterOption","getMentions","value","arguments","length","undefined","config","_ref","_ref$prefix","prefix","_ref$split","split","prefixList","Array","isArray","map","str","hitPrefix","some","prefixStr","startStr","slice","filter","entity","Mentions","name","mixins","inheritAttrs","model","prop","event","props","loading","bool","inject","configProvider","_default","data","focused","mounted","_this","$nextTick","autoFocus","focus","methods","onFocus","_len","args","_key","$emit","apply","concat","setState","onBlur","_len2","_key2","onSelect","_len3","_key3","onChange","val","getNotFoundContent","renderEmpty","h","$createElement","notFoundContent","getOptions","$props","children","$slots","attrs","disabled","size","getFilterOption","_$props","filterOption","$refs","vcMentions","blur","render","_classNames","$data","_configProvider","getPrefixCls","_getOptionProps","customizePrefixCls","prefixCls","getPopupContainer","restProps","otherProps","mergedClassName","rows","$attrs","on","change","select","ref","install","Vue","use","component"],"mappings":"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","sourcesContent":["import _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _toConsumableArray from 'babel-runtime/helpers/toConsumableArray';\nimport _extends from 'babel-runtime/helpers/extends';\nimport classNames from 'classnames';\nimport omit from 'omit.js';\nimport PropTypes from '../_util/vue-types';\nimport VcMentions from '../vc-mentions';\nimport { mentionsProps } from '../vc-mentions/src/mentionsProps';\nimport Base from '../base';\nimport Spin from '../spin';\nimport BaseMixin from '../_util/BaseMixin';\nimport { ConfigConsumerProps } from '../config-provider/configConsumerProps';\nimport { getOptionProps, getComponentFromProp, getListeners, filterEmpty } from '../_util/props-util';\n\nvar Option = VcMentions.Option;\n\n\nfunction loadingFilterOption() {\n  return true;\n}\n\nfunction getMentions() {\n  var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  var config = arguments[1];\n\n  var _ref = config || {},\n      _ref$prefix = _ref.prefix,\n      prefix = _ref$prefix === undefined ? '@' : _ref$prefix,\n      _ref$split = _ref.split,\n      split = _ref$split === undefined ? ' ' : _ref$split;\n\n  var prefixList = Array.isArray(prefix) ? prefix : [prefix];\n\n  return value.split(split).map(function () {\n    var str = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\n    var hitPrefix = null;\n\n    prefixList.some(function (prefixStr) {\n      var startStr = str.slice(0, prefixStr.length);\n      if (startStr === prefixStr) {\n        hitPrefix = prefixStr;\n        return true;\n      }\n      return false;\n    });\n\n    if (hitPrefix !== null) {\n      return {\n        prefix: hitPrefix,\n        value: str.slice(hitPrefix.length)\n      };\n    }\n    return null;\n  }).filter(function (entity) {\n    return !!entity && !!entity.value;\n  });\n}\n\nvar Mentions = {\n  name: 'AMentions',\n  mixins: [BaseMixin],\n  inheritAttrs: false,\n  model: {\n    prop: 'value',\n    event: 'change'\n  },\n  Option: _extends({}, Option, { name: 'AMentionsOption' }),\n  getMentions: getMentions,\n  props: _extends({}, mentionsProps, {\n    loading: PropTypes.bool\n  }),\n  inject: {\n    configProvider: { 'default': function _default() {\n        return ConfigConsumerProps;\n      } }\n  },\n  data: function data() {\n    return {\n      focused: false\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      if (_this.autoFocus) {\n        _this.focus();\n      }\n    });\n  },\n\n  methods: {\n    onFocus: function onFocus() {\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      this.$emit.apply(this, ['focus'].concat(_toConsumableArray(args)));\n      this.setState({\n        focused: true\n      });\n    },\n    onBlur: function onBlur() {\n      for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      this.$emit.apply(this, ['blur'].concat(_toConsumableArray(args)));\n      this.setState({\n        focused: false\n      });\n    },\n    onSelect: function onSelect() {\n      for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      this.$emit.apply(this, ['select'].concat(_toConsumableArray(args)));\n      this.setState({\n        focused: true\n      });\n    },\n    onChange: function onChange(val) {\n      this.$emit('change', val);\n    },\n    getNotFoundContent: function getNotFoundContent(renderEmpty) {\n      var h = this.$createElement;\n      var notFoundContent = getComponentFromProp(this, 'notFoundContent');\n      if (notFoundContent !== undefined) {\n        return notFoundContent;\n      }\n\n      return renderEmpty(h, 'Select');\n    },\n    getOptions: function getOptions() {\n      var h = this.$createElement;\n      var loading = this.$props.loading;\n\n      var children = filterEmpty(this.$slots['default'] || []);\n\n      if (loading) {\n        return h(\n          Option,\n          {\n            attrs: { value: 'ANTD_SEARCHING', disabled: true }\n          },\n          [h(Spin, {\n            attrs: { size: 'small' }\n          })]\n        );\n      }\n      return children;\n    },\n    getFilterOption: function getFilterOption() {\n      var _$props = this.$props,\n          filterOption = _$props.filterOption,\n          loading = _$props.loading;\n\n      if (loading) {\n        return loadingFilterOption;\n      }\n      return filterOption;\n    },\n    focus: function focus() {\n      this.$refs.vcMentions.focus();\n    },\n    blur: function blur() {\n      this.$refs.vcMentions.blur();\n    }\n  },\n  render: function render() {\n    var _classNames;\n\n    var h = arguments[0];\n    var focused = this.$data.focused;\n    var _configProvider = this.configProvider,\n        getPrefixCls = _configProvider.getPrefixCls,\n        renderEmpty = _configProvider.renderEmpty;\n\n    var _getOptionProps = getOptionProps(this),\n        customizePrefixCls = _getOptionProps.prefixCls,\n        disabled = _getOptionProps.disabled,\n        getPopupContainer = _getOptionProps.getPopupContainer,\n        restProps = _objectWithoutProperties(_getOptionProps, ['prefixCls', 'disabled', 'getPopupContainer']);\n\n    var prefixCls = getPrefixCls('mentions', customizePrefixCls);\n    var otherProps = omit(restProps, ['loading']);\n\n    var mergedClassName = classNames((_classNames = {}, _defineProperty(_classNames, prefixCls + '-disabled', disabled), _defineProperty(_classNames, prefixCls + '-focused', focused), _classNames));\n\n    var mentionsProps = {\n      props: _extends({\n        prefixCls: prefixCls,\n        notFoundContent: this.getNotFoundContent(renderEmpty)\n      }, otherProps, {\n        disabled: disabled,\n        filterOption: this.getFilterOption(),\n        getPopupContainer: getPopupContainer,\n        children: this.getOptions()\n      }),\n      'class': mergedClassName,\n      attrs: _extends({ rows: 1 }, this.$attrs),\n      on: _extends({}, getListeners(this), {\n        change: this.onChange,\n        select: this.onSelect,\n        focus: this.onFocus,\n        blur: this.onBlur\n      }),\n      ref: 'vcMentions'\n    };\n\n    return h(VcMentions, mentionsProps);\n  }\n};\n\n/* istanbul ignore next */\nMentions.install = function (Vue) {\n  Vue.use(Base);\n  Vue.component(Mentions.name, Mentions);\n  Vue.component(Mentions.Option.name, Mentions.Option);\n};\n\nexport default Mentions;"]},"metadata":{},"sourceType":"module"}