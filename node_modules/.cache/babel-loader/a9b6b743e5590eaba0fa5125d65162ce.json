{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _typeof from 'babel-runtime/helpers/typeof';\nimport PropTypes from '../_util/vue-types';\nimport { alignElement, alignPoint } from 'dom-align';\nimport addEventListener from '../vc-util/Dom/addEventListener';\nimport { isWindow, buffer, isSamePoint, isSimilarValue, restoreFocus } from './util';\nimport { cloneElement } from '../_util/vnode.js';\nimport clonedeep from 'lodash/cloneDeep';\nimport { getSlot, getListeners } from '../_util/props-util';\n\nfunction getElement(func) {\n  if (typeof func !== 'function' || !func) return null;\n  return func();\n}\n\nfunction getPoint(point) {\n  if ((typeof point === 'undefined' ? 'undefined' : _typeof(point)) !== 'object' || !point) return null;\n  return point;\n}\n\nexport default {\n  props: {\n    childrenProps: PropTypes.object,\n    align: PropTypes.object.isRequired,\n    target: PropTypes.oneOfType([PropTypes.func, PropTypes.object]).def(function () {\n      return window;\n    }),\n    monitorBufferTime: PropTypes.number.def(50),\n    monitorWindowResize: PropTypes.bool.def(false),\n    disabled: PropTypes.bool.def(false)\n  },\n  data: function data() {\n    this.aligned = false;\n    return {};\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      _this.prevProps = _extends({}, _this.$props);\n      var props = _this.$props; // if parent ref not attached .... use document.getElementById\n\n      !_this.aligned && _this.forceAlign();\n\n      if (!props.disabled && props.monitorWindowResize) {\n        _this.startMonitorWindowResize();\n      }\n    });\n  },\n  updated: function updated() {\n    var _this2 = this;\n\n    this.$nextTick(function () {\n      var prevProps = _this2.prevProps;\n      var props = _this2.$props;\n      var reAlign = false;\n\n      if (!props.disabled) {\n        var source = _this2.$el;\n        var sourceRect = source ? source.getBoundingClientRect() : null;\n\n        if (prevProps.disabled) {\n          reAlign = true;\n        } else {\n          var lastElement = getElement(prevProps.target);\n          var currentElement = getElement(props.target);\n          var lastPoint = getPoint(prevProps.target);\n          var currentPoint = getPoint(props.target);\n\n          if (isWindow(lastElement) && isWindow(currentElement)) {\n            // Skip if is window\n            reAlign = false;\n          } else if (lastElement !== currentElement || // Element change\n          lastElement && !currentElement && currentPoint || // Change from element to point\n          lastPoint && currentPoint && currentElement || // Change from point to element\n          currentPoint && !isSamePoint(lastPoint, currentPoint)) {\n            reAlign = true;\n          } // If source element size changed\n\n\n          var preRect = _this2.sourceRect || {};\n\n          if (!reAlign && source && (!isSimilarValue(preRect.width, sourceRect.width) || !isSimilarValue(preRect.height, sourceRect.height))) {\n            reAlign = true;\n          }\n        }\n\n        _this2.sourceRect = sourceRect;\n      }\n\n      if (reAlign) {\n        _this2.forceAlign();\n      }\n\n      if (props.monitorWindowResize && !props.disabled) {\n        _this2.startMonitorWindowResize();\n      } else {\n        _this2.stopMonitorWindowResize();\n      }\n\n      _this2.prevProps = _extends({}, _this2.$props, {\n        align: clonedeep(_this2.$props.align)\n      });\n    });\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.stopMonitorWindowResize();\n  },\n  methods: {\n    startMonitorWindowResize: function startMonitorWindowResize() {\n      if (!this.resizeHandler) {\n        this.bufferMonitor = buffer(this.forceAlign, this.$props.monitorBufferTime);\n        this.resizeHandler = addEventListener(window, 'resize', this.bufferMonitor);\n      }\n    },\n    stopMonitorWindowResize: function stopMonitorWindowResize() {\n      if (this.resizeHandler) {\n        this.bufferMonitor.clear();\n        this.resizeHandler.remove();\n        this.resizeHandler = null;\n      }\n    },\n    forceAlign: function forceAlign() {\n      var _$props = this.$props,\n          disabled = _$props.disabled,\n          target = _$props.target,\n          align = _$props.align;\n\n      if (!disabled && target) {\n        var source = this.$el;\n        var listeners = getListeners(this);\n        var result = void 0;\n        var element = getElement(target);\n        var point = getPoint(target); // IE lose focus after element realign\n        // We should record activeElement and restore later\n\n        var activeElement = document.activeElement;\n\n        if (element) {\n          result = alignElement(source, element, align);\n        } else if (point) {\n          result = alignPoint(source, point, align);\n        }\n\n        restoreFocus(activeElement, source);\n        this.aligned = true;\n        listeners.align && listeners.align(source, result);\n      }\n    }\n  },\n  render: function render() {\n    var childrenProps = this.$props.childrenProps;\n    var child = getSlot(this)[0];\n\n    if (child && childrenProps) {\n      return cloneElement(child, {\n        props: childrenProps\n      });\n    }\n\n    return child;\n  }\n};","map":{"version":3,"sources":["/Users/liulu/刘璐/vue3/hello-vue3/node_modules/ant-design-vue/es/vc-align/Align.js"],"names":["_extends","_typeof","PropTypes","alignElement","alignPoint","addEventListener","isWindow","buffer","isSamePoint","isSimilarValue","restoreFocus","cloneElement","clonedeep","getSlot","getListeners","getElement","func","getPoint","point","props","childrenProps","object","align","isRequired","target","oneOfType","def","window","monitorBufferTime","number","monitorWindowResize","bool","disabled","data","aligned","mounted","_this","$nextTick","prevProps","$props","forceAlign","startMonitorWindowResize","updated","_this2","reAlign","source","$el","sourceRect","getBoundingClientRect","lastElement","currentElement","lastPoint","currentPoint","preRect","width","height","stopMonitorWindowResize","beforeDestroy","methods","resizeHandler","bufferMonitor","clear","remove","_$props","listeners","result","element","activeElement","document","render","child"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _typeof from 'babel-runtime/helpers/typeof';\nimport PropTypes from '../_util/vue-types';\nimport { alignElement, alignPoint } from 'dom-align';\nimport addEventListener from '../vc-util/Dom/addEventListener';\nimport { isWindow, buffer, isSamePoint, isSimilarValue, restoreFocus } from './util';\nimport { cloneElement } from '../_util/vnode.js';\nimport clonedeep from 'lodash/cloneDeep';\nimport { getSlot, getListeners } from '../_util/props-util';\n\nfunction getElement(func) {\n  if (typeof func !== 'function' || !func) return null;\n  return func();\n}\n\nfunction getPoint(point) {\n  if ((typeof point === 'undefined' ? 'undefined' : _typeof(point)) !== 'object' || !point) return null;\n  return point;\n}\n\nexport default {\n  props: {\n    childrenProps: PropTypes.object,\n    align: PropTypes.object.isRequired,\n    target: PropTypes.oneOfType([PropTypes.func, PropTypes.object]).def(function () {\n      return window;\n    }),\n    monitorBufferTime: PropTypes.number.def(50),\n    monitorWindowResize: PropTypes.bool.def(false),\n    disabled: PropTypes.bool.def(false)\n  },\n  data: function data() {\n    this.aligned = false;\n    return {};\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      _this.prevProps = _extends({}, _this.$props);\n      var props = _this.$props;\n      // if parent ref not attached .... use document.getElementById\n      !_this.aligned && _this.forceAlign();\n      if (!props.disabled && props.monitorWindowResize) {\n        _this.startMonitorWindowResize();\n      }\n    });\n  },\n  updated: function updated() {\n    var _this2 = this;\n\n    this.$nextTick(function () {\n      var prevProps = _this2.prevProps;\n      var props = _this2.$props;\n      var reAlign = false;\n      if (!props.disabled) {\n        var source = _this2.$el;\n        var sourceRect = source ? source.getBoundingClientRect() : null;\n\n        if (prevProps.disabled) {\n          reAlign = true;\n        } else {\n          var lastElement = getElement(prevProps.target);\n          var currentElement = getElement(props.target);\n          var lastPoint = getPoint(prevProps.target);\n          var currentPoint = getPoint(props.target);\n          if (isWindow(lastElement) && isWindow(currentElement)) {\n            // Skip if is window\n            reAlign = false;\n          } else if (lastElement !== currentElement || // Element change\n          lastElement && !currentElement && currentPoint || // Change from element to point\n          lastPoint && currentPoint && currentElement || // Change from point to element\n          currentPoint && !isSamePoint(lastPoint, currentPoint)) {\n            reAlign = true;\n          }\n\n          // If source element size changed\n          var preRect = _this2.sourceRect || {};\n          if (!reAlign && source && (!isSimilarValue(preRect.width, sourceRect.width) || !isSimilarValue(preRect.height, sourceRect.height))) {\n            reAlign = true;\n          }\n        }\n        _this2.sourceRect = sourceRect;\n      }\n\n      if (reAlign) {\n        _this2.forceAlign();\n      }\n\n      if (props.monitorWindowResize && !props.disabled) {\n        _this2.startMonitorWindowResize();\n      } else {\n        _this2.stopMonitorWindowResize();\n      }\n      _this2.prevProps = _extends({}, _this2.$props, { align: clonedeep(_this2.$props.align) });\n    });\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.stopMonitorWindowResize();\n  },\n\n  methods: {\n    startMonitorWindowResize: function startMonitorWindowResize() {\n      if (!this.resizeHandler) {\n        this.bufferMonitor = buffer(this.forceAlign, this.$props.monitorBufferTime);\n        this.resizeHandler = addEventListener(window, 'resize', this.bufferMonitor);\n      }\n    },\n    stopMonitorWindowResize: function stopMonitorWindowResize() {\n      if (this.resizeHandler) {\n        this.bufferMonitor.clear();\n        this.resizeHandler.remove();\n        this.resizeHandler = null;\n      }\n    },\n    forceAlign: function forceAlign() {\n      var _$props = this.$props,\n          disabled = _$props.disabled,\n          target = _$props.target,\n          align = _$props.align;\n\n      if (!disabled && target) {\n        var source = this.$el;\n        var listeners = getListeners(this);\n        var result = void 0;\n        var element = getElement(target);\n        var point = getPoint(target);\n\n        // IE lose focus after element realign\n        // We should record activeElement and restore later\n        var activeElement = document.activeElement;\n\n        if (element) {\n          result = alignElement(source, element, align);\n        } else if (point) {\n          result = alignPoint(source, point, align);\n        }\n        restoreFocus(activeElement, source);\n        this.aligned = true;\n        listeners.align && listeners.align(source, result);\n      }\n    }\n  },\n\n  render: function render() {\n    var childrenProps = this.$props.childrenProps;\n\n    var child = getSlot(this)[0];\n    if (child && childrenProps) {\n      return cloneElement(child, { props: childrenProps });\n    }\n    return child;\n  }\n};"]},"metadata":{},"sourceType":"module"}