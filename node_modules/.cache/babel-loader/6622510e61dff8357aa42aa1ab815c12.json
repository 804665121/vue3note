{"ast":null,"code":"import _mergeJSXProps from 'babel-helper-vue-jsx-merge-props';\nimport _extends from 'babel-runtime/helpers/extends';\nimport _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport classNames from 'classnames';\nimport TextArea from './TextArea';\nimport omit from 'omit.js';\nimport inputProps from './inputProps';\nimport { hasProp, getComponentFromProp, getListeners, getOptionProps } from '../_util/props-util';\nimport { ConfigConsumerProps } from '../config-provider/configConsumerProps';\nimport ClearableLabeledInput from './ClearableLabeledInput';\n\nfunction noop() {}\n\nexport function fixControlledValue(value) {\n  if (typeof value === 'undefined' || value === null) {\n    return '';\n  }\n\n  return value;\n}\nexport function resolveOnChange(target, e, onChange) {\n  if (onChange) {\n    var event = e;\n\n    if (e.type === 'click') {\n      // click clear icon\n      //event = Object.create(e);\n      Object.defineProperty(event, 'target', {\n        writable: true\n      });\n      Object.defineProperty(event, 'currentTarget', {\n        writable: true\n      });\n      event.target = target;\n      event.currentTarget = target;\n      var originalInputValue = target.value; // change target ref value cause e.target.value should be '' when clear input\n\n      target.value = '';\n      onChange(event); // reset target ref value\n\n      target.value = originalInputValue;\n      return;\n    }\n\n    onChange(event);\n  }\n}\nexport function getInputClassName(prefixCls, size, disabled) {\n  var _classNames;\n\n  return classNames(prefixCls, (_classNames = {}, _defineProperty(_classNames, prefixCls + '-sm', size === 'small'), _defineProperty(_classNames, prefixCls + '-lg', size === 'large'), _defineProperty(_classNames, prefixCls + '-disabled', disabled), _classNames));\n}\nexport default {\n  name: 'AInput',\n  inheritAttrs: false,\n  model: {\n    prop: 'value',\n    event: 'change.value'\n  },\n  props: _extends({}, inputProps),\n  inject: {\n    configProvider: {\n      'default': function _default() {\n        return ConfigConsumerProps;\n      }\n    }\n  },\n  data: function data() {\n    var props = this.$props;\n    var value = typeof props.value === 'undefined' ? props.defaultValue : props.value;\n    return {\n      stateValue: typeof value === 'undefined' ? '' : value\n    };\n  },\n  watch: {\n    value: function value(val) {\n      this.stateValue = val;\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      if (_this.autoFocus) {\n        _this.focus();\n      }\n\n      _this.clearPasswordValueAttribute();\n    });\n  },\n  beforeDestroy: function beforeDestroy() {\n    if (this.removePasswordTimeout) {\n      clearTimeout(this.removePasswordTimeout);\n    }\n  },\n  methods: {\n    onBlur: function onBlur(e) {\n      // fix this isssue: https://github.com/vueComponent/ant-design-vue/issues/3816\n      // reference: https://github.com/vuejs/vue/issues/5847 and https://github.com/vuejs/vue/issues/8431\n      this.$forceUpdate();\n\n      var _getListeners = getListeners(this),\n          blur = _getListeners.blur;\n\n      blur && blur(e);\n    },\n    focus: function focus() {\n      this.$refs.input.focus();\n    },\n    blur: function blur() {\n      this.$refs.input.blur();\n    },\n    select: function select() {\n      this.$refs.input.select();\n    },\n    setValue: function setValue(value, callback) {\n      if (this.stateValue === value) {\n        return;\n      }\n\n      if (!hasProp(this, 'value')) {\n        this.stateValue = value;\n        this.$nextTick(function () {\n          callback && callback();\n        });\n      } else {// 不在严格受控\n        // https://github.com/vueComponent/ant-design-vue/issues/2207，modal 是 新 new 实例，更新队列和当前不在同一个更新队列中\n        // this.$forceUpdate();\n      }\n    },\n    onChange: function onChange(e) {\n      this.$emit('change.value', e.target.value);\n      this.$emit('change', e);\n      this.$emit('input', e);\n    },\n    handleReset: function handleReset(e) {\n      var _this2 = this;\n\n      this.setValue('', function () {\n        _this2.focus();\n      });\n      resolveOnChange(this.$refs.input, e, this.onChange);\n    },\n    renderInput: function renderInput(prefixCls) {\n      var h = this.$createElement;\n      var otherProps = omit(this.$props, ['prefixCls', 'addonBefore', 'addonAfter', 'prefix', 'suffix', 'allowClear', 'value', 'defaultValue', 'lazy', 'size', 'inputType', 'className']);\n      var stateValue = this.stateValue,\n          handleKeyDown = this.handleKeyDown,\n          handleChange = this.handleChange,\n          size = this.size,\n          disabled = this.disabled;\n      var inputProps = {\n        directives: [{\n          name: 'ant-input'\n        }],\n        domProps: {\n          value: fixControlledValue(stateValue)\n        },\n        attrs: _extends({}, otherProps, this.$attrs),\n        on: _extends({}, getListeners(this), {\n          keydown: handleKeyDown,\n          input: handleChange,\n          change: noop,\n          blur: this.onBlur\n        }),\n        'class': getInputClassName(prefixCls, size, disabled),\n        ref: 'input',\n        key: 'ant-input'\n      };\n      return h('input', inputProps);\n    },\n    clearPasswordValueAttribute: function clearPasswordValueAttribute() {\n      var _this3 = this; // https://github.com/ant-design/ant-design/issues/20541\n\n\n      this.removePasswordTimeout = setTimeout(function () {\n        if (_this3.$refs.input && _this3.$refs.input.getAttribute && _this3.$refs.input.getAttribute('type') === 'password' && _this3.$refs.input.hasAttribute('value')) {\n          _this3.$refs.input.removeAttribute('value');\n        }\n      });\n    },\n    handleChange: function handleChange(e) {\n      var _e$target = e.target,\n          value = _e$target.value,\n          composing = _e$target.composing; // https://github.com/vueComponent/ant-design-vue/issues/2203\n\n      if ((e.isComposing || composing) && this.lazy || this.stateValue === value) return;\n      this.setValue(value, this.clearPasswordValueAttribute);\n      resolveOnChange(this.$refs.input, e, this.onChange);\n    },\n    handleKeyDown: function handleKeyDown(e) {\n      if (e.keyCode === 13) {\n        this.$emit('pressEnter', e);\n      }\n\n      this.$emit('keydown', e);\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n\n    if (this.$props.type === 'textarea') {\n      var textareaProps = {\n        props: this.$props,\n        attrs: this.$attrs,\n        on: _extends({}, getListeners(this), {\n          input: this.handleChange,\n          keydown: this.handleKeyDown,\n          change: noop,\n          blur: this.onBlur\n        })\n      };\n      return h(TextArea, _mergeJSXProps([textareaProps, {\n        ref: 'input'\n      }]));\n    }\n\n    var customizePrefixCls = this.$props.prefixCls;\n    var stateValue = this.$data.stateValue;\n    var getPrefixCls = this.configProvider.getPrefixCls;\n    var prefixCls = getPrefixCls('input', customizePrefixCls);\n    var addonAfter = getComponentFromProp(this, 'addonAfter');\n    var addonBefore = getComponentFromProp(this, 'addonBefore');\n    var suffix = getComponentFromProp(this, 'suffix');\n    var prefix = getComponentFromProp(this, 'prefix');\n    var props = {\n      props: _extends({}, getOptionProps(this), {\n        prefixCls: prefixCls,\n        inputType: 'input',\n        value: fixControlledValue(stateValue),\n        element: this.renderInput(prefixCls),\n        handleReset: this.handleReset,\n        addonAfter: addonAfter,\n        addonBefore: addonBefore,\n        suffix: suffix,\n        prefix: prefix\n      }),\n      on: getListeners(this)\n    };\n    return h(ClearableLabeledInput, props);\n  }\n};","map":{"version":3,"sources":["/Users/liulu/刘璐/vue3/hello-vue3/node_modules/ant-design-vue/es/input/Input.js"],"names":["_mergeJSXProps","_extends","_defineProperty","classNames","TextArea","omit","inputProps","hasProp","getComponentFromProp","getListeners","getOptionProps","ConfigConsumerProps","ClearableLabeledInput","noop","fixControlledValue","value","resolveOnChange","target","e","onChange","event","type","Object","defineProperty","writable","currentTarget","originalInputValue","getInputClassName","prefixCls","size","disabled","_classNames","name","inheritAttrs","model","prop","props","inject","configProvider","_default","data","$props","defaultValue","stateValue","watch","val","mounted","_this","$nextTick","autoFocus","focus","clearPasswordValueAttribute","beforeDestroy","removePasswordTimeout","clearTimeout","methods","onBlur","$forceUpdate","_getListeners","blur","$refs","input","select","setValue","callback","$emit","handleReset","_this2","renderInput","h","$createElement","otherProps","handleKeyDown","handleChange","directives","domProps","attrs","$attrs","on","keydown","change","ref","key","_this3","setTimeout","getAttribute","hasAttribute","removeAttribute","_e$target","composing","isComposing","lazy","keyCode","render","arguments","textareaProps","customizePrefixCls","$data","getPrefixCls","addonAfter","addonBefore","suffix","prefix","inputType","element"],"mappings":"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","sourcesContent":["import _mergeJSXProps from 'babel-helper-vue-jsx-merge-props';\nimport _extends from 'babel-runtime/helpers/extends';\nimport _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport classNames from 'classnames';\nimport TextArea from './TextArea';\nimport omit from 'omit.js';\nimport inputProps from './inputProps';\nimport { hasProp, getComponentFromProp, getListeners, getOptionProps } from '../_util/props-util';\nimport { ConfigConsumerProps } from '../config-provider/configConsumerProps';\nimport ClearableLabeledInput from './ClearableLabeledInput';\n\nfunction noop() {}\n\nexport function fixControlledValue(value) {\n  if (typeof value === 'undefined' || value === null) {\n    return '';\n  }\n  return value;\n}\n\nexport function resolveOnChange(target, e, onChange) {\n  if (onChange) {\n    var event = e;\n    if (e.type === 'click') {\n      // click clear icon\n      //event = Object.create(e);\n      Object.defineProperty(event, 'target', {\n        writable: true\n      });\n      Object.defineProperty(event, 'currentTarget', {\n        writable: true\n      });\n      event.target = target;\n      event.currentTarget = target;\n      var originalInputValue = target.value;\n      // change target ref value cause e.target.value should be '' when clear input\n      target.value = '';\n      onChange(event);\n      // reset target ref value\n      target.value = originalInputValue;\n      return;\n    }\n    onChange(event);\n  }\n}\n\nexport function getInputClassName(prefixCls, size, disabled) {\n  var _classNames;\n\n  return classNames(prefixCls, (_classNames = {}, _defineProperty(_classNames, prefixCls + '-sm', size === 'small'), _defineProperty(_classNames, prefixCls + '-lg', size === 'large'), _defineProperty(_classNames, prefixCls + '-disabled', disabled), _classNames));\n}\n\nexport default {\n  name: 'AInput',\n  inheritAttrs: false,\n  model: {\n    prop: 'value',\n    event: 'change.value'\n  },\n  props: _extends({}, inputProps),\n  inject: {\n    configProvider: { 'default': function _default() {\n        return ConfigConsumerProps;\n      } }\n  },\n  data: function data() {\n    var props = this.$props;\n    var value = typeof props.value === 'undefined' ? props.defaultValue : props.value;\n    return {\n      stateValue: typeof value === 'undefined' ? '' : value\n    };\n  },\n\n  watch: {\n    value: function value(val) {\n      this.stateValue = val;\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      if (_this.autoFocus) {\n        _this.focus();\n      }\n      _this.clearPasswordValueAttribute();\n    });\n  },\n  beforeDestroy: function beforeDestroy() {\n    if (this.removePasswordTimeout) {\n      clearTimeout(this.removePasswordTimeout);\n    }\n  },\n\n  methods: {\n    onBlur: function onBlur(e) {\n      // fix this isssue: https://github.com/vueComponent/ant-design-vue/issues/3816\n      // reference: https://github.com/vuejs/vue/issues/5847 and https://github.com/vuejs/vue/issues/8431\n      this.$forceUpdate();\n\n      var _getListeners = getListeners(this),\n          blur = _getListeners.blur;\n\n      blur && blur(e);\n    },\n    focus: function focus() {\n      this.$refs.input.focus();\n    },\n    blur: function blur() {\n      this.$refs.input.blur();\n    },\n    select: function select() {\n      this.$refs.input.select();\n    },\n    setValue: function setValue(value, callback) {\n      if (this.stateValue === value) {\n        return;\n      }\n      if (!hasProp(this, 'value')) {\n        this.stateValue = value;\n        this.$nextTick(function () {\n          callback && callback();\n        });\n      } else {\n        // 不在严格受控\n        // https://github.com/vueComponent/ant-design-vue/issues/2207，modal 是 新 new 实例，更新队列和当前不在同一个更新队列中\n        // this.$forceUpdate();\n      }\n    },\n    onChange: function onChange(e) {\n      this.$emit('change.value', e.target.value);\n      this.$emit('change', e);\n      this.$emit('input', e);\n    },\n    handleReset: function handleReset(e) {\n      var _this2 = this;\n\n      this.setValue('', function () {\n        _this2.focus();\n      });\n      resolveOnChange(this.$refs.input, e, this.onChange);\n    },\n    renderInput: function renderInput(prefixCls) {\n      var h = this.$createElement;\n\n      var otherProps = omit(this.$props, ['prefixCls', 'addonBefore', 'addonAfter', 'prefix', 'suffix', 'allowClear', 'value', 'defaultValue', 'lazy', 'size', 'inputType', 'className']);\n      var stateValue = this.stateValue,\n          handleKeyDown = this.handleKeyDown,\n          handleChange = this.handleChange,\n          size = this.size,\n          disabled = this.disabled;\n\n      var inputProps = {\n        directives: [{ name: 'ant-input' }],\n        domProps: {\n          value: fixControlledValue(stateValue)\n        },\n        attrs: _extends({}, otherProps, this.$attrs),\n        on: _extends({}, getListeners(this), {\n          keydown: handleKeyDown,\n          input: handleChange,\n          change: noop,\n          blur: this.onBlur\n        }),\n        'class': getInputClassName(prefixCls, size, disabled),\n        ref: 'input',\n        key: 'ant-input'\n      };\n      return h('input', inputProps);\n    },\n    clearPasswordValueAttribute: function clearPasswordValueAttribute() {\n      var _this3 = this;\n\n      // https://github.com/ant-design/ant-design/issues/20541\n      this.removePasswordTimeout = setTimeout(function () {\n        if (_this3.$refs.input && _this3.$refs.input.getAttribute && _this3.$refs.input.getAttribute('type') === 'password' && _this3.$refs.input.hasAttribute('value')) {\n          _this3.$refs.input.removeAttribute('value');\n        }\n      });\n    },\n    handleChange: function handleChange(e) {\n      var _e$target = e.target,\n          value = _e$target.value,\n          composing = _e$target.composing;\n      // https://github.com/vueComponent/ant-design-vue/issues/2203\n\n      if ((e.isComposing || composing) && this.lazy || this.stateValue === value) return;\n      this.setValue(value, this.clearPasswordValueAttribute);\n      resolveOnChange(this.$refs.input, e, this.onChange);\n    },\n    handleKeyDown: function handleKeyDown(e) {\n      if (e.keyCode === 13) {\n        this.$emit('pressEnter', e);\n      }\n      this.$emit('keydown', e);\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n\n    if (this.$props.type === 'textarea') {\n      var textareaProps = {\n        props: this.$props,\n        attrs: this.$attrs,\n        on: _extends({}, getListeners(this), {\n          input: this.handleChange,\n          keydown: this.handleKeyDown,\n          change: noop,\n          blur: this.onBlur\n        })\n      };\n      return h(TextArea, _mergeJSXProps([textareaProps, { ref: 'input' }]));\n    }\n    var customizePrefixCls = this.$props.prefixCls;\n    var stateValue = this.$data.stateValue;\n\n    var getPrefixCls = this.configProvider.getPrefixCls;\n    var prefixCls = getPrefixCls('input', customizePrefixCls);\n    var addonAfter = getComponentFromProp(this, 'addonAfter');\n    var addonBefore = getComponentFromProp(this, 'addonBefore');\n    var suffix = getComponentFromProp(this, 'suffix');\n    var prefix = getComponentFromProp(this, 'prefix');\n    var props = {\n      props: _extends({}, getOptionProps(this), {\n        prefixCls: prefixCls,\n        inputType: 'input',\n        value: fixControlledValue(stateValue),\n        element: this.renderInput(prefixCls),\n        handleReset: this.handleReset,\n        addonAfter: addonAfter,\n        addonBefore: addonBefore,\n        suffix: suffix,\n        prefix: prefix\n      }),\n      on: getListeners(this)\n    };\n    return h(ClearableLabeledInput, props);\n  }\n};"]},"metadata":{},"sourceType":"module"}