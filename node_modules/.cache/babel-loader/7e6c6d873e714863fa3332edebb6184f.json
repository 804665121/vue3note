{"ast":null,"code":"import PropTypes from '../../_util/vue-types';\nimport classNames from 'classnames';\nimport KeyCode from '../../_util/KeyCode';\nimport { initDefaultProps, hasProp, getOptionProps, getComponentFromProp } from '../../_util/props-util';\nimport BaseMixin from '../../_util/BaseMixin';\nimport { getOffsetLeft } from './util';\nimport Star from './Star';\nvar rateProps = {\n  disabled: PropTypes.bool,\n  value: PropTypes.number,\n  defaultValue: PropTypes.number,\n  count: PropTypes.number,\n  allowHalf: PropTypes.bool,\n  allowClear: PropTypes.bool,\n  prefixCls: PropTypes.string,\n  character: PropTypes.any,\n  characterRender: PropTypes.func,\n  tabIndex: PropTypes.number,\n  autoFocus: PropTypes.bool\n};\n\nfunction noop() {}\n\nexport default {\n  name: 'Rate',\n  mixins: [BaseMixin],\n  model: {\n    prop: 'value',\n    event: 'change'\n  },\n  props: initDefaultProps(rateProps, {\n    defaultValue: 0,\n    count: 5,\n    allowHalf: false,\n    allowClear: true,\n    prefixCls: 'rc-rate',\n    tabIndex: 0,\n    character: '★'\n  }),\n  data: function data() {\n    var value = this.value;\n\n    if (!hasProp(this, 'value')) {\n      value = this.defaultValue;\n    }\n\n    return {\n      sValue: value,\n      focused: false,\n      cleanedValue: null,\n      hoverValue: undefined\n    };\n  },\n  watch: {\n    value: function value(val) {\n      this.setState({\n        sValue: val\n      });\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      if (_this.autoFocus && !_this.disabled) {\n        _this.focus();\n      }\n    });\n  },\n  methods: {\n    onHover: function onHover(event, index) {\n      var hoverValue = this.getStarValue(index, event.pageX);\n      var cleanedValue = this.cleanedValue;\n\n      if (hoverValue !== cleanedValue) {\n        this.setState({\n          hoverValue: hoverValue,\n          cleanedValue: null\n        });\n      }\n\n      this.$emit('hoverChange', hoverValue);\n    },\n    onMouseLeave: function onMouseLeave() {\n      this.setState({\n        hoverValue: undefined,\n        cleanedValue: null\n      });\n      this.$emit('hoverChange', undefined);\n    },\n    onClick: function onClick(event, index) {\n      var allowClear = this.allowClear,\n          value = this.sValue;\n      var newValue = this.getStarValue(index, event.pageX);\n      var isReset = false;\n\n      if (allowClear) {\n        isReset = newValue === value;\n      }\n\n      this.onMouseLeave(true);\n      this.changeValue(isReset ? 0 : newValue);\n      this.setState({\n        cleanedValue: isReset ? newValue : null\n      });\n    },\n    onFocus: function onFocus() {\n      this.setState({\n        focused: true\n      });\n      this.$emit('focus');\n    },\n    onBlur: function onBlur() {\n      this.setState({\n        focused: false\n      });\n      this.$emit('blur');\n    },\n    onKeyDown: function onKeyDown(event) {\n      var keyCode = event.keyCode;\n      var count = this.count,\n          allowHalf = this.allowHalf;\n      var sValue = this.sValue;\n\n      if (keyCode === KeyCode.RIGHT && sValue < count) {\n        if (allowHalf) {\n          sValue += 0.5;\n        } else {\n          sValue += 1;\n        }\n\n        this.changeValue(sValue);\n        event.preventDefault();\n      } else if (keyCode === KeyCode.LEFT && sValue > 0) {\n        if (allowHalf) {\n          sValue -= 0.5;\n        } else {\n          sValue -= 1;\n        }\n\n        this.changeValue(sValue);\n        event.preventDefault();\n      }\n\n      this.$emit('keydown', event);\n    },\n    getStarDOM: function getStarDOM(index) {\n      return this.$refs['stars' + index].$el;\n    },\n    getStarValue: function getStarValue(index, x) {\n      var value = index + 1;\n\n      if (this.allowHalf) {\n        var starEle = this.getStarDOM(index);\n        var leftDis = getOffsetLeft(starEle);\n        var width = starEle.clientWidth;\n\n        if (x - leftDis < width / 2) {\n          value -= 0.5;\n        }\n      }\n\n      return value;\n    },\n    focus: function focus() {\n      if (!this.disabled) {\n        this.$refs.rateRef.focus();\n      }\n    },\n    blur: function blur() {\n      if (!this.disabled) {\n        this.$refs.rateRef.blur();\n      }\n    },\n    changeValue: function changeValue(value) {\n      if (!hasProp(this, 'value')) {\n        this.setState({\n          sValue: value\n        });\n      }\n\n      this.$emit('change', value);\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n\n    var _getOptionProps = getOptionProps(this),\n        count = _getOptionProps.count,\n        allowHalf = _getOptionProps.allowHalf,\n        prefixCls = _getOptionProps.prefixCls,\n        disabled = _getOptionProps.disabled,\n        tabIndex = _getOptionProps.tabIndex;\n\n    var sValue = this.sValue,\n        hoverValue = this.hoverValue,\n        focused = this.focused;\n    var stars = [];\n    var disabledClass = disabled ? prefixCls + '-disabled' : '';\n    var character = getComponentFromProp(this, 'character');\n    var characterRender = this.characterRender || this.$scopedSlots.characterRender;\n\n    for (var index = 0; index < count; index++) {\n      var starProps = {\n        props: {\n          index: index,\n          count: count,\n          disabled: disabled,\n          prefixCls: prefixCls + '-star',\n          allowHalf: allowHalf,\n          value: hoverValue === undefined ? sValue : hoverValue,\n          character: character,\n          characterRender: characterRender,\n          focused: focused\n        },\n        on: {\n          click: this.onClick,\n          hover: this.onHover\n        },\n        key: index,\n        ref: 'stars' + index\n      };\n      stars.push(h(Star, starProps));\n    }\n\n    return h('ul', {\n      'class': classNames(prefixCls, disabledClass),\n      on: {\n        'mouseleave': disabled ? noop : this.onMouseLeave,\n        'focus': disabled ? noop : this.onFocus,\n        'blur': disabled ? noop : this.onBlur,\n        'keydown': disabled ? noop : this.onKeyDown\n      },\n      attrs: {\n        tabIndex: disabled ? -1 : tabIndex,\n        role: 'radiogroup'\n      },\n      ref: 'rateRef'\n    }, [stars]);\n  }\n};","map":{"version":3,"sources":["/Users/liulu/刘璐/vue3/hello-vue3/node_modules/ant-design-vue/es/vc-rate/src/Rate.js"],"names":["PropTypes","classNames","KeyCode","initDefaultProps","hasProp","getOptionProps","getComponentFromProp","BaseMixin","getOffsetLeft","Star","rateProps","disabled","bool","value","number","defaultValue","count","allowHalf","allowClear","prefixCls","string","character","any","characterRender","func","tabIndex","autoFocus","noop","name","mixins","model","prop","event","props","data","sValue","focused","cleanedValue","hoverValue","undefined","watch","val","setState","mounted","_this","$nextTick","focus","methods","onHover","index","getStarValue","pageX","$emit","onMouseLeave","onClick","newValue","isReset","changeValue","onFocus","onBlur","onKeyDown","keyCode","RIGHT","preventDefault","LEFT","getStarDOM","$refs","$el","x","starEle","leftDis","width","clientWidth","rateRef","blur","render","h","arguments","_getOptionProps","stars","disabledClass","$scopedSlots","starProps","on","click","hover","key","ref","push","attrs","role"],"mappings":"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","sourcesContent":["import PropTypes from '../../_util/vue-types';\nimport classNames from 'classnames';\nimport KeyCode from '../../_util/KeyCode';\nimport { initDefaultProps, hasProp, getOptionProps, getComponentFromProp } from '../../_util/props-util';\nimport BaseMixin from '../../_util/BaseMixin';\nimport { getOffsetLeft } from './util';\nimport Star from './Star';\n\nvar rateProps = {\n  disabled: PropTypes.bool,\n  value: PropTypes.number,\n  defaultValue: PropTypes.number,\n  count: PropTypes.number,\n  allowHalf: PropTypes.bool,\n  allowClear: PropTypes.bool,\n  prefixCls: PropTypes.string,\n  character: PropTypes.any,\n  characterRender: PropTypes.func,\n  tabIndex: PropTypes.number,\n  autoFocus: PropTypes.bool\n};\n\nfunction noop() {}\n\nexport default {\n  name: 'Rate',\n  mixins: [BaseMixin],\n  model: {\n    prop: 'value',\n    event: 'change'\n  },\n  props: initDefaultProps(rateProps, {\n    defaultValue: 0,\n    count: 5,\n    allowHalf: false,\n    allowClear: true,\n    prefixCls: 'rc-rate',\n    tabIndex: 0,\n    character: '★'\n  }),\n  data: function data() {\n    var value = this.value;\n    if (!hasProp(this, 'value')) {\n      value = this.defaultValue;\n    }\n    return {\n      sValue: value,\n      focused: false,\n      cleanedValue: null,\n      hoverValue: undefined\n    };\n  },\n\n  watch: {\n    value: function value(val) {\n      this.setState({\n        sValue: val\n      });\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      if (_this.autoFocus && !_this.disabled) {\n        _this.focus();\n      }\n    });\n  },\n\n  methods: {\n    onHover: function onHover(event, index) {\n      var hoverValue = this.getStarValue(index, event.pageX);\n      var cleanedValue = this.cleanedValue;\n\n      if (hoverValue !== cleanedValue) {\n        this.setState({\n          hoverValue: hoverValue,\n          cleanedValue: null\n        });\n      }\n      this.$emit('hoverChange', hoverValue);\n    },\n    onMouseLeave: function onMouseLeave() {\n      this.setState({\n        hoverValue: undefined,\n        cleanedValue: null\n      });\n      this.$emit('hoverChange', undefined);\n    },\n    onClick: function onClick(event, index) {\n      var allowClear = this.allowClear,\n          value = this.sValue;\n\n      var newValue = this.getStarValue(index, event.pageX);\n      var isReset = false;\n      if (allowClear) {\n        isReset = newValue === value;\n      }\n      this.onMouseLeave(true);\n      this.changeValue(isReset ? 0 : newValue);\n      this.setState({\n        cleanedValue: isReset ? newValue : null\n      });\n    },\n    onFocus: function onFocus() {\n      this.setState({\n        focused: true\n      });\n      this.$emit('focus');\n    },\n    onBlur: function onBlur() {\n      this.setState({\n        focused: false\n      });\n      this.$emit('blur');\n    },\n    onKeyDown: function onKeyDown(event) {\n      var keyCode = event.keyCode;\n      var count = this.count,\n          allowHalf = this.allowHalf;\n      var sValue = this.sValue;\n\n      if (keyCode === KeyCode.RIGHT && sValue < count) {\n        if (allowHalf) {\n          sValue += 0.5;\n        } else {\n          sValue += 1;\n        }\n        this.changeValue(sValue);\n        event.preventDefault();\n      } else if (keyCode === KeyCode.LEFT && sValue > 0) {\n        if (allowHalf) {\n          sValue -= 0.5;\n        } else {\n          sValue -= 1;\n        }\n        this.changeValue(sValue);\n        event.preventDefault();\n      }\n      this.$emit('keydown', event);\n    },\n    getStarDOM: function getStarDOM(index) {\n      return this.$refs['stars' + index].$el;\n    },\n    getStarValue: function getStarValue(index, x) {\n      var value = index + 1;\n      if (this.allowHalf) {\n        var starEle = this.getStarDOM(index);\n        var leftDis = getOffsetLeft(starEle);\n        var width = starEle.clientWidth;\n        if (x - leftDis < width / 2) {\n          value -= 0.5;\n        }\n      }\n      return value;\n    },\n    focus: function focus() {\n      if (!this.disabled) {\n        this.$refs.rateRef.focus();\n      }\n    },\n    blur: function blur() {\n      if (!this.disabled) {\n        this.$refs.rateRef.blur();\n      }\n    },\n    changeValue: function changeValue(value) {\n      if (!hasProp(this, 'value')) {\n        this.setState({\n          sValue: value\n        });\n      }\n      this.$emit('change', value);\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n\n    var _getOptionProps = getOptionProps(this),\n        count = _getOptionProps.count,\n        allowHalf = _getOptionProps.allowHalf,\n        prefixCls = _getOptionProps.prefixCls,\n        disabled = _getOptionProps.disabled,\n        tabIndex = _getOptionProps.tabIndex;\n\n    var sValue = this.sValue,\n        hoverValue = this.hoverValue,\n        focused = this.focused;\n\n    var stars = [];\n    var disabledClass = disabled ? prefixCls + '-disabled' : '';\n    var character = getComponentFromProp(this, 'character');\n    var characterRender = this.characterRender || this.$scopedSlots.characterRender;\n    for (var index = 0; index < count; index++) {\n      var starProps = {\n        props: {\n          index: index,\n          count: count,\n          disabled: disabled,\n          prefixCls: prefixCls + '-star',\n          allowHalf: allowHalf,\n          value: hoverValue === undefined ? sValue : hoverValue,\n          character: character,\n          characterRender: characterRender,\n          focused: focused\n        },\n        on: {\n          click: this.onClick,\n          hover: this.onHover\n        },\n        key: index,\n        ref: 'stars' + index\n      };\n      stars.push(h(Star, starProps));\n    }\n    return h(\n      'ul',\n      {\n        'class': classNames(prefixCls, disabledClass),\n        on: {\n          'mouseleave': disabled ? noop : this.onMouseLeave,\n          'focus': disabled ? noop : this.onFocus,\n          'blur': disabled ? noop : this.onBlur,\n          'keydown': disabled ? noop : this.onKeyDown\n        },\n        attrs: {\n          tabIndex: disabled ? -1 : tabIndex,\n\n          role: 'radiogroup'\n        },\n\n        ref: 'rateRef' },\n      [stars]\n    );\n  }\n};"]},"metadata":{},"sourceType":"module"}