{"ast":null,"code":"import _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _extends from 'babel-runtime/helpers/extends';\nimport Menu, { SubMenu, Item as MenuItem } from '../vc-menu';\nimport closest from 'dom-closest';\nimport classNames from 'classnames';\nimport shallowequal from 'shallowequal';\nimport Dropdown from '../dropdown';\nimport Icon from '../icon';\nimport Checkbox from '../checkbox';\nimport Radio from '../radio';\nimport FilterDropdownMenuWrapper from './FilterDropdownMenuWrapper';\nimport { FilterMenuProps } from './interface';\nimport { initDefaultProps, getOptionProps, isValidElement } from '../_util/props-util';\nimport { cloneElement } from '../_util/vnode';\nimport BaseMixin from '../_util/BaseMixin';\nimport { generateValueMaps } from './util';\n\nfunction stopPropagation(e) {\n  e.stopPropagation();\n}\n\nexport default {\n  name: 'FilterMenu',\n  mixins: [BaseMixin],\n  props: initDefaultProps(FilterMenuProps, {\n    handleFilter: function handleFilter() {},\n    column: {}\n  }),\n  data: function data() {\n    var visible = 'filterDropdownVisible' in this.column ? this.column.filterDropdownVisible : false;\n    this.preProps = _extends({}, getOptionProps(this));\n    return {\n      sSelectedKeys: this.selectedKeys,\n      sKeyPathOfSelectedItem: {},\n      // 记录所有有选中子菜单的祖先菜单\n      sVisible: visible,\n      sValueKeys: generateValueMaps(this.column.filters)\n    };\n  },\n  watch: {\n    _propsSymbol: function _propsSymbol() {\n      var nextProps = getOptionProps(this);\n      var column = nextProps.column;\n      var newState = {};\n      /**\n       * if the state is visible the component should ignore updates on selectedKeys prop to avoid\n       * that the user selection is lost\n       * this happens frequently when a table is connected on some sort of realtime data\n       * Fixes https://github.com/ant-design/ant-design/issues/10289 and\n       * https://github.com/ant-design/ant-design/issues/10209\n       */\n\n      if ('selectedKeys' in nextProps && !shallowequal(this.preProps.selectedKeys, nextProps.selectedKeys)) {\n        newState.sSelectedKeys = nextProps.selectedKeys;\n      }\n\n      if (!shallowequal((this.preProps.column || {}).filters, (nextProps.column || {}).filters)) {\n        newState.sValueKeys = generateValueMaps(nextProps.column.filters);\n      }\n\n      if ('filterDropdownVisible' in column) {\n        newState.sVisible = column.filterDropdownVisible;\n      }\n\n      if (Object.keys(newState).length > 0) {\n        this.setState(newState);\n      }\n\n      this.preProps = _extends({}, nextProps);\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    var column = this.column;\n    this.$nextTick(function () {\n      _this.setNeverShown(column);\n    });\n  },\n  updated: function updated() {\n    var _this2 = this;\n\n    var column = this.column;\n    this.$nextTick(function () {\n      _this2.setNeverShown(column);\n    });\n  },\n  methods: {\n    getDropdownVisible: function getDropdownVisible() {\n      return this.neverShown ? false : this.sVisible;\n    },\n    setNeverShown: function setNeverShown(column) {\n      var rootNode = this.$el;\n      var filterBelongToScrollBody = !!closest(rootNode, '.ant-table-scroll');\n\n      if (filterBelongToScrollBody) {\n        // When fixed column have filters, there will be two dropdown menus\n        // Filter dropdown menu inside scroll body should never be shown\n        // To fix https://github.com/ant-design/ant-design/issues/5010 and\n        // https://github.com/ant-design/ant-design/issues/7909\n        this.neverShown = !!column.fixed;\n      }\n    },\n    setSelectedKeys: function setSelectedKeys(_ref) {\n      var selectedKeys = _ref.selectedKeys;\n      this.setState({\n        sSelectedKeys: selectedKeys\n      });\n    },\n    setVisible: function setVisible(visible) {\n      var column = this.column;\n\n      if (!('filterDropdownVisible' in column)) {\n        this.setState({\n          sVisible: visible\n        });\n      }\n\n      if (column.onFilterDropdownVisibleChange) {\n        column.onFilterDropdownVisibleChange(visible);\n      }\n    },\n    handleClearFilters: function handleClearFilters() {\n      this.setState({\n        sSelectedKeys: []\n      }, this.handleConfirm);\n    },\n    handleConfirm: function handleConfirm() {\n      var _this3 = this;\n\n      this.setVisible(false);\n      this.confirmFilter2(); // Call `setSelectedKeys` & `confirm` in the same time will make filter data not up to date\n      // https://github.com/ant-design/ant-design/issues/12284\n\n      this.$forceUpdate();\n      this.$nextTick(function () {\n        _this3.confirmFilter;\n      });\n    },\n    onVisibleChange: function onVisibleChange(visible) {\n      this.setVisible(visible);\n      var column = this.$props.column; // https://github.com/ant-design/ant-design/issues/17833\n\n      if (!visible && !(column.filterDropdown instanceof Function)) {\n        this.confirmFilter2();\n      }\n    },\n    handleMenuItemClick: function handleMenuItemClick(info) {\n      var selectedKeys = this.$data.sSelectedKeys;\n\n      if (!info.keyPath || info.keyPath.length <= 1) {\n        return;\n      }\n\n      var keyPathOfSelectedItem = this.$data.sKeyPathOfSelectedItem;\n\n      if (selectedKeys && selectedKeys.indexOf(info.key) >= 0) {\n        // deselect SubMenu child\n        delete keyPathOfSelectedItem[info.key];\n      } else {\n        // select SubMenu child\n        keyPathOfSelectedItem[info.key] = info.keyPath;\n      }\n\n      this.setState({\n        sKeyPathOfSelectedItem: keyPathOfSelectedItem\n      });\n    },\n    hasSubMenu: function hasSubMenu() {\n      var _column$filters = this.column.filters,\n          filters = _column$filters === undefined ? [] : _column$filters;\n      return filters.some(function (item) {\n        return !!(item.children && item.children.length > 0);\n      });\n    },\n    confirmFilter2: function confirmFilter2() {\n      var _$props = this.$props,\n          column = _$props.column,\n          propSelectedKeys = _$props.selectedKeys,\n          confirmFilter = _$props.confirmFilter;\n      var _$data = this.$data,\n          selectedKeys = _$data.sSelectedKeys,\n          valueKeys = _$data.sValueKeys;\n      var filterDropdown = column.filterDropdown;\n\n      if (!shallowequal(selectedKeys, propSelectedKeys)) {\n        confirmFilter(column, filterDropdown ? selectedKeys : selectedKeys.map(function (key) {\n          return valueKeys[key];\n        }).filter(function (key) {\n          return key !== undefined;\n        }));\n      }\n    },\n    renderMenus: function renderMenus(items) {\n      var _this4 = this;\n\n      var h = this.$createElement;\n      var _$props2 = this.$props,\n          dropdownPrefixCls = _$props2.dropdownPrefixCls,\n          prefixCls = _$props2.prefixCls;\n      return items.map(function (item) {\n        if (item.children && item.children.length > 0) {\n          var sKeyPathOfSelectedItem = _this4.sKeyPathOfSelectedItem;\n          var containSelected = Object.keys(sKeyPathOfSelectedItem).some(function (key) {\n            return sKeyPathOfSelectedItem[key].indexOf(item.value) >= 0;\n          });\n          var subMenuCls = classNames(prefixCls + '-dropdown-submenu', _defineProperty({}, dropdownPrefixCls + '-submenu-contain-selected', containSelected));\n          return h(SubMenu, {\n            attrs: {\n              title: item.text,\n              popupClassName: subMenuCls\n            },\n            key: item.value\n          }, [_this4.renderMenus(item.children)]);\n        }\n\n        return _this4.renderMenuItem(item);\n      });\n    },\n    renderFilterIcon: function renderFilterIcon() {\n      var _classNames2;\n\n      var h = this.$createElement;\n      var column = this.column,\n          locale = this.locale,\n          prefixCls = this.prefixCls,\n          selectedKeys = this.selectedKeys;\n      var filtered = selectedKeys && selectedKeys.length > 0;\n      var filterIcon = column.filterIcon;\n\n      if (typeof filterIcon === 'function') {\n        filterIcon = filterIcon(filtered, column);\n      }\n\n      var dropdownIconClass = classNames((_classNames2 = {}, _defineProperty(_classNames2, prefixCls + '-selected', 'filtered' in column ? column.filtered : filtered), _defineProperty(_classNames2, prefixCls + '-open', this.getDropdownVisible()), _classNames2));\n\n      if (!filterIcon) {\n        return h(Icon, {\n          attrs: {\n            title: locale.filterTitle,\n            type: 'filter',\n            theme: 'filled'\n          },\n          'class': dropdownIconClass,\n          on: {\n            'click': stopPropagation\n          }\n        });\n      }\n\n      if (filterIcon.length === 1 && isValidElement(filterIcon[0])) {\n        return cloneElement(filterIcon[0], {\n          on: {\n            click: stopPropagation\n          },\n          'class': classNames(prefixCls + '-icon', dropdownIconClass)\n        });\n      }\n\n      return h('span', {\n        'class': classNames(prefixCls + '-icon', dropdownIconClass)\n      }, [filterIcon]);\n    },\n    renderMenuItem: function renderMenuItem(item) {\n      var h = this.$createElement;\n      var column = this.column;\n      var selectedKeys = this.$data.sSelectedKeys;\n      var multiple = 'filterMultiple' in column ? column.filterMultiple : true;\n      var input = multiple ? h(Checkbox, {\n        attrs: {\n          checked: selectedKeys && selectedKeys.indexOf(item.value) >= 0\n        }\n      }) : h(Radio, {\n        attrs: {\n          checked: selectedKeys && selectedKeys.indexOf(item.value) >= 0\n        }\n      });\n      return h(MenuItem, {\n        key: item.value\n      }, [input, h('span', [item.text])]);\n    }\n  },\n  render: function render() {\n    var _this5 = this;\n\n    var h = arguments[0];\n    var originSelectedKeys = this.$data.sSelectedKeys;\n    var column = this.column,\n        locale = this.locale,\n        prefixCls = this.prefixCls,\n        dropdownPrefixCls = this.dropdownPrefixCls,\n        getPopupContainer = this.getPopupContainer; // default multiple selection in filter dropdown\n\n    var multiple = 'filterMultiple' in column ? column.filterMultiple : true;\n    var dropdownMenuClass = classNames(_defineProperty({}, dropdownPrefixCls + '-menu-without-submenu', !this.hasSubMenu()));\n    var filterDropdown = column.filterDropdown;\n\n    if (filterDropdown instanceof Function) {\n      filterDropdown = filterDropdown({\n        prefixCls: dropdownPrefixCls + '-custom',\n        setSelectedKeys: function setSelectedKeys(selectedKeys) {\n          return _this5.setSelectedKeys({\n            selectedKeys: selectedKeys\n          });\n        },\n        selectedKeys: originSelectedKeys,\n        confirm: this.handleConfirm,\n        clearFilters: this.handleClearFilters,\n        filters: column.filters,\n        visible: this.getDropdownVisible(),\n        column: column\n      });\n    }\n\n    var menus = filterDropdown ? h(FilterDropdownMenuWrapper, {\n      'class': prefixCls + '-dropdown'\n    }, [filterDropdown]) : h(FilterDropdownMenuWrapper, {\n      'class': prefixCls + '-dropdown'\n    }, [h(Menu, {\n      attrs: {\n        multiple: multiple,\n        prefixCls: dropdownPrefixCls + '-menu',\n        selectedKeys: originSelectedKeys && originSelectedKeys.map(function (val) {\n          return val;\n        }),\n        getPopupContainer: getPopupContainer\n      },\n      on: {\n        'click': this.handleMenuItemClick,\n        'select': this.setSelectedKeys,\n        'deselect': this.setSelectedKeys\n      },\n      'class': dropdownMenuClass\n    }, [this.renderMenus(column.filters)]), h('div', {\n      'class': prefixCls + '-dropdown-btns'\n    }, [h('a', {\n      'class': prefixCls + '-dropdown-link confirm',\n      on: {\n        'click': this.handleConfirm\n      }\n    }, [locale.filterConfirm]), h('a', {\n      'class': prefixCls + '-dropdown-link clear',\n      on: {\n        'click': this.handleClearFilters\n      }\n    }, [locale.filterReset])])]);\n    return h(Dropdown, {\n      attrs: {\n        trigger: ['click'],\n        placement: 'bottomRight',\n        visible: this.getDropdownVisible(),\n        getPopupContainer: getPopupContainer,\n        forceRender: true\n      },\n      on: {\n        'visibleChange': this.onVisibleChange\n      }\n    }, [h('template', {\n      slot: 'overlay'\n    }, [menus]), this.renderFilterIcon()]);\n  }\n};","map":{"version":3,"sources":["/Users/liulu/刘璐/vue3/hello-vue3/node_modules/ant-design-vue/es/table/filterDropdown.js"],"names":["_defineProperty","_extends","Menu","SubMenu","Item","MenuItem","closest","classNames","shallowequal","Dropdown","Icon","Checkbox","Radio","FilterDropdownMenuWrapper","FilterMenuProps","initDefaultProps","getOptionProps","isValidElement","cloneElement","BaseMixin","generateValueMaps","stopPropagation","e","name","mixins","props","handleFilter","column","data","visible","filterDropdownVisible","preProps","sSelectedKeys","selectedKeys","sKeyPathOfSelectedItem","sVisible","sValueKeys","filters","watch","_propsSymbol","nextProps","newState","Object","keys","length","setState","mounted","_this","$nextTick","setNeverShown","updated","_this2","methods","getDropdownVisible","neverShown","rootNode","$el","filterBelongToScrollBody","fixed","setSelectedKeys","_ref","setVisible","onFilterDropdownVisibleChange","handleClearFilters","handleConfirm","_this3","confirmFilter2","$forceUpdate","confirmFilter","onVisibleChange","$props","filterDropdown","Function","handleMenuItemClick","info","$data","keyPath","keyPathOfSelectedItem","indexOf","key","hasSubMenu","_column$filters","undefined","some","item","children","_$props","propSelectedKeys","_$data","valueKeys","map","filter","renderMenus","items","_this4","h","$createElement","_$props2","dropdownPrefixCls","prefixCls","containSelected","value","subMenuCls","attrs","title","text","popupClassName","renderMenuItem","renderFilterIcon","_classNames2","locale","filtered","filterIcon","dropdownIconClass","filterTitle","type","theme","on","click","multiple","filterMultiple","input","checked","render","_this5","arguments","originSelectedKeys","getPopupContainer","dropdownMenuClass","confirm","clearFilters","menus","val","filterConfirm","filterReset","trigger","placement","forceRender","slot"],"mappings":"AAAA,OAAOA,eAAP,MAA4B,sCAA5B;AACA,OAAOC,QAAP,MAAqB,+BAArB;AACA,OAAOC,IAAP,IAAeC,OAAf,EAAwBC,IAAI,IAAIC,QAAhC,QAAgD,YAAhD;AACA,OAAOC,OAAP,MAAoB,aAApB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,YAAP,MAAyB,cAAzB;AACA,OAAOC,QAAP,MAAqB,aAArB;AACA,OAAOC,IAAP,MAAiB,SAAjB;AACA,OAAOC,QAAP,MAAqB,aAArB;AACA,OAAOC,KAAP,MAAkB,UAAlB;AACA,OAAOC,yBAAP,MAAsC,6BAAtC;AACA,SAASC,eAAT,QAAgC,aAAhC;AACA,SAASC,gBAAT,EAA2BC,cAA3B,EAA2CC,cAA3C,QAAiE,qBAAjE;AACA,SAASC,YAAT,QAA6B,gBAA7B;AACA,OAAOC,SAAP,MAAsB,oBAAtB;AACA,SAASC,iBAAT,QAAkC,QAAlC;;AAEA,SAASC,eAAT,CAAyBC,CAAzB,EAA4B;AAC1BA,EAAAA,CAAC,CAACD,eAAF;AACD;;AAED,eAAe;AACbE,EAAAA,IAAI,EAAE,YADO;AAEbC,EAAAA,MAAM,EAAE,CAACL,SAAD,CAFK;AAGbM,EAAAA,KAAK,EAAEV,gBAAgB,CAACD,eAAD,EAAkB;AACvCY,IAAAA,YAAY,EAAE,SAASA,YAAT,GAAwB,CAAE,CADD;AAGvCC,IAAAA,MAAM,EAAE;AAH+B,GAAlB,CAHV;AASbC,EAAAA,IAAI,EAAE,SAASA,IAAT,GAAgB;AACpB,QAAIC,OAAO,GAAG,2BAA2B,KAAKF,MAAhC,GAAyC,KAAKA,MAAL,CAAYG,qBAArD,GAA6E,KAA3F;AACA,SAAKC,QAAL,GAAgB9B,QAAQ,CAAC,EAAD,EAAKe,cAAc,CAAC,IAAD,CAAnB,CAAxB;AACA,WAAO;AACLgB,MAAAA,aAAa,EAAE,KAAKC,YADf;AAELC,MAAAA,sBAAsB,EAAE,EAFnB;AAEuB;AAC5BC,MAAAA,QAAQ,EAAEN,OAHL;AAILO,MAAAA,UAAU,EAAEhB,iBAAiB,CAAC,KAAKO,MAAL,CAAYU,OAAb;AAJxB,KAAP;AAMD,GAlBY;AAoBbC,EAAAA,KAAK,EAAE;AACLC,IAAAA,YAAY,EAAE,SAASA,YAAT,GAAwB;AACpC,UAAIC,SAAS,GAAGxB,cAAc,CAAC,IAAD,CAA9B;AACA,UAAIW,MAAM,GAAGa,SAAS,CAACb,MAAvB;AAEA,UAAIc,QAAQ,GAAG,EAAf;AAEA;AACN;AACA;AACA;AACA;AACA;AACA;;AACM,UAAI,kBAAkBD,SAAlB,IAA+B,CAAChC,YAAY,CAAC,KAAKuB,QAAL,CAAcE,YAAf,EAA6BO,SAAS,CAACP,YAAvC,CAAhD,EAAsG;AACpGQ,QAAAA,QAAQ,CAACT,aAAT,GAAyBQ,SAAS,CAACP,YAAnC;AACD;;AACD,UAAI,CAACzB,YAAY,CAAC,CAAC,KAAKuB,QAAL,CAAcJ,MAAd,IAAwB,EAAzB,EAA6BU,OAA9B,EAAuC,CAACG,SAAS,CAACb,MAAV,IAAoB,EAArB,EAAyBU,OAAhE,CAAjB,EAA2F;AACzFI,QAAAA,QAAQ,CAACL,UAAT,GAAsBhB,iBAAiB,CAACoB,SAAS,CAACb,MAAV,CAAiBU,OAAlB,CAAvC;AACD;;AACD,UAAI,2BAA2BV,MAA/B,EAAuC;AACrCc,QAAAA,QAAQ,CAACN,QAAT,GAAoBR,MAAM,CAACG,qBAA3B;AACD;;AACD,UAAIY,MAAM,CAACC,IAAP,CAAYF,QAAZ,EAAsBG,MAAtB,GAA+B,CAAnC,EAAsC;AACpC,aAAKC,QAAL,CAAcJ,QAAd;AACD;;AACD,WAAKV,QAAL,GAAgB9B,QAAQ,CAAC,EAAD,EAAKuC,SAAL,CAAxB;AACD;AA3BI,GApBM;AAkDbM,EAAAA,OAAO,EAAE,SAASA,OAAT,GAAmB;AAC1B,QAAIC,KAAK,GAAG,IAAZ;;AAEA,QAAIpB,MAAM,GAAG,KAAKA,MAAlB;AAEA,SAAKqB,SAAL,CAAe,YAAY;AACzBD,MAAAA,KAAK,CAACE,aAAN,CAAoBtB,MAApB;AACD,KAFD;AAGD,GA1DY;AA2DbuB,EAAAA,OAAO,EAAE,SAASA,OAAT,GAAmB;AAC1B,QAAIC,MAAM,GAAG,IAAb;;AAEA,QAAIxB,MAAM,GAAG,KAAKA,MAAlB;AAEA,SAAKqB,SAAL,CAAe,YAAY;AACzBG,MAAAA,MAAM,CAACF,aAAP,CAAqBtB,MAArB;AACD,KAFD;AAGD,GAnEY;AAqEbyB,EAAAA,OAAO,EAAE;AACPC,IAAAA,kBAAkB,EAAE,SAASA,kBAAT,GAA8B;AAChD,aAAO,KAAKC,UAAL,GAAkB,KAAlB,GAA0B,KAAKnB,QAAtC;AACD,KAHM;AAIPc,IAAAA,aAAa,EAAE,SAASA,aAAT,CAAuBtB,MAAvB,EAA+B;AAC5C,UAAI4B,QAAQ,GAAG,KAAKC,GAApB;AACA,UAAIC,wBAAwB,GAAG,CAAC,CAACnD,OAAO,CAACiD,QAAD,EAAW,mBAAX,CAAxC;;AACA,UAAIE,wBAAJ,EAA8B;AAC5B;AACA;AACA;AACA;AACA,aAAKH,UAAL,GAAkB,CAAC,CAAC3B,MAAM,CAAC+B,KAA3B;AACD;AACF,KAdM;AAePC,IAAAA,eAAe,EAAE,SAASA,eAAT,CAAyBC,IAAzB,EAA+B;AAC9C,UAAI3B,YAAY,GAAG2B,IAAI,CAAC3B,YAAxB;AAEA,WAAKY,QAAL,CAAc;AAAEb,QAAAA,aAAa,EAAEC;AAAjB,OAAd;AACD,KAnBM;AAoBP4B,IAAAA,UAAU,EAAE,SAASA,UAAT,CAAoBhC,OAApB,EAA6B;AACvC,UAAIF,MAAM,GAAG,KAAKA,MAAlB;;AAEA,UAAI,EAAE,2BAA2BA,MAA7B,CAAJ,EAA0C;AACxC,aAAKkB,QAAL,CAAc;AAAEV,UAAAA,QAAQ,EAAEN;AAAZ,SAAd;AACD;;AACD,UAAIF,MAAM,CAACmC,6BAAX,EAA0C;AACxCnC,QAAAA,MAAM,CAACmC,6BAAP,CAAqCjC,OAArC;AACD;AACF,KA7BM;AA8BPkC,IAAAA,kBAAkB,EAAE,SAASA,kBAAT,GAA8B;AAChD,WAAKlB,QAAL,CAAc;AACZb,QAAAA,aAAa,EAAE;AADH,OAAd,EAEG,KAAKgC,aAFR;AAGD,KAlCM;AAmCPA,IAAAA,aAAa,EAAE,SAASA,aAAT,GAAyB;AACtC,UAAIC,MAAM,GAAG,IAAb;;AAEA,WAAKJ,UAAL,CAAgB,KAAhB;AACA,WAAKK,cAAL,GAJsC,CAKtC;AACA;;AACA,WAAKC,YAAL;AACA,WAAKnB,SAAL,CAAe,YAAY;AACzBiB,QAAAA,MAAM,CAACG,aAAP;AACD,OAFD;AAGD,KA9CM;AA+CPC,IAAAA,eAAe,EAAE,SAASA,eAAT,CAAyBxC,OAAzB,EAAkC;AACjD,WAAKgC,UAAL,CAAgBhC,OAAhB;AACA,UAAIF,MAAM,GAAG,KAAK2C,MAAL,CAAY3C,MAAzB,CAFiD,CAGjD;;AAEA,UAAI,CAACE,OAAD,IAAY,EAAEF,MAAM,CAAC4C,cAAP,YAAiCC,QAAnC,CAAhB,EAA8D;AAC5D,aAAKN,cAAL;AACD;AACF,KAvDM;AAwDPO,IAAAA,mBAAmB,EAAE,SAASA,mBAAT,CAA6BC,IAA7B,EAAmC;AACtD,UAAIzC,YAAY,GAAG,KAAK0C,KAAL,CAAW3C,aAA9B;;AAEA,UAAI,CAAC0C,IAAI,CAACE,OAAN,IAAiBF,IAAI,CAACE,OAAL,CAAahC,MAAb,IAAuB,CAA5C,EAA+C;AAC7C;AACD;;AACD,UAAIiC,qBAAqB,GAAG,KAAKF,KAAL,CAAWzC,sBAAvC;;AAEA,UAAID,YAAY,IAAIA,YAAY,CAAC6C,OAAb,CAAqBJ,IAAI,CAACK,GAA1B,KAAkC,CAAtD,EAAyD;AACvD;AACA,eAAOF,qBAAqB,CAACH,IAAI,CAACK,GAAN,CAA5B;AACD,OAHD,MAGO;AACL;AACAF,QAAAA,qBAAqB,CAACH,IAAI,CAACK,GAAN,CAArB,GAAkCL,IAAI,CAACE,OAAvC;AACD;;AACD,WAAK/B,QAAL,CAAc;AAAEX,QAAAA,sBAAsB,EAAE2C;AAA1B,OAAd;AACD,KAxEM;AAyEPG,IAAAA,UAAU,EAAE,SAASA,UAAT,GAAsB;AAChC,UAAIC,eAAe,GAAG,KAAKtD,MAAL,CAAYU,OAAlC;AAAA,UACIA,OAAO,GAAG4C,eAAe,KAAKC,SAApB,GAAgC,EAAhC,GAAqCD,eADnD;AAGA,aAAO5C,OAAO,CAAC8C,IAAR,CAAa,UAAUC,IAAV,EAAgB;AAClC,eAAO,CAAC,EAAEA,IAAI,CAACC,QAAL,IAAiBD,IAAI,CAACC,QAAL,CAAczC,MAAd,GAAuB,CAA1C,CAAR;AACD,OAFM,CAAP;AAGD,KAhFM;AAiFPsB,IAAAA,cAAc,EAAE,SAASA,cAAT,GAA0B;AACxC,UAAIoB,OAAO,GAAG,KAAKhB,MAAnB;AAAA,UACI3C,MAAM,GAAG2D,OAAO,CAAC3D,MADrB;AAAA,UAEI4D,gBAAgB,GAAGD,OAAO,CAACrD,YAF/B;AAAA,UAGImC,aAAa,GAAGkB,OAAO,CAAClB,aAH5B;AAIA,UAAIoB,MAAM,GAAG,KAAKb,KAAlB;AAAA,UACI1C,YAAY,GAAGuD,MAAM,CAACxD,aAD1B;AAAA,UAEIyD,SAAS,GAAGD,MAAM,CAACpD,UAFvB;AAGA,UAAImC,cAAc,GAAG5C,MAAM,CAAC4C,cAA5B;;AAGA,UAAI,CAAC/D,YAAY,CAACyB,YAAD,EAAesD,gBAAf,CAAjB,EAAmD;AACjDnB,QAAAA,aAAa,CAACzC,MAAD,EAAS4C,cAAc,GAAGtC,YAAH,GAAkBA,YAAY,CAACyD,GAAb,CAAiB,UAAUX,GAAV,EAAe;AACpF,iBAAOU,SAAS,CAACV,GAAD,CAAhB;AACD,SAFqD,EAEnDY,MAFmD,CAE5C,UAAUZ,GAAV,EAAe;AACvB,iBAAOA,GAAG,KAAKG,SAAf;AACD,SAJqD,CAAzC,CAAb;AAKD;AACF,KAnGM;AAoGPU,IAAAA,WAAW,EAAE,SAASA,WAAT,CAAqBC,KAArB,EAA4B;AACvC,UAAIC,MAAM,GAAG,IAAb;;AAEA,UAAIC,CAAC,GAAG,KAAKC,cAAb;AACA,UAAIC,QAAQ,GAAG,KAAK3B,MAApB;AAAA,UACI4B,iBAAiB,GAAGD,QAAQ,CAACC,iBADjC;AAAA,UAEIC,SAAS,GAAGF,QAAQ,CAACE,SAFzB;AAIA,aAAON,KAAK,CAACH,GAAN,CAAU,UAAUN,IAAV,EAAgB;AAC/B,YAAIA,IAAI,CAACC,QAAL,IAAiBD,IAAI,CAACC,QAAL,CAAczC,MAAd,GAAuB,CAA5C,EAA+C;AAC7C,cAAIV,sBAAsB,GAAG4D,MAAM,CAAC5D,sBAApC;AAEA,cAAIkE,eAAe,GAAG1D,MAAM,CAACC,IAAP,CAAYT,sBAAZ,EAAoCiD,IAApC,CAAyC,UAAUJ,GAAV,EAAe;AAC5E,mBAAO7C,sBAAsB,CAAC6C,GAAD,CAAtB,CAA4BD,OAA5B,CAAoCM,IAAI,CAACiB,KAAzC,KAAmD,CAA1D;AACD,WAFqB,CAAtB;AAGA,cAAIC,UAAU,GAAG/F,UAAU,CAAC4F,SAAS,GAAG,mBAAb,EAAkCnG,eAAe,CAAC,EAAD,EAAKkG,iBAAiB,GAAG,2BAAzB,EAAsDE,eAAtD,CAAjD,CAA3B;AACA,iBAAOL,CAAC,CACN5F,OADM,EAEN;AACEoG,YAAAA,KAAK,EAAE;AAAEC,cAAAA,KAAK,EAAEpB,IAAI,CAACqB,IAAd;AAAoBC,cAAAA,cAAc,EAAEJ;AAApC,aADT;AAEEvB,YAAAA,GAAG,EAAEK,IAAI,CAACiB;AAFZ,WAFM,EAKN,CAACP,MAAM,CAACF,WAAP,CAAmBR,IAAI,CAACC,QAAxB,CAAD,CALM,CAAR;AAOD;;AACD,eAAOS,MAAM,CAACa,cAAP,CAAsBvB,IAAtB,CAAP;AACD,OAjBM,CAAP;AAkBD,KA9HM;AA+HPwB,IAAAA,gBAAgB,EAAE,SAASA,gBAAT,GAA4B;AAC5C,UAAIC,YAAJ;;AAEA,UAAId,CAAC,GAAG,KAAKC,cAAb;AACA,UAAIrE,MAAM,GAAG,KAAKA,MAAlB;AAAA,UACImF,MAAM,GAAG,KAAKA,MADlB;AAAA,UAEIX,SAAS,GAAG,KAAKA,SAFrB;AAAA,UAGIlE,YAAY,GAAG,KAAKA,YAHxB;AAKA,UAAI8E,QAAQ,GAAG9E,YAAY,IAAIA,YAAY,CAACW,MAAb,GAAsB,CAArD;AACA,UAAIoE,UAAU,GAAGrF,MAAM,CAACqF,UAAxB;;AACA,UAAI,OAAOA,UAAP,KAAsB,UAA1B,EAAsC;AACpCA,QAAAA,UAAU,GAAGA,UAAU,CAACD,QAAD,EAAWpF,MAAX,CAAvB;AACD;;AACD,UAAIsF,iBAAiB,GAAG1G,UAAU,EAAEsG,YAAY,GAAG,EAAf,EAAmB7G,eAAe,CAAC6G,YAAD,EAAeV,SAAS,GAAG,WAA3B,EAAwC,cAAcxE,MAAd,GAAuBA,MAAM,CAACoF,QAA9B,GAAyCA,QAAjF,CAAlC,EAA8H/G,eAAe,CAAC6G,YAAD,EAAeV,SAAS,GAAG,OAA3B,EAAoC,KAAK9C,kBAAL,EAApC,CAA7I,EAA6MwD,YAA/M,EAAlC;;AACA,UAAI,CAACG,UAAL,EAAiB;AACf,eAAOjB,CAAC,CAACrF,IAAD,EAAO;AACb6F,UAAAA,KAAK,EAAE;AACLC,YAAAA,KAAK,EAAEM,MAAM,CAACI,WADT;AAELC,YAAAA,IAAI,EAAE,QAFD;AAGLC,YAAAA,KAAK,EAAE;AAHF,WADM;AAMb,mBAASH,iBANI;AAObI,UAAAA,EAAE,EAAE;AACF,qBAAShG;AADP;AAPS,SAAP,CAAR;AAWD;;AACD,UAAI2F,UAAU,CAACpE,MAAX,KAAsB,CAAtB,IAA2B3B,cAAc,CAAC+F,UAAU,CAAC,CAAD,CAAX,CAA7C,EAA8D;AAC5D,eAAO9F,YAAY,CAAC8F,UAAU,CAAC,CAAD,CAAX,EAAgB;AACjCK,UAAAA,EAAE,EAAE;AACFC,YAAAA,KAAK,EAAEjG;AADL,WAD6B;AAIjC,mBAASd,UAAU,CAAC4F,SAAS,GAAG,OAAb,EAAsBc,iBAAtB;AAJc,SAAhB,CAAnB;AAMD;;AACD,aAAOlB,CAAC,CACN,MADM,EAEN;AAAE,iBAASxF,UAAU,CAAC4F,SAAS,GAAG,OAAb,EAAsBc,iBAAtB;AAArB,OAFM,EAGN,CAACD,UAAD,CAHM,CAAR;AAKD,KAxKM;AAyKPL,IAAAA,cAAc,EAAE,SAASA,cAAT,CAAwBvB,IAAxB,EAA8B;AAC5C,UAAIW,CAAC,GAAG,KAAKC,cAAb;AACA,UAAIrE,MAAM,GAAG,KAAKA,MAAlB;AACA,UAAIM,YAAY,GAAG,KAAK0C,KAAL,CAAW3C,aAA9B;AAEA,UAAIuF,QAAQ,GAAG,oBAAoB5F,MAApB,GAA6BA,MAAM,CAAC6F,cAApC,GAAqD,IAApE;AAEA,UAAIC,KAAK,GAAGF,QAAQ,GAAGxB,CAAC,CAACpF,QAAD,EAAW;AACjC4F,QAAAA,KAAK,EAAE;AAAEmB,UAAAA,OAAO,EAAEzF,YAAY,IAAIA,YAAY,CAAC6C,OAAb,CAAqBM,IAAI,CAACiB,KAA1B,KAAoC;AAA/D;AAD0B,OAAX,CAAJ,GAEfN,CAAC,CAACnF,KAAD,EAAQ;AACZ2F,QAAAA,KAAK,EAAE;AAAEmB,UAAAA,OAAO,EAAEzF,YAAY,IAAIA,YAAY,CAAC6C,OAAb,CAAqBM,IAAI,CAACiB,KAA1B,KAAoC;AAA/D;AADK,OAAR,CAFN;AAMA,aAAON,CAAC,CACN1F,QADM,EAEN;AAAE0E,QAAAA,GAAG,EAAEK,IAAI,CAACiB;AAAZ,OAFM,EAGN,CAACoB,KAAD,EAAQ1B,CAAC,CAAC,MAAD,EAAS,CAACX,IAAI,CAACqB,IAAN,CAAT,CAAT,CAHM,CAAR;AAKD;AA3LM,GArEI;AAmQbkB,EAAAA,MAAM,EAAE,SAASA,MAAT,GAAkB;AACxB,QAAIC,MAAM,GAAG,IAAb;;AAEA,QAAI7B,CAAC,GAAG8B,SAAS,CAAC,CAAD,CAAjB;AACA,QAAIC,kBAAkB,GAAG,KAAKnD,KAAL,CAAW3C,aAApC;AACA,QAAIL,MAAM,GAAG,KAAKA,MAAlB;AAAA,QACImF,MAAM,GAAG,KAAKA,MADlB;AAAA,QAEIX,SAAS,GAAG,KAAKA,SAFrB;AAAA,QAGID,iBAAiB,GAAG,KAAKA,iBAH7B;AAAA,QAII6B,iBAAiB,GAAG,KAAKA,iBAJ7B,CALwB,CAUxB;;AAEA,QAAIR,QAAQ,GAAG,oBAAoB5F,MAApB,GAA6BA,MAAM,CAAC6F,cAApC,GAAqD,IAApE;AACA,QAAIQ,iBAAiB,GAAGzH,UAAU,CAACP,eAAe,CAAC,EAAD,EAAKkG,iBAAiB,GAAG,uBAAzB,EAAkD,CAAC,KAAKlB,UAAL,EAAnD,CAAhB,CAAlC;AACA,QAAIT,cAAc,GAAG5C,MAAM,CAAC4C,cAA5B;;AAEA,QAAIA,cAAc,YAAYC,QAA9B,EAAwC;AACtCD,MAAAA,cAAc,GAAGA,cAAc,CAAC;AAC9B4B,QAAAA,SAAS,EAAED,iBAAiB,GAAG,SADD;AAE9BvC,QAAAA,eAAe,EAAE,SAASA,eAAT,CAAyB1B,YAAzB,EAAuC;AACtD,iBAAO2F,MAAM,CAACjE,eAAP,CAAuB;AAAE1B,YAAAA,YAAY,EAAEA;AAAhB,WAAvB,CAAP;AACD,SAJ6B;AAK9BA,QAAAA,YAAY,EAAE6F,kBALgB;AAM9BG,QAAAA,OAAO,EAAE,KAAKjE,aANgB;AAO9BkE,QAAAA,YAAY,EAAE,KAAKnE,kBAPW;AAQ9B1B,QAAAA,OAAO,EAAEV,MAAM,CAACU,OARc;AAS9BR,QAAAA,OAAO,EAAE,KAAKwB,kBAAL,EATqB;AAU9B1B,QAAAA,MAAM,EAAEA;AAVsB,OAAD,CAA/B;AAYD;;AAED,QAAIwG,KAAK,GAAG5D,cAAc,GAAGwB,CAAC,CAC5BlF,yBAD4B,EAE5B;AAAE,eAASsF,SAAS,GAAG;AAAvB,KAF4B,EAG5B,CAAC5B,cAAD,CAH4B,CAAJ,GAItBwB,CAAC,CACHlF,yBADG,EAEH;AAAE,eAASsF,SAAS,GAAG;AAAvB,KAFG,EAGH,CAACJ,CAAC,CACA7F,IADA,EAEA;AACEqG,MAAAA,KAAK,EAAE;AACLgB,QAAAA,QAAQ,EAAEA,QADL;AAGLpB,QAAAA,SAAS,EAAED,iBAAiB,GAAG,OAH1B;AAKLjE,QAAAA,YAAY,EAAE6F,kBAAkB,IAAIA,kBAAkB,CAACpC,GAAnB,CAAuB,UAAU0C,GAAV,EAAe;AACxE,iBAAOA,GAAP;AACD,SAFmC,CAL/B;AAQLL,QAAAA,iBAAiB,EAAEA;AARd,OADT;AAWEV,MAAAA,EAAE,EAAE;AACF,iBAAS,KAAK5C,mBADZ;AAEF,kBAAU,KAAKd,eAFb;AAGF,oBAAY,KAAKA;AAHf,OAXN;AAgBE,eAASqE;AAhBX,KAFA,EAoBA,CAAC,KAAKpC,WAAL,CAAiBjE,MAAM,CAACU,OAAxB,CAAD,CApBA,CAAF,EAqBG0D,CAAC,CACF,KADE,EAEF;AAAE,eAASI,SAAS,GAAG;AAAvB,KAFE,EAGF,CAACJ,CAAC,CACA,GADA,EAEA;AAAE,eAASI,SAAS,GAAG,wBAAvB;AAAiDkB,MAAAA,EAAE,EAAE;AACjD,iBAAS,KAAKrD;AADmC;AAArD,KAFA,EAMA,CAAC8C,MAAM,CAACuB,aAAR,CANA,CAAF,EAOGtC,CAAC,CACF,GADE,EAEF;AAAE,eAASI,SAAS,GAAG,sBAAvB;AAA+CkB,MAAAA,EAAE,EAAE;AAC/C,iBAAS,KAAKtD;AADiC;AAAnD,KAFE,EAMF,CAAC+C,MAAM,CAACwB,WAAR,CANE,CAPJ,CAHE,CArBJ,CAHG,CAJL;AAiDA,WAAOvC,CAAC,CACNtF,QADM,EAEN;AACE8F,MAAAA,KAAK,EAAE;AACLgC,QAAAA,OAAO,EAAE,CAAC,OAAD,CADJ;AAELC,QAAAA,SAAS,EAAE,aAFN;AAGL3G,QAAAA,OAAO,EAAE,KAAKwB,kBAAL,EAHJ;AAKL0E,QAAAA,iBAAiB,EAAEA,iBALd;AAMLU,QAAAA,WAAW,EAAE;AANR,OADT;AASEpB,MAAAA,EAAE,EAAE;AACF,yBAAiB,KAAKhD;AADpB;AATN,KAFM,EAeN,CAAC0B,CAAC,CACA,UADA,EAEA;AAAE2C,MAAAA,IAAI,EAAE;AAAR,KAFA,EAGA,CAACP,KAAD,CAHA,CAAF,EAIG,KAAKvB,gBAAL,EAJH,CAfM,CAAR;AAqBD;AAxWY,CAAf","sourcesContent":["import _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _extends from 'babel-runtime/helpers/extends';\nimport Menu, { SubMenu, Item as MenuItem } from '../vc-menu';\nimport closest from 'dom-closest';\nimport classNames from 'classnames';\nimport shallowequal from 'shallowequal';\nimport Dropdown from '../dropdown';\nimport Icon from '../icon';\nimport Checkbox from '../checkbox';\nimport Radio from '../radio';\nimport FilterDropdownMenuWrapper from './FilterDropdownMenuWrapper';\nimport { FilterMenuProps } from './interface';\nimport { initDefaultProps, getOptionProps, isValidElement } from '../_util/props-util';\nimport { cloneElement } from '../_util/vnode';\nimport BaseMixin from '../_util/BaseMixin';\nimport { generateValueMaps } from './util';\n\nfunction stopPropagation(e) {\n  e.stopPropagation();\n}\n\nexport default {\n  name: 'FilterMenu',\n  mixins: [BaseMixin],\n  props: initDefaultProps(FilterMenuProps, {\n    handleFilter: function handleFilter() {},\n\n    column: {}\n  }),\n\n  data: function data() {\n    var visible = 'filterDropdownVisible' in this.column ? this.column.filterDropdownVisible : false;\n    this.preProps = _extends({}, getOptionProps(this));\n    return {\n      sSelectedKeys: this.selectedKeys,\n      sKeyPathOfSelectedItem: {}, // 记录所有有选中子菜单的祖先菜单\n      sVisible: visible,\n      sValueKeys: generateValueMaps(this.column.filters)\n    };\n  },\n\n  watch: {\n    _propsSymbol: function _propsSymbol() {\n      var nextProps = getOptionProps(this);\n      var column = nextProps.column;\n\n      var newState = {};\n\n      /**\n       * if the state is visible the component should ignore updates on selectedKeys prop to avoid\n       * that the user selection is lost\n       * this happens frequently when a table is connected on some sort of realtime data\n       * Fixes https://github.com/ant-design/ant-design/issues/10289 and\n       * https://github.com/ant-design/ant-design/issues/10209\n       */\n      if ('selectedKeys' in nextProps && !shallowequal(this.preProps.selectedKeys, nextProps.selectedKeys)) {\n        newState.sSelectedKeys = nextProps.selectedKeys;\n      }\n      if (!shallowequal((this.preProps.column || {}).filters, (nextProps.column || {}).filters)) {\n        newState.sValueKeys = generateValueMaps(nextProps.column.filters);\n      }\n      if ('filterDropdownVisible' in column) {\n        newState.sVisible = column.filterDropdownVisible;\n      }\n      if (Object.keys(newState).length > 0) {\n        this.setState(newState);\n      }\n      this.preProps = _extends({}, nextProps);\n    }\n  },\n\n  mounted: function mounted() {\n    var _this = this;\n\n    var column = this.column;\n\n    this.$nextTick(function () {\n      _this.setNeverShown(column);\n    });\n  },\n  updated: function updated() {\n    var _this2 = this;\n\n    var column = this.column;\n\n    this.$nextTick(function () {\n      _this2.setNeverShown(column);\n    });\n  },\n\n  methods: {\n    getDropdownVisible: function getDropdownVisible() {\n      return this.neverShown ? false : this.sVisible;\n    },\n    setNeverShown: function setNeverShown(column) {\n      var rootNode = this.$el;\n      var filterBelongToScrollBody = !!closest(rootNode, '.ant-table-scroll');\n      if (filterBelongToScrollBody) {\n        // When fixed column have filters, there will be two dropdown menus\n        // Filter dropdown menu inside scroll body should never be shown\n        // To fix https://github.com/ant-design/ant-design/issues/5010 and\n        // https://github.com/ant-design/ant-design/issues/7909\n        this.neverShown = !!column.fixed;\n      }\n    },\n    setSelectedKeys: function setSelectedKeys(_ref) {\n      var selectedKeys = _ref.selectedKeys;\n\n      this.setState({ sSelectedKeys: selectedKeys });\n    },\n    setVisible: function setVisible(visible) {\n      var column = this.column;\n\n      if (!('filterDropdownVisible' in column)) {\n        this.setState({ sVisible: visible });\n      }\n      if (column.onFilterDropdownVisibleChange) {\n        column.onFilterDropdownVisibleChange(visible);\n      }\n    },\n    handleClearFilters: function handleClearFilters() {\n      this.setState({\n        sSelectedKeys: []\n      }, this.handleConfirm);\n    },\n    handleConfirm: function handleConfirm() {\n      var _this3 = this;\n\n      this.setVisible(false);\n      this.confirmFilter2();\n      // Call `setSelectedKeys` & `confirm` in the same time will make filter data not up to date\n      // https://github.com/ant-design/ant-design/issues/12284\n      this.$forceUpdate();\n      this.$nextTick(function () {\n        _this3.confirmFilter;\n      });\n    },\n    onVisibleChange: function onVisibleChange(visible) {\n      this.setVisible(visible);\n      var column = this.$props.column;\n      // https://github.com/ant-design/ant-design/issues/17833\n\n      if (!visible && !(column.filterDropdown instanceof Function)) {\n        this.confirmFilter2();\n      }\n    },\n    handleMenuItemClick: function handleMenuItemClick(info) {\n      var selectedKeys = this.$data.sSelectedKeys;\n\n      if (!info.keyPath || info.keyPath.length <= 1) {\n        return;\n      }\n      var keyPathOfSelectedItem = this.$data.sKeyPathOfSelectedItem;\n\n      if (selectedKeys && selectedKeys.indexOf(info.key) >= 0) {\n        // deselect SubMenu child\n        delete keyPathOfSelectedItem[info.key];\n      } else {\n        // select SubMenu child\n        keyPathOfSelectedItem[info.key] = info.keyPath;\n      }\n      this.setState({ sKeyPathOfSelectedItem: keyPathOfSelectedItem });\n    },\n    hasSubMenu: function hasSubMenu() {\n      var _column$filters = this.column.filters,\n          filters = _column$filters === undefined ? [] : _column$filters;\n\n      return filters.some(function (item) {\n        return !!(item.children && item.children.length > 0);\n      });\n    },\n    confirmFilter2: function confirmFilter2() {\n      var _$props = this.$props,\n          column = _$props.column,\n          propSelectedKeys = _$props.selectedKeys,\n          confirmFilter = _$props.confirmFilter;\n      var _$data = this.$data,\n          selectedKeys = _$data.sSelectedKeys,\n          valueKeys = _$data.sValueKeys;\n      var filterDropdown = column.filterDropdown;\n\n\n      if (!shallowequal(selectedKeys, propSelectedKeys)) {\n        confirmFilter(column, filterDropdown ? selectedKeys : selectedKeys.map(function (key) {\n          return valueKeys[key];\n        }).filter(function (key) {\n          return key !== undefined;\n        }));\n      }\n    },\n    renderMenus: function renderMenus(items) {\n      var _this4 = this;\n\n      var h = this.$createElement;\n      var _$props2 = this.$props,\n          dropdownPrefixCls = _$props2.dropdownPrefixCls,\n          prefixCls = _$props2.prefixCls;\n\n      return items.map(function (item) {\n        if (item.children && item.children.length > 0) {\n          var sKeyPathOfSelectedItem = _this4.sKeyPathOfSelectedItem;\n\n          var containSelected = Object.keys(sKeyPathOfSelectedItem).some(function (key) {\n            return sKeyPathOfSelectedItem[key].indexOf(item.value) >= 0;\n          });\n          var subMenuCls = classNames(prefixCls + '-dropdown-submenu', _defineProperty({}, dropdownPrefixCls + '-submenu-contain-selected', containSelected));\n          return h(\n            SubMenu,\n            {\n              attrs: { title: item.text, popupClassName: subMenuCls },\n              key: item.value },\n            [_this4.renderMenus(item.children)]\n          );\n        }\n        return _this4.renderMenuItem(item);\n      });\n    },\n    renderFilterIcon: function renderFilterIcon() {\n      var _classNames2;\n\n      var h = this.$createElement;\n      var column = this.column,\n          locale = this.locale,\n          prefixCls = this.prefixCls,\n          selectedKeys = this.selectedKeys;\n\n      var filtered = selectedKeys && selectedKeys.length > 0;\n      var filterIcon = column.filterIcon;\n      if (typeof filterIcon === 'function') {\n        filterIcon = filterIcon(filtered, column);\n      }\n      var dropdownIconClass = classNames((_classNames2 = {}, _defineProperty(_classNames2, prefixCls + '-selected', 'filtered' in column ? column.filtered : filtered), _defineProperty(_classNames2, prefixCls + '-open', this.getDropdownVisible()), _classNames2));\n      if (!filterIcon) {\n        return h(Icon, {\n          attrs: {\n            title: locale.filterTitle,\n            type: 'filter',\n            theme: 'filled'\n          },\n          'class': dropdownIconClass,\n          on: {\n            'click': stopPropagation\n          }\n        });\n      }\n      if (filterIcon.length === 1 && isValidElement(filterIcon[0])) {\n        return cloneElement(filterIcon[0], {\n          on: {\n            click: stopPropagation\n          },\n          'class': classNames(prefixCls + '-icon', dropdownIconClass)\n        });\n      }\n      return h(\n        'span',\n        { 'class': classNames(prefixCls + '-icon', dropdownIconClass) },\n        [filterIcon]\n      );\n    },\n    renderMenuItem: function renderMenuItem(item) {\n      var h = this.$createElement;\n      var column = this.column;\n      var selectedKeys = this.$data.sSelectedKeys;\n\n      var multiple = 'filterMultiple' in column ? column.filterMultiple : true;\n\n      var input = multiple ? h(Checkbox, {\n        attrs: { checked: selectedKeys && selectedKeys.indexOf(item.value) >= 0 }\n      }) : h(Radio, {\n        attrs: { checked: selectedKeys && selectedKeys.indexOf(item.value) >= 0 }\n      });\n\n      return h(\n        MenuItem,\n        { key: item.value },\n        [input, h('span', [item.text])]\n      );\n    }\n  },\n\n  render: function render() {\n    var _this5 = this;\n\n    var h = arguments[0];\n    var originSelectedKeys = this.$data.sSelectedKeys;\n    var column = this.column,\n        locale = this.locale,\n        prefixCls = this.prefixCls,\n        dropdownPrefixCls = this.dropdownPrefixCls,\n        getPopupContainer = this.getPopupContainer;\n    // default multiple selection in filter dropdown\n\n    var multiple = 'filterMultiple' in column ? column.filterMultiple : true;\n    var dropdownMenuClass = classNames(_defineProperty({}, dropdownPrefixCls + '-menu-without-submenu', !this.hasSubMenu()));\n    var filterDropdown = column.filterDropdown;\n\n    if (filterDropdown instanceof Function) {\n      filterDropdown = filterDropdown({\n        prefixCls: dropdownPrefixCls + '-custom',\n        setSelectedKeys: function setSelectedKeys(selectedKeys) {\n          return _this5.setSelectedKeys({ selectedKeys: selectedKeys });\n        },\n        selectedKeys: originSelectedKeys,\n        confirm: this.handleConfirm,\n        clearFilters: this.handleClearFilters,\n        filters: column.filters,\n        visible: this.getDropdownVisible(),\n        column: column\n      });\n    }\n\n    var menus = filterDropdown ? h(\n      FilterDropdownMenuWrapper,\n      { 'class': prefixCls + '-dropdown' },\n      [filterDropdown]\n    ) : h(\n      FilterDropdownMenuWrapper,\n      { 'class': prefixCls + '-dropdown' },\n      [h(\n        Menu,\n        {\n          attrs: {\n            multiple: multiple,\n\n            prefixCls: dropdownPrefixCls + '-menu',\n\n            selectedKeys: originSelectedKeys && originSelectedKeys.map(function (val) {\n              return val;\n            }),\n            getPopupContainer: getPopupContainer\n          },\n          on: {\n            'click': this.handleMenuItemClick,\n            'select': this.setSelectedKeys,\n            'deselect': this.setSelectedKeys\n          },\n          'class': dropdownMenuClass\n        },\n        [this.renderMenus(column.filters)]\n      ), h(\n        'div',\n        { 'class': prefixCls + '-dropdown-btns' },\n        [h(\n          'a',\n          { 'class': prefixCls + '-dropdown-link confirm', on: {\n              'click': this.handleConfirm\n            }\n          },\n          [locale.filterConfirm]\n        ), h(\n          'a',\n          { 'class': prefixCls + '-dropdown-link clear', on: {\n              'click': this.handleClearFilters\n            }\n          },\n          [locale.filterReset]\n        )]\n      )]\n    );\n\n    return h(\n      Dropdown,\n      {\n        attrs: {\n          trigger: ['click'],\n          placement: 'bottomRight',\n          visible: this.getDropdownVisible(),\n\n          getPopupContainer: getPopupContainer,\n          forceRender: true\n        },\n        on: {\n          'visibleChange': this.onVisibleChange\n        }\n      },\n      [h(\n        'template',\n        { slot: 'overlay' },\n        [menus]\n      ), this.renderFilterIcon()]\n    );\n  }\n};"]},"metadata":{},"sourceType":"module"}