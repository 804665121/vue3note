{"ast":null,"code":"import _mergeJSXProps from 'babel-helper-vue-jsx-merge-props';\nimport _extends from 'babel-runtime/helpers/extends';\nimport ClearableLabeledInput from './ClearableLabeledInput';\nimport ResizableTextArea from './ResizableTextArea';\nimport inputProps from './inputProps';\nimport hasProp, { getListeners, getOptionProps } from '../_util/props-util';\nimport { ConfigConsumerProps } from '../config-provider/configConsumerProps';\nimport { fixControlledValue, resolveOnChange } from './Input';\nimport PropTypes from '../_util/vue-types';\n\nvar TextAreaProps = _extends({}, inputProps, {\n  autosize: PropTypes.oneOfType([Object, Boolean]),\n  autoSize: PropTypes.oneOfType([Object, Boolean])\n});\n\nexport default {\n  name: 'ATextarea',\n  inheritAttrs: false,\n  model: {\n    prop: 'value',\n    event: 'change.value'\n  },\n  props: _extends({}, TextAreaProps),\n  inject: {\n    configProvider: {\n      'default': function _default() {\n        return ConfigConsumerProps;\n      }\n    }\n  },\n  data: function data() {\n    var value = typeof this.value === 'undefined' ? this.defaultValue : this.value;\n    return {\n      stateValue: typeof value === 'undefined' ? '' : value\n    };\n  },\n  computed: {},\n  watch: {\n    value: function value(val) {\n      this.stateValue = val;\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      if (_this.autoFocus) {\n        _this.focus();\n      }\n    });\n  },\n  methods: {\n    setValue: function setValue(value, callback) {\n      if (!hasProp(this, 'value')) {\n        this.stateValue = value;\n        this.$nextTick(function () {\n          callback && callback();\n        });\n      } else {// 不在严格受控\n        // https://github.com/vueComponent/ant-design-vue/issues/2207，modal 是 新 new 实例，更新队列和当前不在同一个更新队列中\n        // this.$forceUpdate();\n      }\n    },\n    handleKeyDown: function handleKeyDown(e) {\n      if (e.keyCode === 13) {\n        this.$emit('pressEnter', e);\n      }\n\n      this.$emit('keydown', e);\n    },\n    onChange: function onChange(e) {\n      this.$emit('change.value', e.target.value);\n      this.$emit('change', e);\n      this.$emit('input', e);\n    },\n    handleChange: function handleChange(e) {\n      var _this2 = this;\n\n      var _e$target = e.target,\n          value = _e$target.value,\n          composing = _e$target.composing;\n      if ((e.isComposing || composing) && this.lazy || this.stateValue === value) return;\n      this.setValue(e.target.value, function () {\n        _this2.$refs.resizableTextArea.resizeTextarea();\n      });\n      resolveOnChange(this.$refs.resizableTextArea.$refs.textArea, e, this.onChange);\n    },\n    focus: function focus() {\n      this.$refs.resizableTextArea.$refs.textArea.focus();\n    },\n    blur: function blur() {\n      this.$refs.resizableTextArea.$refs.textArea.blur();\n    },\n    handleReset: function handleReset(e) {\n      var _this3 = this;\n\n      this.setValue('', function () {\n        _this3.$refs.resizableTextArea.renderTextArea();\n\n        _this3.focus();\n      });\n      resolveOnChange(this.$refs.resizableTextArea.$refs.textArea, e, this.onChange);\n    },\n    renderTextArea: function renderTextArea(prefixCls) {\n      var h = this.$createElement;\n      var props = getOptionProps(this);\n      var resizeProps = {\n        props: _extends({}, props, {\n          prefixCls: prefixCls\n        }),\n        on: _extends({}, getListeners(this), {\n          input: this.handleChange,\n          keydown: this.handleKeyDown\n        }),\n        attrs: this.$attrs\n      };\n      return h(ResizableTextArea, _mergeJSXProps([resizeProps, {\n        ref: 'resizableTextArea'\n      }]));\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    var stateValue = this.stateValue,\n        customizePrefixCls = this.prefixCls;\n    var getPrefixCls = this.configProvider.getPrefixCls;\n    var prefixCls = getPrefixCls('input', customizePrefixCls);\n    var props = {\n      props: _extends({}, getOptionProps(this), {\n        prefixCls: prefixCls,\n        inputType: 'text',\n        value: fixControlledValue(stateValue),\n        element: this.renderTextArea(prefixCls),\n        handleReset: this.handleReset\n      }),\n      on: getListeners(this)\n    };\n    return h(ClearableLabeledInput, props);\n  }\n};","map":{"version":3,"sources":["/Users/liulu/刘璐/vue3/hello-vue3/node_modules/ant-design-vue/es/input/TextArea.js"],"names":["_mergeJSXProps","_extends","ClearableLabeledInput","ResizableTextArea","inputProps","hasProp","getListeners","getOptionProps","ConfigConsumerProps","fixControlledValue","resolveOnChange","PropTypes","TextAreaProps","autosize","oneOfType","Object","Boolean","autoSize","name","inheritAttrs","model","prop","event","props","inject","configProvider","_default","data","value","defaultValue","stateValue","computed","watch","val","mounted","_this","$nextTick","autoFocus","focus","methods","setValue","callback","handleKeyDown","e","keyCode","$emit","onChange","target","handleChange","_this2","_e$target","composing","isComposing","lazy","$refs","resizableTextArea","resizeTextarea","textArea","blur","handleReset","_this3","renderTextArea","prefixCls","h","$createElement","resizeProps","on","input","keydown","attrs","$attrs","ref","render","arguments","customizePrefixCls","getPrefixCls","inputType","element"],"mappings":"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","sourcesContent":["import _mergeJSXProps from 'babel-helper-vue-jsx-merge-props';\nimport _extends from 'babel-runtime/helpers/extends';\nimport ClearableLabeledInput from './ClearableLabeledInput';\nimport ResizableTextArea from './ResizableTextArea';\nimport inputProps from './inputProps';\nimport hasProp, { getListeners, getOptionProps } from '../_util/props-util';\nimport { ConfigConsumerProps } from '../config-provider/configConsumerProps';\nimport { fixControlledValue, resolveOnChange } from './Input';\nimport PropTypes from '../_util/vue-types';\n\nvar TextAreaProps = _extends({}, inputProps, {\n  autosize: PropTypes.oneOfType([Object, Boolean]),\n  autoSize: PropTypes.oneOfType([Object, Boolean])\n});\n\nexport default {\n  name: 'ATextarea',\n  inheritAttrs: false,\n  model: {\n    prop: 'value',\n    event: 'change.value'\n  },\n  props: _extends({}, TextAreaProps),\n  inject: {\n    configProvider: { 'default': function _default() {\n        return ConfigConsumerProps;\n      } }\n  },\n  data: function data() {\n    var value = typeof this.value === 'undefined' ? this.defaultValue : this.value;\n    return {\n      stateValue: typeof value === 'undefined' ? '' : value\n    };\n  },\n\n  computed: {},\n  watch: {\n    value: function value(val) {\n      this.stateValue = val;\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      if (_this.autoFocus) {\n        _this.focus();\n      }\n    });\n  },\n\n  methods: {\n    setValue: function setValue(value, callback) {\n      if (!hasProp(this, 'value')) {\n        this.stateValue = value;\n        this.$nextTick(function () {\n          callback && callback();\n        });\n      } else {\n        // 不在严格受控\n        // https://github.com/vueComponent/ant-design-vue/issues/2207，modal 是 新 new 实例，更新队列和当前不在同一个更新队列中\n        // this.$forceUpdate();\n      }\n    },\n    handleKeyDown: function handleKeyDown(e) {\n      if (e.keyCode === 13) {\n        this.$emit('pressEnter', e);\n      }\n      this.$emit('keydown', e);\n    },\n    onChange: function onChange(e) {\n      this.$emit('change.value', e.target.value);\n      this.$emit('change', e);\n      this.$emit('input', e);\n    },\n    handleChange: function handleChange(e) {\n      var _this2 = this;\n\n      var _e$target = e.target,\n          value = _e$target.value,\n          composing = _e$target.composing;\n\n      if ((e.isComposing || composing) && this.lazy || this.stateValue === value) return;\n\n      this.setValue(e.target.value, function () {\n        _this2.$refs.resizableTextArea.resizeTextarea();\n      });\n      resolveOnChange(this.$refs.resizableTextArea.$refs.textArea, e, this.onChange);\n    },\n    focus: function focus() {\n      this.$refs.resizableTextArea.$refs.textArea.focus();\n    },\n    blur: function blur() {\n      this.$refs.resizableTextArea.$refs.textArea.blur();\n    },\n    handleReset: function handleReset(e) {\n      var _this3 = this;\n\n      this.setValue('', function () {\n        _this3.$refs.resizableTextArea.renderTextArea();\n        _this3.focus();\n      });\n      resolveOnChange(this.$refs.resizableTextArea.$refs.textArea, e, this.onChange);\n    },\n    renderTextArea: function renderTextArea(prefixCls) {\n      var h = this.$createElement;\n\n      var props = getOptionProps(this);\n      var resizeProps = {\n        props: _extends({}, props, {\n          prefixCls: prefixCls\n        }),\n        on: _extends({}, getListeners(this), {\n          input: this.handleChange,\n          keydown: this.handleKeyDown\n        }),\n        attrs: this.$attrs\n      };\n      return h(ResizableTextArea, _mergeJSXProps([resizeProps, { ref: 'resizableTextArea' }]));\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    var stateValue = this.stateValue,\n        customizePrefixCls = this.prefixCls;\n\n    var getPrefixCls = this.configProvider.getPrefixCls;\n    var prefixCls = getPrefixCls('input', customizePrefixCls);\n\n    var props = {\n      props: _extends({}, getOptionProps(this), {\n        prefixCls: prefixCls,\n        inputType: 'text',\n        value: fixControlledValue(stateValue),\n        element: this.renderTextArea(prefixCls),\n        handleReset: this.handleReset\n      }),\n      on: getListeners(this)\n    };\n    return h(ClearableLabeledInput, props);\n  }\n};"]},"metadata":{},"sourceType":"module"}