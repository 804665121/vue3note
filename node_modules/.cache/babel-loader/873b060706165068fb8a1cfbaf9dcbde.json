{"ast":null,"code":"import _slicedToArray from 'babel-runtime/helpers/slicedToArray';\nimport Select from '../select';\nimport { Group, Button } from '../radio';\nimport PropTypes from '../_util/vue-types';\nimport { initDefaultProps } from '../_util/props-util';\nimport { ConfigConsumerProps } from '../config-provider/configConsumerProps';\nvar Option = Select.Option;\n\nfunction getMonthsLocale(value) {\n  var current = value.clone();\n  var localeData = value.localeData();\n  var months = [];\n\n  for (var i = 0; i < 12; i++) {\n    current.month(i);\n    months.push(localeData.monthsShort(current));\n  }\n\n  return months;\n}\n\nexport var HeaderProps = {\n  prefixCls: PropTypes.string,\n  locale: PropTypes.any,\n  fullscreen: PropTypes.boolean,\n  yearSelectOffset: PropTypes.number,\n  yearSelectTotal: PropTypes.number,\n  type: PropTypes.string,\n  // onValueChange: PropTypes.(value: moment.Moment) => void,\n  // onTypeChange: PropTypes.(type: string) => void,\n  value: PropTypes.any,\n  validRange: PropTypes.array,\n  headerRender: PropTypes.func\n};\nexport default {\n  props: initDefaultProps(HeaderProps, {\n    yearSelectOffset: 10,\n    yearSelectTotal: 20\n  }),\n  inject: {\n    configProvider: {\n      'default': function _default() {\n        return ConfigConsumerProps;\n      }\n    }\n  },\n  // private calenderHeaderNode: HTMLDivElement;\n  methods: {\n    getYearSelectElement: function getYearSelectElement(prefixCls, year) {\n      var _this = this;\n\n      var h = this.$createElement;\n      var yearSelectOffset = this.yearSelectOffset,\n          yearSelectTotal = this.yearSelectTotal,\n          _locale = this.locale,\n          locale = _locale === undefined ? {} : _locale,\n          fullscreen = this.fullscreen,\n          validRange = this.validRange;\n      var start = year - yearSelectOffset;\n      var end = start + yearSelectTotal;\n\n      if (validRange) {\n        start = validRange[0].get('year');\n        end = validRange[1].get('year') + 1;\n      }\n\n      var suffix = locale.year === '年' ? '年' : '';\n      var options = [];\n\n      for (var index = start; index < end; index++) {\n        options.push(h(Option, {\n          key: '' + index\n        }, [index + suffix]));\n      }\n\n      return h(Select, {\n        attrs: {\n          size: fullscreen ? 'default' : 'small',\n          dropdownMatchSelectWidth: false,\n          value: String(year),\n          getPopupContainer: function getPopupContainer() {\n            return _this.getCalenderHeaderNode();\n          }\n        },\n        'class': prefixCls + '-year-select',\n        on: {\n          'change': this.onYearChange\n        }\n      }, [options]);\n    },\n    getMonthSelectElement: function getMonthSelectElement(prefixCls, month, months) {\n      var _this2 = this;\n\n      var h = this.$createElement;\n      var fullscreen = this.fullscreen,\n          validRange = this.validRange,\n          value = this.value;\n      var options = [];\n      var start = 0;\n      var end = 12;\n\n      if (validRange) {\n        var _validRange = _slicedToArray(validRange, 2),\n            rangeStart = _validRange[0],\n            rangeEnd = _validRange[1];\n\n        var currentYear = value.get('year');\n\n        if (rangeEnd.get('year') === currentYear) {\n          end = rangeEnd.get('month') + 1;\n        }\n\n        if (rangeStart.get('year') === currentYear) {\n          start = rangeStart.get('month');\n        }\n      }\n\n      for (var index = start; index < end; index++) {\n        options.push(h(Option, {\n          key: '' + index\n        }, [months[index]]));\n      }\n\n      return h(Select, {\n        attrs: {\n          size: fullscreen ? 'default' : 'small',\n          dropdownMatchSelectWidth: false,\n          value: String(month),\n          getPopupContainer: function getPopupContainer() {\n            return _this2.getCalenderHeaderNode();\n          }\n        },\n        'class': prefixCls + '-month-select',\n        on: {\n          'change': this.onMonthChange\n        }\n      }, [options]);\n    },\n    onYearChange: function onYearChange(year) {\n      var value = this.value,\n          validRange = this.validRange;\n      var newValue = value.clone();\n      newValue.year(parseInt(year, 10)); // switch the month so that it remains within range when year changes\n\n      if (validRange) {\n        var _validRange2 = _slicedToArray(validRange, 2),\n            start = _validRange2[0],\n            end = _validRange2[1];\n\n        var newYear = newValue.get('year');\n        var newMonth = newValue.get('month');\n\n        if (newYear === end.get('year') && newMonth > end.get('month')) {\n          newValue.month(end.get('month'));\n        }\n\n        if (newYear === start.get('year') && newMonth < start.get('month')) {\n          newValue.month(start.get('month'));\n        }\n      }\n\n      this.$emit('valueChange', newValue);\n    },\n    onMonthChange: function onMonthChange(month) {\n      var newValue = this.value.clone();\n      newValue.month(parseInt(month, 10));\n      this.$emit('valueChange', newValue);\n    },\n    onInternalTypeChange: function onInternalTypeChange(e) {\n      this.onTypeChange(e.target.value);\n    },\n    onTypeChange: function onTypeChange(val) {\n      this.$emit('typeChange', val);\n    },\n    getCalenderHeaderNode: function getCalenderHeaderNode() {\n      return this.$refs.calenderHeaderNode;\n    },\n    getMonthYearSelections: function getMonthYearSelections(getPrefixCls) {\n      var _$props = this.$props,\n          customizePrefixCls = _$props.prefixCls,\n          type = _$props.type,\n          value = _$props.value;\n      var prefixCls = getPrefixCls('fullcalendar', customizePrefixCls);\n      var yearReactNode = this.getYearSelectElement(prefixCls, value.year());\n      var monthReactNode = type === 'month' ? this.getMonthSelectElement(prefixCls, value.month(), getMonthsLocale(value)) : null;\n      return {\n        yearReactNode: yearReactNode,\n        monthReactNode: monthReactNode\n      };\n    },\n    getTypeSwitch: function getTypeSwitch() {\n      var h = this.$createElement;\n      var _$props2 = this.$props,\n          _$props2$locale = _$props2.locale,\n          locale = _$props2$locale === undefined ? {} : _$props2$locale,\n          type = _$props2.type,\n          fullscreen = _$props2.fullscreen;\n      var size = fullscreen ? 'default' : 'small';\n      return h(Group, {\n        on: {\n          'change': this.onInternalTypeChange\n        },\n        attrs: {\n          value: type,\n          size: size\n        }\n      }, [h(Button, {\n        attrs: {\n          value: 'month'\n        }\n      }, [locale.month]), h(Button, {\n        attrs: {\n          value: 'year'\n        }\n      }, [locale.year])]);\n    },\n    onValueChange: function onValueChange() {\n      this.$emit.apply(this, ['valueChange'].concat(Array.prototype.slice.call(arguments)));\n    },\n    headerRenderCustom: function headerRenderCustom(headerRender) {\n      var _$props3 = this.$props,\n          type = _$props3.type,\n          value = _$props3.value;\n      return headerRender({\n        value: value,\n        type: type || 'month',\n        onChange: this.onValueChange,\n        onTypeChange: this.onTypeChange\n      });\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    var customizePrefixCls = this.prefixCls,\n        headerRender = this.headerRender;\n    var getPrefixCls = this.configProvider.getPrefixCls;\n    var prefixCls = getPrefixCls('fullcalendar', customizePrefixCls);\n    var typeSwitch = this.getTypeSwitch();\n\n    var _getMonthYearSelectio = this.getMonthYearSelections(getPrefixCls),\n        yearReactNode = _getMonthYearSelectio.yearReactNode,\n        monthReactNode = _getMonthYearSelectio.monthReactNode;\n\n    return headerRender ? this.headerRenderCustom(headerRender) : h('div', {\n      'class': prefixCls + '-header',\n      ref: 'calenderHeaderNode'\n    }, [yearReactNode, monthReactNode, typeSwitch]);\n  }\n};","map":{"version":3,"sources":["/Users/liulu/刘璐/vue3/hello-vue3/node_modules/ant-design-vue/es/calendar/Header.js"],"names":["_slicedToArray","Select","Group","Button","PropTypes","initDefaultProps","ConfigConsumerProps","Option","getMonthsLocale","value","current","clone","localeData","months","i","month","push","monthsShort","HeaderProps","prefixCls","string","locale","any","fullscreen","boolean","yearSelectOffset","number","yearSelectTotal","type","validRange","array","headerRender","func","props","inject","configProvider","_default","methods","getYearSelectElement","year","_this","h","$createElement","_locale","undefined","start","end","get","suffix","options","index","key","attrs","size","dropdownMatchSelectWidth","String","getPopupContainer","getCalenderHeaderNode","on","onYearChange","getMonthSelectElement","_this2","_validRange","rangeStart","rangeEnd","currentYear","onMonthChange","newValue","parseInt","_validRange2","newYear","newMonth","$emit","onInternalTypeChange","e","onTypeChange","target","val","$refs","calenderHeaderNode","getMonthYearSelections","getPrefixCls","_$props","$props","customizePrefixCls","yearReactNode","monthReactNode","getTypeSwitch","_$props2","_$props2$locale","onValueChange","apply","concat","Array","prototype","slice","call","arguments","headerRenderCustom","_$props3","onChange","render","typeSwitch","_getMonthYearSelectio","ref"],"mappings":"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","sourcesContent":["import _slicedToArray from 'babel-runtime/helpers/slicedToArray';\nimport Select from '../select';\nimport { Group, Button } from '../radio';\nimport PropTypes from '../_util/vue-types';\nimport { initDefaultProps } from '../_util/props-util';\nimport { ConfigConsumerProps } from '../config-provider/configConsumerProps';\n\nvar Option = Select.Option;\n\n\nfunction getMonthsLocale(value) {\n  var current = value.clone();\n  var localeData = value.localeData();\n  var months = [];\n  for (var i = 0; i < 12; i++) {\n    current.month(i);\n    months.push(localeData.monthsShort(current));\n  }\n  return months;\n}\n\nexport var HeaderProps = {\n  prefixCls: PropTypes.string,\n  locale: PropTypes.any,\n  fullscreen: PropTypes.boolean,\n  yearSelectOffset: PropTypes.number,\n  yearSelectTotal: PropTypes.number,\n  type: PropTypes.string,\n  // onValueChange: PropTypes.(value: moment.Moment) => void,\n  // onTypeChange: PropTypes.(type: string) => void,\n  value: PropTypes.any,\n  validRange: PropTypes.array,\n  headerRender: PropTypes.func\n};\n\nexport default {\n  props: initDefaultProps(HeaderProps, {\n    yearSelectOffset: 10,\n    yearSelectTotal: 20\n  }),\n  inject: {\n    configProvider: { 'default': function _default() {\n        return ConfigConsumerProps;\n      } }\n  },\n  // private calenderHeaderNode: HTMLDivElement;\n  methods: {\n    getYearSelectElement: function getYearSelectElement(prefixCls, year) {\n      var _this = this;\n\n      var h = this.$createElement;\n      var yearSelectOffset = this.yearSelectOffset,\n          yearSelectTotal = this.yearSelectTotal,\n          _locale = this.locale,\n          locale = _locale === undefined ? {} : _locale,\n          fullscreen = this.fullscreen,\n          validRange = this.validRange;\n\n      var start = year - yearSelectOffset;\n      var end = start + yearSelectTotal;\n      if (validRange) {\n        start = validRange[0].get('year');\n        end = validRange[1].get('year') + 1;\n      }\n      var suffix = locale.year === '年' ? '年' : '';\n\n      var options = [];\n      for (var index = start; index < end; index++) {\n        options.push(h(\n          Option,\n          { key: '' + index },\n          [index + suffix]\n        ));\n      }\n      return h(\n        Select,\n        {\n          attrs: {\n            size: fullscreen ? 'default' : 'small',\n            dropdownMatchSelectWidth: false,\n\n            value: String(year),\n            getPopupContainer: function getPopupContainer() {\n              return _this.getCalenderHeaderNode();\n            }\n          },\n          'class': prefixCls + '-year-select',\n          on: {\n            'change': this.onYearChange\n          }\n        },\n        [options]\n      );\n    },\n    getMonthSelectElement: function getMonthSelectElement(prefixCls, month, months) {\n      var _this2 = this;\n\n      var h = this.$createElement;\n      var fullscreen = this.fullscreen,\n          validRange = this.validRange,\n          value = this.value;\n\n      var options = [];\n      var start = 0;\n      var end = 12;\n      if (validRange) {\n        var _validRange = _slicedToArray(validRange, 2),\n            rangeStart = _validRange[0],\n            rangeEnd = _validRange[1];\n\n        var currentYear = value.get('year');\n        if (rangeEnd.get('year') === currentYear) {\n          end = rangeEnd.get('month') + 1;\n        }\n        if (rangeStart.get('year') === currentYear) {\n          start = rangeStart.get('month');\n        }\n      }\n      for (var index = start; index < end; index++) {\n        options.push(h(\n          Option,\n          { key: '' + index },\n          [months[index]]\n        ));\n      }\n\n      return h(\n        Select,\n        {\n          attrs: {\n            size: fullscreen ? 'default' : 'small',\n            dropdownMatchSelectWidth: false,\n\n            value: String(month),\n\n            getPopupContainer: function getPopupContainer() {\n              return _this2.getCalenderHeaderNode();\n            }\n          },\n          'class': prefixCls + '-month-select', on: {\n            'change': this.onMonthChange\n          }\n        },\n        [options]\n      );\n    },\n    onYearChange: function onYearChange(year) {\n      var value = this.value,\n          validRange = this.validRange;\n\n      var newValue = value.clone();\n      newValue.year(parseInt(year, 10));\n      // switch the month so that it remains within range when year changes\n      if (validRange) {\n        var _validRange2 = _slicedToArray(validRange, 2),\n            start = _validRange2[0],\n            end = _validRange2[1];\n\n        var newYear = newValue.get('year');\n        var newMonth = newValue.get('month');\n        if (newYear === end.get('year') && newMonth > end.get('month')) {\n          newValue.month(end.get('month'));\n        }\n        if (newYear === start.get('year') && newMonth < start.get('month')) {\n          newValue.month(start.get('month'));\n        }\n      }\n      this.$emit('valueChange', newValue);\n    },\n    onMonthChange: function onMonthChange(month) {\n      var newValue = this.value.clone();\n      newValue.month(parseInt(month, 10));\n      this.$emit('valueChange', newValue);\n    },\n    onInternalTypeChange: function onInternalTypeChange(e) {\n      this.onTypeChange(e.target.value);\n    },\n    onTypeChange: function onTypeChange(val) {\n      this.$emit('typeChange', val);\n    },\n    getCalenderHeaderNode: function getCalenderHeaderNode() {\n      return this.$refs.calenderHeaderNode;\n    },\n    getMonthYearSelections: function getMonthYearSelections(getPrefixCls) {\n      var _$props = this.$props,\n          customizePrefixCls = _$props.prefixCls,\n          type = _$props.type,\n          value = _$props.value;\n\n\n      var prefixCls = getPrefixCls('fullcalendar', customizePrefixCls);\n      var yearReactNode = this.getYearSelectElement(prefixCls, value.year());\n      var monthReactNode = type === 'month' ? this.getMonthSelectElement(prefixCls, value.month(), getMonthsLocale(value)) : null;\n      return {\n        yearReactNode: yearReactNode,\n        monthReactNode: monthReactNode\n      };\n    },\n    getTypeSwitch: function getTypeSwitch() {\n      var h = this.$createElement;\n      var _$props2 = this.$props,\n          _$props2$locale = _$props2.locale,\n          locale = _$props2$locale === undefined ? {} : _$props2$locale,\n          type = _$props2.type,\n          fullscreen = _$props2.fullscreen;\n\n      var size = fullscreen ? 'default' : 'small';\n      return h(\n        Group,\n        {\n          on: {\n            'change': this.onInternalTypeChange\n          },\n          attrs: { value: type, size: size }\n        },\n        [h(\n          Button,\n          {\n            attrs: { value: 'month' }\n          },\n          [locale.month]\n        ), h(\n          Button,\n          {\n            attrs: { value: 'year' }\n          },\n          [locale.year]\n        )]\n      );\n    },\n    onValueChange: function onValueChange() {\n      this.$emit.apply(this, ['valueChange'].concat(Array.prototype.slice.call(arguments)));\n    },\n    headerRenderCustom: function headerRenderCustom(headerRender) {\n      var _$props3 = this.$props,\n          type = _$props3.type,\n          value = _$props3.value;\n\n      return headerRender({\n        value: value,\n        type: type || 'month',\n        onChange: this.onValueChange,\n        onTypeChange: this.onTypeChange\n      });\n    }\n  },\n\n  render: function render() {\n    var h = arguments[0];\n    var customizePrefixCls = this.prefixCls,\n        headerRender = this.headerRender;\n\n    var getPrefixCls = this.configProvider.getPrefixCls;\n    var prefixCls = getPrefixCls('fullcalendar', customizePrefixCls);\n    var typeSwitch = this.getTypeSwitch();\n\n    var _getMonthYearSelectio = this.getMonthYearSelections(getPrefixCls),\n        yearReactNode = _getMonthYearSelectio.yearReactNode,\n        monthReactNode = _getMonthYearSelectio.monthReactNode;\n\n    return headerRender ? this.headerRenderCustom(headerRender) : h(\n      'div',\n      { 'class': prefixCls + '-header', ref: 'calenderHeaderNode' },\n      [yearReactNode, monthReactNode, typeSwitch]\n    );\n  }\n};"]},"metadata":{},"sourceType":"module"}