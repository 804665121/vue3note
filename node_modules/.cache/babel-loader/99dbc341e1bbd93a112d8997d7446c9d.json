{"ast":null,"code":"import PropTypes from '../../_util/vue-types';\nimport BaseMixin from '../../_util/BaseMixin';\nimport addEventListener from '../../vc-util/Dom/addEventListener';\nimport { initDefaultProps } from '../../_util/props-util';\nimport warning from '../../_util/warning';\nimport debounce from 'lodash/debounce';\nimport throttle from 'lodash/throttle';\nimport parentScroll from './utils/parentScroll';\nimport inViewport from './utils/inViewport';\nvar lazyLoadProps = {\n  debounce: PropTypes.bool,\n  elementType: PropTypes.string,\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  offset: PropTypes.number,\n  offsetBottom: PropTypes.number,\n  offsetHorizontal: PropTypes.number,\n  offsetLeft: PropTypes.number,\n  offsetRight: PropTypes.number,\n  offsetTop: PropTypes.number,\n  offsetVertical: PropTypes.number,\n  threshold: PropTypes.number,\n  throttle: PropTypes.number,\n  width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  _propsSymbol: PropTypes.any\n};\nexport default {\n  name: 'LazyLoad',\n  mixins: [BaseMixin],\n  props: initDefaultProps(lazyLoadProps, {\n    elementType: 'div',\n    debounce: true,\n    offset: 0,\n    offsetBottom: 0,\n    offsetHorizontal: 0,\n    offsetLeft: 0,\n    offsetRight: 0,\n    offsetTop: 0,\n    offsetVertical: 0,\n    throttle: 250\n  }),\n  data: function data() {\n    if (this.throttle > 0) {\n      if (this.debounce) {\n        this.lazyLoadHandler = debounce(this.lazyLoadHandler, this.throttle);\n      } else {\n        this.lazyLoadHandler = throttle(this.lazyLoadHandler, this.throttle);\n      }\n    }\n\n    return {\n      visible: false\n    };\n  },\n  watch: {\n    _propsSymbol: function _propsSymbol() {\n      if (!this.visible) {\n        this.lazyLoadHandler();\n      }\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      _this._mounted = true;\n\n      var eventNode = _this.getEventNode();\n\n      _this.lazyLoadHandler();\n\n      if (_this.lazyLoadHandler.flush) {\n        _this.lazyLoadHandler.flush();\n      }\n\n      _this.resizeHander = addEventListener(window, 'resize', _this.lazyLoadHandler);\n      _this.scrollHander = addEventListener(eventNode, 'scroll', _this.lazyLoadHandler);\n    });\n  },\n  beforeDestroy: function beforeDestroy() {\n    this._mounted = false;\n\n    if (this.lazyLoadHandler.cancel) {\n      this.lazyLoadHandler.cancel();\n    }\n\n    this.detachListeners();\n  },\n  methods: {\n    getEventNode: function getEventNode() {\n      return parentScroll(this.$el);\n    },\n    getOffset: function getOffset() {\n      var _$props = this.$props,\n          offset = _$props.offset,\n          offsetVertical = _$props.offsetVertical,\n          offsetHorizontal = _$props.offsetHorizontal,\n          offsetTop = _$props.offsetTop,\n          offsetBottom = _$props.offsetBottom,\n          offsetLeft = _$props.offsetLeft,\n          offsetRight = _$props.offsetRight,\n          threshold = _$props.threshold;\n\n      var _offsetAll = threshold || offset;\n\n      var _offsetVertical = offsetVertical || _offsetAll;\n\n      var _offsetHorizontal = offsetHorizontal || _offsetAll;\n\n      return {\n        top: offsetTop || _offsetVertical,\n        bottom: offsetBottom || _offsetVertical,\n        left: offsetLeft || _offsetHorizontal,\n        right: offsetRight || _offsetHorizontal\n      };\n    },\n    lazyLoadHandler: function lazyLoadHandler() {\n      var _this2 = this;\n\n      if (!this._mounted) {\n        return;\n      }\n\n      var offset = this.getOffset();\n      var node = this.$el;\n      var eventNode = this.getEventNode();\n\n      if (inViewport(node, eventNode, offset)) {\n        this.setState({\n          visible: true\n        }, function () {\n          _this2.__emit('contentVisible');\n        });\n        this.detachListeners();\n      }\n    },\n    detachListeners: function detachListeners() {\n      this.resizeHander && this.resizeHander.remove();\n      this.scrollHander && this.scrollHander.remove();\n    }\n  },\n  render: function render(createElement) {\n    var children = this.$slots['default'];\n\n    if (children.length !== 1) {\n      warning(false, 'lazyLoad组件只能包含一个子元素');\n      return null;\n    }\n\n    var _$props2 = this.$props,\n        height = _$props2.height,\n        width = _$props2.width,\n        elementType = _$props2.elementType;\n    var visible = this.visible;\n    var elStyles = {\n      height: typeof height === 'number' ? height + 'px' : height,\n      width: typeof width === 'number' ? width + 'px' : width\n    };\n    var elClasses = {\n      LazyLoad: true,\n      'is-visible': visible\n    };\n    return createElement(elementType, {\n      'class': elClasses,\n      style: elStyles\n    }, [visible ? children[0] : null]);\n  }\n};","map":{"version":3,"sources":["/Users/liulu/刘璐/vue3/hello-vue3/node_modules/ant-design-vue/es/vc-lazy-load/src/LazyLoad.js"],"names":["PropTypes","BaseMixin","addEventListener","initDefaultProps","warning","debounce","throttle","parentScroll","inViewport","lazyLoadProps","bool","elementType","string","height","oneOfType","number","offset","offsetBottom","offsetHorizontal","offsetLeft","offsetRight","offsetTop","offsetVertical","threshold","width","_propsSymbol","any","name","mixins","props","data","lazyLoadHandler","visible","watch","mounted","_this","$nextTick","_mounted","eventNode","getEventNode","flush","resizeHander","window","scrollHander","beforeDestroy","cancel","detachListeners","methods","$el","getOffset","_$props","$props","_offsetAll","_offsetVertical","_offsetHorizontal","top","bottom","left","right","_this2","node","setState","__emit","remove","render","createElement","children","$slots","length","_$props2","elStyles","elClasses","LazyLoad","style"],"mappings":"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","sourcesContent":["import PropTypes from '../../_util/vue-types';\nimport BaseMixin from '../../_util/BaseMixin';\nimport addEventListener from '../../vc-util/Dom/addEventListener';\nimport { initDefaultProps } from '../../_util/props-util';\nimport warning from '../../_util/warning';\nimport debounce from 'lodash/debounce';\nimport throttle from 'lodash/throttle';\nimport parentScroll from './utils/parentScroll';\nimport inViewport from './utils/inViewport';\n\nvar lazyLoadProps = {\n  debounce: PropTypes.bool,\n  elementType: PropTypes.string,\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  offset: PropTypes.number,\n  offsetBottom: PropTypes.number,\n  offsetHorizontal: PropTypes.number,\n  offsetLeft: PropTypes.number,\n  offsetRight: PropTypes.number,\n  offsetTop: PropTypes.number,\n  offsetVertical: PropTypes.number,\n  threshold: PropTypes.number,\n  throttle: PropTypes.number,\n  width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  _propsSymbol: PropTypes.any\n};\n\nexport default {\n  name: 'LazyLoad',\n  mixins: [BaseMixin],\n  props: initDefaultProps(lazyLoadProps, {\n    elementType: 'div',\n    debounce: true,\n    offset: 0,\n    offsetBottom: 0,\n    offsetHorizontal: 0,\n    offsetLeft: 0,\n    offsetRight: 0,\n    offsetTop: 0,\n    offsetVertical: 0,\n    throttle: 250\n  }),\n  data: function data() {\n    if (this.throttle > 0) {\n      if (this.debounce) {\n        this.lazyLoadHandler = debounce(this.lazyLoadHandler, this.throttle);\n      } else {\n        this.lazyLoadHandler = throttle(this.lazyLoadHandler, this.throttle);\n      }\n    }\n    return {\n      visible: false\n    };\n  },\n\n  watch: {\n    _propsSymbol: function _propsSymbol() {\n      if (!this.visible) {\n        this.lazyLoadHandler();\n      }\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      _this._mounted = true;\n      var eventNode = _this.getEventNode();\n\n      _this.lazyLoadHandler();\n\n      if (_this.lazyLoadHandler.flush) {\n        _this.lazyLoadHandler.flush();\n      }\n      _this.resizeHander = addEventListener(window, 'resize', _this.lazyLoadHandler);\n      _this.scrollHander = addEventListener(eventNode, 'scroll', _this.lazyLoadHandler);\n    });\n  },\n  beforeDestroy: function beforeDestroy() {\n    this._mounted = false;\n    if (this.lazyLoadHandler.cancel) {\n      this.lazyLoadHandler.cancel();\n    }\n\n    this.detachListeners();\n  },\n\n  methods: {\n    getEventNode: function getEventNode() {\n      return parentScroll(this.$el);\n    },\n    getOffset: function getOffset() {\n      var _$props = this.$props,\n          offset = _$props.offset,\n          offsetVertical = _$props.offsetVertical,\n          offsetHorizontal = _$props.offsetHorizontal,\n          offsetTop = _$props.offsetTop,\n          offsetBottom = _$props.offsetBottom,\n          offsetLeft = _$props.offsetLeft,\n          offsetRight = _$props.offsetRight,\n          threshold = _$props.threshold;\n\n\n      var _offsetAll = threshold || offset;\n      var _offsetVertical = offsetVertical || _offsetAll;\n      var _offsetHorizontal = offsetHorizontal || _offsetAll;\n\n      return {\n        top: offsetTop || _offsetVertical,\n        bottom: offsetBottom || _offsetVertical,\n        left: offsetLeft || _offsetHorizontal,\n        right: offsetRight || _offsetHorizontal\n      };\n    },\n    lazyLoadHandler: function lazyLoadHandler() {\n      var _this2 = this;\n\n      if (!this._mounted) {\n        return;\n      }\n      var offset = this.getOffset();\n      var node = this.$el;\n      var eventNode = this.getEventNode();\n\n      if (inViewport(node, eventNode, offset)) {\n        this.setState({ visible: true }, function () {\n          _this2.__emit('contentVisible');\n        });\n        this.detachListeners();\n      }\n    },\n    detachListeners: function detachListeners() {\n      this.resizeHander && this.resizeHander.remove();\n      this.scrollHander && this.scrollHander.remove();\n    }\n  },\n  render: function render(createElement) {\n    var children = this.$slots['default'];\n    if (children.length !== 1) {\n      warning(false, 'lazyLoad组件只能包含一个子元素');\n      return null;\n    }\n    var _$props2 = this.$props,\n        height = _$props2.height,\n        width = _$props2.width,\n        elementType = _$props2.elementType;\n    var visible = this.visible;\n\n\n    var elStyles = {\n      height: typeof height === 'number' ? height + 'px' : height,\n      width: typeof width === 'number' ? width + 'px' : width\n    };\n    var elClasses = {\n      LazyLoad: true,\n      'is-visible': visible\n    };\n\n    return createElement(elementType, {\n      'class': elClasses,\n      style: elStyles\n    }, [visible ? children[0] : null]);\n  }\n};"]},"metadata":{},"sourceType":"module"}