{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _toConsumableArray from 'babel-runtime/helpers/toConsumableArray';\nimport { getComponentFromProp, getListeners } from '../_util/props-util';\nimport PropTypes from '../_util/vue-types';\nimport Trigger from '../vc-trigger';\nimport Menus from './Menus';\nimport KeyCode from '../_util/KeyCode';\nimport arrayTreeFilter from 'array-tree-filter';\nimport shallowEqualArrays from 'shallow-equal/arrays';\nimport { hasProp, getEvents, getSlot } from '../_util/props-util';\nimport BaseMixin from '../_util/BaseMixin';\nimport { cloneElement } from '../_util/vnode';\nvar BUILT_IN_PLACEMENTS = {\n  bottomLeft: {\n    points: ['tl', 'bl'],\n    offset: [0, 4],\n    overflow: {\n      adjustX: 1,\n      adjustY: 1\n    }\n  },\n  topLeft: {\n    points: ['bl', 'tl'],\n    offset: [0, -4],\n    overflow: {\n      adjustX: 1,\n      adjustY: 1\n    }\n  },\n  bottomRight: {\n    points: ['tr', 'br'],\n    offset: [0, 4],\n    overflow: {\n      adjustX: 1,\n      adjustY: 1\n    }\n  },\n  topRight: {\n    points: ['br', 'tr'],\n    offset: [0, -4],\n    overflow: {\n      adjustX: 1,\n      adjustY: 1\n    }\n  }\n};\nexport default {\n  mixins: [BaseMixin],\n  model: {\n    prop: 'value',\n    event: 'change'\n  },\n  props: {\n    value: PropTypes.array,\n    defaultValue: PropTypes.array,\n    options: PropTypes.array,\n    // onChange: PropTypes.func,\n    // onPopupVisibleChange: PropTypes.func,\n    popupVisible: PropTypes.bool,\n    disabled: PropTypes.bool.def(false),\n    transitionName: PropTypes.string.def(''),\n    popupClassName: PropTypes.string.def(''),\n    popupStyle: PropTypes.object.def(function () {\n      return {};\n    }),\n    popupPlacement: PropTypes.string.def('bottomLeft'),\n    prefixCls: PropTypes.string.def('rc-cascader'),\n    dropdownMenuColumnStyle: PropTypes.object,\n    builtinPlacements: PropTypes.object.def(BUILT_IN_PLACEMENTS),\n    loadData: PropTypes.func,\n    changeOnSelect: PropTypes.bool,\n    // onKeyDown: PropTypes.func,\n    expandTrigger: PropTypes.string.def('click'),\n    fieldNames: PropTypes.object.def(function () {\n      return {\n        label: 'label',\n        value: 'value',\n        children: 'children'\n      };\n    }),\n    expandIcon: PropTypes.any,\n    loadingIcon: PropTypes.any,\n    getPopupContainer: PropTypes.func\n  },\n  data: function data() {\n    var initialValue = [];\n    var value = this.value,\n        defaultValue = this.defaultValue,\n        popupVisible = this.popupVisible;\n\n    if (hasProp(this, 'value')) {\n      initialValue = value || [];\n    } else if (hasProp(this, 'defaultValue')) {\n      initialValue = defaultValue || [];\n    } // warning(!('filedNames' in props),\n    //   '`filedNames` of Cascader is a typo usage and deprecated, please use `fieldNames` instead.');\n\n\n    return {\n      sPopupVisible: popupVisible,\n      sActiveValue: initialValue,\n      sValue: initialValue\n    };\n  },\n  watch: {\n    value: function value(val, oldValue) {\n      if (!shallowEqualArrays(val, oldValue)) {\n        var newValues = {\n          sValue: val || []\n        }; // allow activeValue diff from value\n        // https://github.com/ant-design/ant-design/issues/2767\n\n        if (!hasProp(this, 'loadData')) {\n          newValues.sActiveValue = val || [];\n        }\n\n        this.setState(newValues);\n      }\n    },\n    popupVisible: function popupVisible(val) {\n      this.setState({\n        sPopupVisible: val\n      });\n    }\n  },\n  methods: {\n    getPopupDOMNode: function getPopupDOMNode() {\n      return this.$refs.trigger.getPopupDomNode();\n    },\n    getFieldName: function getFieldName(name) {\n      var defaultFieldNames = this.defaultFieldNames,\n          fieldNames = this.fieldNames;\n      return fieldNames[name] || defaultFieldNames[name];\n    },\n    getFieldNames: function getFieldNames() {\n      return this.fieldNames;\n    },\n    getCurrentLevelOptions: function getCurrentLevelOptions() {\n      var _this = this;\n\n      var _options = this.options,\n          options = _options === undefined ? [] : _options,\n          _sActiveValue = this.sActiveValue,\n          sActiveValue = _sActiveValue === undefined ? [] : _sActiveValue;\n      var result = arrayTreeFilter(options, function (o, level) {\n        return o[_this.getFieldName('value')] === sActiveValue[level];\n      }, {\n        childrenKeyName: this.getFieldName('children')\n      });\n\n      if (result[result.length - 2]) {\n        return result[result.length - 2][this.getFieldName('children')];\n      }\n\n      return [].concat(_toConsumableArray(options)).filter(function (o) {\n        return !o.disabled;\n      });\n    },\n    getActiveOptions: function getActiveOptions(activeValue) {\n      var _this2 = this;\n\n      return arrayTreeFilter(this.options || [], function (o, level) {\n        return o[_this2.getFieldName('value')] === activeValue[level];\n      }, {\n        childrenKeyName: this.getFieldName('children')\n      });\n    },\n    setPopupVisible: function setPopupVisible(popupVisible) {\n      if (!hasProp(this, 'popupVisible')) {\n        this.setState({\n          sPopupVisible: popupVisible\n        });\n      } // sync activeValue with value when panel open\n\n\n      if (popupVisible && !this.sPopupVisible) {\n        this.setState({\n          sActiveValue: this.sValue\n        });\n      }\n\n      this.__emit('popupVisibleChange', popupVisible);\n    },\n    handleChange: function handleChange(options, setProps, e) {\n      var _this3 = this;\n\n      if (e.type !== 'keydown' || e.keyCode === KeyCode.ENTER) {\n        this.__emit('change', options.map(function (o) {\n          return o[_this3.getFieldName('value')];\n        }), options);\n\n        this.setPopupVisible(setProps.visible);\n      }\n    },\n    handlePopupVisibleChange: function handlePopupVisibleChange(popupVisible) {\n      this.setPopupVisible(popupVisible);\n    },\n    handleMenuSelect: function handleMenuSelect(targetOption, menuIndex, e) {\n      // Keep focused state for keyboard support\n      var triggerNode = this.$refs.trigger.getRootDomNode();\n\n      if (triggerNode && triggerNode.focus) {\n        triggerNode.focus();\n      }\n\n      var changeOnSelect = this.changeOnSelect,\n          loadData = this.loadData,\n          expandTrigger = this.expandTrigger;\n\n      if (!targetOption || targetOption.disabled) {\n        return;\n      }\n\n      var sActiveValue = this.sActiveValue;\n      sActiveValue = sActiveValue.slice(0, menuIndex + 1);\n      sActiveValue[menuIndex] = targetOption[this.getFieldName('value')];\n      var activeOptions = this.getActiveOptions(sActiveValue);\n\n      if (targetOption.isLeaf === false && !targetOption[this.getFieldName('children')] && loadData) {\n        if (changeOnSelect) {\n          this.handleChange(activeOptions, {\n            visible: true\n          }, e);\n        }\n\n        this.setState({\n          sActiveValue: sActiveValue\n        });\n        loadData(activeOptions);\n        return;\n      }\n\n      var newState = {};\n\n      if (!targetOption[this.getFieldName('children')] || !targetOption[this.getFieldName('children')].length) {\n        this.handleChange(activeOptions, {\n          visible: false\n        }, e); // set value to activeValue when select leaf option\n\n        newState.sValue = sActiveValue; // add e.type judgement to prevent `onChange` being triggered by mouseEnter\n      } else if (changeOnSelect && (e.type === 'click' || e.type === 'keydown')) {\n        if (expandTrigger === 'hover') {\n          this.handleChange(activeOptions, {\n            visible: false\n          }, e);\n        } else {\n          this.handleChange(activeOptions, {\n            visible: true\n          }, e);\n        } // set value to activeValue on every select\n\n\n        newState.sValue = sActiveValue;\n      }\n\n      newState.sActiveValue = sActiveValue; //  not change the value by keyboard\n\n      if (hasProp(this, 'value') || e.type === 'keydown' && e.keyCode !== KeyCode.ENTER) {\n        delete newState.sValue;\n      }\n\n      this.setState(newState);\n    },\n    handleItemDoubleClick: function handleItemDoubleClick() {\n      var changeOnSelect = this.$props.changeOnSelect;\n\n      if (changeOnSelect) {\n        this.setPopupVisible(false);\n      }\n    },\n    handleKeyDown: function handleKeyDown(e) {\n      var _this4 = this;\n\n      var $slots = this.$slots;\n      var children = $slots['default'] && $slots['default'][0]; // https://github.com/ant-design/ant-design/issues/6717\n      // Don't bind keyboard support when children specify the onKeyDown\n\n      if (children) {\n        var keydown = getEvents(children).keydown;\n\n        if (keydown) {\n          keydown(e);\n          return;\n        }\n      }\n\n      var activeValue = [].concat(_toConsumableArray(this.sActiveValue));\n      var currentLevel = activeValue.length - 1 < 0 ? 0 : activeValue.length - 1;\n      var currentOptions = this.getCurrentLevelOptions();\n      var currentIndex = currentOptions.map(function (o) {\n        return o[_this4.getFieldName('value')];\n      }).indexOf(activeValue[currentLevel]);\n\n      if (e.keyCode !== KeyCode.DOWN && e.keyCode !== KeyCode.UP && e.keyCode !== KeyCode.LEFT && e.keyCode !== KeyCode.RIGHT && e.keyCode !== KeyCode.ENTER && e.keyCode !== KeyCode.SPACE && e.keyCode !== KeyCode.BACKSPACE && e.keyCode !== KeyCode.ESC && e.keyCode !== KeyCode.TAB) {\n        return;\n      } // Press any keys above to reopen menu\n\n\n      if (!this.sPopupVisible && e.keyCode !== KeyCode.BACKSPACE && e.keyCode !== KeyCode.LEFT && e.keyCode !== KeyCode.RIGHT && e.keyCode !== KeyCode.ESC && e.keyCode !== KeyCode.TAB) {\n        this.setPopupVisible(true);\n        return;\n      }\n\n      if (e.keyCode === KeyCode.DOWN || e.keyCode === KeyCode.UP) {\n        e.preventDefault();\n        var nextIndex = currentIndex;\n\n        if (nextIndex !== -1) {\n          if (e.keyCode === KeyCode.DOWN) {\n            nextIndex += 1;\n            nextIndex = nextIndex >= currentOptions.length ? 0 : nextIndex;\n          } else {\n            nextIndex -= 1;\n            nextIndex = nextIndex < 0 ? currentOptions.length - 1 : nextIndex;\n          }\n        } else {\n          nextIndex = 0;\n        }\n\n        activeValue[currentLevel] = currentOptions[nextIndex][this.getFieldName('value')];\n      } else if (e.keyCode === KeyCode.LEFT || e.keyCode === KeyCode.BACKSPACE) {\n        e.preventDefault();\n        activeValue.splice(activeValue.length - 1, 1);\n      } else if (e.keyCode === KeyCode.RIGHT) {\n        e.preventDefault();\n\n        if (currentOptions[currentIndex] && currentOptions[currentIndex][this.getFieldName('children')]) {\n          activeValue.push(currentOptions[currentIndex][this.getFieldName('children')][0][this.getFieldName('value')]);\n        }\n      } else if (e.keyCode === KeyCode.ESC || e.keyCode === KeyCode.TAB) {\n        this.setPopupVisible(false);\n        return;\n      }\n\n      if (!activeValue || activeValue.length === 0) {\n        this.setPopupVisible(false);\n      }\n\n      var activeOptions = this.getActiveOptions(activeValue);\n      var targetOption = activeOptions[activeOptions.length - 1];\n      this.handleMenuSelect(targetOption, activeOptions.length - 1, e);\n\n      this.__emit('keydown', e);\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    var $props = this.$props,\n        sActiveValue = this.sActiveValue,\n        handleMenuSelect = this.handleMenuSelect,\n        sPopupVisible = this.sPopupVisible,\n        handlePopupVisibleChange = this.handlePopupVisibleChange,\n        handleKeyDown = this.handleKeyDown;\n    var listeners = getListeners(this);\n\n    var prefixCls = $props.prefixCls,\n        transitionName = $props.transitionName,\n        popupClassName = $props.popupClassName,\n        _$props$options = $props.options,\n        options = _$props$options === undefined ? [] : _$props$options,\n        disabled = $props.disabled,\n        builtinPlacements = $props.builtinPlacements,\n        popupPlacement = $props.popupPlacement,\n        restProps = _objectWithoutProperties($props, ['prefixCls', 'transitionName', 'popupClassName', 'options', 'disabled', 'builtinPlacements', 'popupPlacement']); // Did not show popup when there is no options\n\n\n    var menus = h('div');\n    var emptyMenuClassName = '';\n\n    if (options && options.length > 0) {\n      var loadingIcon = getComponentFromProp(this, 'loadingIcon');\n      var expandIcon = getComponentFromProp(this, 'expandIcon') || '>';\n      var menusProps = {\n        props: _extends({}, $props, {\n          fieldNames: this.getFieldNames(),\n          defaultFieldNames: this.defaultFieldNames,\n          activeValue: sActiveValue,\n          visible: sPopupVisible,\n          loadingIcon: loadingIcon,\n          expandIcon: expandIcon\n        }),\n        on: _extends({}, listeners, {\n          select: handleMenuSelect,\n          itemDoubleClick: this.handleItemDoubleClick\n        })\n      };\n      menus = h(Menus, menusProps);\n    } else {\n      emptyMenuClassName = ' ' + prefixCls + '-menus-empty';\n    }\n\n    var triggerProps = {\n      props: _extends({}, restProps, {\n        disabled: disabled,\n        popupPlacement: popupPlacement,\n        builtinPlacements: builtinPlacements,\n        popupTransitionName: transitionName,\n        action: disabled ? [] : ['click'],\n        popupVisible: disabled ? false : sPopupVisible,\n        prefixCls: prefixCls + '-menus',\n        popupClassName: popupClassName + emptyMenuClassName\n      }),\n      on: _extends({}, listeners, {\n        popupVisibleChange: handlePopupVisibleChange\n      }),\n      ref: 'trigger'\n    };\n    var children = getSlot(this, 'default')[0];\n    return h(Trigger, triggerProps, [children && cloneElement(children, {\n      on: {\n        keydown: handleKeyDown\n      },\n      attrs: {\n        tabIndex: disabled ? undefined : 0\n      }\n    }), h('template', {\n      slot: 'popup'\n    }, [menus])]);\n  }\n};","map":{"version":3,"sources":["/Users/liulu/刘璐/vue3/hello-vue3/node_modules/ant-design-vue/es/vc-cascader/Cascader.js"],"names":["_extends","_objectWithoutProperties","_toConsumableArray","getComponentFromProp","getListeners","PropTypes","Trigger","Menus","KeyCode","arrayTreeFilter","shallowEqualArrays","hasProp","getEvents","getSlot","BaseMixin","cloneElement","BUILT_IN_PLACEMENTS","bottomLeft","points","offset","overflow","adjustX","adjustY","topLeft","bottomRight","topRight","mixins","model","prop","event","props","value","array","defaultValue","options","popupVisible","bool","disabled","def","transitionName","string","popupClassName","popupStyle","object","popupPlacement","prefixCls","dropdownMenuColumnStyle","builtinPlacements","loadData","func","changeOnSelect","expandTrigger","fieldNames","label","children","expandIcon","any","loadingIcon","getPopupContainer","data","initialValue","sPopupVisible","sActiveValue","sValue","watch","val","oldValue","newValues","setState","methods","getPopupDOMNode","$refs","trigger","getPopupDomNode","getFieldName","name","defaultFieldNames","getFieldNames","getCurrentLevelOptions","_this","_options","undefined","_sActiveValue","result","o","level","childrenKeyName","length","concat","filter","getActiveOptions","activeValue","_this2","setPopupVisible","__emit","handleChange","setProps","e","_this3","type","keyCode","ENTER","map","visible","handlePopupVisibleChange","handleMenuSelect","targetOption","menuIndex","triggerNode","getRootDomNode","focus","slice","activeOptions","isLeaf","newState","handleItemDoubleClick","$props","handleKeyDown","_this4","$slots","keydown","currentLevel","currentOptions","currentIndex","indexOf","DOWN","UP","LEFT","RIGHT","SPACE","BACKSPACE","ESC","TAB","preventDefault","nextIndex","splice","push","render","h","arguments","listeners","_$props$options","restProps","menus","emptyMenuClassName","menusProps","on","select","itemDoubleClick","triggerProps","popupTransitionName","action","popupVisibleChange","ref","attrs","tabIndex","slot"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _toConsumableArray from 'babel-runtime/helpers/toConsumableArray';\nimport { getComponentFromProp, getListeners } from '../_util/props-util';\nimport PropTypes from '../_util/vue-types';\nimport Trigger from '../vc-trigger';\nimport Menus from './Menus';\nimport KeyCode from '../_util/KeyCode';\nimport arrayTreeFilter from 'array-tree-filter';\nimport shallowEqualArrays from 'shallow-equal/arrays';\nimport { hasProp, getEvents, getSlot } from '../_util/props-util';\nimport BaseMixin from '../_util/BaseMixin';\nimport { cloneElement } from '../_util/vnode';\n\nvar BUILT_IN_PLACEMENTS = {\n  bottomLeft: {\n    points: ['tl', 'bl'],\n    offset: [0, 4],\n    overflow: {\n      adjustX: 1,\n      adjustY: 1\n    }\n  },\n  topLeft: {\n    points: ['bl', 'tl'],\n    offset: [0, -4],\n    overflow: {\n      adjustX: 1,\n      adjustY: 1\n    }\n  },\n  bottomRight: {\n    points: ['tr', 'br'],\n    offset: [0, 4],\n    overflow: {\n      adjustX: 1,\n      adjustY: 1\n    }\n  },\n  topRight: {\n    points: ['br', 'tr'],\n    offset: [0, -4],\n    overflow: {\n      adjustX: 1,\n      adjustY: 1\n    }\n  }\n};\n\nexport default {\n  mixins: [BaseMixin],\n  model: {\n    prop: 'value',\n    event: 'change'\n  },\n  props: {\n    value: PropTypes.array,\n    defaultValue: PropTypes.array,\n    options: PropTypes.array,\n    // onChange: PropTypes.func,\n    // onPopupVisibleChange: PropTypes.func,\n    popupVisible: PropTypes.bool,\n    disabled: PropTypes.bool.def(false),\n    transitionName: PropTypes.string.def(''),\n    popupClassName: PropTypes.string.def(''),\n    popupStyle: PropTypes.object.def(function () {\n      return {};\n    }),\n    popupPlacement: PropTypes.string.def('bottomLeft'),\n    prefixCls: PropTypes.string.def('rc-cascader'),\n    dropdownMenuColumnStyle: PropTypes.object,\n    builtinPlacements: PropTypes.object.def(BUILT_IN_PLACEMENTS),\n    loadData: PropTypes.func,\n    changeOnSelect: PropTypes.bool,\n    // onKeyDown: PropTypes.func,\n    expandTrigger: PropTypes.string.def('click'),\n    fieldNames: PropTypes.object.def(function () {\n      return {\n        label: 'label',\n        value: 'value',\n        children: 'children'\n      };\n    }),\n    expandIcon: PropTypes.any,\n    loadingIcon: PropTypes.any,\n    getPopupContainer: PropTypes.func\n  },\n  data: function data() {\n    var initialValue = [];\n    var value = this.value,\n        defaultValue = this.defaultValue,\n        popupVisible = this.popupVisible;\n\n    if (hasProp(this, 'value')) {\n      initialValue = value || [];\n    } else if (hasProp(this, 'defaultValue')) {\n      initialValue = defaultValue || [];\n    }\n    // warning(!('filedNames' in props),\n    //   '`filedNames` of Cascader is a typo usage and deprecated, please use `fieldNames` instead.');\n\n    return {\n      sPopupVisible: popupVisible,\n      sActiveValue: initialValue,\n      sValue: initialValue\n    };\n  },\n\n  watch: {\n    value: function value(val, oldValue) {\n      if (!shallowEqualArrays(val, oldValue)) {\n        var newValues = {\n          sValue: val || []\n        };\n        // allow activeValue diff from value\n        // https://github.com/ant-design/ant-design/issues/2767\n        if (!hasProp(this, 'loadData')) {\n          newValues.sActiveValue = val || [];\n        }\n        this.setState(newValues);\n      }\n    },\n    popupVisible: function popupVisible(val) {\n      this.setState({\n        sPopupVisible: val\n      });\n    }\n  },\n  methods: {\n    getPopupDOMNode: function getPopupDOMNode() {\n      return this.$refs.trigger.getPopupDomNode();\n    },\n    getFieldName: function getFieldName(name) {\n      var defaultFieldNames = this.defaultFieldNames,\n          fieldNames = this.fieldNames;\n\n      return fieldNames[name] || defaultFieldNames[name];\n    },\n    getFieldNames: function getFieldNames() {\n      return this.fieldNames;\n    },\n    getCurrentLevelOptions: function getCurrentLevelOptions() {\n      var _this = this;\n\n      var _options = this.options,\n          options = _options === undefined ? [] : _options,\n          _sActiveValue = this.sActiveValue,\n          sActiveValue = _sActiveValue === undefined ? [] : _sActiveValue;\n\n      var result = arrayTreeFilter(options, function (o, level) {\n        return o[_this.getFieldName('value')] === sActiveValue[level];\n      }, { childrenKeyName: this.getFieldName('children') });\n      if (result[result.length - 2]) {\n        return result[result.length - 2][this.getFieldName('children')];\n      }\n      return [].concat(_toConsumableArray(options)).filter(function (o) {\n        return !o.disabled;\n      });\n    },\n    getActiveOptions: function getActiveOptions(activeValue) {\n      var _this2 = this;\n\n      return arrayTreeFilter(this.options || [], function (o, level) {\n        return o[_this2.getFieldName('value')] === activeValue[level];\n      }, { childrenKeyName: this.getFieldName('children') });\n    },\n    setPopupVisible: function setPopupVisible(popupVisible) {\n      if (!hasProp(this, 'popupVisible')) {\n        this.setState({ sPopupVisible: popupVisible });\n      }\n      // sync activeValue with value when panel open\n      if (popupVisible && !this.sPopupVisible) {\n        this.setState({\n          sActiveValue: this.sValue\n        });\n      }\n      this.__emit('popupVisibleChange', popupVisible);\n    },\n    handleChange: function handleChange(options, setProps, e) {\n      var _this3 = this;\n\n      if (e.type !== 'keydown' || e.keyCode === KeyCode.ENTER) {\n        this.__emit('change', options.map(function (o) {\n          return o[_this3.getFieldName('value')];\n        }), options);\n        this.setPopupVisible(setProps.visible);\n      }\n    },\n    handlePopupVisibleChange: function handlePopupVisibleChange(popupVisible) {\n      this.setPopupVisible(popupVisible);\n    },\n    handleMenuSelect: function handleMenuSelect(targetOption, menuIndex, e) {\n      // Keep focused state for keyboard support\n      var triggerNode = this.$refs.trigger.getRootDomNode();\n      if (triggerNode && triggerNode.focus) {\n        triggerNode.focus();\n      }\n      var changeOnSelect = this.changeOnSelect,\n          loadData = this.loadData,\n          expandTrigger = this.expandTrigger;\n\n      if (!targetOption || targetOption.disabled) {\n        return;\n      }\n      var sActiveValue = this.sActiveValue;\n\n      sActiveValue = sActiveValue.slice(0, menuIndex + 1);\n      sActiveValue[menuIndex] = targetOption[this.getFieldName('value')];\n      var activeOptions = this.getActiveOptions(sActiveValue);\n      if (targetOption.isLeaf === false && !targetOption[this.getFieldName('children')] && loadData) {\n        if (changeOnSelect) {\n          this.handleChange(activeOptions, { visible: true }, e);\n        }\n        this.setState({ sActiveValue: sActiveValue });\n        loadData(activeOptions);\n        return;\n      }\n      var newState = {};\n      if (!targetOption[this.getFieldName('children')] || !targetOption[this.getFieldName('children')].length) {\n        this.handleChange(activeOptions, { visible: false }, e);\n        // set value to activeValue when select leaf option\n        newState.sValue = sActiveValue;\n        // add e.type judgement to prevent `onChange` being triggered by mouseEnter\n      } else if (changeOnSelect && (e.type === 'click' || e.type === 'keydown')) {\n        if (expandTrigger === 'hover') {\n          this.handleChange(activeOptions, { visible: false }, e);\n        } else {\n          this.handleChange(activeOptions, { visible: true }, e);\n        }\n        // set value to activeValue on every select\n        newState.sValue = sActiveValue;\n      }\n      newState.sActiveValue = sActiveValue;\n      //  not change the value by keyboard\n      if (hasProp(this, 'value') || e.type === 'keydown' && e.keyCode !== KeyCode.ENTER) {\n        delete newState.sValue;\n      }\n      this.setState(newState);\n    },\n    handleItemDoubleClick: function handleItemDoubleClick() {\n      var changeOnSelect = this.$props.changeOnSelect;\n\n      if (changeOnSelect) {\n        this.setPopupVisible(false);\n      }\n    },\n    handleKeyDown: function handleKeyDown(e) {\n      var _this4 = this;\n\n      var $slots = this.$slots;\n\n      var children = $slots['default'] && $slots['default'][0];\n      // https://github.com/ant-design/ant-design/issues/6717\n      // Don't bind keyboard support when children specify the onKeyDown\n      if (children) {\n        var keydown = getEvents(children).keydown;\n        if (keydown) {\n          keydown(e);\n          return;\n        }\n      }\n      var activeValue = [].concat(_toConsumableArray(this.sActiveValue));\n      var currentLevel = activeValue.length - 1 < 0 ? 0 : activeValue.length - 1;\n      var currentOptions = this.getCurrentLevelOptions();\n      var currentIndex = currentOptions.map(function (o) {\n        return o[_this4.getFieldName('value')];\n      }).indexOf(activeValue[currentLevel]);\n      if (e.keyCode !== KeyCode.DOWN && e.keyCode !== KeyCode.UP && e.keyCode !== KeyCode.LEFT && e.keyCode !== KeyCode.RIGHT && e.keyCode !== KeyCode.ENTER && e.keyCode !== KeyCode.SPACE && e.keyCode !== KeyCode.BACKSPACE && e.keyCode !== KeyCode.ESC && e.keyCode !== KeyCode.TAB) {\n        return;\n      }\n      // Press any keys above to reopen menu\n      if (!this.sPopupVisible && e.keyCode !== KeyCode.BACKSPACE && e.keyCode !== KeyCode.LEFT && e.keyCode !== KeyCode.RIGHT && e.keyCode !== KeyCode.ESC && e.keyCode !== KeyCode.TAB) {\n        this.setPopupVisible(true);\n        return;\n      }\n      if (e.keyCode === KeyCode.DOWN || e.keyCode === KeyCode.UP) {\n        e.preventDefault();\n        var nextIndex = currentIndex;\n        if (nextIndex !== -1) {\n          if (e.keyCode === KeyCode.DOWN) {\n            nextIndex += 1;\n            nextIndex = nextIndex >= currentOptions.length ? 0 : nextIndex;\n          } else {\n            nextIndex -= 1;\n            nextIndex = nextIndex < 0 ? currentOptions.length - 1 : nextIndex;\n          }\n        } else {\n          nextIndex = 0;\n        }\n        activeValue[currentLevel] = currentOptions[nextIndex][this.getFieldName('value')];\n      } else if (e.keyCode === KeyCode.LEFT || e.keyCode === KeyCode.BACKSPACE) {\n        e.preventDefault();\n        activeValue.splice(activeValue.length - 1, 1);\n      } else if (e.keyCode === KeyCode.RIGHT) {\n        e.preventDefault();\n        if (currentOptions[currentIndex] && currentOptions[currentIndex][this.getFieldName('children')]) {\n          activeValue.push(currentOptions[currentIndex][this.getFieldName('children')][0][this.getFieldName('value')]);\n        }\n      } else if (e.keyCode === KeyCode.ESC || e.keyCode === KeyCode.TAB) {\n        this.setPopupVisible(false);\n        return;\n      }\n      if (!activeValue || activeValue.length === 0) {\n        this.setPopupVisible(false);\n      }\n      var activeOptions = this.getActiveOptions(activeValue);\n      var targetOption = activeOptions[activeOptions.length - 1];\n      this.handleMenuSelect(targetOption, activeOptions.length - 1, e);\n      this.__emit('keydown', e);\n    }\n  },\n\n  render: function render() {\n    var h = arguments[0];\n    var $props = this.$props,\n        sActiveValue = this.sActiveValue,\n        handleMenuSelect = this.handleMenuSelect,\n        sPopupVisible = this.sPopupVisible,\n        handlePopupVisibleChange = this.handlePopupVisibleChange,\n        handleKeyDown = this.handleKeyDown;\n\n    var listeners = getListeners(this);\n\n    var prefixCls = $props.prefixCls,\n        transitionName = $props.transitionName,\n        popupClassName = $props.popupClassName,\n        _$props$options = $props.options,\n        options = _$props$options === undefined ? [] : _$props$options,\n        disabled = $props.disabled,\n        builtinPlacements = $props.builtinPlacements,\n        popupPlacement = $props.popupPlacement,\n        restProps = _objectWithoutProperties($props, ['prefixCls', 'transitionName', 'popupClassName', 'options', 'disabled', 'builtinPlacements', 'popupPlacement']);\n    // Did not show popup when there is no options\n\n\n    var menus = h('div');\n    var emptyMenuClassName = '';\n    if (options && options.length > 0) {\n      var loadingIcon = getComponentFromProp(this, 'loadingIcon');\n      var expandIcon = getComponentFromProp(this, 'expandIcon') || '>';\n      var menusProps = {\n        props: _extends({}, $props, {\n          fieldNames: this.getFieldNames(),\n          defaultFieldNames: this.defaultFieldNames,\n          activeValue: sActiveValue,\n          visible: sPopupVisible,\n          loadingIcon: loadingIcon,\n          expandIcon: expandIcon\n        }),\n        on: _extends({}, listeners, {\n          select: handleMenuSelect,\n          itemDoubleClick: this.handleItemDoubleClick\n        })\n      };\n      menus = h(Menus, menusProps);\n    } else {\n      emptyMenuClassName = ' ' + prefixCls + '-menus-empty';\n    }\n    var triggerProps = {\n      props: _extends({}, restProps, {\n        disabled: disabled,\n        popupPlacement: popupPlacement,\n        builtinPlacements: builtinPlacements,\n        popupTransitionName: transitionName,\n        action: disabled ? [] : ['click'],\n        popupVisible: disabled ? false : sPopupVisible,\n        prefixCls: prefixCls + '-menus',\n        popupClassName: popupClassName + emptyMenuClassName\n      }),\n      on: _extends({}, listeners, {\n        popupVisibleChange: handlePopupVisibleChange\n      }),\n      ref: 'trigger'\n    };\n    var children = getSlot(this, 'default')[0];\n    return h(\n      Trigger,\n      triggerProps,\n      [children && cloneElement(children, {\n        on: {\n          keydown: handleKeyDown\n        },\n        attrs: {\n          tabIndex: disabled ? undefined : 0\n        }\n      }), h(\n        'template',\n        { slot: 'popup' },\n        [menus]\n      )]\n    );\n  }\n};"]},"metadata":{},"sourceType":"module"}