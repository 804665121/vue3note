{"ast":null,"code":"import _mergeJSXProps from 'babel-helper-vue-jsx-merge-props';\nimport _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _extends from 'babel-runtime/helpers/extends';\nimport BaseMixin from '../_util/BaseMixin';\nimport { getOptionProps, initDefaultProps, getListeners } from '../_util/props-util';\nimport getTransitionProps from '../_util/getTransitionProps';\nimport { ConfigConsumerProps } from '../config-provider/configConsumerProps';\nimport { previewImage, isImageUrl } from './utils';\nimport Icon from '../icon';\nimport Tooltip from '../tooltip';\nimport Progress from '../progress';\nimport classNames from 'classnames';\nimport { UploadListProps } from './interface';\nexport default {\n  name: 'AUploadList',\n  mixins: [BaseMixin],\n  props: initDefaultProps(UploadListProps, {\n    listType: 'text',\n    // or picture\n    progressAttr: {\n      strokeWidth: 2,\n      showInfo: false\n    },\n    showRemoveIcon: true,\n    showDownloadIcon: false,\n    showPreviewIcon: true,\n    previewFile: previewImage\n  }),\n  inject: {\n    configProvider: {\n      'default': function _default() {\n        return ConfigConsumerProps;\n      }\n    }\n  },\n  updated: function updated() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      var _$props = _this.$props,\n          listType = _$props.listType,\n          items = _$props.items,\n          previewFile = _$props.previewFile;\n\n      if (listType !== 'picture' && listType !== 'picture-card') {\n        return;\n      }\n\n      (items || []).forEach(function (file) {\n        if (typeof document === 'undefined' || typeof window === 'undefined' || !window.FileReader || !window.File || !(file.originFileObj instanceof File || file.originFileObj instanceof Blob) || file.thumbUrl !== undefined) {\n          return;\n        }\n        /*eslint-disable */\n\n\n        file.thumbUrl = '';\n\n        if (previewFile) {\n          previewFile(file.originFileObj).then(function (previewDataUrl) {\n            // Need append '' to avoid dead loop\n            file.thumbUrl = previewDataUrl || '';\n\n            _this.$forceUpdate();\n          });\n        }\n      });\n    });\n  },\n  methods: {\n    handlePreview: function handlePreview(file, e) {\n      var _getListeners = getListeners(this),\n          preview = _getListeners.preview;\n\n      if (!preview) {\n        return;\n      }\n\n      e.preventDefault();\n      return this.$emit('preview', file);\n    },\n    handleDownload: function handleDownload(file) {\n      var _getListeners2 = getListeners(this),\n          download = _getListeners2.download;\n\n      if (typeof download === 'function') {\n        download(file);\n      } else if (file.url) {\n        window.open(file.url);\n      }\n    },\n    handleClose: function handleClose(file) {\n      this.$emit('remove', file);\n    }\n  },\n  render: function render() {\n    var _this2 = this,\n        _classNames4;\n\n    var h = arguments[0];\n\n    var _getOptionProps = getOptionProps(this),\n        customizePrefixCls = _getOptionProps.prefixCls,\n        _getOptionProps$items = _getOptionProps.items,\n        items = _getOptionProps$items === undefined ? [] : _getOptionProps$items,\n        listType = _getOptionProps.listType,\n        showPreviewIcon = _getOptionProps.showPreviewIcon,\n        showRemoveIcon = _getOptionProps.showRemoveIcon,\n        showDownloadIcon = _getOptionProps.showDownloadIcon,\n        locale = _getOptionProps.locale,\n        progressAttr = _getOptionProps.progressAttr;\n\n    var getPrefixCls = this.configProvider.getPrefixCls;\n    var prefixCls = getPrefixCls('upload', customizePrefixCls);\n    var list = items.map(function (file) {\n      var _classNames, _classNames2;\n\n      var progress = void 0;\n      var icon = h(Icon, {\n        attrs: {\n          type: file.status === 'uploading' ? 'loading' : 'paper-clip'\n        }\n      });\n\n      if (listType === 'picture' || listType === 'picture-card') {\n        if (listType === 'picture-card' && file.status === 'uploading') {\n          icon = h('div', {\n            'class': prefixCls + '-list-item-uploading-text'\n          }, [locale.uploading]);\n        } else if (!file.thumbUrl && !file.url) {\n          icon = h(Icon, {\n            'class': prefixCls + '-list-item-thumbnail',\n            attrs: {\n              type: 'picture',\n              theme: 'twoTone'\n            }\n          });\n        } else {\n          var thumbnail = isImageUrl(file) ? h('img', {\n            attrs: {\n              src: file.thumbUrl || file.url,\n              alt: file.name\n            },\n            'class': prefixCls + '-list-item-image'\n          }) : h(Icon, {\n            attrs: {\n              type: 'file',\n              theme: 'twoTone'\n            },\n            'class': prefixCls + '-list-item-icon'\n          });\n          icon = h('a', {\n            'class': prefixCls + '-list-item-thumbnail',\n            on: {\n              'click': function click(e) {\n                return _this2.handlePreview(file, e);\n              }\n            },\n            attrs: {\n              href: file.url || file.thumbUrl,\n              target: '_blank',\n              rel: 'noopener noreferrer'\n            }\n          }, [thumbnail]);\n        }\n      }\n\n      if (file.status === 'uploading') {\n        var progressProps = {\n          props: _extends({}, progressAttr, {\n            type: 'line',\n            percent: file.percent\n          })\n        }; // show loading icon if upload progress listener is disabled\n\n        var loadingProgress = 'percent' in file ? h(Progress, progressProps) : null;\n        progress = h('div', {\n          'class': prefixCls + '-list-item-progress',\n          key: 'progress'\n        }, [loadingProgress]);\n      }\n\n      var infoUploadingClass = classNames((_classNames = {}, _defineProperty(_classNames, prefixCls + '-list-item', true), _defineProperty(_classNames, prefixCls + '-list-item-' + file.status, true), _defineProperty(_classNames, prefixCls + '-list-item-list-type-' + listType, true), _classNames));\n      var linkProps = typeof file.linkProps === 'string' ? JSON.parse(file.linkProps) : file.linkProps;\n      var removeIcon = showRemoveIcon ? h(Icon, {\n        attrs: {\n          type: 'delete',\n          title: locale.removeFile\n        },\n        on: {\n          'click': function click() {\n            return _this2.handleClose(file);\n          }\n        }\n      }) : null;\n      var downloadIcon = showDownloadIcon && file.status === 'done' ? h(Icon, {\n        attrs: {\n          type: 'download',\n          title: locale.downloadFile\n        },\n        on: {\n          'click': function click() {\n            return _this2.handleDownload(file);\n          }\n        }\n      }) : null;\n      var downloadOrDelete = listType !== 'picture-card' && h('span', {\n        key: 'download-delete',\n        'class': prefixCls + '-list-item-card-actions ' + (listType === 'picture' ? 'picture' : '')\n      }, [downloadIcon && h('a', {\n        attrs: {\n          title: locale.downloadFile\n        }\n      }, [downloadIcon]), removeIcon && h('a', {\n        attrs: {\n          title: locale.removeFile\n        }\n      }, [removeIcon])]);\n      var listItemNameClass = classNames((_classNames2 = {}, _defineProperty(_classNames2, prefixCls + '-list-item-name', true), _defineProperty(_classNames2, prefixCls + '-list-item-name-icon-count-' + [downloadIcon, removeIcon].filter(function (x) {\n        return x;\n      }).length, true), _classNames2));\n      var preview = file.url ? [h('a', _mergeJSXProps([{\n        attrs: {\n          target: '_blank',\n          rel: 'noopener noreferrer',\n          title: file.name\n        },\n        'class': listItemNameClass\n      }, linkProps, {\n        attrs: {\n          href: file.url\n        },\n        on: {\n          'click': function click(e) {\n            return _this2.handlePreview(file, e);\n          }\n        }\n      }]), [file.name]), downloadOrDelete] : [h('span', {\n        key: 'view',\n        'class': prefixCls + '-list-item-name',\n        on: {\n          'click': function click(e) {\n            return _this2.handlePreview(file, e);\n          }\n        },\n        attrs: {\n          title: file.name\n        }\n      }, [file.name]), downloadOrDelete];\n      var style = file.url || file.thumbUrl ? undefined : {\n        pointerEvents: 'none',\n        opacity: 0.5\n      };\n      var previewIcon = showPreviewIcon ? h('a', {\n        attrs: {\n          href: file.url || file.thumbUrl,\n          target: '_blank',\n          rel: 'noopener noreferrer',\n          title: locale.previewFile\n        },\n        style: style,\n        on: {\n          'click': function click(e) {\n            return _this2.handlePreview(file, e);\n          }\n        }\n      }, [h(Icon, {\n        attrs: {\n          type: 'eye-o'\n        }\n      })]) : null;\n      var actions = listType === 'picture-card' && file.status !== 'uploading' && h('span', {\n        'class': prefixCls + '-list-item-actions'\n      }, [previewIcon, file.status === 'done' && downloadIcon, removeIcon]);\n      var message = void 0;\n\n      if (file.response && typeof file.response === 'string') {\n        message = file.response;\n      } else {\n        message = file.error && file.error.statusText || locale.uploadError;\n      }\n\n      var iconAndPreview = h('span', [icon, preview]);\n      var transitionProps = getTransitionProps('fade');\n      var dom = h('div', {\n        'class': infoUploadingClass,\n        key: file.uid\n      }, [h('div', {\n        'class': prefixCls + '-list-item-info'\n      }, [iconAndPreview]), actions, h('transition', transitionProps, [progress])]);\n      var listContainerNameClass = classNames(_defineProperty({}, prefixCls + '-list-picture-card-container', listType === 'picture-card'));\n      return h('div', {\n        key: file.uid,\n        'class': listContainerNameClass\n      }, [file.status === 'error' ? h(Tooltip, {\n        attrs: {\n          title: message\n        }\n      }, [dom]) : h('span', [dom])]);\n    });\n    var listClassNames = classNames((_classNames4 = {}, _defineProperty(_classNames4, prefixCls + '-list', true), _defineProperty(_classNames4, prefixCls + '-list-' + listType, true), _classNames4));\n    var animationDirection = listType === 'picture-card' ? 'animate-inline' : 'animate';\n    var transitionGroupProps = getTransitionProps(prefixCls + '-' + animationDirection);\n    return h('transition-group', _mergeJSXProps([transitionGroupProps, {\n      attrs: {\n        tag: 'div'\n      },\n      'class': listClassNames\n    }]), [list]);\n  }\n};","map":{"version":3,"sources":["/Users/liulu/刘璐/vue3/hello-vue3/node_modules/ant-design-vue/es/upload/UploadList.js"],"names":["_mergeJSXProps","_defineProperty","_extends","BaseMixin","getOptionProps","initDefaultProps","getListeners","getTransitionProps","ConfigConsumerProps","previewImage","isImageUrl","Icon","Tooltip","Progress","classNames","UploadListProps","name","mixins","props","listType","progressAttr","strokeWidth","showInfo","showRemoveIcon","showDownloadIcon","showPreviewIcon","previewFile","inject","configProvider","_default","updated","_this","$nextTick","_$props","$props","items","forEach","file","document","window","FileReader","File","originFileObj","Blob","thumbUrl","undefined","then","previewDataUrl","$forceUpdate","methods","handlePreview","e","_getListeners","preview","preventDefault","$emit","handleDownload","_getListeners2","download","url","open","handleClose","render","_this2","_classNames4","h","arguments","_getOptionProps","customizePrefixCls","prefixCls","_getOptionProps$items","locale","getPrefixCls","list","map","_classNames","_classNames2","progress","icon","attrs","type","status","uploading","theme","thumbnail","src","alt","on","click","href","target","rel","progressProps","percent","loadingProgress","key","infoUploadingClass","linkProps","JSON","parse","removeIcon","title","removeFile","downloadIcon","downloadFile","downloadOrDelete","listItemNameClass","filter","x","length","style","pointerEvents","opacity","previewIcon","actions","message","response","error","statusText","uploadError","iconAndPreview","transitionProps","dom","uid","listContainerNameClass","listClassNames","animationDirection","transitionGroupProps","tag"],"mappings":"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","sourcesContent":["import _mergeJSXProps from 'babel-helper-vue-jsx-merge-props';\nimport _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _extends from 'babel-runtime/helpers/extends';\nimport BaseMixin from '../_util/BaseMixin';\nimport { getOptionProps, initDefaultProps, getListeners } from '../_util/props-util';\nimport getTransitionProps from '../_util/getTransitionProps';\nimport { ConfigConsumerProps } from '../config-provider/configConsumerProps';\nimport { previewImage, isImageUrl } from './utils';\nimport Icon from '../icon';\nimport Tooltip from '../tooltip';\nimport Progress from '../progress';\nimport classNames from 'classnames';\nimport { UploadListProps } from './interface';\n\nexport default {\n  name: 'AUploadList',\n  mixins: [BaseMixin],\n  props: initDefaultProps(UploadListProps, {\n    listType: 'text', // or picture\n    progressAttr: {\n      strokeWidth: 2,\n      showInfo: false\n    },\n    showRemoveIcon: true,\n    showDownloadIcon: false,\n    showPreviewIcon: true,\n    previewFile: previewImage\n  }),\n  inject: {\n    configProvider: { 'default': function _default() {\n        return ConfigConsumerProps;\n      } }\n  },\n  updated: function updated() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      var _$props = _this.$props,\n          listType = _$props.listType,\n          items = _$props.items,\n          previewFile = _$props.previewFile;\n\n      if (listType !== 'picture' && listType !== 'picture-card') {\n        return;\n      }\n      (items || []).forEach(function (file) {\n        if (typeof document === 'undefined' || typeof window === 'undefined' || !window.FileReader || !window.File || !(file.originFileObj instanceof File || file.originFileObj instanceof Blob) || file.thumbUrl !== undefined) {\n          return;\n        }\n        /*eslint-disable */\n        file.thumbUrl = '';\n        if (previewFile) {\n          previewFile(file.originFileObj).then(function (previewDataUrl) {\n            // Need append '' to avoid dead loop\n            file.thumbUrl = previewDataUrl || '';\n            _this.$forceUpdate();\n          });\n        }\n      });\n    });\n  },\n\n  methods: {\n    handlePreview: function handlePreview(file, e) {\n      var _getListeners = getListeners(this),\n          preview = _getListeners.preview;\n\n      if (!preview) {\n        return;\n      }\n      e.preventDefault();\n      return this.$emit('preview', file);\n    },\n    handleDownload: function handleDownload(file) {\n      var _getListeners2 = getListeners(this),\n          download = _getListeners2.download;\n\n      if (typeof download === 'function') {\n        download(file);\n      } else if (file.url) {\n        window.open(file.url);\n      }\n    },\n    handleClose: function handleClose(file) {\n      this.$emit('remove', file);\n    }\n  },\n  render: function render() {\n    var _this2 = this,\n        _classNames4;\n\n    var h = arguments[0];\n\n    var _getOptionProps = getOptionProps(this),\n        customizePrefixCls = _getOptionProps.prefixCls,\n        _getOptionProps$items = _getOptionProps.items,\n        items = _getOptionProps$items === undefined ? [] : _getOptionProps$items,\n        listType = _getOptionProps.listType,\n        showPreviewIcon = _getOptionProps.showPreviewIcon,\n        showRemoveIcon = _getOptionProps.showRemoveIcon,\n        showDownloadIcon = _getOptionProps.showDownloadIcon,\n        locale = _getOptionProps.locale,\n        progressAttr = _getOptionProps.progressAttr;\n\n    var getPrefixCls = this.configProvider.getPrefixCls;\n    var prefixCls = getPrefixCls('upload', customizePrefixCls);\n\n    var list = items.map(function (file) {\n      var _classNames, _classNames2;\n\n      var progress = void 0;\n      var icon = h(Icon, {\n        attrs: { type: file.status === 'uploading' ? 'loading' : 'paper-clip' }\n      });\n\n      if (listType === 'picture' || listType === 'picture-card') {\n        if (listType === 'picture-card' && file.status === 'uploading') {\n          icon = h(\n            'div',\n            { 'class': prefixCls + '-list-item-uploading-text' },\n            [locale.uploading]\n          );\n        } else if (!file.thumbUrl && !file.url) {\n          icon = h(Icon, { 'class': prefixCls + '-list-item-thumbnail', attrs: { type: 'picture', theme: 'twoTone' }\n          });\n        } else {\n          var thumbnail = isImageUrl(file) ? h('img', {\n            attrs: {\n              src: file.thumbUrl || file.url,\n              alt: file.name\n            },\n            'class': prefixCls + '-list-item-image'\n          }) : h(Icon, {\n            attrs: { type: 'file', theme: 'twoTone' },\n            'class': prefixCls + '-list-item-icon' });\n          icon = h(\n            'a',\n            {\n              'class': prefixCls + '-list-item-thumbnail',\n              on: {\n                'click': function click(e) {\n                  return _this2.handlePreview(file, e);\n                }\n              },\n              attrs: {\n                href: file.url || file.thumbUrl,\n                target: '_blank',\n                rel: 'noopener noreferrer'\n              }\n            },\n            [thumbnail]\n          );\n        }\n      }\n\n      if (file.status === 'uploading') {\n        var progressProps = {\n          props: _extends({}, progressAttr, {\n            type: 'line',\n            percent: file.percent\n          })\n        };\n        // show loading icon if upload progress listener is disabled\n        var loadingProgress = 'percent' in file ? h(Progress, progressProps) : null;\n\n        progress = h(\n          'div',\n          { 'class': prefixCls + '-list-item-progress', key: 'progress' },\n          [loadingProgress]\n        );\n      }\n      var infoUploadingClass = classNames((_classNames = {}, _defineProperty(_classNames, prefixCls + '-list-item', true), _defineProperty(_classNames, prefixCls + '-list-item-' + file.status, true), _defineProperty(_classNames, prefixCls + '-list-item-list-type-' + listType, true), _classNames));\n      var linkProps = typeof file.linkProps === 'string' ? JSON.parse(file.linkProps) : file.linkProps;\n\n      var removeIcon = showRemoveIcon ? h(Icon, {\n        attrs: { type: 'delete', title: locale.removeFile },\n        on: {\n          'click': function click() {\n            return _this2.handleClose(file);\n          }\n        }\n      }) : null;\n      var downloadIcon = showDownloadIcon && file.status === 'done' ? h(Icon, {\n        attrs: {\n          type: 'download',\n          title: locale.downloadFile\n        },\n        on: {\n          'click': function click() {\n            return _this2.handleDownload(file);\n          }\n        }\n      }) : null;\n      var downloadOrDelete = listType !== 'picture-card' && h(\n        'span',\n        {\n          key: 'download-delete',\n          'class': prefixCls + '-list-item-card-actions ' + (listType === 'picture' ? 'picture' : '')\n        },\n        [downloadIcon && h(\n          'a',\n          {\n            attrs: { title: locale.downloadFile }\n          },\n          [downloadIcon]\n        ), removeIcon && h(\n          'a',\n          {\n            attrs: { title: locale.removeFile }\n          },\n          [removeIcon]\n        )]\n      );\n      var listItemNameClass = classNames((_classNames2 = {}, _defineProperty(_classNames2, prefixCls + '-list-item-name', true), _defineProperty(_classNames2, prefixCls + '-list-item-name-icon-count-' + [downloadIcon, removeIcon].filter(function (x) {\n        return x;\n      }).length, true), _classNames2));\n\n      var preview = file.url ? [h(\n        'a',\n        _mergeJSXProps([{\n          attrs: {\n            target: '_blank',\n            rel: 'noopener noreferrer',\n\n            title: file.name\n          },\n          'class': listItemNameClass }, linkProps, {\n          attrs: {\n            href: file.url\n          },\n          on: {\n            'click': function click(e) {\n              return _this2.handlePreview(file, e);\n            }\n          }\n        }]),\n        [file.name]\n      ), downloadOrDelete] : [h(\n        'span',\n        {\n          key: 'view',\n          'class': prefixCls + '-list-item-name',\n          on: {\n            'click': function click(e) {\n              return _this2.handlePreview(file, e);\n            }\n          },\n          attrs: {\n            title: file.name\n          }\n        },\n        [file.name]\n      ), downloadOrDelete];\n      var style = file.url || file.thumbUrl ? undefined : {\n        pointerEvents: 'none',\n        opacity: 0.5\n      };\n      var previewIcon = showPreviewIcon ? h(\n        'a',\n        {\n          attrs: {\n            href: file.url || file.thumbUrl,\n            target: '_blank',\n            rel: 'noopener noreferrer',\n\n            title: locale.previewFile\n          },\n          style: style,\n          on: {\n            'click': function click(e) {\n              return _this2.handlePreview(file, e);\n            }\n          }\n        },\n        [h(Icon, {\n          attrs: { type: 'eye-o' }\n        })]\n      ) : null;\n      var actions = listType === 'picture-card' && file.status !== 'uploading' && h(\n        'span',\n        { 'class': prefixCls + '-list-item-actions' },\n        [previewIcon, file.status === 'done' && downloadIcon, removeIcon]\n      );\n      var message = void 0;\n      if (file.response && typeof file.response === 'string') {\n        message = file.response;\n      } else {\n        message = file.error && file.error.statusText || locale.uploadError;\n      }\n      var iconAndPreview = h('span', [icon, preview]);\n      var transitionProps = getTransitionProps('fade');\n      var dom = h(\n        'div',\n        { 'class': infoUploadingClass, key: file.uid },\n        [h(\n          'div',\n          { 'class': prefixCls + '-list-item-info' },\n          [iconAndPreview]\n        ), actions, h(\n          'transition',\n          transitionProps,\n          [progress]\n        )]\n      );\n      var listContainerNameClass = classNames(_defineProperty({}, prefixCls + '-list-picture-card-container', listType === 'picture-card'));\n      return h(\n        'div',\n        { key: file.uid, 'class': listContainerNameClass },\n        [file.status === 'error' ? h(\n          Tooltip,\n          {\n            attrs: { title: message }\n          },\n          [dom]\n        ) : h('span', [dom])]\n      );\n    });\n    var listClassNames = classNames((_classNames4 = {}, _defineProperty(_classNames4, prefixCls + '-list', true), _defineProperty(_classNames4, prefixCls + '-list-' + listType, true), _classNames4));\n    var animationDirection = listType === 'picture-card' ? 'animate-inline' : 'animate';\n    var transitionGroupProps = getTransitionProps(prefixCls + '-' + animationDirection);\n    return h(\n      'transition-group',\n      _mergeJSXProps([transitionGroupProps, {\n        attrs: { tag: 'div' },\n        'class': listClassNames }]),\n      [list]\n    );\n  }\n};"]},"metadata":{},"sourceType":"module"}