{"ast":null,"code":"import _mergeJSXProps from 'babel-helper-vue-jsx-merge-props';\nimport _typeof from 'babel-runtime/helpers/typeof';\nimport PropTypes from './vue-types';\nimport _switchScrollingEffect from './switchScrollingEffect';\nimport setStyle from './setStyle';\nimport Portal from './Portal';\nvar openCount = 0;\nvar windowIsUndefined = !(typeof window !== 'undefined' && window.document && window.document.createElement); // https://github.com/ant-design/ant-design/issues/19340\n// https://github.com/ant-design/ant-design/issues/19332\n\nvar cacheOverflow = {};\nexport default {\n  name: 'PortalWrapper',\n  props: {\n    wrapperClassName: PropTypes.string,\n    forceRender: PropTypes.bool,\n    getContainer: PropTypes.any,\n    children: PropTypes.func,\n    visible: PropTypes.bool\n  },\n  data: function data() {\n    var visible = this.$props.visible;\n    openCount = visible ? openCount + 1 : openCount;\n    return {};\n  },\n  updated: function updated() {\n    this.setWrapperClassName();\n  },\n  watch: {\n    visible: function visible(val) {\n      openCount = val ? openCount + 1 : openCount - 1;\n    },\n    getContainer: function getContainer(_getContainer, prevGetContainer) {\n      var getContainerIsFunc = typeof _getContainer === 'function' && typeof prevGetContainer === 'function';\n\n      if (getContainerIsFunc ? _getContainer.toString() !== prevGetContainer.toString() : _getContainer !== prevGetContainer) {\n        this.removeCurrentContainer(false);\n      }\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    var visible = this.$props.visible; // 离开时不会 render， 导到离开时数值不变，改用 func 。。\n\n    openCount = visible && openCount ? openCount - 1 : openCount;\n    this.removeCurrentContainer(visible);\n  },\n  methods: {\n    getParent: function getParent() {\n      var getContainer = this.$props.getContainer;\n\n      if (getContainer) {\n        if (typeof getContainer === 'string') {\n          return document.querySelectorAll(getContainer)[0];\n        }\n\n        if (typeof getContainer === 'function') {\n          return getContainer();\n        }\n\n        if ((typeof getContainer === 'undefined' ? 'undefined' : _typeof(getContainer)) === 'object' && getContainer instanceof window.HTMLElement) {\n          return getContainer;\n        }\n      }\n\n      return document.body;\n    },\n    getDomContainer: function getDomContainer() {\n      if (windowIsUndefined) {\n        return null;\n      }\n\n      if (!this.container) {\n        this.container = document.createElement('div');\n        var parent = this.getParent();\n\n        if (parent) {\n          parent.appendChild(this.container);\n        }\n      }\n\n      this.setWrapperClassName();\n      return this.container;\n    },\n    setWrapperClassName: function setWrapperClassName() {\n      var wrapperClassName = this.$props.wrapperClassName;\n\n      if (this.container && wrapperClassName && wrapperClassName !== this.container.className) {\n        this.container.className = wrapperClassName;\n      }\n    },\n    savePortal: function savePortal(c) {\n      // Warning: don't rename _component\n      // https://github.com/react-component/util/pull/65#discussion_r352407916\n      this._component = c;\n    },\n    removeCurrentContainer: function removeCurrentContainer() {\n      this.container = null;\n      this._component = null;\n    },\n\n    /**\n     * Enhance ./switchScrollingEffect\n     * 1. Simulate document body scroll bar with\n     * 2. Record body has overflow style and recover when all of PortalWrapper invisible\n     * 3. Disable body scroll when PortalWrapper has open\n     *\n     * @memberof PortalWrapper\n     */\n    switchScrollingEffect: function switchScrollingEffect() {\n      if (openCount === 1 && !Object.keys(cacheOverflow).length) {\n        _switchScrollingEffect(); // Must be set after switchScrollingEffect\n\n\n        cacheOverflow = setStyle({\n          overflow: 'hidden',\n          overflowX: 'hidden',\n          overflowY: 'hidden'\n        });\n      } else if (!openCount) {\n        setStyle(cacheOverflow);\n        cacheOverflow = {};\n\n        _switchScrollingEffect(true);\n      }\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    var _$props = this.$props,\n        children = _$props.children,\n        forceRender = _$props.forceRender,\n        visible = _$props.visible;\n    var portal = null;\n    var childProps = {\n      getOpenCount: function getOpenCount() {\n        return openCount;\n      },\n      getContainer: this.getDomContainer,\n      switchScrollingEffect: this.switchScrollingEffect\n    };\n\n    if (forceRender || visible || this._component) {\n      portal = h(Portal, _mergeJSXProps([{\n        attrs: {\n          getContainer: this.getDomContainer,\n          children: children(childProps)\n        }\n      }, {\n        directives: [{\n          name: 'ant-ref',\n          value: this.savePortal\n        }]\n      }]));\n    }\n\n    return portal;\n  }\n};","map":{"version":3,"sources":["/Users/liulu/刘璐/vue3/hello-vue3/node_modules/ant-design-vue/es/_util/PortalWrapper.js"],"names":["_mergeJSXProps","_typeof","PropTypes","_switchScrollingEffect","setStyle","Portal","openCount","windowIsUndefined","window","document","createElement","cacheOverflow","name","props","wrapperClassName","string","forceRender","bool","getContainer","any","children","func","visible","data","$props","updated","setWrapperClassName","watch","val","_getContainer","prevGetContainer","getContainerIsFunc","toString","removeCurrentContainer","beforeDestroy","methods","getParent","querySelectorAll","HTMLElement","body","getDomContainer","container","parent","appendChild","className","savePortal","c","_component","switchScrollingEffect","Object","keys","length","overflow","overflowX","overflowY","render","h","arguments","_$props","portal","childProps","getOpenCount","attrs","directives","value"],"mappings":"AAAA,OAAOA,cAAP,MAA2B,kCAA3B;AACA,OAAOC,OAAP,MAAoB,8BAApB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,sBAAP,MAAmC,yBAAnC;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AAEA,IAAIC,SAAS,GAAG,CAAhB;AACA,IAAIC,iBAAiB,GAAG,EAAE,OAAOC,MAAP,KAAkB,WAAlB,IAAiCA,MAAM,CAACC,QAAxC,IAAoDD,MAAM,CAACC,QAAP,CAAgBC,aAAtE,CAAxB,C,CACA;AACA;;AACA,IAAIC,aAAa,GAAG,EAApB;AAEA,eAAe;AACbC,EAAAA,IAAI,EAAE,eADO;AAEbC,EAAAA,KAAK,EAAE;AACLC,IAAAA,gBAAgB,EAAEZ,SAAS,CAACa,MADvB;AAELC,IAAAA,WAAW,EAAEd,SAAS,CAACe,IAFlB;AAGLC,IAAAA,YAAY,EAAEhB,SAAS,CAACiB,GAHnB;AAILC,IAAAA,QAAQ,EAAElB,SAAS,CAACmB,IAJf;AAKLC,IAAAA,OAAO,EAAEpB,SAAS,CAACe;AALd,GAFM;AASbM,EAAAA,IAAI,EAAE,SAASA,IAAT,GAAgB;AACpB,QAAID,OAAO,GAAG,KAAKE,MAAL,CAAYF,OAA1B;AAEAhB,IAAAA,SAAS,GAAGgB,OAAO,GAAGhB,SAAS,GAAG,CAAf,GAAmBA,SAAtC;AACA,WAAO,EAAP;AACD,GAdY;AAebmB,EAAAA,OAAO,EAAE,SAASA,OAAT,GAAmB;AAC1B,SAAKC,mBAAL;AACD,GAjBY;AAmBbC,EAAAA,KAAK,EAAE;AACLL,IAAAA,OAAO,EAAE,SAASA,OAAT,CAAiBM,GAAjB,EAAsB;AAC7BtB,MAAAA,SAAS,GAAGsB,GAAG,GAAGtB,SAAS,GAAG,CAAf,GAAmBA,SAAS,GAAG,CAA9C;AACD,KAHI;AAILY,IAAAA,YAAY,EAAE,SAASA,YAAT,CAAsBW,aAAtB,EAAqCC,gBAArC,EAAuD;AACnE,UAAIC,kBAAkB,GAAG,OAAOF,aAAP,KAAyB,UAAzB,IAAuC,OAAOC,gBAAP,KAA4B,UAA5F;;AACA,UAAIC,kBAAkB,GAAGF,aAAa,CAACG,QAAd,OAA6BF,gBAAgB,CAACE,QAAjB,EAAhC,GAA8DH,aAAa,KAAKC,gBAAtG,EAAwH;AACtH,aAAKG,sBAAL,CAA4B,KAA5B;AACD;AACF;AATI,GAnBM;AA8BbC,EAAAA,aAAa,EAAE,SAASA,aAAT,GAAyB;AACtC,QAAIZ,OAAO,GAAG,KAAKE,MAAL,CAAYF,OAA1B,CADsC,CAEtC;;AAEAhB,IAAAA,SAAS,GAAGgB,OAAO,IAAIhB,SAAX,GAAuBA,SAAS,GAAG,CAAnC,GAAuCA,SAAnD;AACA,SAAK2B,sBAAL,CAA4BX,OAA5B;AACD,GApCY;AAsCba,EAAAA,OAAO,EAAE;AACPC,IAAAA,SAAS,EAAE,SAASA,SAAT,GAAqB;AAC9B,UAAIlB,YAAY,GAAG,KAAKM,MAAL,CAAYN,YAA/B;;AAEA,UAAIA,YAAJ,EAAkB;AAChB,YAAI,OAAOA,YAAP,KAAwB,QAA5B,EAAsC;AACpC,iBAAOT,QAAQ,CAAC4B,gBAAT,CAA0BnB,YAA1B,EAAwC,CAAxC,CAAP;AACD;;AACD,YAAI,OAAOA,YAAP,KAAwB,UAA5B,EAAwC;AACtC,iBAAOA,YAAY,EAAnB;AACD;;AACD,YAAI,CAAC,OAAOA,YAAP,KAAwB,WAAxB,GAAsC,WAAtC,GAAoDjB,OAAO,CAACiB,YAAD,CAA5D,MAAgF,QAAhF,IAA4FA,YAAY,YAAYV,MAAM,CAAC8B,WAA/H,EAA4I;AAC1I,iBAAOpB,YAAP;AACD;AACF;;AACD,aAAOT,QAAQ,CAAC8B,IAAhB;AACD,KAhBM;AAiBPC,IAAAA,eAAe,EAAE,SAASA,eAAT,GAA2B;AAC1C,UAAIjC,iBAAJ,EAAuB;AACrB,eAAO,IAAP;AACD;;AACD,UAAI,CAAC,KAAKkC,SAAV,EAAqB;AACnB,aAAKA,SAAL,GAAiBhC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAjB;AACA,YAAIgC,MAAM,GAAG,KAAKN,SAAL,EAAb;;AACA,YAAIM,MAAJ,EAAY;AACVA,UAAAA,MAAM,CAACC,WAAP,CAAmB,KAAKF,SAAxB;AACD;AACF;;AACD,WAAKf,mBAAL;AACA,aAAO,KAAKe,SAAZ;AACD,KA9BM;AA+BPf,IAAAA,mBAAmB,EAAE,SAASA,mBAAT,GAA+B;AAClD,UAAIZ,gBAAgB,GAAG,KAAKU,MAAL,CAAYV,gBAAnC;;AAEA,UAAI,KAAK2B,SAAL,IAAkB3B,gBAAlB,IAAsCA,gBAAgB,KAAK,KAAK2B,SAAL,CAAeG,SAA9E,EAAyF;AACvF,aAAKH,SAAL,CAAeG,SAAf,GAA2B9B,gBAA3B;AACD;AACF,KArCM;AAsCP+B,IAAAA,UAAU,EAAE,SAASA,UAAT,CAAoBC,CAApB,EAAuB;AACjC;AACA;AACA,WAAKC,UAAL,GAAkBD,CAAlB;AACD,KA1CM;AA2CPb,IAAAA,sBAAsB,EAAE,SAASA,sBAAT,GAAkC;AACxD,WAAKQ,SAAL,GAAiB,IAAjB;AACA,WAAKM,UAAL,GAAkB,IAAlB;AACD,KA9CM;;AAiDP;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,qBAAqB,EAAE,SAASA,qBAAT,GAAiC;AACtD,UAAI1C,SAAS,KAAK,CAAd,IAAmB,CAAC2C,MAAM,CAACC,IAAP,CAAYvC,aAAZ,EAA2BwC,MAAnD,EAA2D;AACzDhD,QAAAA,sBAAsB,GADmC,CAEzD;;;AACAQ,QAAAA,aAAa,GAAGP,QAAQ,CAAC;AACvBgD,UAAAA,QAAQ,EAAE,QADa;AAEvBC,UAAAA,SAAS,EAAE,QAFY;AAGvBC,UAAAA,SAAS,EAAE;AAHY,SAAD,CAAxB;AAKD,OARD,MAQO,IAAI,CAAChD,SAAL,EAAgB;AACrBF,QAAAA,QAAQ,CAACO,aAAD,CAAR;AACAA,QAAAA,aAAa,GAAG,EAAhB;;AACAR,QAAAA,sBAAsB,CAAC,IAAD,CAAtB;AACD;AACF;AAvEM,GAtCI;AAgHboD,EAAAA,MAAM,EAAE,SAASA,MAAT,GAAkB;AACxB,QAAIC,CAAC,GAAGC,SAAS,CAAC,CAAD,CAAjB;AACA,QAAIC,OAAO,GAAG,KAAKlC,MAAnB;AAAA,QACIJ,QAAQ,GAAGsC,OAAO,CAACtC,QADvB;AAAA,QAEIJ,WAAW,GAAG0C,OAAO,CAAC1C,WAF1B;AAAA,QAGIM,OAAO,GAAGoC,OAAO,CAACpC,OAHtB;AAKA,QAAIqC,MAAM,GAAG,IAAb;AACA,QAAIC,UAAU,GAAG;AACfC,MAAAA,YAAY,EAAE,SAASA,YAAT,GAAwB;AACpC,eAAOvD,SAAP;AACD,OAHc;AAIfY,MAAAA,YAAY,EAAE,KAAKsB,eAJJ;AAKfQ,MAAAA,qBAAqB,EAAE,KAAKA;AALb,KAAjB;;AAOA,QAAIhC,WAAW,IAAIM,OAAf,IAA0B,KAAKyB,UAAnC,EAA+C;AAC7CY,MAAAA,MAAM,GAAGH,CAAC,CAACnD,MAAD,EAASL,cAAc,CAAC,CAAC;AACjC8D,QAAAA,KAAK,EAAE;AACL5C,UAAAA,YAAY,EAAE,KAAKsB,eADd;AAELpB,UAAAA,QAAQ,EAAEA,QAAQ,CAACwC,UAAD;AAFb;AAD0B,OAAD,EAK/B;AACDG,QAAAA,UAAU,EAAE,CAAC;AACXnD,UAAAA,IAAI,EAAE,SADK;AAEXoD,UAAAA,KAAK,EAAE,KAAKnB;AAFD,SAAD;AADX,OAL+B,CAAD,CAAvB,CAAV;AAWD;;AACD,WAAOc,MAAP;AACD;AA7IY,CAAf","sourcesContent":["import _mergeJSXProps from 'babel-helper-vue-jsx-merge-props';\nimport _typeof from 'babel-runtime/helpers/typeof';\nimport PropTypes from './vue-types';\nimport _switchScrollingEffect from './switchScrollingEffect';\nimport setStyle from './setStyle';\nimport Portal from './Portal';\n\nvar openCount = 0;\nvar windowIsUndefined = !(typeof window !== 'undefined' && window.document && window.document.createElement);\n// https://github.com/ant-design/ant-design/issues/19340\n// https://github.com/ant-design/ant-design/issues/19332\nvar cacheOverflow = {};\n\nexport default {\n  name: 'PortalWrapper',\n  props: {\n    wrapperClassName: PropTypes.string,\n    forceRender: PropTypes.bool,\n    getContainer: PropTypes.any,\n    children: PropTypes.func,\n    visible: PropTypes.bool\n  },\n  data: function data() {\n    var visible = this.$props.visible;\n\n    openCount = visible ? openCount + 1 : openCount;\n    return {};\n  },\n  updated: function updated() {\n    this.setWrapperClassName();\n  },\n\n  watch: {\n    visible: function visible(val) {\n      openCount = val ? openCount + 1 : openCount - 1;\n    },\n    getContainer: function getContainer(_getContainer, prevGetContainer) {\n      var getContainerIsFunc = typeof _getContainer === 'function' && typeof prevGetContainer === 'function';\n      if (getContainerIsFunc ? _getContainer.toString() !== prevGetContainer.toString() : _getContainer !== prevGetContainer) {\n        this.removeCurrentContainer(false);\n      }\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    var visible = this.$props.visible;\n    // 离开时不会 render， 导到离开时数值不变，改用 func 。。\n\n    openCount = visible && openCount ? openCount - 1 : openCount;\n    this.removeCurrentContainer(visible);\n  },\n\n  methods: {\n    getParent: function getParent() {\n      var getContainer = this.$props.getContainer;\n\n      if (getContainer) {\n        if (typeof getContainer === 'string') {\n          return document.querySelectorAll(getContainer)[0];\n        }\n        if (typeof getContainer === 'function') {\n          return getContainer();\n        }\n        if ((typeof getContainer === 'undefined' ? 'undefined' : _typeof(getContainer)) === 'object' && getContainer instanceof window.HTMLElement) {\n          return getContainer;\n        }\n      }\n      return document.body;\n    },\n    getDomContainer: function getDomContainer() {\n      if (windowIsUndefined) {\n        return null;\n      }\n      if (!this.container) {\n        this.container = document.createElement('div');\n        var parent = this.getParent();\n        if (parent) {\n          parent.appendChild(this.container);\n        }\n      }\n      this.setWrapperClassName();\n      return this.container;\n    },\n    setWrapperClassName: function setWrapperClassName() {\n      var wrapperClassName = this.$props.wrapperClassName;\n\n      if (this.container && wrapperClassName && wrapperClassName !== this.container.className) {\n        this.container.className = wrapperClassName;\n      }\n    },\n    savePortal: function savePortal(c) {\n      // Warning: don't rename _component\n      // https://github.com/react-component/util/pull/65#discussion_r352407916\n      this._component = c;\n    },\n    removeCurrentContainer: function removeCurrentContainer() {\n      this.container = null;\n      this._component = null;\n    },\n\n\n    /**\n     * Enhance ./switchScrollingEffect\n     * 1. Simulate document body scroll bar with\n     * 2. Record body has overflow style and recover when all of PortalWrapper invisible\n     * 3. Disable body scroll when PortalWrapper has open\n     *\n     * @memberof PortalWrapper\n     */\n    switchScrollingEffect: function switchScrollingEffect() {\n      if (openCount === 1 && !Object.keys(cacheOverflow).length) {\n        _switchScrollingEffect();\n        // Must be set after switchScrollingEffect\n        cacheOverflow = setStyle({\n          overflow: 'hidden',\n          overflowX: 'hidden',\n          overflowY: 'hidden'\n        });\n      } else if (!openCount) {\n        setStyle(cacheOverflow);\n        cacheOverflow = {};\n        _switchScrollingEffect(true);\n      }\n    }\n  },\n\n  render: function render() {\n    var h = arguments[0];\n    var _$props = this.$props,\n        children = _$props.children,\n        forceRender = _$props.forceRender,\n        visible = _$props.visible;\n\n    var portal = null;\n    var childProps = {\n      getOpenCount: function getOpenCount() {\n        return openCount;\n      },\n      getContainer: this.getDomContainer,\n      switchScrollingEffect: this.switchScrollingEffect\n    };\n    if (forceRender || visible || this._component) {\n      portal = h(Portal, _mergeJSXProps([{\n        attrs: {\n          getContainer: this.getDomContainer,\n          children: children(childProps)\n        }\n      }, {\n        directives: [{\n          name: 'ant-ref',\n          value: this.savePortal\n        }]\n      }]));\n    }\n    return portal;\n  }\n};"]},"metadata":{},"sourceType":"module"}