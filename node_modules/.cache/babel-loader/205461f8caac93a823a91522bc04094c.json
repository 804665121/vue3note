{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _slicedToArray from 'babel-runtime/helpers/slicedToArray';\nimport PropTypes from '../_util/vue-types';\nimport BaseMixin from '../_util/BaseMixin';\nimport { getOptionProps, hasProp, initDefaultProps, getListeners } from '../_util/props-util';\nimport * as moment from 'moment';\nimport FullCalendar from '../vc-calendar/src/FullCalendar';\nimport Header from './Header';\nimport LocaleReceiver from '../locale-provider/LocaleReceiver';\nimport interopDefault from '../_util/interopDefault';\nimport { ConfigConsumerProps } from '../config-provider/configConsumerProps';\nimport enUS from './locale/en_US';\nimport Base from '../base';\nimport { checkValidate, stringToMoment, momentToString, TimeType } from '../_util/moment-util';\n\nfunction noop() {\n  return null;\n}\n\nfunction zerofixed(v) {\n  if (v < 10) {\n    return '0' + v;\n  }\n\n  return '' + v;\n}\n\nfunction isMomentArray(value) {\n  return Array.isArray(value) && !!value.find(function (val) {\n    return moment.isMoment(val);\n  });\n}\n\nexport var CalendarMode = PropTypes.oneOf(['month', 'year']);\nexport var CalendarProps = function CalendarProps() {\n  return {\n    prefixCls: PropTypes.string,\n    value: TimeType,\n    defaultValue: TimeType,\n    mode: CalendarMode,\n    fullscreen: PropTypes.bool,\n    // dateCellRender: PropTypes.func,\n    // monthCellRender: PropTypes.func,\n    // dateFullCellRender: PropTypes.func,\n    // monthFullCellRender: PropTypes.func,\n    locale: PropTypes.object,\n    // onPanelChange?: (date?: moment.Moment, mode?: CalendarMode) => void;\n    // onSelect?: (date?: moment.Moment) => void;\n    disabledDate: PropTypes.func,\n    validRange: PropTypes.custom(isMomentArray),\n    headerRender: PropTypes.func,\n    valueFormat: PropTypes.string\n  };\n};\nvar Calendar = {\n  name: 'ACalendar',\n  mixins: [BaseMixin],\n  props: initDefaultProps(CalendarProps(), {\n    locale: {},\n    fullscreen: true\n  }),\n  model: {\n    prop: 'value',\n    event: 'change'\n  },\n  inject: {\n    configProvider: {\n      'default': function _default() {\n        return ConfigConsumerProps;\n      }\n    }\n  },\n  data: function data() {\n    var value = this.value,\n        defaultValue = this.defaultValue,\n        valueFormat = this.valueFormat;\n    var sValue = value || defaultValue || interopDefault(moment)();\n    checkValidate('Calendar', defaultValue, 'defaultValue', valueFormat);\n    checkValidate('Calendar', value, 'value', valueFormat);\n    this._sPrefixCls = undefined;\n    return {\n      sValue: stringToMoment(sValue, valueFormat),\n      sMode: this.mode || 'month'\n    };\n  },\n  watch: {\n    value: function value(val) {\n      checkValidate('Calendar', val, 'value', this.valueFormat);\n      this.setState({\n        sValue: stringToMoment(val, this.valueFormat)\n      });\n    },\n    mode: function mode(val) {\n      this.setState({\n        sMode: val\n      });\n    }\n  },\n  methods: {\n    onHeaderValueChange: function onHeaderValueChange(value) {\n      this.setValue(value, 'changePanel');\n    },\n    onHeaderTypeChange: function onHeaderTypeChange(mode) {\n      this.sMode = mode;\n      this.onPanelChange(this.sValue, mode);\n    },\n    onPanelChange: function onPanelChange(value, mode) {\n      var val = this.valueFormat ? momentToString(value, this.valueFormat) : value;\n      this.$emit('panelChange', val, mode);\n\n      if (value !== this.sValue) {\n        this.$emit('change', val);\n      }\n    },\n    onSelect: function onSelect(value) {\n      this.setValue(value, 'select');\n    },\n    setValue: function setValue(value, way) {\n      var prevValue = this.value ? stringToMoment(this.value, this.valueFormat) : this.sValue;\n      var mode = this.sMode,\n          valueFormat = this.valueFormat;\n\n      if (!hasProp(this, 'value')) {\n        this.setState({\n          sValue: value\n        });\n      }\n\n      if (way === 'select') {\n        if (prevValue && prevValue.month() !== value.month()) {\n          this.onPanelChange(value, mode);\n        }\n\n        this.$emit('select', valueFormat ? momentToString(value, valueFormat) : value);\n      } else if (way === 'changePanel') {\n        this.onPanelChange(value, mode);\n      }\n    },\n    getDateRange: function getDateRange(validRange, disabledDate) {\n      return function (current) {\n        if (!current) {\n          return false;\n        }\n\n        var _validRange = _slicedToArray(validRange, 2),\n            startDate = _validRange[0],\n            endDate = _validRange[1];\n\n        var inRange = !current.isBetween(startDate, endDate, 'days', '[]');\n\n        if (disabledDate) {\n          return disabledDate(current) || inRange;\n        }\n\n        return inRange;\n      };\n    },\n    getDefaultLocale: function getDefaultLocale() {\n      var result = _extends({}, enUS, this.$props.locale);\n\n      result.lang = _extends({}, result.lang, (this.$props.locale || {}).lang);\n      return result;\n    },\n    monthCellRender2: function monthCellRender2(value) {\n      var h = this.$createElement;\n      var _sPrefixCls = this._sPrefixCls,\n          $scopedSlots = this.$scopedSlots;\n      var monthCellRender = this.monthCellRender || $scopedSlots.monthCellRender || noop;\n      return h('div', {\n        'class': _sPrefixCls + '-month'\n      }, [h('div', {\n        'class': _sPrefixCls + '-value'\n      }, [value.localeData().monthsShort(value)]), h('div', {\n        'class': _sPrefixCls + '-content'\n      }, [monthCellRender(value)])]);\n    },\n    dateCellRender2: function dateCellRender2(value) {\n      var h = this.$createElement;\n      var _sPrefixCls = this._sPrefixCls,\n          $scopedSlots = this.$scopedSlots;\n      var dateCellRender = this.dateCellRender || $scopedSlots.dateCellRender || noop;\n      return h('div', {\n        'class': _sPrefixCls + '-date'\n      }, [h('div', {\n        'class': _sPrefixCls + '-value'\n      }, [zerofixed(value.date())]), h('div', {\n        'class': _sPrefixCls + '-content'\n      }, [dateCellRender(value)])]);\n    },\n    renderCalendar: function renderCalendar(locale, localeCode) {\n      var h = this.$createElement;\n      var props = getOptionProps(this);\n      var value = this.sValue,\n          mode = this.sMode,\n          $scopedSlots = this.$scopedSlots;\n\n      if (value && localeCode) {\n        value.locale(localeCode);\n      }\n\n      var customizePrefixCls = props.prefixCls,\n          fullscreen = props.fullscreen,\n          dateFullCellRender = props.dateFullCellRender,\n          monthFullCellRender = props.monthFullCellRender;\n      var headerRender = this.headerRender || $scopedSlots.headerRender;\n      var getPrefixCls = this.configProvider.getPrefixCls;\n      var prefixCls = getPrefixCls('fullcalendar', customizePrefixCls); // To support old version react.\n      // Have to add prefixCls on the instance.\n      // https://github.com/facebook/react/issues/12397\n\n      this._sPrefixCls = prefixCls;\n      var cls = '';\n\n      if (fullscreen) {\n        cls += ' ' + prefixCls + '-fullscreen';\n      }\n\n      var monthCellRender = monthFullCellRender || $scopedSlots.monthFullCellRender || this.monthCellRender2;\n      var dateCellRender = dateFullCellRender || $scopedSlots.dateFullCellRender || this.dateCellRender2;\n      var disabledDate = props.disabledDate;\n\n      if (props.validRange) {\n        disabledDate = this.getDateRange(props.validRange, disabledDate);\n      }\n\n      var fullCalendarProps = {\n        props: _extends({}, props, {\n          Select: {},\n          locale: locale.lang,\n          type: mode === 'year' ? 'month' : 'date',\n          prefixCls: prefixCls,\n          showHeader: false,\n          value: value,\n          monthCellRender: monthCellRender,\n          dateCellRender: dateCellRender,\n          disabledDate: disabledDate\n        }),\n        on: _extends({}, getListeners(this), {\n          select: this.onSelect\n        })\n      };\n      return h('div', {\n        'class': cls\n      }, [h(Header, {\n        attrs: {\n          fullscreen: fullscreen,\n          type: mode,\n          headerRender: headerRender,\n          value: value,\n          locale: locale.lang,\n          prefixCls: prefixCls,\n          validRange: props.validRange\n        },\n        on: {\n          'typeChange': this.onHeaderTypeChange,\n          'valueChange': this.onHeaderValueChange\n        }\n      }), h(FullCalendar, fullCalendarProps)]);\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    return h(LocaleReceiver, {\n      attrs: {\n        componentName: 'Calendar',\n        defaultLocale: this.getDefaultLocale\n      },\n      scopedSlots: {\n        'default': this.renderCalendar\n      }\n    });\n  }\n};\n/* istanbul ignore next */\n\nCalendar.install = function (Vue) {\n  Vue.use(Base);\n  Vue.component(Calendar.name, Calendar);\n};\n\nexport { HeaderProps } from './Header';\nexport default Calendar;","map":{"version":3,"sources":["/Users/liulu/刘璐/vue3/hello-vue3/node_modules/ant-design-vue/es/calendar/index.js"],"names":["_extends","_slicedToArray","PropTypes","BaseMixin","getOptionProps","hasProp","initDefaultProps","getListeners","moment","FullCalendar","Header","LocaleReceiver","interopDefault","ConfigConsumerProps","enUS","Base","checkValidate","stringToMoment","momentToString","TimeType","noop","zerofixed","v","isMomentArray","value","Array","isArray","find","val","isMoment","CalendarMode","oneOf","CalendarProps","prefixCls","string","defaultValue","mode","fullscreen","bool","locale","object","disabledDate","func","validRange","custom","headerRender","valueFormat","Calendar","name","mixins","props","model","prop","event","inject","configProvider","_default","data","sValue","_sPrefixCls","undefined","sMode","watch","setState","methods","onHeaderValueChange","setValue","onHeaderTypeChange","onPanelChange","$emit","onSelect","way","prevValue","month","getDateRange","current","_validRange","startDate","endDate","inRange","isBetween","getDefaultLocale","result","$props","lang","monthCellRender2","h","$createElement","$scopedSlots","monthCellRender","localeData","monthsShort","dateCellRender2","dateCellRender","date","renderCalendar","localeCode","customizePrefixCls","dateFullCellRender","monthFullCellRender","getPrefixCls","cls","fullCalendarProps","Select","type","showHeader","on","select","attrs","render","arguments","componentName","defaultLocale","scopedSlots","install","Vue","use","component","HeaderProps"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _slicedToArray from 'babel-runtime/helpers/slicedToArray';\nimport PropTypes from '../_util/vue-types';\nimport BaseMixin from '../_util/BaseMixin';\nimport { getOptionProps, hasProp, initDefaultProps, getListeners } from '../_util/props-util';\nimport * as moment from 'moment';\nimport FullCalendar from '../vc-calendar/src/FullCalendar';\nimport Header from './Header';\nimport LocaleReceiver from '../locale-provider/LocaleReceiver';\nimport interopDefault from '../_util/interopDefault';\nimport { ConfigConsumerProps } from '../config-provider/configConsumerProps';\nimport enUS from './locale/en_US';\nimport Base from '../base';\nimport { checkValidate, stringToMoment, momentToString, TimeType } from '../_util/moment-util';\n\nfunction noop() {\n  return null;\n}\n\nfunction zerofixed(v) {\n  if (v < 10) {\n    return '0' + v;\n  }\n  return '' + v;\n}\nfunction isMomentArray(value) {\n  return Array.isArray(value) && !!value.find(function (val) {\n    return moment.isMoment(val);\n  });\n}\nexport var CalendarMode = PropTypes.oneOf(['month', 'year']);\n\nexport var CalendarProps = function CalendarProps() {\n  return {\n    prefixCls: PropTypes.string,\n    value: TimeType,\n    defaultValue: TimeType,\n    mode: CalendarMode,\n    fullscreen: PropTypes.bool,\n    // dateCellRender: PropTypes.func,\n    // monthCellRender: PropTypes.func,\n    // dateFullCellRender: PropTypes.func,\n    // monthFullCellRender: PropTypes.func,\n    locale: PropTypes.object,\n    // onPanelChange?: (date?: moment.Moment, mode?: CalendarMode) => void;\n    // onSelect?: (date?: moment.Moment) => void;\n    disabledDate: PropTypes.func,\n    validRange: PropTypes.custom(isMomentArray),\n    headerRender: PropTypes.func,\n    valueFormat: PropTypes.string\n  };\n};\n\nvar Calendar = {\n  name: 'ACalendar',\n  mixins: [BaseMixin],\n  props: initDefaultProps(CalendarProps(), {\n    locale: {},\n    fullscreen: true\n  }),\n  model: {\n    prop: 'value',\n    event: 'change'\n  },\n  inject: {\n    configProvider: { 'default': function _default() {\n        return ConfigConsumerProps;\n      } }\n  },\n  data: function data() {\n    var value = this.value,\n        defaultValue = this.defaultValue,\n        valueFormat = this.valueFormat;\n\n    var sValue = value || defaultValue || interopDefault(moment)();\n    checkValidate('Calendar', defaultValue, 'defaultValue', valueFormat);\n    checkValidate('Calendar', value, 'value', valueFormat);\n    this._sPrefixCls = undefined;\n    return {\n      sValue: stringToMoment(sValue, valueFormat),\n      sMode: this.mode || 'month'\n    };\n  },\n\n  watch: {\n    value: function value(val) {\n      checkValidate('Calendar', val, 'value', this.valueFormat);\n      this.setState({\n        sValue: stringToMoment(val, this.valueFormat)\n      });\n    },\n    mode: function mode(val) {\n      this.setState({\n        sMode: val\n      });\n    }\n  },\n  methods: {\n    onHeaderValueChange: function onHeaderValueChange(value) {\n      this.setValue(value, 'changePanel');\n    },\n    onHeaderTypeChange: function onHeaderTypeChange(mode) {\n      this.sMode = mode;\n      this.onPanelChange(this.sValue, mode);\n    },\n    onPanelChange: function onPanelChange(value, mode) {\n      var val = this.valueFormat ? momentToString(value, this.valueFormat) : value;\n      this.$emit('panelChange', val, mode);\n      if (value !== this.sValue) {\n        this.$emit('change', val);\n      }\n    },\n    onSelect: function onSelect(value) {\n      this.setValue(value, 'select');\n    },\n    setValue: function setValue(value, way) {\n      var prevValue = this.value ? stringToMoment(this.value, this.valueFormat) : this.sValue;\n      var mode = this.sMode,\n          valueFormat = this.valueFormat;\n\n      if (!hasProp(this, 'value')) {\n        this.setState({ sValue: value });\n      }\n      if (way === 'select') {\n        if (prevValue && prevValue.month() !== value.month()) {\n          this.onPanelChange(value, mode);\n        }\n        this.$emit('select', valueFormat ? momentToString(value, valueFormat) : value);\n      } else if (way === 'changePanel') {\n        this.onPanelChange(value, mode);\n      }\n    },\n    getDateRange: function getDateRange(validRange, disabledDate) {\n      return function (current) {\n        if (!current) {\n          return false;\n        }\n\n        var _validRange = _slicedToArray(validRange, 2),\n            startDate = _validRange[0],\n            endDate = _validRange[1];\n\n        var inRange = !current.isBetween(startDate, endDate, 'days', '[]');\n        if (disabledDate) {\n          return disabledDate(current) || inRange;\n        }\n        return inRange;\n      };\n    },\n    getDefaultLocale: function getDefaultLocale() {\n      var result = _extends({}, enUS, this.$props.locale);\n      result.lang = _extends({}, result.lang, (this.$props.locale || {}).lang);\n      return result;\n    },\n    monthCellRender2: function monthCellRender2(value) {\n      var h = this.$createElement;\n      var _sPrefixCls = this._sPrefixCls,\n          $scopedSlots = this.$scopedSlots;\n\n      var monthCellRender = this.monthCellRender || $scopedSlots.monthCellRender || noop;\n      return h(\n        'div',\n        { 'class': _sPrefixCls + '-month' },\n        [h(\n          'div',\n          { 'class': _sPrefixCls + '-value' },\n          [value.localeData().monthsShort(value)]\n        ), h(\n          'div',\n          { 'class': _sPrefixCls + '-content' },\n          [monthCellRender(value)]\n        )]\n      );\n    },\n    dateCellRender2: function dateCellRender2(value) {\n      var h = this.$createElement;\n      var _sPrefixCls = this._sPrefixCls,\n          $scopedSlots = this.$scopedSlots;\n\n      var dateCellRender = this.dateCellRender || $scopedSlots.dateCellRender || noop;\n      return h(\n        'div',\n        { 'class': _sPrefixCls + '-date' },\n        [h(\n          'div',\n          { 'class': _sPrefixCls + '-value' },\n          [zerofixed(value.date())]\n        ), h(\n          'div',\n          { 'class': _sPrefixCls + '-content' },\n          [dateCellRender(value)]\n        )]\n      );\n    },\n    renderCalendar: function renderCalendar(locale, localeCode) {\n      var h = this.$createElement;\n\n      var props = getOptionProps(this);\n      var value = this.sValue,\n          mode = this.sMode,\n          $scopedSlots = this.$scopedSlots;\n\n      if (value && localeCode) {\n        value.locale(localeCode);\n      }\n      var customizePrefixCls = props.prefixCls,\n          fullscreen = props.fullscreen,\n          dateFullCellRender = props.dateFullCellRender,\n          monthFullCellRender = props.monthFullCellRender;\n\n      var headerRender = this.headerRender || $scopedSlots.headerRender;\n      var getPrefixCls = this.configProvider.getPrefixCls;\n      var prefixCls = getPrefixCls('fullcalendar', customizePrefixCls);\n\n      // To support old version react.\n      // Have to add prefixCls on the instance.\n      // https://github.com/facebook/react/issues/12397\n      this._sPrefixCls = prefixCls;\n\n      var cls = '';\n      if (fullscreen) {\n        cls += ' ' + prefixCls + '-fullscreen';\n      }\n\n      var monthCellRender = monthFullCellRender || $scopedSlots.monthFullCellRender || this.monthCellRender2;\n      var dateCellRender = dateFullCellRender || $scopedSlots.dateFullCellRender || this.dateCellRender2;\n\n      var disabledDate = props.disabledDate;\n\n      if (props.validRange) {\n        disabledDate = this.getDateRange(props.validRange, disabledDate);\n      }\n      var fullCalendarProps = {\n        props: _extends({}, props, {\n          Select: {},\n          locale: locale.lang,\n          type: mode === 'year' ? 'month' : 'date',\n          prefixCls: prefixCls,\n          showHeader: false,\n          value: value,\n          monthCellRender: monthCellRender,\n          dateCellRender: dateCellRender,\n          disabledDate: disabledDate\n        }),\n        on: _extends({}, getListeners(this), {\n          select: this.onSelect\n        })\n      };\n      return h(\n        'div',\n        { 'class': cls },\n        [h(Header, {\n          attrs: {\n            fullscreen: fullscreen,\n            type: mode,\n            headerRender: headerRender,\n            value: value,\n            locale: locale.lang,\n            prefixCls: prefixCls,\n\n            validRange: props.validRange\n          },\n          on: {\n            'typeChange': this.onHeaderTypeChange,\n            'valueChange': this.onHeaderValueChange\n          }\n        }), h(FullCalendar, fullCalendarProps)]\n      );\n    }\n  },\n\n  render: function render() {\n    var h = arguments[0];\n\n    return h(LocaleReceiver, {\n      attrs: {\n        componentName: 'Calendar',\n        defaultLocale: this.getDefaultLocale\n      },\n      scopedSlots: { 'default': this.renderCalendar }\n    });\n  }\n};\n\n/* istanbul ignore next */\nCalendar.install = function (Vue) {\n  Vue.use(Base);\n  Vue.component(Calendar.name, Calendar);\n};\nexport { HeaderProps } from './Header';\nexport default Calendar;"]},"metadata":{},"sourceType":"module"}