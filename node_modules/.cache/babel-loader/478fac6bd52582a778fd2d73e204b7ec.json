{"ast":null,"code":"import _mergeJSXProps from 'babel-helper-vue-jsx-merge-props';\nimport _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport PropTypes from '../../_util/vue-types';\nimport { setTransform, isTransform3dSupported, getLeft, getStyle, getTop, getActiveIndex } from './utils';\nimport BaseMixin from '../../_util/BaseMixin';\n\nfunction componentDidUpdate(component, init) {\n  var _component$$props = component.$props,\n      _component$$props$sty = _component$$props.styles,\n      styles = _component$$props$sty === undefined ? {} : _component$$props$sty,\n      panels = _component$$props.panels,\n      activeKey = _component$$props.activeKey,\n      direction = _component$$props.direction;\n  var rootNode = component.getRef('root');\n  var wrapNode = component.getRef('nav') || rootNode;\n  var inkBarNode = component.getRef('inkBar');\n  var activeTab = component.getRef('activeTab');\n  var inkBarNodeStyle = inkBarNode.style;\n  var tabBarPosition = component.$props.tabBarPosition;\n  var activeIndex = getActiveIndex(panels, activeKey);\n\n  if (init) {\n    // prevent mount animation\n    inkBarNodeStyle.display = 'none';\n  }\n\n  if (activeTab) {\n    var tabNode = activeTab;\n    var transformSupported = isTransform3dSupported(inkBarNodeStyle); // Reset current style\n\n    setTransform(inkBarNodeStyle, '');\n    inkBarNodeStyle.width = '';\n    inkBarNodeStyle.height = '';\n    inkBarNodeStyle.left = '';\n    inkBarNodeStyle.top = '';\n    inkBarNodeStyle.bottom = '';\n    inkBarNodeStyle.right = '';\n\n    if (tabBarPosition === 'top' || tabBarPosition === 'bottom') {\n      var left = getLeft(tabNode, wrapNode);\n      var width = tabNode.offsetWidth; // If tabNode'width width equal to wrapNode'width when tabBarPosition is top or bottom\n      // It means no css working, then ink bar should not have width until css is loaded\n      // Fix https://github.com/ant-design/ant-design/issues/7564\n\n      if (width === rootNode.offsetWidth) {\n        width = 0;\n      } else if (styles.inkBar && styles.inkBar.width !== undefined) {\n        width = parseFloat(styles.inkBar.width, 10);\n\n        if (width) {\n          left += (tabNode.offsetWidth - width) / 2;\n        }\n      }\n\n      if (direction === 'rtl') {\n        left = getStyle(tabNode, 'margin-left') - left;\n      } // use 3d gpu to optimize render\n\n\n      if (transformSupported) {\n        setTransform(inkBarNodeStyle, 'translate3d(' + left + 'px,0,0)');\n      } else {\n        inkBarNodeStyle.left = left + 'px';\n      }\n\n      inkBarNodeStyle.width = width + 'px';\n    } else {\n      var top = getTop(tabNode, wrapNode, true);\n      var height = tabNode.offsetHeight;\n\n      if (styles.inkBar && styles.inkBar.height !== undefined) {\n        height = parseFloat(styles.inkBar.height, 10);\n\n        if (height) {\n          top += (tabNode.offsetHeight - height) / 2;\n        }\n      }\n\n      if (transformSupported) {\n        setTransform(inkBarNodeStyle, 'translate3d(0,' + top + 'px,0)');\n        inkBarNodeStyle.top = '0';\n      } else {\n        inkBarNodeStyle.top = top + 'px';\n      }\n\n      inkBarNodeStyle.height = height + 'px';\n    }\n  }\n\n  inkBarNodeStyle.display = activeIndex !== -1 ? 'block' : 'none';\n}\n\nexport default {\n  name: 'InkTabBarNode',\n  mixins: [BaseMixin],\n  props: {\n    inkBarAnimated: {\n      type: Boolean,\n      'default': true\n    },\n    direction: PropTypes.string,\n    prefixCls: String,\n    styles: Object,\n    tabBarPosition: String,\n    saveRef: PropTypes.func.def(function () {}),\n    getRef: PropTypes.func.def(function () {}),\n    panels: PropTypes.array,\n    activeKey: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n  },\n  updated: function updated() {\n    this.$nextTick(function () {\n      componentDidUpdate(this);\n    });\n  },\n  mounted: function mounted() {\n    this.$nextTick(function () {\n      componentDidUpdate(this, true);\n    });\n  },\n  render: function render() {\n    var _classes;\n\n    var h = arguments[0];\n    var prefixCls = this.prefixCls,\n        _styles = this.styles,\n        styles = _styles === undefined ? {} : _styles,\n        inkBarAnimated = this.inkBarAnimated;\n    var className = prefixCls + '-ink-bar';\n    var classes = (_classes = {}, _defineProperty(_classes, className, true), _defineProperty(_classes, inkBarAnimated ? className + '-animated' : className + '-no-animated', true), _classes);\n    return h('div', _mergeJSXProps([{\n      style: styles.inkBar,\n      'class': classes,\n      key: 'inkBar'\n    }, {\n      directives: [{\n        name: 'ant-ref',\n        value: this.saveRef('inkBar')\n      }]\n    }]));\n  }\n};","map":{"version":3,"sources":["/Users/liulu/刘璐/vue3/hello-vue3/node_modules/ant-design-vue/es/vc-tabs/src/InkTabBarNode.js"],"names":["_mergeJSXProps","_defineProperty","PropTypes","setTransform","isTransform3dSupported","getLeft","getStyle","getTop","getActiveIndex","BaseMixin","componentDidUpdate","component","init","_component$$props","$props","_component$$props$sty","styles","undefined","panels","activeKey","direction","rootNode","getRef","wrapNode","inkBarNode","activeTab","inkBarNodeStyle","style","tabBarPosition","activeIndex","display","tabNode","transformSupported","width","height","left","top","bottom","right","offsetWidth","inkBar","parseFloat","offsetHeight","name","mixins","props","inkBarAnimated","type","Boolean","string","prefixCls","String","Object","saveRef","func","def","array","oneOfType","number","updated","$nextTick","mounted","render","_classes","h","arguments","_styles","className","classes","key","directives","value"],"mappings":"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","sourcesContent":["import _mergeJSXProps from 'babel-helper-vue-jsx-merge-props';\nimport _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport PropTypes from '../../_util/vue-types';\nimport { setTransform, isTransform3dSupported, getLeft, getStyle, getTop, getActiveIndex } from './utils';\nimport BaseMixin from '../../_util/BaseMixin';\n\nfunction componentDidUpdate(component, init) {\n  var _component$$props = component.$props,\n      _component$$props$sty = _component$$props.styles,\n      styles = _component$$props$sty === undefined ? {} : _component$$props$sty,\n      panels = _component$$props.panels,\n      activeKey = _component$$props.activeKey,\n      direction = _component$$props.direction;\n\n  var rootNode = component.getRef('root');\n  var wrapNode = component.getRef('nav') || rootNode;\n  var inkBarNode = component.getRef('inkBar');\n  var activeTab = component.getRef('activeTab');\n  var inkBarNodeStyle = inkBarNode.style;\n  var tabBarPosition = component.$props.tabBarPosition;\n  var activeIndex = getActiveIndex(panels, activeKey);\n  if (init) {\n    // prevent mount animation\n    inkBarNodeStyle.display = 'none';\n  }\n  if (activeTab) {\n    var tabNode = activeTab;\n    var transformSupported = isTransform3dSupported(inkBarNodeStyle);\n\n    // Reset current style\n    setTransform(inkBarNodeStyle, '');\n    inkBarNodeStyle.width = '';\n    inkBarNodeStyle.height = '';\n    inkBarNodeStyle.left = '';\n    inkBarNodeStyle.top = '';\n    inkBarNodeStyle.bottom = '';\n    inkBarNodeStyle.right = '';\n\n    if (tabBarPosition === 'top' || tabBarPosition === 'bottom') {\n      var left = getLeft(tabNode, wrapNode);\n      var width = tabNode.offsetWidth;\n      // If tabNode'width width equal to wrapNode'width when tabBarPosition is top or bottom\n      // It means no css working, then ink bar should not have width until css is loaded\n      // Fix https://github.com/ant-design/ant-design/issues/7564\n      if (width === rootNode.offsetWidth) {\n        width = 0;\n      } else if (styles.inkBar && styles.inkBar.width !== undefined) {\n        width = parseFloat(styles.inkBar.width, 10);\n        if (width) {\n          left += (tabNode.offsetWidth - width) / 2;\n        }\n      }\n      if (direction === 'rtl') {\n        left = getStyle(tabNode, 'margin-left') - left;\n      }\n      // use 3d gpu to optimize render\n      if (transformSupported) {\n        setTransform(inkBarNodeStyle, 'translate3d(' + left + 'px,0,0)');\n      } else {\n        inkBarNodeStyle.left = left + 'px';\n      }\n      inkBarNodeStyle.width = width + 'px';\n    } else {\n      var top = getTop(tabNode, wrapNode, true);\n      var height = tabNode.offsetHeight;\n      if (styles.inkBar && styles.inkBar.height !== undefined) {\n        height = parseFloat(styles.inkBar.height, 10);\n        if (height) {\n          top += (tabNode.offsetHeight - height) / 2;\n        }\n      }\n      if (transformSupported) {\n        setTransform(inkBarNodeStyle, 'translate3d(0,' + top + 'px,0)');\n        inkBarNodeStyle.top = '0';\n      } else {\n        inkBarNodeStyle.top = top + 'px';\n      }\n      inkBarNodeStyle.height = height + 'px';\n    }\n  }\n  inkBarNodeStyle.display = activeIndex !== -1 ? 'block' : 'none';\n}\n\nexport default {\n  name: 'InkTabBarNode',\n  mixins: [BaseMixin],\n  props: {\n    inkBarAnimated: {\n      type: Boolean,\n      'default': true\n    },\n    direction: PropTypes.string,\n    prefixCls: String,\n    styles: Object,\n    tabBarPosition: String,\n    saveRef: PropTypes.func.def(function () {}),\n    getRef: PropTypes.func.def(function () {}),\n    panels: PropTypes.array,\n    activeKey: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n  },\n  updated: function updated() {\n    this.$nextTick(function () {\n      componentDidUpdate(this);\n    });\n  },\n  mounted: function mounted() {\n    this.$nextTick(function () {\n      componentDidUpdate(this, true);\n    });\n  },\n  render: function render() {\n    var _classes;\n\n    var h = arguments[0];\n    var prefixCls = this.prefixCls,\n        _styles = this.styles,\n        styles = _styles === undefined ? {} : _styles,\n        inkBarAnimated = this.inkBarAnimated;\n\n    var className = prefixCls + '-ink-bar';\n    var classes = (_classes = {}, _defineProperty(_classes, className, true), _defineProperty(_classes, inkBarAnimated ? className + '-animated' : className + '-no-animated', true), _classes);\n    return h('div', _mergeJSXProps([{\n      style: styles.inkBar,\n      'class': classes,\n      key: 'inkBar'\n    }, {\n      directives: [{\n        name: 'ant-ref',\n        value: this.saveRef('inkBar')\n      }]\n    }]));\n  }\n};"]},"metadata":{},"sourceType":"module"}