{"ast":null,"code":"import _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _extends from 'babel-runtime/helpers/extends';\nimport Checkbox from '../checkbox';\nimport Dropdown from '../dropdown';\nimport Menu from '../menu';\nimport Icon from '../icon';\nimport classNames from 'classnames';\nimport { SelectionCheckboxAllProps } from './interface';\nimport BaseMixin from '../_util/BaseMixin';\n\nfunction checkSelection(_ref) {\n  var store = _ref.store,\n      getCheckboxPropsByItem = _ref.getCheckboxPropsByItem,\n      getRecordKey = _ref.getRecordKey,\n      data = _ref.data,\n      type = _ref.type,\n      byDefaultChecked = _ref.byDefaultChecked;\n  return byDefaultChecked ? data[type](function (item, i) {\n    return getCheckboxPropsByItem(item, i).defaultChecked;\n  }) : data[type](function (item, i) {\n    return store.selectedRowKeys.indexOf(getRecordKey(item, i)) >= 0;\n  });\n}\n\nfunction getIndeterminateState(props) {\n  var store = props.store,\n      data = props.data;\n\n  if (!data.length) {\n    return false;\n  }\n\n  var someCheckedNotByDefaultChecked = checkSelection(_extends({}, props, {\n    data: data,\n    type: 'some',\n    byDefaultChecked: false\n  })) && !checkSelection(_extends({}, props, {\n    data: data,\n    type: 'every',\n    byDefaultChecked: false\n  }));\n  var someCheckedByDefaultChecked = checkSelection(_extends({}, props, {\n    data: data,\n    type: 'some',\n    byDefaultChecked: true\n  })) && !checkSelection(_extends({}, props, {\n    data: data,\n    type: 'every',\n    byDefaultChecked: true\n  }));\n\n  if (store.selectionDirty) {\n    return someCheckedNotByDefaultChecked;\n  }\n\n  return someCheckedNotByDefaultChecked || someCheckedByDefaultChecked;\n}\n\nfunction getCheckState(props) {\n  var store = props.store,\n      data = props.data;\n\n  if (!data.length) {\n    return false;\n  }\n\n  if (store.selectionDirty) {\n    return checkSelection(_extends({}, props, {\n      data: data,\n      type: 'every',\n      byDefaultChecked: false\n    }));\n  }\n\n  return checkSelection(_extends({}, props, {\n    data: data,\n    type: 'every',\n    byDefaultChecked: false\n  })) || checkSelection(_extends({}, props, {\n    data: data,\n    type: 'every',\n    byDefaultChecked: true\n  }));\n}\n\nexport default {\n  name: 'SelectionCheckboxAll',\n  mixins: [BaseMixin],\n  props: SelectionCheckboxAllProps,\n  data: function data() {\n    var props = this.$props;\n    this.defaultSelections = props.hideDefaultSelections ? [] : [{\n      key: 'all',\n      text: props.locale.selectAll\n    }, {\n      key: 'invert',\n      text: props.locale.selectInvert\n    }];\n    return {\n      checked: getCheckState(props),\n      indeterminate: getIndeterminateState(props)\n    };\n  },\n  watch: {\n    $props: {\n      handler: function handler() {\n        this.setCheckState(this.$props);\n      },\n      deep: true,\n      immediate: true\n    }\n  },\n  methods: {\n    checkSelection: function checkSelection(props, data, type, byDefaultChecked) {\n      var _ref2 = props || this.$props,\n          store = _ref2.store,\n          getCheckboxPropsByItem = _ref2.getCheckboxPropsByItem,\n          getRecordKey = _ref2.getRecordKey; // type should be 'every' | 'some'\n\n\n      if (type === 'every' || type === 'some') {\n        return byDefaultChecked ? data[type](function (item, i) {\n          return getCheckboxPropsByItem(item, i).props.defaultChecked;\n        }) : data[type](function (item, i) {\n          return store.selectedRowKeys.indexOf(getRecordKey(item, i)) >= 0;\n        });\n      }\n\n      return false;\n    },\n    setCheckState: function setCheckState(props) {\n      var checked = getCheckState(props);\n      var indeterminate = getIndeterminateState(props);\n      this.setState(function (prevState) {\n        var newState = {};\n\n        if (indeterminate !== prevState.indeterminate) {\n          newState.indeterminate = indeterminate;\n        }\n\n        if (checked !== prevState.checked) {\n          newState.checked = checked;\n        }\n\n        return newState;\n      });\n    },\n    handleSelectAllChange: function handleSelectAllChange(e) {\n      var checked = e.target.checked;\n      this.$emit('select', checked ? 'all' : 'removeAll', 0, null);\n    },\n    renderMenus: function renderMenus(selections) {\n      var _this = this;\n\n      var h = this.$createElement;\n      return selections.map(function (selection, index) {\n        return h(Menu.Item, {\n          key: selection.key || index\n        }, [h('div', {\n          on: {\n            'click': function click() {\n              _this.$emit('select', selection.key, index, selection.onSelect);\n            }\n          }\n        }, [selection.text])]);\n      });\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    var disabled = this.disabled,\n        prefixCls = this.prefixCls,\n        selections = this.selections,\n        getPopupContainer = this.getPopupContainer,\n        checked = this.checked,\n        indeterminate = this.indeterminate;\n    var selectionPrefixCls = prefixCls + '-selection';\n    var customSelections = null;\n\n    if (selections) {\n      var newSelections = Array.isArray(selections) ? this.defaultSelections.concat(selections) : this.defaultSelections;\n      var menu = h(Menu, {\n        'class': selectionPrefixCls + '-menu',\n        attrs: {\n          selectedKeys: []\n        }\n      }, [this.renderMenus(newSelections)]);\n      customSelections = newSelections.length > 0 ? h(Dropdown, {\n        attrs: {\n          getPopupContainer: getPopupContainer\n        }\n      }, [h('template', {\n        slot: 'overlay'\n      }, [menu]), h('div', {\n        'class': selectionPrefixCls + '-down'\n      }, [h(Icon, {\n        attrs: {\n          type: 'down'\n        }\n      })])]) : null;\n    }\n\n    return h('div', {\n      'class': selectionPrefixCls\n    }, [h(Checkbox, {\n      'class': classNames(_defineProperty({}, selectionPrefixCls + '-select-all-custom', customSelections)),\n      attrs: {\n        checked: checked,\n        indeterminate: indeterminate,\n        disabled: disabled\n      },\n      on: {\n        'change': this.handleSelectAllChange\n      }\n    }), customSelections]);\n  }\n};","map":{"version":3,"sources":["/Users/liulu/刘璐/vue3/hello-vue3/node_modules/ant-design-vue/es/table/SelectionCheckboxAll.js"],"names":["_defineProperty","_extends","Checkbox","Dropdown","Menu","Icon","classNames","SelectionCheckboxAllProps","BaseMixin","checkSelection","_ref","store","getCheckboxPropsByItem","getRecordKey","data","type","byDefaultChecked","item","i","defaultChecked","selectedRowKeys","indexOf","getIndeterminateState","props","length","someCheckedNotByDefaultChecked","someCheckedByDefaultChecked","selectionDirty","getCheckState","name","mixins","$props","defaultSelections","hideDefaultSelections","key","text","locale","selectAll","selectInvert","checked","indeterminate","watch","handler","setCheckState","deep","immediate","methods","_ref2","setState","prevState","newState","handleSelectAllChange","e","target","$emit","renderMenus","selections","_this","h","$createElement","map","selection","index","Item","on","click","onSelect","render","arguments","disabled","prefixCls","getPopupContainer","selectionPrefixCls","customSelections","newSelections","Array","isArray","concat","menu","attrs","selectedKeys","slot"],"mappings":"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","sourcesContent":["import _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _extends from 'babel-runtime/helpers/extends';\nimport Checkbox from '../checkbox';\nimport Dropdown from '../dropdown';\nimport Menu from '../menu';\nimport Icon from '../icon';\nimport classNames from 'classnames';\nimport { SelectionCheckboxAllProps } from './interface';\nimport BaseMixin from '../_util/BaseMixin';\n\nfunction checkSelection(_ref) {\n  var store = _ref.store,\n      getCheckboxPropsByItem = _ref.getCheckboxPropsByItem,\n      getRecordKey = _ref.getRecordKey,\n      data = _ref.data,\n      type = _ref.type,\n      byDefaultChecked = _ref.byDefaultChecked;\n\n  return byDefaultChecked ? data[type](function (item, i) {\n    return getCheckboxPropsByItem(item, i).defaultChecked;\n  }) : data[type](function (item, i) {\n    return store.selectedRowKeys.indexOf(getRecordKey(item, i)) >= 0;\n  });\n}\n\nfunction getIndeterminateState(props) {\n  var store = props.store,\n      data = props.data;\n\n  if (!data.length) {\n    return false;\n  }\n\n  var someCheckedNotByDefaultChecked = checkSelection(_extends({}, props, {\n    data: data,\n    type: 'some',\n    byDefaultChecked: false\n  })) && !checkSelection(_extends({}, props, {\n    data: data,\n    type: 'every',\n    byDefaultChecked: false\n  }));\n  var someCheckedByDefaultChecked = checkSelection(_extends({}, props, {\n    data: data,\n    type: 'some',\n    byDefaultChecked: true\n  })) && !checkSelection(_extends({}, props, {\n    data: data,\n    type: 'every',\n    byDefaultChecked: true\n  }));\n\n  if (store.selectionDirty) {\n    return someCheckedNotByDefaultChecked;\n  }\n  return someCheckedNotByDefaultChecked || someCheckedByDefaultChecked;\n}\n\nfunction getCheckState(props) {\n  var store = props.store,\n      data = props.data;\n\n  if (!data.length) {\n    return false;\n  }\n  if (store.selectionDirty) {\n    return checkSelection(_extends({}, props, {\n      data: data,\n      type: 'every',\n      byDefaultChecked: false\n    }));\n  }\n  return checkSelection(_extends({}, props, {\n    data: data,\n    type: 'every',\n    byDefaultChecked: false\n  })) || checkSelection(_extends({}, props, {\n    data: data,\n    type: 'every',\n    byDefaultChecked: true\n  }));\n}\n\nexport default {\n  name: 'SelectionCheckboxAll',\n  mixins: [BaseMixin],\n  props: SelectionCheckboxAllProps,\n  data: function data() {\n    var props = this.$props;\n\n    this.defaultSelections = props.hideDefaultSelections ? [] : [{\n      key: 'all',\n      text: props.locale.selectAll\n    }, {\n      key: 'invert',\n      text: props.locale.selectInvert\n    }];\n    return {\n      checked: getCheckState(props),\n      indeterminate: getIndeterminateState(props)\n    };\n  },\n\n\n  watch: {\n    $props: {\n      handler: function handler() {\n        this.setCheckState(this.$props);\n      },\n\n      deep: true,\n      immediate: true\n    }\n  },\n\n  methods: {\n    checkSelection: function checkSelection(props, data, type, byDefaultChecked) {\n      var _ref2 = props || this.$props,\n          store = _ref2.store,\n          getCheckboxPropsByItem = _ref2.getCheckboxPropsByItem,\n          getRecordKey = _ref2.getRecordKey;\n      // type should be 'every' | 'some'\n\n\n      if (type === 'every' || type === 'some') {\n        return byDefaultChecked ? data[type](function (item, i) {\n          return getCheckboxPropsByItem(item, i).props.defaultChecked;\n        }) : data[type](function (item, i) {\n          return store.selectedRowKeys.indexOf(getRecordKey(item, i)) >= 0;\n        });\n      }\n      return false;\n    },\n    setCheckState: function setCheckState(props) {\n      var checked = getCheckState(props);\n      var indeterminate = getIndeterminateState(props);\n      this.setState(function (prevState) {\n        var newState = {};\n        if (indeterminate !== prevState.indeterminate) {\n          newState.indeterminate = indeterminate;\n        }\n        if (checked !== prevState.checked) {\n          newState.checked = checked;\n        }\n        return newState;\n      });\n    },\n    handleSelectAllChange: function handleSelectAllChange(e) {\n      var checked = e.target.checked;\n\n      this.$emit('select', checked ? 'all' : 'removeAll', 0, null);\n    },\n    renderMenus: function renderMenus(selections) {\n      var _this = this;\n\n      var h = this.$createElement;\n\n      return selections.map(function (selection, index) {\n        return h(\n          Menu.Item,\n          { key: selection.key || index },\n          [h(\n            'div',\n            {\n              on: {\n                'click': function click() {\n                  _this.$emit('select', selection.key, index, selection.onSelect);\n                }\n              }\n            },\n            [selection.text]\n          )]\n        );\n      });\n    }\n  },\n\n  render: function render() {\n    var h = arguments[0];\n    var disabled = this.disabled,\n        prefixCls = this.prefixCls,\n        selections = this.selections,\n        getPopupContainer = this.getPopupContainer,\n        checked = this.checked,\n        indeterminate = this.indeterminate;\n\n\n    var selectionPrefixCls = prefixCls + '-selection';\n\n    var customSelections = null;\n\n    if (selections) {\n      var newSelections = Array.isArray(selections) ? this.defaultSelections.concat(selections) : this.defaultSelections;\n\n      var menu = h(\n        Menu,\n        { 'class': selectionPrefixCls + '-menu', attrs: { selectedKeys: [] }\n        },\n        [this.renderMenus(newSelections)]\n      );\n\n      customSelections = newSelections.length > 0 ? h(\n        Dropdown,\n        {\n          attrs: { getPopupContainer: getPopupContainer }\n        },\n        [h(\n          'template',\n          { slot: 'overlay' },\n          [menu]\n        ), h(\n          'div',\n          { 'class': selectionPrefixCls + '-down' },\n          [h(Icon, {\n            attrs: { type: 'down' }\n          })]\n        )]\n      ) : null;\n    }\n\n    return h(\n      'div',\n      { 'class': selectionPrefixCls },\n      [h(Checkbox, {\n        'class': classNames(_defineProperty({}, selectionPrefixCls + '-select-all-custom', customSelections)),\n        attrs: { checked: checked,\n          indeterminate: indeterminate,\n          disabled: disabled\n        },\n        on: {\n          'change': this.handleSelectAllChange\n        }\n      }), customSelections]\n    );\n  }\n};"]},"metadata":{},"sourceType":"module"}