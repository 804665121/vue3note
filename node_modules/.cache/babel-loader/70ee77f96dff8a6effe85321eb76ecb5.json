{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport Notification from '../vc-notification';\nimport Icon from '../icon';\nvar defaultDuration = 3;\nvar defaultTop = void 0;\nvar messageInstance = void 0;\nvar key = 1;\nvar prefixCls = 'ant-message';\nvar transitionName = 'move-up';\n\nvar getContainer = function getContainer() {\n  return document.body;\n};\n\nvar maxCount = void 0;\n\nfunction getMessageInstance(callback) {\n  if (messageInstance) {\n    callback(messageInstance);\n    return;\n  }\n\n  Notification.newInstance({\n    prefixCls: prefixCls,\n    transitionName: transitionName,\n    style: {\n      top: defaultTop\n    },\n    // 覆盖原来的样式\n    getContainer: getContainer,\n    maxCount: maxCount\n  }, function (instance) {\n    if (messageInstance) {\n      callback(messageInstance);\n      return;\n    }\n\n    messageInstance = instance;\n    callback(instance);\n  });\n} // type NoticeType = 'info' | 'success' | 'error' | 'warning' | 'loading';\n\n\nfunction notice(args) {\n  var duration = args.duration !== undefined ? args.duration : defaultDuration;\n  var iconType = {\n    info: 'info-circle',\n    success: 'check-circle',\n    error: 'close-circle',\n    warning: 'exclamation-circle',\n    loading: 'loading'\n  }[args.type];\n  var target = args.key || key++;\n  var closePromise = new Promise(function (resolve) {\n    var callback = function callback() {\n      if (typeof args.onClose === 'function') {\n        args.onClose();\n      }\n\n      return resolve(true);\n    };\n\n    getMessageInstance(function (instance) {\n      instance.notice({\n        key: target,\n        duration: duration,\n        style: {},\n        content: function content(h) {\n          var iconNode = h(Icon, {\n            attrs: {\n              type: iconType,\n              theme: iconType === 'loading' ? 'outlined' : 'filled'\n            }\n          });\n          var switchIconNode = iconType ? iconNode : '';\n          return h('div', {\n            'class': prefixCls + '-custom-content' + (args.type ? ' ' + prefixCls + '-' + args.type : '')\n          }, [args.icon ? typeof args.icon === 'function' ? args.icon(h) : args.icon : switchIconNode, h('span', [typeof args.content === 'function' ? args.content(h) : args.content])]);\n        },\n        onClose: callback\n      });\n    });\n  });\n\n  var result = function result() {\n    if (messageInstance) {\n      messageInstance.removeNotice(target);\n    }\n  };\n\n  result.then = function (filled, rejected) {\n    return closePromise.then(filled, rejected);\n  };\n\n  result.promise = closePromise;\n  return result;\n} // type ConfigContent = React.ReactNode | string;\n// type ConfigDuration = number | (() => void);\n// export type ConfigOnClose = () => void;\n\n\nfunction isArgsProps(content) {\n  return Object.prototype.toString.call(content) === '[object Object]' && !!content.content;\n} // export interface ConfigOptions {\n//   top?: number;\n//   duration?: number;\n//   prefixCls?: string;\n//   getContainer?: () => HTMLElement;\n//   transitionName?: string;\n// }\n\n\nvar api = {\n  open: notice,\n  config: function config(options) {\n    if (options.top !== undefined) {\n      defaultTop = options.top;\n      messageInstance = null; // delete messageInstance for new defaultTop\n    }\n\n    if (options.duration !== undefined) {\n      defaultDuration = options.duration;\n    }\n\n    if (options.prefixCls !== undefined) {\n      prefixCls = options.prefixCls;\n    }\n\n    if (options.getContainer !== undefined) {\n      getContainer = options.getContainer;\n    }\n\n    if (options.transitionName !== undefined) {\n      transitionName = options.transitionName;\n      messageInstance = null; // delete messageInstance for new transitionName\n    }\n\n    if (options.maxCount !== undefined) {\n      maxCount = options.maxCount;\n      messageInstance = null;\n    }\n  },\n  destroy: function destroy() {\n    if (messageInstance) {\n      messageInstance.destroy();\n      messageInstance = null;\n    }\n  }\n};\n['success', 'info', 'warning', 'error', 'loading'].forEach(function (type) {\n  api[type] = function (content, duration, onClose) {\n    if (isArgsProps(content)) {\n      return api.open(_extends({}, content, {\n        type: type\n      }));\n    }\n\n    if (typeof duration === 'function') {\n      onClose = duration;\n      duration = undefined;\n    }\n\n    return api.open({\n      content: content,\n      duration: duration,\n      type: type,\n      onClose: onClose\n    });\n  };\n});\napi.warn = api.warning;\nexport default api;","map":{"version":3,"sources":["/Users/liulu/刘璐/vue3/hello-vue3/node_modules/ant-design-vue/es/message/index.js"],"names":["_extends","Notification","Icon","defaultDuration","defaultTop","messageInstance","key","prefixCls","transitionName","getContainer","document","body","maxCount","getMessageInstance","callback","newInstance","style","top","instance","notice","args","duration","undefined","iconType","info","success","error","warning","loading","type","target","closePromise","Promise","resolve","onClose","content","h","iconNode","attrs","theme","switchIconNode","icon","result","removeNotice","then","filled","rejected","promise","isArgsProps","Object","prototype","toString","call","api","open","config","options","destroy","forEach","warn"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport Notification from '../vc-notification';\nimport Icon from '../icon';\n\nvar defaultDuration = 3;\nvar defaultTop = void 0;\nvar messageInstance = void 0;\nvar key = 1;\nvar prefixCls = 'ant-message';\nvar transitionName = 'move-up';\nvar getContainer = function getContainer() {\n  return document.body;\n};\nvar maxCount = void 0;\n\nfunction getMessageInstance(callback) {\n  if (messageInstance) {\n    callback(messageInstance);\n    return;\n  }\n  Notification.newInstance({\n    prefixCls: prefixCls,\n    transitionName: transitionName,\n    style: { top: defaultTop }, // 覆盖原来的样式\n    getContainer: getContainer,\n    maxCount: maxCount\n  }, function (instance) {\n    if (messageInstance) {\n      callback(messageInstance);\n      return;\n    }\n    messageInstance = instance;\n    callback(instance);\n  });\n}\n\n// type NoticeType = 'info' | 'success' | 'error' | 'warning' | 'loading';\n\nfunction notice(args) {\n  var duration = args.duration !== undefined ? args.duration : defaultDuration;\n  var iconType = {\n    info: 'info-circle',\n    success: 'check-circle',\n    error: 'close-circle',\n    warning: 'exclamation-circle',\n    loading: 'loading'\n  }[args.type];\n\n  var target = args.key || key++;\n  var closePromise = new Promise(function (resolve) {\n    var callback = function callback() {\n      if (typeof args.onClose === 'function') {\n        args.onClose();\n      }\n      return resolve(true);\n    };\n    getMessageInstance(function (instance) {\n      instance.notice({\n        key: target,\n        duration: duration,\n        style: {},\n        content: function content(h) {\n          var iconNode = h(Icon, {\n            attrs: { type: iconType, theme: iconType === 'loading' ? 'outlined' : 'filled' }\n          });\n          var switchIconNode = iconType ? iconNode : '';\n          return h(\n            'div',\n            {\n              'class': prefixCls + '-custom-content' + (args.type ? ' ' + prefixCls + '-' + args.type : '')\n            },\n            [args.icon ? typeof args.icon === 'function' ? args.icon(h) : args.icon : switchIconNode, h('span', [typeof args.content === 'function' ? args.content(h) : args.content])]\n          );\n        },\n        onClose: callback\n      });\n    });\n  });\n  var result = function result() {\n    if (messageInstance) {\n      messageInstance.removeNotice(target);\n    }\n  };\n  result.then = function (filled, rejected) {\n    return closePromise.then(filled, rejected);\n  };\n  result.promise = closePromise;\n  return result;\n}\n\n// type ConfigContent = React.ReactNode | string;\n// type ConfigDuration = number | (() => void);\n// export type ConfigOnClose = () => void;\n\nfunction isArgsProps(content) {\n  return Object.prototype.toString.call(content) === '[object Object]' && !!content.content;\n}\n\n// export interface ConfigOptions {\n//   top?: number;\n//   duration?: number;\n//   prefixCls?: string;\n//   getContainer?: () => HTMLElement;\n//   transitionName?: string;\n// }\n\nvar api = {\n  open: notice,\n  config: function config(options) {\n    if (options.top !== undefined) {\n      defaultTop = options.top;\n      messageInstance = null; // delete messageInstance for new defaultTop\n    }\n    if (options.duration !== undefined) {\n      defaultDuration = options.duration;\n    }\n    if (options.prefixCls !== undefined) {\n      prefixCls = options.prefixCls;\n    }\n    if (options.getContainer !== undefined) {\n      getContainer = options.getContainer;\n    }\n    if (options.transitionName !== undefined) {\n      transitionName = options.transitionName;\n      messageInstance = null; // delete messageInstance for new transitionName\n    }\n    if (options.maxCount !== undefined) {\n      maxCount = options.maxCount;\n      messageInstance = null;\n    }\n  },\n  destroy: function destroy() {\n    if (messageInstance) {\n      messageInstance.destroy();\n      messageInstance = null;\n    }\n  }\n};\n\n['success', 'info', 'warning', 'error', 'loading'].forEach(function (type) {\n  api[type] = function (content, duration, onClose) {\n    if (isArgsProps(content)) {\n      return api.open(_extends({}, content, { type: type }));\n    }\n    if (typeof duration === 'function') {\n      onClose = duration;\n      duration = undefined;\n    }\n    return api.open({ content: content, duration: duration, type: type, onClose: onClose });\n  };\n});\n\napi.warn = api.warning;\n\nexport default api;"]},"metadata":{},"sourceType":"module"}