{"ast":null,"code":"import _mergeJSXProps from 'babel-helper-vue-jsx-merge-props';\nimport PropTypes from '../../../_util/vue-types';\nimport BaseMixin from '../../../_util/BaseMixin';\nimport { getComponentFromProp } from '../../../_util/props-util';\nimport moment from 'moment';\nimport { formatDate } from '../util';\nimport KeyCode from '../../../_util/KeyCode';\nvar cachedSelectionStart = void 0;\nvar cachedSelectionEnd = void 0;\nvar dateInputInstance = void 0;\nvar DateInput = {\n  mixins: [BaseMixin],\n  props: {\n    prefixCls: PropTypes.string,\n    timePicker: PropTypes.object,\n    value: PropTypes.object,\n    disabledTime: PropTypes.any,\n    format: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string), PropTypes.func]),\n    locale: PropTypes.object,\n    disabledDate: PropTypes.func,\n    // onChange: PropTypes.func,\n    // onClear: PropTypes.func,\n    placeholder: PropTypes.string,\n    // onSelect: PropTypes.func,\n    selectedValue: PropTypes.object,\n    clearIcon: PropTypes.any,\n    inputMode: PropTypes.string,\n    inputReadOnly: PropTypes.bool\n  },\n  data: function data() {\n    var selectedValue = this.selectedValue;\n    return {\n      str: formatDate(selectedValue, this.format),\n      invalid: false,\n      hasFocus: false\n    };\n  },\n  watch: {\n    selectedValue: function selectedValue() {\n      this.setState();\n    },\n    format: function format() {\n      this.setState();\n    }\n  },\n  updated: function updated() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      if (dateInputInstance && _this.$data.hasFocus && !_this.invalid && !(cachedSelectionStart === 0 && cachedSelectionEnd === 0)) {\n        dateInputInstance.setSelectionRange(cachedSelectionStart, cachedSelectionEnd);\n      }\n    });\n  },\n  getInstance: function getInstance() {\n    return dateInputInstance;\n  },\n  methods: {\n    getDerivedStateFromProps: function getDerivedStateFromProps(nextProps, state) {\n      var newState = {};\n\n      if (dateInputInstance) {\n        cachedSelectionStart = dateInputInstance.selectionStart;\n        cachedSelectionEnd = dateInputInstance.selectionEnd;\n      } // when popup show, click body will call this, bug!\n\n\n      var selectedValue = nextProps.selectedValue;\n\n      if (!state.hasFocus) {\n        newState = {\n          str: formatDate(selectedValue, this.format),\n          invalid: false\n        };\n      }\n\n      return newState;\n    },\n    onClear: function onClear() {\n      this.setState({\n        str: ''\n      });\n\n      this.__emit('clear', null);\n    },\n    onInputChange: function onInputChange(e) {\n      var _e$target = e.target,\n          str = _e$target.value,\n          composing = _e$target.composing;\n      var _str = this.str,\n          oldStr = _str === undefined ? '' : _str;\n      if (e.isComposing || composing || oldStr === str) return;\n      var _$props = this.$props,\n          disabledDate = _$props.disabledDate,\n          format = _$props.format,\n          selectedValue = _$props.selectedValue; // 没有内容，合法并直接退出\n\n      if (!str) {\n        this.__emit('change', null);\n\n        this.setState({\n          invalid: false,\n          str: str\n        });\n        return;\n      } // 不合法直接退出\n\n\n      var parsed = moment(str, format, true);\n\n      if (!parsed.isValid()) {\n        this.setState({\n          invalid: true,\n          str: str\n        });\n        return;\n      }\n\n      var value = this.value.clone();\n      value.year(parsed.year()).month(parsed.month()).date(parsed.date()).hour(parsed.hour()).minute(parsed.minute()).second(parsed.second());\n\n      if (!value || disabledDate && disabledDate(value)) {\n        this.setState({\n          invalid: true,\n          str: str\n        });\n        return;\n      }\n\n      if (selectedValue !== value || selectedValue && value && !selectedValue.isSame(value)) {\n        this.setState({\n          invalid: false,\n          str: str\n        });\n\n        this.__emit('change', value);\n      }\n    },\n    onFocus: function onFocus() {\n      this.setState({\n        hasFocus: true\n      });\n    },\n    onBlur: function onBlur() {\n      this.setState(function (prevState, prevProps) {\n        return {\n          hasFocus: false,\n          str: formatDate(prevProps.value, prevProps.format)\n        };\n      });\n    },\n    onKeyDown: function onKeyDown(event) {\n      var keyCode = event.keyCode;\n      var _$props2 = this.$props,\n          value = _$props2.value,\n          disabledDate = _$props2.disabledDate;\n\n      if (keyCode === KeyCode.ENTER) {\n        var validateDate = !disabledDate || !disabledDate(value);\n\n        if (validateDate) {\n          this.__emit('select', value.clone());\n        }\n\n        event.preventDefault();\n      }\n    },\n    getRootDOMNode: function getRootDOMNode() {\n      return this.$el;\n    },\n    focus: function focus() {\n      if (dateInputInstance) {\n        dateInputInstance.focus();\n      }\n    },\n    saveDateInput: function saveDateInput(dateInput) {\n      dateInputInstance = dateInput;\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    var invalid = this.invalid,\n        str = this.str,\n        locale = this.locale,\n        prefixCls = this.prefixCls,\n        placeholder = this.placeholder,\n        disabled = this.disabled,\n        showClear = this.showClear,\n        inputMode = this.inputMode,\n        inputReadOnly = this.inputReadOnly;\n    var clearIcon = getComponentFromProp(this, 'clearIcon');\n    var invalidClass = invalid ? prefixCls + '-input-invalid' : '';\n    return h('div', {\n      'class': prefixCls + '-input-wrap'\n    }, [h('div', {\n      'class': prefixCls + '-date-input-wrap'\n    }, [h('input', _mergeJSXProps([{\n      directives: [{\n        name: 'ant-ref',\n        value: this.saveDateInput\n      }, {\n        name: 'ant-input'\n      }]\n    }, {\n      'class': prefixCls + '-input ' + invalidClass,\n      domProps: {\n        'value': str\n      },\n      attrs: {\n        disabled: disabled,\n        placeholder: placeholder,\n        inputMode: inputMode,\n        readOnly: inputReadOnly\n      },\n      on: {\n        'input': this.onInputChange,\n        'keydown': this.onKeyDown,\n        'focus': this.onFocus,\n        'blur': this.onBlur\n      }\n    }]))]), showClear ? h('a', {\n      attrs: {\n        role: 'button',\n        title: locale.clear\n      },\n      on: {\n        'click': this.onClear\n      }\n    }, [clearIcon || h('span', {\n      'class': prefixCls + '-clear-btn'\n    })]) : null]);\n  }\n};\nexport default DateInput;","map":{"version":3,"sources":["/Users/liulu/刘璐/vue3/hello-vue3/node_modules/ant-design-vue/es/vc-calendar/src/date/DateInput.js"],"names":["_mergeJSXProps","PropTypes","BaseMixin","getComponentFromProp","moment","formatDate","KeyCode","cachedSelectionStart","cachedSelectionEnd","dateInputInstance","DateInput","mixins","props","prefixCls","string","timePicker","object","value","disabledTime","any","format","oneOfType","arrayOf","func","locale","disabledDate","placeholder","selectedValue","clearIcon","inputMode","inputReadOnly","bool","data","str","invalid","hasFocus","watch","setState","updated","_this","$nextTick","$data","setSelectionRange","getInstance","methods","getDerivedStateFromProps","nextProps","state","newState","selectionStart","selectionEnd","onClear","__emit","onInputChange","e","_e$target","target","composing","_str","oldStr","undefined","isComposing","_$props","$props","parsed","isValid","clone","year","month","date","hour","minute","second","isSame","onFocus","onBlur","prevState","prevProps","onKeyDown","event","keyCode","_$props2","ENTER","validateDate","preventDefault","getRootDOMNode","$el","focus","saveDateInput","dateInput","render","h","arguments","disabled","showClear","invalidClass","directives","name","domProps","attrs","readOnly","on","role","title","clear"],"mappings":"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","sourcesContent":["import _mergeJSXProps from 'babel-helper-vue-jsx-merge-props';\nimport PropTypes from '../../../_util/vue-types';\nimport BaseMixin from '../../../_util/BaseMixin';\nimport { getComponentFromProp } from '../../../_util/props-util';\nimport moment from 'moment';\nimport { formatDate } from '../util';\nimport KeyCode from '../../../_util/KeyCode';\n\nvar cachedSelectionStart = void 0;\nvar cachedSelectionEnd = void 0;\nvar dateInputInstance = void 0;\n\nvar DateInput = {\n  mixins: [BaseMixin],\n  props: {\n    prefixCls: PropTypes.string,\n    timePicker: PropTypes.object,\n    value: PropTypes.object,\n    disabledTime: PropTypes.any,\n    format: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string), PropTypes.func]),\n    locale: PropTypes.object,\n    disabledDate: PropTypes.func,\n    // onChange: PropTypes.func,\n    // onClear: PropTypes.func,\n    placeholder: PropTypes.string,\n    // onSelect: PropTypes.func,\n    selectedValue: PropTypes.object,\n    clearIcon: PropTypes.any,\n    inputMode: PropTypes.string,\n    inputReadOnly: PropTypes.bool\n  },\n\n  data: function data() {\n    var selectedValue = this.selectedValue;\n    return {\n      str: formatDate(selectedValue, this.format),\n      invalid: false,\n      hasFocus: false\n    };\n  },\n\n  watch: {\n    selectedValue: function selectedValue() {\n      this.setState();\n    },\n    format: function format() {\n      this.setState();\n    }\n  },\n\n  updated: function updated() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      if (dateInputInstance && _this.$data.hasFocus && !_this.invalid && !(cachedSelectionStart === 0 && cachedSelectionEnd === 0)) {\n        dateInputInstance.setSelectionRange(cachedSelectionStart, cachedSelectionEnd);\n      }\n    });\n  },\n  getInstance: function getInstance() {\n    return dateInputInstance;\n  },\n\n  methods: {\n    getDerivedStateFromProps: function getDerivedStateFromProps(nextProps, state) {\n      var newState = {};\n      if (dateInputInstance) {\n        cachedSelectionStart = dateInputInstance.selectionStart;\n        cachedSelectionEnd = dateInputInstance.selectionEnd;\n      }\n      // when popup show, click body will call this, bug!\n      var selectedValue = nextProps.selectedValue;\n      if (!state.hasFocus) {\n        newState = {\n          str: formatDate(selectedValue, this.format),\n          invalid: false\n        };\n      }\n      return newState;\n    },\n    onClear: function onClear() {\n      this.setState({\n        str: ''\n      });\n      this.__emit('clear', null);\n    },\n    onInputChange: function onInputChange(e) {\n      var _e$target = e.target,\n          str = _e$target.value,\n          composing = _e$target.composing;\n      var _str = this.str,\n          oldStr = _str === undefined ? '' : _str;\n\n      if (e.isComposing || composing || oldStr === str) return;\n\n      var _$props = this.$props,\n          disabledDate = _$props.disabledDate,\n          format = _$props.format,\n          selectedValue = _$props.selectedValue;\n\n      // 没有内容，合法并直接退出\n\n      if (!str) {\n        this.__emit('change', null);\n        this.setState({\n          invalid: false,\n          str: str\n        });\n        return;\n      }\n\n      // 不合法直接退出\n      var parsed = moment(str, format, true);\n      if (!parsed.isValid()) {\n        this.setState({\n          invalid: true,\n          str: str\n        });\n        return;\n      }\n      var value = this.value.clone();\n      value.year(parsed.year()).month(parsed.month()).date(parsed.date()).hour(parsed.hour()).minute(parsed.minute()).second(parsed.second());\n\n      if (!value || disabledDate && disabledDate(value)) {\n        this.setState({\n          invalid: true,\n          str: str\n        });\n        return;\n      }\n\n      if (selectedValue !== value || selectedValue && value && !selectedValue.isSame(value)) {\n        this.setState({\n          invalid: false,\n          str: str\n        });\n        this.__emit('change', value);\n      }\n    },\n    onFocus: function onFocus() {\n      this.setState({ hasFocus: true });\n    },\n    onBlur: function onBlur() {\n      this.setState(function (prevState, prevProps) {\n        return {\n          hasFocus: false,\n          str: formatDate(prevProps.value, prevProps.format)\n        };\n      });\n    },\n    onKeyDown: function onKeyDown(event) {\n      var keyCode = event.keyCode;\n      var _$props2 = this.$props,\n          value = _$props2.value,\n          disabledDate = _$props2.disabledDate;\n\n      if (keyCode === KeyCode.ENTER) {\n        var validateDate = !disabledDate || !disabledDate(value);\n        if (validateDate) {\n          this.__emit('select', value.clone());\n        }\n        event.preventDefault();\n      }\n    },\n    getRootDOMNode: function getRootDOMNode() {\n      return this.$el;\n    },\n    focus: function focus() {\n      if (dateInputInstance) {\n        dateInputInstance.focus();\n      }\n    },\n    saveDateInput: function saveDateInput(dateInput) {\n      dateInputInstance = dateInput;\n    }\n  },\n\n  render: function render() {\n    var h = arguments[0];\n    var invalid = this.invalid,\n        str = this.str,\n        locale = this.locale,\n        prefixCls = this.prefixCls,\n        placeholder = this.placeholder,\n        disabled = this.disabled,\n        showClear = this.showClear,\n        inputMode = this.inputMode,\n        inputReadOnly = this.inputReadOnly;\n\n    var clearIcon = getComponentFromProp(this, 'clearIcon');\n    var invalidClass = invalid ? prefixCls + '-input-invalid' : '';\n    return h(\n      'div',\n      { 'class': prefixCls + '-input-wrap' },\n      [h(\n        'div',\n        { 'class': prefixCls + '-date-input-wrap' },\n        [h('input', _mergeJSXProps([{\n          directives: [{\n            name: 'ant-ref',\n            value: this.saveDateInput\n          }, {\n            name: 'ant-input'\n          }]\n        }, {\n          'class': prefixCls + '-input ' + invalidClass,\n          domProps: {\n            'value': str\n          },\n          attrs: {\n            disabled: disabled,\n            placeholder: placeholder,\n\n            inputMode: inputMode,\n            readOnly: inputReadOnly\n          },\n          on: {\n            'input': this.onInputChange,\n            'keydown': this.onKeyDown,\n            'focus': this.onFocus,\n            'blur': this.onBlur\n          }\n        }]))]\n      ), showClear ? h(\n        'a',\n        {\n          attrs: { role: 'button', title: locale.clear },\n          on: {\n            'click': this.onClear\n          }\n        },\n        [clearIcon || h('span', { 'class': prefixCls + '-clear-btn' })]\n      ) : null]\n    );\n  }\n};\n\nexport default DateInput;"]},"metadata":{},"sourceType":"module"}