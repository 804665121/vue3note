{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport PropTypes from '../_util/vue-types';\nimport classNames from 'classnames';\nimport addEventListener from '../vc-util/Dom/addEventListener';\nimport Affix from '../affix';\nimport scrollTo from '../_util/scrollTo';\nimport getScroll from '../_util/getScroll';\nimport { initDefaultProps } from '../_util/props-util';\nimport BaseMixin from '../_util/BaseMixin';\nimport { ConfigConsumerProps } from '../config-provider/configConsumerProps';\n\nfunction getDefaultContainer() {\n  return window;\n}\n\nfunction getOffsetTop(element, container) {\n  if (!element) {\n    return 0;\n  }\n\n  if (!element.getClientRects().length) {\n    return 0;\n  }\n\n  var rect = element.getBoundingClientRect();\n\n  if (rect.width || rect.height) {\n    if (container === window) {\n      container = element.ownerDocument.documentElement;\n      return rect.top - container.clientTop;\n    }\n\n    return rect.top - container.getBoundingClientRect().top;\n  }\n\n  return rect.top;\n} // function easeInOutCubic(t, b, c, d) {\n//   const cc = c - b;\n//   t /= d / 2;\n//   if (t < 1) {\n//     return (cc / 2) * t * t * t + b;\n//   }\n//   return (cc / 2) * ((t -= 2) * t * t + 2) + b;\n// }\n\n\nvar sharpMatcherRegx = /#([^#]+)$/; // function scrollTo(href, offsetTop = 0, getContainer, callback = () => {}) {\n//   const container = getContainer();\n//   const scrollTop = getScroll(container, true);\n//   const sharpLinkMatch = sharpMatcherRegx.exec(href);\n//   if (!sharpLinkMatch) {\n//     return;\n//   }\n//   const targetElement = document.getElementById(sharpLinkMatch[1]);\n//   if (!targetElement) {\n//     return;\n//   }\n//   const eleOffsetTop = getOffsetTop(targetElement, container);\n//   const targetScrollTop = scrollTop + eleOffsetTop - offsetTop;\n//   const startTime = Date.now();\n//   const frameFunc = () => {\n//     const timestamp = Date.now();\n//     const time = timestamp - startTime;\n//     const nextScrollTop = easeInOutCubic(time, scrollTop, targetScrollTop, 450);\n//     if (container === window) {\n//       window.scrollTo(window.pageXOffset, nextScrollTop);\n//     } else {\n//       container.scrollTop = nextScrollTop;\n//     }\n//     if (time < 450) {\n//       raf(frameFunc);\n//     } else {\n//       callback();\n//     }\n//   };\n//   raf(frameFunc);\n// }\n\nexport var AnchorProps = {\n  prefixCls: PropTypes.string,\n  offsetTop: PropTypes.number,\n  bounds: PropTypes.number,\n  affix: PropTypes.bool,\n  showInkInFixed: PropTypes.bool,\n  getContainer: PropTypes.func,\n  wrapperClass: PropTypes.string,\n  wrapperStyle: PropTypes.object,\n  getCurrentAnchor: PropTypes.func,\n  targetOffset: PropTypes.number\n};\nexport default {\n  name: 'AAnchor',\n  mixins: [BaseMixin],\n  inheritAttrs: false,\n  props: initDefaultProps(AnchorProps, {\n    affix: true,\n    showInkInFixed: false,\n    getContainer: getDefaultContainer\n  }),\n  inject: {\n    configProvider: {\n      'default': function _default() {\n        return ConfigConsumerProps;\n      }\n    }\n  },\n  data: function data() {\n    this.links = [];\n    this._sPrefixCls = '';\n    return {\n      activeLink: null\n    };\n  },\n  provide: function provide() {\n    var _this = this;\n\n    return {\n      antAnchor: {\n        registerLink: function registerLink(link) {\n          if (!_this.links.includes(link)) {\n            _this.links.push(link);\n          }\n        },\n        unregisterLink: function unregisterLink(link) {\n          var index = _this.links.indexOf(link);\n\n          if (index !== -1) {\n            _this.links.splice(index, 1);\n          }\n        },\n        $data: this.$data,\n        scrollTo: this.handleScrollTo\n      },\n      antAnchorContext: this\n    };\n  },\n  mounted: function mounted() {\n    var _this2 = this;\n\n    this.$nextTick(function () {\n      var getContainer = _this2.getContainer;\n      _this2.scrollContainer = getContainer();\n      _this2.scrollEvent = addEventListener(_this2.scrollContainer, 'scroll', _this2.handleScroll);\n\n      _this2.handleScroll();\n    });\n  },\n  updated: function updated() {\n    var _this3 = this;\n\n    this.$nextTick(function () {\n      if (_this3.scrollEvent) {\n        var getContainer = _this3.getContainer;\n        var currentContainer = getContainer();\n\n        if (_this3.scrollContainer !== currentContainer) {\n          _this3.scrollContainer = currentContainer;\n\n          _this3.scrollEvent.remove();\n\n          _this3.scrollEvent = addEventListener(_this3.scrollContainer, 'scroll', _this3.handleScroll);\n\n          _this3.handleScroll();\n        }\n      }\n\n      _this3.updateInk();\n    });\n  },\n  beforeDestroy: function beforeDestroy() {\n    if (this.scrollEvent) {\n      this.scrollEvent.remove();\n    }\n  },\n  methods: {\n    getCurrentActiveLink: function getCurrentActiveLink() {\n      var offsetTop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var bounds = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n      var getCurrentAnchor = this.getCurrentAnchor;\n\n      if (typeof getCurrentAnchor === 'function') {\n        return getCurrentAnchor();\n      }\n\n      var activeLink = '';\n\n      if (typeof document === 'undefined') {\n        return activeLink;\n      }\n\n      var linkSections = [];\n      var getContainer = this.getContainer;\n      var container = getContainer();\n      this.links.forEach(function (link) {\n        var sharpLinkMatch = sharpMatcherRegx.exec(link.toString());\n\n        if (!sharpLinkMatch) {\n          return;\n        }\n\n        var target = document.getElementById(sharpLinkMatch[1]);\n\n        if (target) {\n          var top = getOffsetTop(target, container);\n\n          if (top < offsetTop + bounds) {\n            linkSections.push({\n              link: link,\n              top: top\n            });\n          }\n        }\n      });\n\n      if (linkSections.length) {\n        var maxSection = linkSections.reduce(function (prev, curr) {\n          return curr.top > prev.top ? curr : prev;\n        });\n        return maxSection.link;\n      }\n\n      return '';\n    },\n    handleScrollTo: function handleScrollTo(link) {\n      var _this4 = this;\n\n      var offsetTop = this.offsetTop,\n          getContainer = this.getContainer,\n          targetOffset = this.targetOffset;\n      this.setCurrentActiveLink(link);\n      var container = getContainer();\n      var scrollTop = getScroll(container, true);\n      var sharpLinkMatch = sharpMatcherRegx.exec(link);\n\n      if (!sharpLinkMatch) {\n        return;\n      }\n\n      var targetElement = document.getElementById(sharpLinkMatch[1]);\n\n      if (!targetElement) {\n        return;\n      }\n\n      var eleOffsetTop = getOffsetTop(targetElement, container);\n      var y = scrollTop + eleOffsetTop;\n      y -= targetOffset !== undefined ? targetOffset : offsetTop || 0;\n      this.animating = true;\n      scrollTo(y, {\n        callback: function callback() {\n          _this4.animating = false;\n        },\n        getContainer: getContainer\n      });\n    },\n    setCurrentActiveLink: function setCurrentActiveLink(link) {\n      var activeLink = this.activeLink;\n\n      if (activeLink !== link) {\n        this.setState({\n          activeLink: link\n        });\n        this.$emit('change', link);\n      }\n    },\n    handleScroll: function handleScroll() {\n      if (this.animating) {\n        return;\n      }\n\n      var offsetTop = this.offsetTop,\n          bounds = this.bounds,\n          targetOffset = this.targetOffset;\n      var currentActiveLink = this.getCurrentActiveLink(targetOffset !== undefined ? targetOffset : offsetTop || 0, bounds);\n      this.setCurrentActiveLink(currentActiveLink);\n    },\n    updateInk: function updateInk() {\n      if (typeof document === 'undefined') {\n        return;\n      }\n\n      var _sPrefixCls = this._sPrefixCls;\n      var linkNode = this.$el.getElementsByClassName(_sPrefixCls + '-link-title-active')[0];\n\n      if (linkNode) {\n        this.$refs.inkNode.style.top = linkNode.offsetTop + linkNode.clientHeight / 2 - 4.5 + 'px';\n      }\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    var customizePrefixCls = this.prefixCls,\n        offsetTop = this.offsetTop,\n        affix = this.affix,\n        showInkInFixed = this.showInkInFixed,\n        activeLink = this.activeLink,\n        $slots = this.$slots,\n        getContainer = this.getContainer;\n    var getPrefixCls = this.configProvider.getPrefixCls;\n    var prefixCls = getPrefixCls('anchor', customizePrefixCls);\n    this._sPrefixCls = prefixCls;\n    var inkClass = classNames(prefixCls + '-ink-ball', {\n      visible: activeLink\n    });\n    var wrapperClass = classNames(this.wrapperClass, prefixCls + '-wrapper');\n    var anchorClass = classNames(prefixCls, {\n      fixed: !affix && !showInkInFixed\n    });\n\n    var wrapperStyle = _extends({\n      maxHeight: offsetTop ? 'calc(100vh - ' + offsetTop + 'px)' : '100vh'\n    }, this.wrapperStyle);\n\n    var anchorContent = h('div', {\n      'class': wrapperClass,\n      style: wrapperStyle\n    }, [h('div', {\n      'class': anchorClass\n    }, [h('div', {\n      'class': prefixCls + '-ink'\n    }, [h('span', {\n      'class': inkClass,\n      ref: 'inkNode'\n    })]), $slots['default']])]);\n    return !affix ? anchorContent : h(Affix, {\n      attrs: {\n        offsetTop: offsetTop,\n        target: getContainer\n      }\n    }, [anchorContent]);\n  }\n};","map":{"version":3,"sources":["/Users/liulu/刘璐/vue3/hello-vue3/node_modules/ant-design-vue/es/anchor/Anchor.js"],"names":["_extends","PropTypes","classNames","addEventListener","Affix","scrollTo","getScroll","initDefaultProps","BaseMixin","ConfigConsumerProps","getDefaultContainer","window","getOffsetTop","element","container","getClientRects","length","rect","getBoundingClientRect","width","height","ownerDocument","documentElement","top","clientTop","sharpMatcherRegx","AnchorProps","prefixCls","string","offsetTop","number","bounds","affix","bool","showInkInFixed","getContainer","func","wrapperClass","wrapperStyle","object","getCurrentAnchor","targetOffset","name","mixins","inheritAttrs","props","inject","configProvider","_default","data","links","_sPrefixCls","activeLink","provide","_this","antAnchor","registerLink","link","includes","push","unregisterLink","index","indexOf","splice","$data","handleScrollTo","antAnchorContext","mounted","_this2","$nextTick","scrollContainer","scrollEvent","handleScroll","updated","_this3","currentContainer","remove","updateInk","beforeDestroy","methods","getCurrentActiveLink","arguments","undefined","document","linkSections","forEach","sharpLinkMatch","exec","toString","target","getElementById","maxSection","reduce","prev","curr","_this4","setCurrentActiveLink","scrollTop","targetElement","eleOffsetTop","y","animating","callback","setState","$emit","currentActiveLink","linkNode","$el","getElementsByClassName","$refs","inkNode","style","clientHeight","render","h","customizePrefixCls","$slots","getPrefixCls","inkClass","visible","anchorClass","fixed","maxHeight","anchorContent","ref","attrs"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport PropTypes from '../_util/vue-types';\nimport classNames from 'classnames';\nimport addEventListener from '../vc-util/Dom/addEventListener';\nimport Affix from '../affix';\nimport scrollTo from '../_util/scrollTo';\nimport getScroll from '../_util/getScroll';\nimport { initDefaultProps } from '../_util/props-util';\nimport BaseMixin from '../_util/BaseMixin';\nimport { ConfigConsumerProps } from '../config-provider/configConsumerProps';\n\nfunction getDefaultContainer() {\n  return window;\n}\n\nfunction getOffsetTop(element, container) {\n  if (!element) {\n    return 0;\n  }\n\n  if (!element.getClientRects().length) {\n    return 0;\n  }\n\n  var rect = element.getBoundingClientRect();\n\n  if (rect.width || rect.height) {\n    if (container === window) {\n      container = element.ownerDocument.documentElement;\n      return rect.top - container.clientTop;\n    }\n    return rect.top - container.getBoundingClientRect().top;\n  }\n\n  return rect.top;\n}\n\n// function easeInOutCubic(t, b, c, d) {\n//   const cc = c - b;\n//   t /= d / 2;\n//   if (t < 1) {\n//     return (cc / 2) * t * t * t + b;\n//   }\n//   return (cc / 2) * ((t -= 2) * t * t + 2) + b;\n// }\n\nvar sharpMatcherRegx = /#([^#]+)$/;\n// function scrollTo(href, offsetTop = 0, getContainer, callback = () => {}) {\n//   const container = getContainer();\n//   const scrollTop = getScroll(container, true);\n//   const sharpLinkMatch = sharpMatcherRegx.exec(href);\n//   if (!sharpLinkMatch) {\n//     return;\n//   }\n//   const targetElement = document.getElementById(sharpLinkMatch[1]);\n//   if (!targetElement) {\n//     return;\n//   }\n//   const eleOffsetTop = getOffsetTop(targetElement, container);\n//   const targetScrollTop = scrollTop + eleOffsetTop - offsetTop;\n//   const startTime = Date.now();\n//   const frameFunc = () => {\n//     const timestamp = Date.now();\n//     const time = timestamp - startTime;\n//     const nextScrollTop = easeInOutCubic(time, scrollTop, targetScrollTop, 450);\n//     if (container === window) {\n//       window.scrollTo(window.pageXOffset, nextScrollTop);\n//     } else {\n//       container.scrollTop = nextScrollTop;\n//     }\n//     if (time < 450) {\n//       raf(frameFunc);\n//     } else {\n//       callback();\n//     }\n//   };\n//   raf(frameFunc);\n// }\n\nexport var AnchorProps = {\n  prefixCls: PropTypes.string,\n  offsetTop: PropTypes.number,\n  bounds: PropTypes.number,\n  affix: PropTypes.bool,\n  showInkInFixed: PropTypes.bool,\n  getContainer: PropTypes.func,\n  wrapperClass: PropTypes.string,\n  wrapperStyle: PropTypes.object,\n  getCurrentAnchor: PropTypes.func,\n  targetOffset: PropTypes.number\n};\n\nexport default {\n  name: 'AAnchor',\n  mixins: [BaseMixin],\n  inheritAttrs: false,\n  props: initDefaultProps(AnchorProps, {\n    affix: true,\n    showInkInFixed: false,\n    getContainer: getDefaultContainer\n  }),\n  inject: {\n    configProvider: { 'default': function _default() {\n        return ConfigConsumerProps;\n      } }\n  },\n  data: function data() {\n    this.links = [];\n    this._sPrefixCls = '';\n    return {\n      activeLink: null\n    };\n  },\n  provide: function provide() {\n    var _this = this;\n\n    return {\n      antAnchor: {\n        registerLink: function registerLink(link) {\n          if (!_this.links.includes(link)) {\n            _this.links.push(link);\n          }\n        },\n        unregisterLink: function unregisterLink(link) {\n          var index = _this.links.indexOf(link);\n          if (index !== -1) {\n            _this.links.splice(index, 1);\n          }\n        },\n        $data: this.$data,\n        scrollTo: this.handleScrollTo\n      },\n      antAnchorContext: this\n    };\n  },\n  mounted: function mounted() {\n    var _this2 = this;\n\n    this.$nextTick(function () {\n      var getContainer = _this2.getContainer;\n\n      _this2.scrollContainer = getContainer();\n      _this2.scrollEvent = addEventListener(_this2.scrollContainer, 'scroll', _this2.handleScroll);\n      _this2.handleScroll();\n    });\n  },\n  updated: function updated() {\n    var _this3 = this;\n\n    this.$nextTick(function () {\n      if (_this3.scrollEvent) {\n        var getContainer = _this3.getContainer;\n\n        var currentContainer = getContainer();\n        if (_this3.scrollContainer !== currentContainer) {\n          _this3.scrollContainer = currentContainer;\n          _this3.scrollEvent.remove();\n          _this3.scrollEvent = addEventListener(_this3.scrollContainer, 'scroll', _this3.handleScroll);\n          _this3.handleScroll();\n        }\n      }\n      _this3.updateInk();\n    });\n  },\n  beforeDestroy: function beforeDestroy() {\n    if (this.scrollEvent) {\n      this.scrollEvent.remove();\n    }\n  },\n\n  methods: {\n    getCurrentActiveLink: function getCurrentActiveLink() {\n      var offsetTop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var bounds = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n      var getCurrentAnchor = this.getCurrentAnchor;\n\n\n      if (typeof getCurrentAnchor === 'function') {\n        return getCurrentAnchor();\n      }\n      var activeLink = '';\n      if (typeof document === 'undefined') {\n        return activeLink;\n      }\n\n      var linkSections = [];\n      var getContainer = this.getContainer;\n\n      var container = getContainer();\n      this.links.forEach(function (link) {\n        var sharpLinkMatch = sharpMatcherRegx.exec(link.toString());\n        if (!sharpLinkMatch) {\n          return;\n        }\n        var target = document.getElementById(sharpLinkMatch[1]);\n        if (target) {\n          var top = getOffsetTop(target, container);\n          if (top < offsetTop + bounds) {\n            linkSections.push({\n              link: link,\n              top: top\n            });\n          }\n        }\n      });\n\n      if (linkSections.length) {\n        var maxSection = linkSections.reduce(function (prev, curr) {\n          return curr.top > prev.top ? curr : prev;\n        });\n        return maxSection.link;\n      }\n      return '';\n    },\n    handleScrollTo: function handleScrollTo(link) {\n      var _this4 = this;\n\n      var offsetTop = this.offsetTop,\n          getContainer = this.getContainer,\n          targetOffset = this.targetOffset;\n\n\n      this.setCurrentActiveLink(link);\n      var container = getContainer();\n      var scrollTop = getScroll(container, true);\n      var sharpLinkMatch = sharpMatcherRegx.exec(link);\n      if (!sharpLinkMatch) {\n        return;\n      }\n      var targetElement = document.getElementById(sharpLinkMatch[1]);\n      if (!targetElement) {\n        return;\n      }\n\n      var eleOffsetTop = getOffsetTop(targetElement, container);\n      var y = scrollTop + eleOffsetTop;\n      y -= targetOffset !== undefined ? targetOffset : offsetTop || 0;\n      this.animating = true;\n\n      scrollTo(y, {\n        callback: function callback() {\n          _this4.animating = false;\n        },\n        getContainer: getContainer\n      });\n    },\n    setCurrentActiveLink: function setCurrentActiveLink(link) {\n      var activeLink = this.activeLink;\n\n\n      if (activeLink !== link) {\n        this.setState({\n          activeLink: link\n        });\n        this.$emit('change', link);\n      }\n    },\n    handleScroll: function handleScroll() {\n      if (this.animating) {\n        return;\n      }\n      var offsetTop = this.offsetTop,\n          bounds = this.bounds,\n          targetOffset = this.targetOffset;\n\n      var currentActiveLink = this.getCurrentActiveLink(targetOffset !== undefined ? targetOffset : offsetTop || 0, bounds);\n      this.setCurrentActiveLink(currentActiveLink);\n    },\n    updateInk: function updateInk() {\n      if (typeof document === 'undefined') {\n        return;\n      }\n      var _sPrefixCls = this._sPrefixCls;\n\n      var linkNode = this.$el.getElementsByClassName(_sPrefixCls + '-link-title-active')[0];\n      if (linkNode) {\n        this.$refs.inkNode.style.top = linkNode.offsetTop + linkNode.clientHeight / 2 - 4.5 + 'px';\n      }\n    }\n  },\n\n  render: function render() {\n    var h = arguments[0];\n    var customizePrefixCls = this.prefixCls,\n        offsetTop = this.offsetTop,\n        affix = this.affix,\n        showInkInFixed = this.showInkInFixed,\n        activeLink = this.activeLink,\n        $slots = this.$slots,\n        getContainer = this.getContainer;\n\n\n    var getPrefixCls = this.configProvider.getPrefixCls;\n    var prefixCls = getPrefixCls('anchor', customizePrefixCls);\n    this._sPrefixCls = prefixCls;\n\n    var inkClass = classNames(prefixCls + '-ink-ball', {\n      visible: activeLink\n    });\n\n    var wrapperClass = classNames(this.wrapperClass, prefixCls + '-wrapper');\n\n    var anchorClass = classNames(prefixCls, {\n      fixed: !affix && !showInkInFixed\n    });\n\n    var wrapperStyle = _extends({\n      maxHeight: offsetTop ? 'calc(100vh - ' + offsetTop + 'px)' : '100vh'\n    }, this.wrapperStyle);\n\n    var anchorContent = h(\n      'div',\n      { 'class': wrapperClass, style: wrapperStyle },\n      [h(\n        'div',\n        { 'class': anchorClass },\n        [h(\n          'div',\n          { 'class': prefixCls + '-ink' },\n          [h('span', { 'class': inkClass, ref: 'inkNode' })]\n        ), $slots['default']]\n      )]\n    );\n\n    return !affix ? anchorContent : h(\n      Affix,\n      {\n        attrs: { offsetTop: offsetTop, target: getContainer }\n      },\n      [anchorContent]\n    );\n  }\n};"]},"metadata":{},"sourceType":"module"}