{"ast":null,"code":"import _mergeJSXProps from 'babel-helper-vue-jsx-merge-props';\nimport _extends from 'babel-runtime/helpers/extends';\n/**\n * Since search box is in different position with different mode.\n * - Single: in the popup box\n * - multiple: in the selector\n * Move the code as a SearchInput for easy management.\n */\n\nimport PropTypes from '../../_util/vue-types';\nimport { createRef } from './util';\nvar SearchInput = {\n  name: 'SearchInput',\n  props: {\n    open: PropTypes.bool,\n    searchValue: PropTypes.string,\n    prefixCls: PropTypes.string,\n    disabled: PropTypes.bool,\n    renderPlaceholder: PropTypes.func,\n    needAlign: PropTypes.bool,\n    ariaId: PropTypes.string\n  },\n  inject: {\n    vcTreeSelect: {\n      'default': function _default() {\n        return {};\n      }\n    }\n  },\n  data: function data() {\n    return {\n      mirrorSearchValue: this.searchValue\n    };\n  },\n  watch: {\n    searchValue: function searchValue(val) {\n      this.mirrorSearchValue = val;\n    }\n  },\n  created: function created() {\n    this.inputRef = createRef();\n    this.mirrorInputRef = createRef();\n    this.prevProps = _extends({}, this.$props);\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      var _$props = _this.$props,\n          open = _$props.open,\n          needAlign = _$props.needAlign;\n\n      if (needAlign) {\n        _this.alignInputWidth();\n      }\n\n      if (open) {\n        _this.focus(true);\n      }\n    });\n  },\n  updated: function updated() {\n    var _this2 = this;\n\n    var _$props2 = this.$props,\n        open = _$props2.open,\n        searchValue = _$props2.searchValue,\n        needAlign = _$props2.needAlign;\n    var prevProps = this.prevProps;\n    this.$nextTick(function () {\n      if (open && prevProps.open !== open) {\n        _this2.focus();\n      }\n\n      if (needAlign && searchValue !== prevProps.searchValue) {\n        _this2.alignInputWidth();\n      }\n\n      _this2.prevProps = _extends({}, _this2.$props);\n    });\n  },\n  methods: {\n    /**\n     * `scrollWidth` is not correct in IE, do the workaround.\n     * ref: https://github.com/react-component/tree-select/issues/65\n     *  clientWidth 0 when mounted in vue. why?\n     */\n    alignInputWidth: function alignInputWidth() {\n      this.inputRef.current.style.width = (this.mirrorInputRef.current.clientWidth || this.mirrorInputRef.current.offsetWidth) + 'px';\n    },\n\n    /**\n     * Need additional timeout for focus cause parent dom is not ready when didMount trigger\n     */\n    focus: function focus(isDidMount) {\n      var _this3 = this;\n\n      if (this.inputRef.current) {\n        if (isDidMount) {\n          setTimeout(function () {\n            _this3.inputRef.current.focus();\n          }, 0);\n        } else {\n          // set it into else, Avoid scrolling when focus\n          this.inputRef.current.focus();\n        }\n      }\n    },\n    blur: function blur() {\n      if (this.inputRef.current) {\n        this.inputRef.current.blur();\n      }\n    },\n    handleInputChange: function handleInputChange(e) {\n      var _e$target = e.target,\n          value = _e$target.value,\n          composing = _e$target.composing;\n      var _searchValue = this.searchValue,\n          searchValue = _searchValue === undefined ? '' : _searchValue;\n\n      if (e.isComposing || composing || searchValue === value) {\n        this.mirrorSearchValue = value;\n        return;\n      }\n\n      this.vcTreeSelect.onSearchInputChange(e);\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    var _$props3 = this.$props,\n        searchValue = _$props3.searchValue,\n        prefixCls = _$props3.prefixCls,\n        disabled = _$props3.disabled,\n        renderPlaceholder = _$props3.renderPlaceholder,\n        open = _$props3.open,\n        ariaId = _$props3.ariaId;\n    var onSearchInputKeyDown = this.vcTreeSelect.onSearchInputKeyDown,\n        handleInputChange = this.handleInputChange,\n        mirrorSearchValue = this.mirrorSearchValue;\n    return h('span', {\n      'class': prefixCls + '-search__field__wrap'\n    }, [h('input', _mergeJSXProps([{\n      attrs: {\n        type: 'text'\n      }\n    }, {\n      directives: [{\n        name: 'ant-ref',\n        value: this.inputRef\n      }, {\n        name: 'ant-input'\n      }]\n    }, {\n      on: {\n        'input': handleInputChange,\n        'keydown': onSearchInputKeyDown\n      },\n      domProps: {\n        'value': searchValue\n      },\n      attrs: {\n        disabled: disabled,\n        'aria-label': 'filter select',\n        'aria-autocomplete': 'list',\n        'aria-controls': open ? ariaId : undefined,\n        'aria-multiline': 'false'\n      },\n      'class': prefixCls + '-search__field'\n    }])), h('span', _mergeJSXProps([{\n      directives: [{\n        name: 'ant-ref',\n        value: this.mirrorInputRef\n      }]\n    }, {\n      'class': prefixCls + '-search__field__mirror'\n    }]), [mirrorSearchValue, '\\xA0']), renderPlaceholder && !mirrorSearchValue ? renderPlaceholder() : null]);\n  }\n};\nexport default SearchInput;","map":{"version":3,"sources":["/Users/liulu/刘璐/vue3/hello-vue3/node_modules/ant-design-vue/es/vc-tree-select/src/SearchInput.js"],"names":["_mergeJSXProps","_extends","PropTypes","createRef","SearchInput","name","props","open","bool","searchValue","string","prefixCls","disabled","renderPlaceholder","func","needAlign","ariaId","inject","vcTreeSelect","_default","data","mirrorSearchValue","watch","val","created","inputRef","mirrorInputRef","prevProps","$props","mounted","_this","$nextTick","_$props","alignInputWidth","focus","updated","_this2","_$props2","methods","current","style","width","clientWidth","offsetWidth","isDidMount","_this3","setTimeout","blur","handleInputChange","e","_e$target","target","value","composing","_searchValue","undefined","isComposing","onSearchInputChange","render","h","arguments","_$props3","onSearchInputKeyDown","attrs","type","directives","on","domProps"],"mappings":"AAAA,OAAOA,cAAP,MAA2B,kCAA3B;AACA,OAAOC,QAAP,MAAqB,+BAArB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAOC,SAAP,MAAsB,uBAAtB;AACA,SAASC,SAAT,QAA0B,QAA1B;AAEA,IAAIC,WAAW,GAAG;AAChBC,EAAAA,IAAI,EAAE,aADU;AAEhBC,EAAAA,KAAK,EAAE;AACLC,IAAAA,IAAI,EAAEL,SAAS,CAACM,IADX;AAELC,IAAAA,WAAW,EAAEP,SAAS,CAACQ,MAFlB;AAGLC,IAAAA,SAAS,EAAET,SAAS,CAACQ,MAHhB;AAILE,IAAAA,QAAQ,EAAEV,SAAS,CAACM,IAJf;AAKLK,IAAAA,iBAAiB,EAAEX,SAAS,CAACY,IALxB;AAMLC,IAAAA,SAAS,EAAEb,SAAS,CAACM,IANhB;AAOLQ,IAAAA,MAAM,EAAEd,SAAS,CAACQ;AAPb,GAFS;AAWhBO,EAAAA,MAAM,EAAE;AACNC,IAAAA,YAAY,EAAE;AAAE,iBAAW,SAASC,QAAT,GAAoB;AAC3C,eAAO,EAAP;AACD;AAFW;AADR,GAXQ;AAgBhBC,EAAAA,IAAI,EAAE,SAASA,IAAT,GAAgB;AACpB,WAAO;AACLC,MAAAA,iBAAiB,EAAE,KAAKZ;AADnB,KAAP;AAGD,GApBe;AAsBhBa,EAAAA,KAAK,EAAE;AACLb,IAAAA,WAAW,EAAE,SAASA,WAAT,CAAqBc,GAArB,EAA0B;AACrC,WAAKF,iBAAL,GAAyBE,GAAzB;AACD;AAHI,GAtBS;AA2BhBC,EAAAA,OAAO,EAAE,SAASA,OAAT,GAAmB;AAC1B,SAAKC,QAAL,GAAgBtB,SAAS,EAAzB;AACA,SAAKuB,cAAL,GAAsBvB,SAAS,EAA/B;AACA,SAAKwB,SAAL,GAAiB1B,QAAQ,CAAC,EAAD,EAAK,KAAK2B,MAAV,CAAzB;AACD,GA/Be;AAgChBC,EAAAA,OAAO,EAAE,SAASA,OAAT,GAAmB;AAC1B,QAAIC,KAAK,GAAG,IAAZ;;AAEA,SAAKC,SAAL,CAAe,YAAY;AACzB,UAAIC,OAAO,GAAGF,KAAK,CAACF,MAApB;AAAA,UACIrB,IAAI,GAAGyB,OAAO,CAACzB,IADnB;AAAA,UAEIQ,SAAS,GAAGiB,OAAO,CAACjB,SAFxB;;AAIA,UAAIA,SAAJ,EAAe;AACbe,QAAAA,KAAK,CAACG,eAAN;AACD;;AAED,UAAI1B,IAAJ,EAAU;AACRuB,QAAAA,KAAK,CAACI,KAAN,CAAY,IAAZ;AACD;AACF,KAZD;AAaD,GAhDe;AAiDhBC,EAAAA,OAAO,EAAE,SAASA,OAAT,GAAmB;AAC1B,QAAIC,MAAM,GAAG,IAAb;;AAEA,QAAIC,QAAQ,GAAG,KAAKT,MAApB;AAAA,QACIrB,IAAI,GAAG8B,QAAQ,CAAC9B,IADpB;AAAA,QAEIE,WAAW,GAAG4B,QAAQ,CAAC5B,WAF3B;AAAA,QAGIM,SAAS,GAAGsB,QAAQ,CAACtB,SAHzB;AAIA,QAAIY,SAAS,GAAG,KAAKA,SAArB;AAEA,SAAKI,SAAL,CAAe,YAAY;AACzB,UAAIxB,IAAI,IAAIoB,SAAS,CAACpB,IAAV,KAAmBA,IAA/B,EAAqC;AACnC6B,QAAAA,MAAM,CAACF,KAAP;AACD;;AACD,UAAInB,SAAS,IAAIN,WAAW,KAAKkB,SAAS,CAAClB,WAA3C,EAAwD;AACtD2B,QAAAA,MAAM,CAACH,eAAP;AACD;;AACDG,MAAAA,MAAM,CAACT,SAAP,GAAmB1B,QAAQ,CAAC,EAAD,EAAKmC,MAAM,CAACR,MAAZ,CAA3B;AACD,KARD;AASD,GAnEe;AAqEhBU,EAAAA,OAAO,EAAE;AACP;AACJ;AACA;AACA;AACA;AACIL,IAAAA,eAAe,EAAE,SAASA,eAAT,GAA2B;AAC1C,WAAKR,QAAL,CAAcc,OAAd,CAAsBC,KAAtB,CAA4BC,KAA5B,GAAoC,CAAC,KAAKf,cAAL,CAAoBa,OAApB,CAA4BG,WAA5B,IAA2C,KAAKhB,cAAL,CAAoBa,OAApB,CAA4BI,WAAxE,IAAuF,IAA3H;AACD,KARM;;AAWP;AACJ;AACA;AACIT,IAAAA,KAAK,EAAE,SAASA,KAAT,CAAeU,UAAf,EAA2B;AAChC,UAAIC,MAAM,GAAG,IAAb;;AAEA,UAAI,KAAKpB,QAAL,CAAcc,OAAlB,EAA2B;AACzB,YAAIK,UAAJ,EAAgB;AACdE,UAAAA,UAAU,CAAC,YAAY;AACrBD,YAAAA,MAAM,CAACpB,QAAP,CAAgBc,OAAhB,CAAwBL,KAAxB;AACD,WAFS,EAEP,CAFO,CAAV;AAGD,SAJD,MAIO;AACL;AACA,eAAKT,QAAL,CAAcc,OAAd,CAAsBL,KAAtB;AACD;AACF;AACF,KA3BM;AA4BPa,IAAAA,IAAI,EAAE,SAASA,IAAT,GAAgB;AACpB,UAAI,KAAKtB,QAAL,CAAcc,OAAlB,EAA2B;AACzB,aAAKd,QAAL,CAAcc,OAAd,CAAsBQ,IAAtB;AACD;AACF,KAhCM;AAiCPC,IAAAA,iBAAiB,EAAE,SAASA,iBAAT,CAA2BC,CAA3B,EAA8B;AAC/C,UAAIC,SAAS,GAAGD,CAAC,CAACE,MAAlB;AAAA,UACIC,KAAK,GAAGF,SAAS,CAACE,KADtB;AAAA,UAEIC,SAAS,GAAGH,SAAS,CAACG,SAF1B;AAGA,UAAIC,YAAY,GAAG,KAAK7C,WAAxB;AAAA,UACIA,WAAW,GAAG6C,YAAY,KAAKC,SAAjB,GAA6B,EAA7B,GAAkCD,YADpD;;AAGA,UAAIL,CAAC,CAACO,WAAF,IAAiBH,SAAjB,IAA8B5C,WAAW,KAAK2C,KAAlD,EAAyD;AACvD,aAAK/B,iBAAL,GAAyB+B,KAAzB;AACA;AACD;;AACD,WAAKlC,YAAL,CAAkBuC,mBAAlB,CAAsCR,CAAtC;AACD;AA7CM,GArEO;AAqHhBS,EAAAA,MAAM,EAAE,SAASA,MAAT,GAAkB;AACxB,QAAIC,CAAC,GAAGC,SAAS,CAAC,CAAD,CAAjB;AACA,QAAIC,QAAQ,GAAG,KAAKjC,MAApB;AAAA,QACInB,WAAW,GAAGoD,QAAQ,CAACpD,WAD3B;AAAA,QAEIE,SAAS,GAAGkD,QAAQ,CAAClD,SAFzB;AAAA,QAGIC,QAAQ,GAAGiD,QAAQ,CAACjD,QAHxB;AAAA,QAIIC,iBAAiB,GAAGgD,QAAQ,CAAChD,iBAJjC;AAAA,QAKIN,IAAI,GAAGsD,QAAQ,CAACtD,IALpB;AAAA,QAMIS,MAAM,GAAG6C,QAAQ,CAAC7C,MANtB;AAOA,QAAI8C,oBAAoB,GAAG,KAAK5C,YAAL,CAAkB4C,oBAA7C;AAAA,QACId,iBAAiB,GAAG,KAAKA,iBAD7B;AAAA,QAEI3B,iBAAiB,GAAG,KAAKA,iBAF7B;AAIA,WAAOsC,CAAC,CACN,MADM,EAEN;AAAE,eAAShD,SAAS,GAAG;AAAvB,KAFM,EAGN,CAACgD,CAAC,CAAC,OAAD,EAAU3D,cAAc,CAAC,CAAC;AAC1B+D,MAAAA,KAAK,EAAE;AACLC,QAAAA,IAAI,EAAE;AADD;AADmB,KAAD,EAIxB;AACDC,MAAAA,UAAU,EAAE,CAAC;AACX5D,QAAAA,IAAI,EAAE,SADK;AAEX+C,QAAAA,KAAK,EAAE,KAAK3B;AAFD,OAAD,EAGT;AACDpB,QAAAA,IAAI,EAAE;AADL,OAHS;AADX,KAJwB,EAWxB;AACD6D,MAAAA,EAAE,EAAE;AACF,iBAASlB,iBADP;AAEF,mBAAWc;AAFT,OADH;AAKDK,MAAAA,QAAQ,EAAE;AACR,iBAAS1D;AADD,OALT;AAQDsD,MAAAA,KAAK,EAAE;AACLnD,QAAAA,QAAQ,EAAEA,QADL;AAGL,sBAAc,eAHT;AAIL,6BAAqB,MAJhB;AAKL,yBAAiBL,IAAI,GAAGS,MAAH,GAAYuC,SAL5B;AAML,0BAAkB;AANb,OARN;AAgBD,eAAS5C,SAAS,GAAG;AAhBpB,KAXwB,CAAD,CAAxB,CAAF,EA2B8CgD,CAAC,CAC7C,MAD6C,EAE7C3D,cAAc,CAAC,CAAC;AACdiE,MAAAA,UAAU,EAAE,CAAC;AACX5D,QAAAA,IAAI,EAAE,SADK;AAEX+C,QAAAA,KAAK,EAAE,KAAK1B;AAFD,OAAD;AADE,KAAD,EAKZ;AACD,eAASf,SAAS,GAAG;AADpB,KALY,CAAD,CAF+B,EAU7C,CAACU,iBAAD,EAAoB,MAApB,CAV6C,CA3B/C,EAsCGR,iBAAiB,IAAI,CAACQ,iBAAtB,GAA0CR,iBAAiB,EAA3D,GAAgE,IAtCnE,CAHM,CAAR;AA2CD;AA7Ke,CAAlB;AAgLA,eAAeT,WAAf","sourcesContent":["import _mergeJSXProps from 'babel-helper-vue-jsx-merge-props';\nimport _extends from 'babel-runtime/helpers/extends';\n/**\n * Since search box is in different position with different mode.\n * - Single: in the popup box\n * - multiple: in the selector\n * Move the code as a SearchInput for easy management.\n */\n\nimport PropTypes from '../../_util/vue-types';\nimport { createRef } from './util';\n\nvar SearchInput = {\n  name: 'SearchInput',\n  props: {\n    open: PropTypes.bool,\n    searchValue: PropTypes.string,\n    prefixCls: PropTypes.string,\n    disabled: PropTypes.bool,\n    renderPlaceholder: PropTypes.func,\n    needAlign: PropTypes.bool,\n    ariaId: PropTypes.string\n  },\n  inject: {\n    vcTreeSelect: { 'default': function _default() {\n        return {};\n      } }\n  },\n  data: function data() {\n    return {\n      mirrorSearchValue: this.searchValue\n    };\n  },\n\n  watch: {\n    searchValue: function searchValue(val) {\n      this.mirrorSearchValue = val;\n    }\n  },\n  created: function created() {\n    this.inputRef = createRef();\n    this.mirrorInputRef = createRef();\n    this.prevProps = _extends({}, this.$props);\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      var _$props = _this.$props,\n          open = _$props.open,\n          needAlign = _$props.needAlign;\n\n      if (needAlign) {\n        _this.alignInputWidth();\n      }\n\n      if (open) {\n        _this.focus(true);\n      }\n    });\n  },\n  updated: function updated() {\n    var _this2 = this;\n\n    var _$props2 = this.$props,\n        open = _$props2.open,\n        searchValue = _$props2.searchValue,\n        needAlign = _$props2.needAlign;\n    var prevProps = this.prevProps;\n\n    this.$nextTick(function () {\n      if (open && prevProps.open !== open) {\n        _this2.focus();\n      }\n      if (needAlign && searchValue !== prevProps.searchValue) {\n        _this2.alignInputWidth();\n      }\n      _this2.prevProps = _extends({}, _this2.$props);\n    });\n  },\n\n  methods: {\n    /**\n     * `scrollWidth` is not correct in IE, do the workaround.\n     * ref: https://github.com/react-component/tree-select/issues/65\n     *  clientWidth 0 when mounted in vue. why?\n     */\n    alignInputWidth: function alignInputWidth() {\n      this.inputRef.current.style.width = (this.mirrorInputRef.current.clientWidth || this.mirrorInputRef.current.offsetWidth) + 'px';\n    },\n\n\n    /**\n     * Need additional timeout for focus cause parent dom is not ready when didMount trigger\n     */\n    focus: function focus(isDidMount) {\n      var _this3 = this;\n\n      if (this.inputRef.current) {\n        if (isDidMount) {\n          setTimeout(function () {\n            _this3.inputRef.current.focus();\n          }, 0);\n        } else {\n          // set it into else, Avoid scrolling when focus\n          this.inputRef.current.focus();\n        }\n      }\n    },\n    blur: function blur() {\n      if (this.inputRef.current) {\n        this.inputRef.current.blur();\n      }\n    },\n    handleInputChange: function handleInputChange(e) {\n      var _e$target = e.target,\n          value = _e$target.value,\n          composing = _e$target.composing;\n      var _searchValue = this.searchValue,\n          searchValue = _searchValue === undefined ? '' : _searchValue;\n\n      if (e.isComposing || composing || searchValue === value) {\n        this.mirrorSearchValue = value;\n        return;\n      }\n      this.vcTreeSelect.onSearchInputChange(e);\n    }\n  },\n\n  render: function render() {\n    var h = arguments[0];\n    var _$props3 = this.$props,\n        searchValue = _$props3.searchValue,\n        prefixCls = _$props3.prefixCls,\n        disabled = _$props3.disabled,\n        renderPlaceholder = _$props3.renderPlaceholder,\n        open = _$props3.open,\n        ariaId = _$props3.ariaId;\n    var onSearchInputKeyDown = this.vcTreeSelect.onSearchInputKeyDown,\n        handleInputChange = this.handleInputChange,\n        mirrorSearchValue = this.mirrorSearchValue;\n\n    return h(\n      'span',\n      { 'class': prefixCls + '-search__field__wrap' },\n      [h('input', _mergeJSXProps([{\n        attrs: {\n          type: 'text'\n        }\n      }, {\n        directives: [{\n          name: 'ant-ref',\n          value: this.inputRef\n        }, {\n          name: 'ant-input'\n        }]\n      }, {\n        on: {\n          'input': handleInputChange,\n          'keydown': onSearchInputKeyDown\n        },\n        domProps: {\n          'value': searchValue\n        },\n        attrs: {\n          disabled: disabled,\n\n          'aria-label': 'filter select',\n          'aria-autocomplete': 'list',\n          'aria-controls': open ? ariaId : undefined,\n          'aria-multiline': 'false'\n        },\n        'class': prefixCls + '-search__field' }])), h(\n        'span',\n        _mergeJSXProps([{\n          directives: [{\n            name: 'ant-ref',\n            value: this.mirrorInputRef\n          }]\n        }, {\n          'class': prefixCls + '-search__field__mirror'\n        }]),\n        [mirrorSearchValue, '\\xA0']\n      ), renderPlaceholder && !mirrorSearchValue ? renderPlaceholder() : null]\n    );\n  }\n};\n\nexport default SearchInput;"]},"metadata":{},"sourceType":"module"}