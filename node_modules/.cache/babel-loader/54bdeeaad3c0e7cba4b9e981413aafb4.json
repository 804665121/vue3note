{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _extends from 'babel-runtime/helpers/extends';\nimport _slicedToArray from 'babel-runtime/helpers/slicedToArray';\nimport * as moment from 'moment';\nimport RangeCalendar from '../vc-calendar/src/RangeCalendar';\nimport VcDatePicker from '../vc-calendar/src/Picker';\nimport classNames from 'classnames';\nimport shallowequal from 'shallowequal';\nimport Icon from '../icon';\nimport Tag from '../tag';\nimport { ConfigConsumerProps } from '../config-provider/configConsumerProps';\nimport interopDefault from '../_util/interopDefault';\nimport { RangePickerProps } from './interface';\nimport { hasProp, getOptionProps, initDefaultProps, mergeProps, getComponentFromProp, getListeners } from '../_util/props-util';\nimport BaseMixin from '../_util/BaseMixin';\nimport { formatDate } from './utils';\nimport InputIcon from './InputIcon';\n\nfunction noop() {}\n\nfunction getShowDateFromValue(value, mode) {\n  var _value = _slicedToArray(value, 2),\n      start = _value[0],\n      end = _value[1]; // value could be an empty array, then we should not reset showDate\n\n\n  if (!start && !end) {\n    return;\n  }\n\n  if (mode && mode[0] === 'month') {\n    return [start, end];\n  }\n\n  var newEnd = end && end.isSame(start, 'month') ? end.clone().add(1, 'month') : end;\n  return [start, newEnd];\n}\n\nfunction pickerValueAdapter(value) {\n  if (!value) {\n    return;\n  }\n\n  if (Array.isArray(value)) {\n    return value;\n  }\n\n  return [value, value.clone().add(1, 'month')];\n}\n\nfunction isEmptyArray(arr) {\n  if (Array.isArray(arr)) {\n    return arr.length === 0 || arr.every(function (i) {\n      return !i;\n    });\n  }\n\n  return false;\n}\n\nfunction fixLocale(value, localeCode) {\n  if (!localeCode) {\n    return;\n  }\n\n  if (!value || value.length === 0) {\n    return;\n  }\n\n  var _value2 = _slicedToArray(value, 2),\n      start = _value2[0],\n      end = _value2[1];\n\n  if (start) {\n    start.locale(localeCode);\n  }\n\n  if (end) {\n    end.locale(localeCode);\n  }\n}\n\nexport default {\n  name: 'ARangePicker',\n  mixins: [BaseMixin],\n  model: {\n    prop: 'value',\n    event: 'change'\n  },\n  props: initDefaultProps(RangePickerProps(), {\n    allowClear: true,\n    showToday: false,\n    separator: '~'\n  }),\n  inject: {\n    configProvider: {\n      'default': function _default() {\n        return ConfigConsumerProps;\n      }\n    }\n  },\n  data: function data() {\n    var value = this.value || this.defaultValue || [];\n\n    var _value3 = _slicedToArray(value, 2),\n        start = _value3[0],\n        end = _value3[1];\n\n    if (start && !interopDefault(moment).isMoment(start) || end && !interopDefault(moment).isMoment(end)) {\n      throw new Error('The value/defaultValue of RangePicker must be a moment object array after `antd@2.0`, ' + 'see: https://u.ant.design/date-picker-value');\n    }\n\n    var pickerValue = !value || isEmptyArray(value) ? this.defaultPickerValue : value;\n    return {\n      sValue: value,\n      sShowDate: pickerValueAdapter(pickerValue || interopDefault(moment)()),\n      sOpen: this.open,\n      sHoverValue: []\n    };\n  },\n  watch: {\n    value: function value(val) {\n      var value = val || [];\n      var state = {\n        sValue: value\n      };\n\n      if (!shallowequal(val, this.sValue)) {\n        state = _extends({}, state, {\n          sShowDate: getShowDateFromValue(value, this.mode) || this.sShowDate\n        });\n      }\n\n      this.setState(state);\n    },\n    open: function open(val) {\n      var state = {\n        sOpen: val\n      };\n      this.setState(state);\n    },\n    sOpen: function sOpen(val, oldVal) {\n      var _this = this;\n\n      this.$nextTick(function () {\n        if (!hasProp(_this, 'open') && oldVal && !val) {\n          _this.focus();\n        }\n      });\n    }\n  },\n  methods: {\n    setValue: function setValue(value, hidePanel) {\n      this.handleChange(value);\n\n      if ((hidePanel || !this.showTime) && !hasProp(this, 'open')) {\n        this.setState({\n          sOpen: false\n        });\n      }\n    },\n    clearSelection: function clearSelection(e) {\n      e.preventDefault();\n      e.stopPropagation();\n      this.setState({\n        sValue: []\n      });\n      this.handleChange([]);\n    },\n    clearHoverValue: function clearHoverValue() {\n      this.setState({\n        sHoverValue: []\n      });\n    },\n    handleChange: function handleChange(value) {\n      if (!hasProp(this, 'value')) {\n        this.setState(function (_ref) {\n          var sShowDate = _ref.sShowDate;\n          return {\n            sValue: value,\n            sShowDate: getShowDateFromValue(value) || sShowDate\n          };\n        });\n      }\n\n      if (value[0] && value[1] && value[0].diff(value[1]) > 0) {\n        value[1] = undefined;\n      }\n\n      var _value4 = _slicedToArray(value, 2),\n          start = _value4[0],\n          end = _value4[1];\n\n      this.$emit('change', value, [formatDate(start, this.format), formatDate(end, this.format)]);\n    },\n    handleOpenChange: function handleOpenChange(open) {\n      if (!hasProp(this, 'open')) {\n        this.setState({\n          sOpen: open\n        });\n      }\n\n      if (open === false) {\n        this.clearHoverValue();\n      }\n\n      this.$emit('openChange', open);\n    },\n    handleShowDateChange: function handleShowDateChange(showDate) {\n      this.setState({\n        sShowDate: showDate\n      });\n    },\n    handleHoverChange: function handleHoverChange(hoverValue) {\n      this.setState({\n        sHoverValue: hoverValue\n      });\n    },\n    handleRangeMouseLeave: function handleRangeMouseLeave() {\n      if (this.sOpen) {\n        this.clearHoverValue();\n      }\n    },\n    handleCalendarInputSelect: function handleCalendarInputSelect(value) {\n      var _value5 = _slicedToArray(value, 1),\n          start = _value5[0];\n\n      if (!start) {\n        return;\n      }\n\n      this.setState(function (_ref2) {\n        var sShowDate = _ref2.sShowDate;\n        return {\n          sValue: value,\n          sShowDate: getShowDateFromValue(value) || sShowDate\n        };\n      });\n    },\n    handleRangeClick: function handleRangeClick(value) {\n      if (typeof value === 'function') {\n        value = value();\n      }\n\n      this.setValue(value, true);\n      this.$emit('ok', value);\n      this.$emit('openChange', false);\n    },\n    onMouseEnter: function onMouseEnter(e) {\n      this.$emit('mouseenter', e);\n    },\n    onMouseLeave: function onMouseLeave(e) {\n      this.$emit('mouseleave', e);\n    },\n    focus: function focus() {\n      this.$refs.picker.focus();\n    },\n    blur: function blur() {\n      this.$refs.picker.blur();\n    },\n    renderFooter: function renderFooter() {\n      var _this2 = this;\n\n      var h = this.$createElement;\n      var ranges = this.ranges,\n          $scopedSlots = this.$scopedSlots,\n          $slots = this.$slots;\n      var prefixCls = this._prefixCls,\n          tagPrefixCls = this._tagPrefixCls;\n      var renderExtraFooter = this.renderExtraFooter || $scopedSlots.renderExtraFooter || $slots.renderExtraFooter;\n\n      if (!ranges && !renderExtraFooter) {\n        return null;\n      }\n\n      var customFooter = renderExtraFooter ? h('div', {\n        'class': prefixCls + '-footer-extra',\n        key: 'extra'\n      }, [typeof renderExtraFooter === 'function' ? renderExtraFooter() : renderExtraFooter]) : null;\n      var operations = ranges && Object.keys(ranges).map(function (range) {\n        var value = ranges[range];\n        var hoverValue = typeof value === 'function' ? value.call(_this2) : value;\n        return h(Tag, {\n          key: range,\n          attrs: {\n            prefixCls: tagPrefixCls,\n            color: 'blue'\n          },\n          on: {\n            'click': function click() {\n              return _this2.handleRangeClick(value);\n            },\n            'mouseenter': function mouseenter() {\n              return _this2.setState({\n                sHoverValue: hoverValue\n              });\n            },\n            'mouseleave': _this2.handleRangeMouseLeave\n          }\n        }, [range]);\n      });\n      var rangeNode = operations && operations.length > 0 ? h('div', {\n        'class': prefixCls + '-footer-extra ' + prefixCls + '-range-quick-selector',\n        key: 'range'\n      }, [operations]) : null;\n      return [rangeNode, customFooter];\n    }\n  },\n  render: function render() {\n    var _classNames,\n        _this3 = this;\n\n    var h = arguments[0];\n    var props = getOptionProps(this);\n    var suffixIcon = getComponentFromProp(this, 'suffixIcon');\n    suffixIcon = Array.isArray(suffixIcon) ? suffixIcon[0] : suffixIcon;\n    var value = this.sValue,\n        showDate = this.sShowDate,\n        hoverValue = this.sHoverValue,\n        open = this.sOpen,\n        $scopedSlots = this.$scopedSlots;\n    var listeners = getListeners(this);\n    var _listeners$calendarCh = listeners.calendarChange,\n        calendarChange = _listeners$calendarCh === undefined ? noop : _listeners$calendarCh,\n        _listeners$ok = listeners.ok,\n        ok = _listeners$ok === undefined ? noop : _listeners$ok,\n        _listeners$focus = listeners.focus,\n        focus = _listeners$focus === undefined ? noop : _listeners$focus,\n        _listeners$blur = listeners.blur,\n        blur = _listeners$blur === undefined ? noop : _listeners$blur,\n        _listeners$panelChang = listeners.panelChange,\n        panelChange = _listeners$panelChang === undefined ? noop : _listeners$panelChang;\n    var customizePrefixCls = props.prefixCls,\n        customizeTagPrefixCls = props.tagPrefixCls,\n        popupStyle = props.popupStyle,\n        disabledDate = props.disabledDate,\n        disabledTime = props.disabledTime,\n        showTime = props.showTime,\n        showToday = props.showToday,\n        ranges = props.ranges,\n        locale = props.locale,\n        localeCode = props.localeCode,\n        format = props.format,\n        separator = props.separator,\n        inputReadOnly = props.inputReadOnly;\n    var getPrefixCls = this.configProvider.getPrefixCls;\n    var prefixCls = getPrefixCls('calendar', customizePrefixCls);\n    var tagPrefixCls = getPrefixCls('tag', customizeTagPrefixCls);\n    this._prefixCls = prefixCls;\n    this._tagPrefixCls = tagPrefixCls;\n    var dateRender = props.dateRender || $scopedSlots.dateRender;\n    fixLocale(value, localeCode);\n    fixLocale(showDate, localeCode);\n    var calendarClassName = classNames((_classNames = {}, _defineProperty(_classNames, prefixCls + '-time', showTime), _defineProperty(_classNames, prefixCls + '-range-with-ranges', ranges), _classNames)); // 需要选择时间时，点击 ok 时才触发 onChange\n\n    var pickerChangeHandler = {\n      on: {\n        change: this.handleChange\n      }\n    };\n    var calendarProps = {\n      on: {\n        ok: this.handleChange\n      },\n      props: {}\n    };\n\n    if (props.timePicker) {\n      pickerChangeHandler.on.change = function (changedValue) {\n        return _this3.handleChange(changedValue);\n      };\n    } else {\n      calendarProps = {\n        on: {},\n        props: {}\n      };\n    }\n\n    if ('mode' in props) {\n      calendarProps.props.mode = props.mode;\n    }\n\n    var startPlaceholder = Array.isArray(props.placeholder) ? props.placeholder[0] : locale.lang.rangePlaceholder[0];\n    var endPlaceholder = Array.isArray(props.placeholder) ? props.placeholder[1] : locale.lang.rangePlaceholder[1];\n    var rangeCalendarProps = mergeProps(calendarProps, {\n      props: {\n        separator: separator,\n        format: format,\n        prefixCls: prefixCls,\n        renderFooter: this.renderFooter,\n        timePicker: props.timePicker,\n        disabledDate: disabledDate,\n        disabledTime: disabledTime,\n        dateInputPlaceholder: [startPlaceholder, endPlaceholder],\n        locale: locale.lang,\n        dateRender: dateRender,\n        value: showDate,\n        hoverValue: hoverValue,\n        showToday: showToday,\n        inputReadOnly: inputReadOnly\n      },\n      on: {\n        change: calendarChange,\n        ok: ok,\n        valueChange: this.handleShowDateChange,\n        hoverChange: this.handleHoverChange,\n        panelChange: panelChange,\n        inputSelect: this.handleCalendarInputSelect\n      },\n      'class': calendarClassName,\n      scopedSlots: $scopedSlots\n    });\n    var calendar = h(RangeCalendar, rangeCalendarProps); // default width for showTime\n\n    var pickerStyle = {};\n\n    if (props.showTime) {\n      pickerStyle.width = '350px';\n    }\n\n    var _value6 = _slicedToArray(value, 2),\n        startValue = _value6[0],\n        endValue = _value6[1];\n\n    var clearIcon = !props.disabled && props.allowClear && value && (startValue || endValue) ? h(Icon, {\n      attrs: {\n        type: 'close-circle',\n        theme: 'filled'\n      },\n      'class': prefixCls + '-picker-clear',\n      on: {\n        'click': this.clearSelection\n      }\n    }) : null;\n    var inputIcon = h(InputIcon, {\n      attrs: {\n        suffixIcon: suffixIcon,\n        prefixCls: prefixCls\n      }\n    });\n\n    var input = function input(_ref3) {\n      var inputValue = _ref3.value;\n\n      var _inputValue = _slicedToArray(inputValue, 2),\n          start = _inputValue[0],\n          end = _inputValue[1];\n\n      return h('span', {\n        'class': props.pickerInputClass\n      }, [h('input', {\n        attrs: {\n          disabled: props.disabled,\n          readOnly: true,\n          placeholder: startPlaceholder,\n          tabIndex: -1\n        },\n        domProps: {\n          'value': formatDate(start, props.format)\n        },\n        'class': prefixCls + '-range-picker-input'\n      }), h('span', {\n        'class': prefixCls + '-range-picker-separator'\n      }, [' ', separator, ' ']), h('input', {\n        attrs: {\n          disabled: props.disabled,\n          readOnly: true,\n          placeholder: endPlaceholder,\n          tabIndex: -1\n        },\n        domProps: {\n          'value': formatDate(end, props.format)\n        },\n        'class': prefixCls + '-range-picker-input'\n      }), clearIcon, inputIcon]);\n    };\n\n    var vcDatePickerProps = mergeProps({\n      props: props,\n      on: listeners\n    }, pickerChangeHandler, {\n      props: {\n        calendar: calendar,\n        value: value,\n        open: open,\n        prefixCls: prefixCls + '-picker-container'\n      },\n      on: {\n        openChange: this.handleOpenChange\n      },\n      style: popupStyle,\n      scopedSlots: _extends({\n        'default': input\n      }, $scopedSlots)\n    });\n    return h('span', {\n      ref: 'picker',\n      'class': props.pickerClass,\n      style: pickerStyle,\n      attrs: {\n        tabIndex: props.disabled ? -1 : 0\n      },\n      on: {\n        'focus': focus,\n        'blur': blur,\n        'mouseenter': this.onMouseEnter,\n        'mouseleave': this.onMouseLeave\n      }\n    }, [h(VcDatePicker, vcDatePickerProps)]);\n  }\n};","map":{"version":3,"sources":["/Users/liulu/刘璐/vue3/hello-vue3/node_modules/ant-design-vue/es/date-picker/RangePicker.js"],"names":["_defineProperty","_extends","_slicedToArray","moment","RangeCalendar","VcDatePicker","classNames","shallowequal","Icon","Tag","ConfigConsumerProps","interopDefault","RangePickerProps","hasProp","getOptionProps","initDefaultProps","mergeProps","getComponentFromProp","getListeners","BaseMixin","formatDate","InputIcon","noop","getShowDateFromValue","value","mode","_value","start","end","newEnd","isSame","clone","add","pickerValueAdapter","Array","isArray","isEmptyArray","arr","length","every","i","fixLocale","localeCode","_value2","locale","name","mixins","model","prop","event","props","allowClear","showToday","separator","inject","configProvider","_default","data","defaultValue","_value3","isMoment","Error","pickerValue","defaultPickerValue","sValue","sShowDate","sOpen","open","sHoverValue","watch","val","state","setState","oldVal","_this","$nextTick","focus","methods","setValue","hidePanel","handleChange","showTime","clearSelection","e","preventDefault","stopPropagation","clearHoverValue","_ref","diff","undefined","_value4","$emit","format","handleOpenChange","handleShowDateChange","showDate","handleHoverChange","hoverValue","handleRangeMouseLeave","handleCalendarInputSelect","_value5","_ref2","handleRangeClick","onMouseEnter","onMouseLeave","$refs","picker","blur","renderFooter","_this2","h","$createElement","ranges","$scopedSlots","$slots","prefixCls","_prefixCls","tagPrefixCls","_tagPrefixCls","renderExtraFooter","customFooter","key","operations","Object","keys","map","range","call","attrs","color","on","click","mouseenter","rangeNode","render","_classNames","_this3","arguments","suffixIcon","listeners","_listeners$calendarCh","calendarChange","_listeners$ok","ok","_listeners$focus","_listeners$blur","_listeners$panelChang","panelChange","customizePrefixCls","customizeTagPrefixCls","popupStyle","disabledDate","disabledTime","inputReadOnly","getPrefixCls","dateRender","calendarClassName","pickerChangeHandler","change","calendarProps","timePicker","changedValue","startPlaceholder","placeholder","lang","rangePlaceholder","endPlaceholder","rangeCalendarProps","dateInputPlaceholder","valueChange","hoverChange","inputSelect","scopedSlots","calendar","pickerStyle","width","_value6","startValue","endValue","clearIcon","disabled","type","theme","inputIcon","input","_ref3","inputValue","_inputValue","pickerInputClass","readOnly","tabIndex","domProps","vcDatePickerProps","openChange","style","ref","pickerClass"],"mappings":"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","sourcesContent":["import _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _extends from 'babel-runtime/helpers/extends';\nimport _slicedToArray from 'babel-runtime/helpers/slicedToArray';\nimport * as moment from 'moment';\nimport RangeCalendar from '../vc-calendar/src/RangeCalendar';\nimport VcDatePicker from '../vc-calendar/src/Picker';\nimport classNames from 'classnames';\nimport shallowequal from 'shallowequal';\nimport Icon from '../icon';\nimport Tag from '../tag';\nimport { ConfigConsumerProps } from '../config-provider/configConsumerProps';\nimport interopDefault from '../_util/interopDefault';\nimport { RangePickerProps } from './interface';\nimport { hasProp, getOptionProps, initDefaultProps, mergeProps, getComponentFromProp, getListeners } from '../_util/props-util';\nimport BaseMixin from '../_util/BaseMixin';\nimport { formatDate } from './utils';\nimport InputIcon from './InputIcon';\n\nfunction noop() {}\nfunction getShowDateFromValue(value, mode) {\n  var _value = _slicedToArray(value, 2),\n      start = _value[0],\n      end = _value[1];\n  // value could be an empty array, then we should not reset showDate\n\n\n  if (!start && !end) {\n    return;\n  }\n  if (mode && mode[0] === 'month') {\n    return [start, end];\n  }\n  var newEnd = end && end.isSame(start, 'month') ? end.clone().add(1, 'month') : end;\n  return [start, newEnd];\n}\n\nfunction pickerValueAdapter(value) {\n  if (!value) {\n    return;\n  }\n  if (Array.isArray(value)) {\n    return value;\n  }\n  return [value, value.clone().add(1, 'month')];\n}\n\nfunction isEmptyArray(arr) {\n  if (Array.isArray(arr)) {\n    return arr.length === 0 || arr.every(function (i) {\n      return !i;\n    });\n  }\n  return false;\n}\n\nfunction fixLocale(value, localeCode) {\n  if (!localeCode) {\n    return;\n  }\n  if (!value || value.length === 0) {\n    return;\n  }\n\n  var _value2 = _slicedToArray(value, 2),\n      start = _value2[0],\n      end = _value2[1];\n\n  if (start) {\n    start.locale(localeCode);\n  }\n  if (end) {\n    end.locale(localeCode);\n  }\n}\n\nexport default {\n  name: 'ARangePicker',\n  mixins: [BaseMixin],\n  model: {\n    prop: 'value',\n    event: 'change'\n  },\n  props: initDefaultProps(RangePickerProps(), {\n    allowClear: true,\n    showToday: false,\n    separator: '~'\n  }),\n  inject: {\n    configProvider: { 'default': function _default() {\n        return ConfigConsumerProps;\n      } }\n  },\n  data: function data() {\n    var value = this.value || this.defaultValue || [];\n\n    var _value3 = _slicedToArray(value, 2),\n        start = _value3[0],\n        end = _value3[1];\n\n    if (start && !interopDefault(moment).isMoment(start) || end && !interopDefault(moment).isMoment(end)) {\n      throw new Error('The value/defaultValue of RangePicker must be a moment object array after `antd@2.0`, ' + 'see: https://u.ant.design/date-picker-value');\n    }\n    var pickerValue = !value || isEmptyArray(value) ? this.defaultPickerValue : value;\n    return {\n      sValue: value,\n      sShowDate: pickerValueAdapter(pickerValue || interopDefault(moment)()),\n      sOpen: this.open,\n      sHoverValue: []\n    };\n  },\n\n  watch: {\n    value: function value(val) {\n      var value = val || [];\n      var state = { sValue: value };\n      if (!shallowequal(val, this.sValue)) {\n        state = _extends({}, state, {\n          sShowDate: getShowDateFromValue(value, this.mode) || this.sShowDate\n        });\n      }\n      this.setState(state);\n    },\n    open: function open(val) {\n      var state = { sOpen: val };\n      this.setState(state);\n    },\n    sOpen: function sOpen(val, oldVal) {\n      var _this = this;\n\n      this.$nextTick(function () {\n        if (!hasProp(_this, 'open') && oldVal && !val) {\n          _this.focus();\n        }\n      });\n    }\n  },\n  methods: {\n    setValue: function setValue(value, hidePanel) {\n      this.handleChange(value);\n      if ((hidePanel || !this.showTime) && !hasProp(this, 'open')) {\n        this.setState({ sOpen: false });\n      }\n    },\n    clearSelection: function clearSelection(e) {\n      e.preventDefault();\n      e.stopPropagation();\n      this.setState({ sValue: [] });\n      this.handleChange([]);\n    },\n    clearHoverValue: function clearHoverValue() {\n      this.setState({ sHoverValue: [] });\n    },\n    handleChange: function handleChange(value) {\n      if (!hasProp(this, 'value')) {\n        this.setState(function (_ref) {\n          var sShowDate = _ref.sShowDate;\n          return {\n            sValue: value,\n            sShowDate: getShowDateFromValue(value) || sShowDate\n          };\n        });\n      }\n      if (value[0] && value[1] && value[0].diff(value[1]) > 0) {\n        value[1] = undefined;\n      }\n\n      var _value4 = _slicedToArray(value, 2),\n          start = _value4[0],\n          end = _value4[1];\n\n      this.$emit('change', value, [formatDate(start, this.format), formatDate(end, this.format)]);\n    },\n    handleOpenChange: function handleOpenChange(open) {\n      if (!hasProp(this, 'open')) {\n        this.setState({ sOpen: open });\n      }\n\n      if (open === false) {\n        this.clearHoverValue();\n      }\n      this.$emit('openChange', open);\n    },\n    handleShowDateChange: function handleShowDateChange(showDate) {\n      this.setState({ sShowDate: showDate });\n    },\n    handleHoverChange: function handleHoverChange(hoverValue) {\n      this.setState({ sHoverValue: hoverValue });\n    },\n    handleRangeMouseLeave: function handleRangeMouseLeave() {\n      if (this.sOpen) {\n        this.clearHoverValue();\n      }\n    },\n    handleCalendarInputSelect: function handleCalendarInputSelect(value) {\n      var _value5 = _slicedToArray(value, 1),\n          start = _value5[0];\n\n      if (!start) {\n        return;\n      }\n      this.setState(function (_ref2) {\n        var sShowDate = _ref2.sShowDate;\n        return {\n          sValue: value,\n          sShowDate: getShowDateFromValue(value) || sShowDate\n        };\n      });\n    },\n    handleRangeClick: function handleRangeClick(value) {\n      if (typeof value === 'function') {\n        value = value();\n      }\n\n      this.setValue(value, true);\n      this.$emit('ok', value);\n      this.$emit('openChange', false);\n    },\n    onMouseEnter: function onMouseEnter(e) {\n      this.$emit('mouseenter', e);\n    },\n    onMouseLeave: function onMouseLeave(e) {\n      this.$emit('mouseleave', e);\n    },\n    focus: function focus() {\n      this.$refs.picker.focus();\n    },\n    blur: function blur() {\n      this.$refs.picker.blur();\n    },\n    renderFooter: function renderFooter() {\n      var _this2 = this;\n\n      var h = this.$createElement;\n      var ranges = this.ranges,\n          $scopedSlots = this.$scopedSlots,\n          $slots = this.$slots;\n      var prefixCls = this._prefixCls,\n          tagPrefixCls = this._tagPrefixCls;\n\n      var renderExtraFooter = this.renderExtraFooter || $scopedSlots.renderExtraFooter || $slots.renderExtraFooter;\n      if (!ranges && !renderExtraFooter) {\n        return null;\n      }\n      var customFooter = renderExtraFooter ? h(\n        'div',\n        { 'class': prefixCls + '-footer-extra', key: 'extra' },\n        [typeof renderExtraFooter === 'function' ? renderExtraFooter() : renderExtraFooter]\n      ) : null;\n      var operations = ranges && Object.keys(ranges).map(function (range) {\n        var value = ranges[range];\n        var hoverValue = typeof value === 'function' ? value.call(_this2) : value;\n        return h(\n          Tag,\n          {\n            key: range,\n            attrs: { prefixCls: tagPrefixCls,\n              color: 'blue'\n            },\n            on: {\n              'click': function click() {\n                return _this2.handleRangeClick(value);\n              },\n              'mouseenter': function mouseenter() {\n                return _this2.setState({ sHoverValue: hoverValue });\n              },\n              'mouseleave': _this2.handleRangeMouseLeave\n            }\n          },\n          [range]\n        );\n      });\n      var rangeNode = operations && operations.length > 0 ? h(\n        'div',\n        { 'class': prefixCls + '-footer-extra ' + prefixCls + '-range-quick-selector', key: 'range' },\n        [operations]\n      ) : null;\n      return [rangeNode, customFooter];\n    }\n  },\n\n  render: function render() {\n    var _classNames,\n        _this3 = this;\n\n    var h = arguments[0];\n\n    var props = getOptionProps(this);\n    var suffixIcon = getComponentFromProp(this, 'suffixIcon');\n    suffixIcon = Array.isArray(suffixIcon) ? suffixIcon[0] : suffixIcon;\n    var value = this.sValue,\n        showDate = this.sShowDate,\n        hoverValue = this.sHoverValue,\n        open = this.sOpen,\n        $scopedSlots = this.$scopedSlots;\n\n    var listeners = getListeners(this);\n    var _listeners$calendarCh = listeners.calendarChange,\n        calendarChange = _listeners$calendarCh === undefined ? noop : _listeners$calendarCh,\n        _listeners$ok = listeners.ok,\n        ok = _listeners$ok === undefined ? noop : _listeners$ok,\n        _listeners$focus = listeners.focus,\n        focus = _listeners$focus === undefined ? noop : _listeners$focus,\n        _listeners$blur = listeners.blur,\n        blur = _listeners$blur === undefined ? noop : _listeners$blur,\n        _listeners$panelChang = listeners.panelChange,\n        panelChange = _listeners$panelChang === undefined ? noop : _listeners$panelChang;\n    var customizePrefixCls = props.prefixCls,\n        customizeTagPrefixCls = props.tagPrefixCls,\n        popupStyle = props.popupStyle,\n        disabledDate = props.disabledDate,\n        disabledTime = props.disabledTime,\n        showTime = props.showTime,\n        showToday = props.showToday,\n        ranges = props.ranges,\n        locale = props.locale,\n        localeCode = props.localeCode,\n        format = props.format,\n        separator = props.separator,\n        inputReadOnly = props.inputReadOnly;\n\n    var getPrefixCls = this.configProvider.getPrefixCls;\n    var prefixCls = getPrefixCls('calendar', customizePrefixCls);\n    var tagPrefixCls = getPrefixCls('tag', customizeTagPrefixCls);\n    this._prefixCls = prefixCls;\n    this._tagPrefixCls = tagPrefixCls;\n\n    var dateRender = props.dateRender || $scopedSlots.dateRender;\n    fixLocale(value, localeCode);\n    fixLocale(showDate, localeCode);\n\n    var calendarClassName = classNames((_classNames = {}, _defineProperty(_classNames, prefixCls + '-time', showTime), _defineProperty(_classNames, prefixCls + '-range-with-ranges', ranges), _classNames));\n\n    // 需要选择时间时，点击 ok 时才触发 onChange\n    var pickerChangeHandler = {\n      on: {\n        change: this.handleChange\n      }\n    };\n    var calendarProps = {\n      on: {\n        ok: this.handleChange\n      },\n      props: {}\n    };\n    if (props.timePicker) {\n      pickerChangeHandler.on.change = function (changedValue) {\n        return _this3.handleChange(changedValue);\n      };\n    } else {\n      calendarProps = { on: {}, props: {} };\n    }\n    if ('mode' in props) {\n      calendarProps.props.mode = props.mode;\n    }\n\n    var startPlaceholder = Array.isArray(props.placeholder) ? props.placeholder[0] : locale.lang.rangePlaceholder[0];\n    var endPlaceholder = Array.isArray(props.placeholder) ? props.placeholder[1] : locale.lang.rangePlaceholder[1];\n\n    var rangeCalendarProps = mergeProps(calendarProps, {\n      props: {\n        separator: separator,\n        format: format,\n        prefixCls: prefixCls,\n        renderFooter: this.renderFooter,\n        timePicker: props.timePicker,\n        disabledDate: disabledDate,\n        disabledTime: disabledTime,\n        dateInputPlaceholder: [startPlaceholder, endPlaceholder],\n        locale: locale.lang,\n        dateRender: dateRender,\n        value: showDate,\n        hoverValue: hoverValue,\n        showToday: showToday,\n        inputReadOnly: inputReadOnly\n      },\n      on: {\n        change: calendarChange,\n        ok: ok,\n        valueChange: this.handleShowDateChange,\n        hoverChange: this.handleHoverChange,\n        panelChange: panelChange,\n        inputSelect: this.handleCalendarInputSelect\n      },\n      'class': calendarClassName,\n      scopedSlots: $scopedSlots\n    });\n    var calendar = h(RangeCalendar, rangeCalendarProps);\n\n    // default width for showTime\n    var pickerStyle = {};\n    if (props.showTime) {\n      pickerStyle.width = '350px';\n    }\n\n    var _value6 = _slicedToArray(value, 2),\n        startValue = _value6[0],\n        endValue = _value6[1];\n\n    var clearIcon = !props.disabled && props.allowClear && value && (startValue || endValue) ? h(Icon, {\n      attrs: {\n        type: 'close-circle',\n\n        theme: 'filled'\n      },\n      'class': prefixCls + '-picker-clear',\n      on: {\n        'click': this.clearSelection\n      }\n    }) : null;\n\n    var inputIcon = h(InputIcon, {\n      attrs: { suffixIcon: suffixIcon, prefixCls: prefixCls }\n    });\n\n    var input = function input(_ref3) {\n      var inputValue = _ref3.value;\n\n      var _inputValue = _slicedToArray(inputValue, 2),\n          start = _inputValue[0],\n          end = _inputValue[1];\n\n      return h(\n        'span',\n        { 'class': props.pickerInputClass },\n        [h('input', {\n          attrs: {\n            disabled: props.disabled,\n            readOnly: true,\n\n            placeholder: startPlaceholder,\n\n            tabIndex: -1\n          },\n          domProps: {\n            'value': formatDate(start, props.format)\n          },\n          'class': prefixCls + '-range-picker-input' }), h(\n          'span',\n          { 'class': prefixCls + '-range-picker-separator' },\n          [' ', separator, ' ']\n        ), h('input', {\n          attrs: {\n            disabled: props.disabled,\n            readOnly: true,\n\n            placeholder: endPlaceholder,\n\n            tabIndex: -1\n          },\n          domProps: {\n            'value': formatDate(end, props.format)\n          },\n          'class': prefixCls + '-range-picker-input' }), clearIcon, inputIcon]\n      );\n    };\n    var vcDatePickerProps = mergeProps({\n      props: props,\n      on: listeners\n    }, pickerChangeHandler, {\n      props: {\n        calendar: calendar,\n        value: value,\n        open: open,\n        prefixCls: prefixCls + '-picker-container'\n      },\n      on: {\n        openChange: this.handleOpenChange\n      },\n      style: popupStyle,\n      scopedSlots: _extends({ 'default': input }, $scopedSlots)\n    });\n    return h(\n      'span',\n      {\n        ref: 'picker',\n        'class': props.pickerClass,\n        style: pickerStyle,\n        attrs: { tabIndex: props.disabled ? -1 : 0\n        },\n        on: {\n          'focus': focus,\n          'blur': blur,\n          'mouseenter': this.onMouseEnter,\n          'mouseleave': this.onMouseLeave\n        }\n      },\n      [h(VcDatePicker, vcDatePickerProps)]\n    );\n  }\n};"]},"metadata":{},"sourceType":"module"}