{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport scrollIntoView from 'dom-scroll-into-view';\nimport has from 'lodash/has';\nimport createBaseForm from './createBaseForm';\nimport { mixin as formMixin } from './createForm';\nimport { getParams } from './utils';\n\nfunction computedStyle(el, prop) {\n  var getComputedStyle = window.getComputedStyle;\n  var style = // If we have getComputedStyle\n  getComputedStyle ? // Query it\n  // TODO: From CSS-Query notes, we might need (node, null) for FF\n  getComputedStyle(el) : // Otherwise, we are in IE and use currentStyle\n  el.currentStyle;\n\n  if (style) {\n    return style[// Switch to camelCase for CSSOM\n    // DEV: Grabbed from jQuery\n    // https://github.com/jquery/jquery/blob/1.9-stable/src/css.js#L191-L194\n    // https://github.com/jquery/jquery/blob/1.9-stable/src/core.js#L593-L597\n    prop.replace(/-(\\w)/gi, function (word, letter) {\n      return letter.toUpperCase();\n    })];\n  }\n\n  return undefined;\n}\n\nfunction getScrollableContainer(n) {\n  var node = n;\n  var nodeName = void 0;\n  /* eslint no-cond-assign:0 */\n\n  while ((nodeName = node.nodeName.toLowerCase()) !== 'body') {\n    var overflowY = computedStyle(node, 'overflowY'); // https://stackoverflow.com/a/36900407/3040605\n\n    if (node !== n && (overflowY === 'auto' || overflowY === 'scroll') && node.scrollHeight > node.clientHeight) {\n      return node;\n    }\n\n    node = node.parentNode;\n  }\n\n  return nodeName === 'body' ? node.ownerDocument : node;\n}\n\nvar mixin = {\n  methods: {\n    getForm: function getForm() {\n      return _extends({}, formMixin.methods.getForm.call(this), {\n        validateFieldsAndScroll: this.validateFieldsAndScroll\n      });\n    },\n    validateFieldsAndScroll: function validateFieldsAndScroll(ns, opt, cb) {\n      var _this = this;\n\n      var _getParams = getParams(ns, opt, cb),\n          names = _getParams.names,\n          callback = _getParams.callback,\n          options = _getParams.options;\n\n      var newCb = function newCb(error, values) {\n        if (error) {\n          var validNames = _this.fieldsStore.getValidFieldsName();\n\n          var firstNode = void 0;\n          var firstTop = void 0;\n          validNames.forEach(function (name) {\n            if (has(error, name)) {\n              var instance = _this.getFieldInstance(name);\n\n              if (instance) {\n                var node = instance.$el || instance.elm;\n                var top = node.getBoundingClientRect().top;\n\n                if (node.type !== 'hidden' && (firstTop === undefined || firstTop > top)) {\n                  firstTop = top;\n                  firstNode = node;\n                }\n              }\n            }\n          });\n\n          if (firstNode) {\n            var c = options.container || getScrollableContainer(firstNode);\n            scrollIntoView(firstNode, c, _extends({\n              onlyScrollIfNeeded: true\n            }, options.scroll));\n          }\n        }\n\n        if (typeof callback === 'function') {\n          callback(error, values);\n        }\n      };\n\n      return this.validateFields(names, options, newCb);\n    }\n  }\n};\n\nfunction createDOMForm(option) {\n  return createBaseForm(_extends({}, option), [mixin]);\n}\n\nexport default createDOMForm;","map":{"version":3,"sources":["/Users/liulu/刘璐/vue3/hello-vue3/node_modules/ant-design-vue/es/vc-form/src/createDOMForm.js"],"names":["_extends","scrollIntoView","has","createBaseForm","mixin","formMixin","getParams","computedStyle","el","prop","getComputedStyle","window","style","currentStyle","replace","word","letter","toUpperCase","undefined","getScrollableContainer","n","node","nodeName","toLowerCase","overflowY","scrollHeight","clientHeight","parentNode","ownerDocument","methods","getForm","call","validateFieldsAndScroll","ns","opt","cb","_this","_getParams","names","callback","options","newCb","error","values","validNames","fieldsStore","getValidFieldsName","firstNode","firstTop","forEach","name","instance","getFieldInstance","$el","elm","top","getBoundingClientRect","type","c","container","onlyScrollIfNeeded","scroll","validateFields","createDOMForm","option"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport scrollIntoView from 'dom-scroll-into-view';\nimport has from 'lodash/has';\nimport createBaseForm from './createBaseForm';\nimport { mixin as formMixin } from './createForm';\nimport { getParams } from './utils';\n\nfunction computedStyle(el, prop) {\n  var getComputedStyle = window.getComputedStyle;\n  var style =\n  // If we have getComputedStyle\n  getComputedStyle ? // Query it\n  // TODO: From CSS-Query notes, we might need (node, null) for FF\n  getComputedStyle(el) : // Otherwise, we are in IE and use currentStyle\n  el.currentStyle;\n  if (style) {\n    return style[\n    // Switch to camelCase for CSSOM\n    // DEV: Grabbed from jQuery\n    // https://github.com/jquery/jquery/blob/1.9-stable/src/css.js#L191-L194\n    // https://github.com/jquery/jquery/blob/1.9-stable/src/core.js#L593-L597\n    prop.replace(/-(\\w)/gi, function (word, letter) {\n      return letter.toUpperCase();\n    })];\n  }\n  return undefined;\n}\n\nfunction getScrollableContainer(n) {\n  var node = n;\n  var nodeName = void 0;\n  /* eslint no-cond-assign:0 */\n  while ((nodeName = node.nodeName.toLowerCase()) !== 'body') {\n    var overflowY = computedStyle(node, 'overflowY');\n    // https://stackoverflow.com/a/36900407/3040605\n    if (node !== n && (overflowY === 'auto' || overflowY === 'scroll') && node.scrollHeight > node.clientHeight) {\n      return node;\n    }\n    node = node.parentNode;\n  }\n  return nodeName === 'body' ? node.ownerDocument : node;\n}\n\nvar mixin = {\n  methods: {\n    getForm: function getForm() {\n      return _extends({}, formMixin.methods.getForm.call(this), {\n        validateFieldsAndScroll: this.validateFieldsAndScroll\n      });\n    },\n    validateFieldsAndScroll: function validateFieldsAndScroll(ns, opt, cb) {\n      var _this = this;\n\n      var _getParams = getParams(ns, opt, cb),\n          names = _getParams.names,\n          callback = _getParams.callback,\n          options = _getParams.options;\n\n      var newCb = function newCb(error, values) {\n        if (error) {\n          var validNames = _this.fieldsStore.getValidFieldsName();\n          var firstNode = void 0;\n          var firstTop = void 0;\n          validNames.forEach(function (name) {\n            if (has(error, name)) {\n              var instance = _this.getFieldInstance(name);\n              if (instance) {\n                var node = instance.$el || instance.elm;\n                var top = node.getBoundingClientRect().top;\n                if (node.type !== 'hidden' && (firstTop === undefined || firstTop > top)) {\n                  firstTop = top;\n                  firstNode = node;\n                }\n              }\n            }\n          });\n\n          if (firstNode) {\n            var c = options.container || getScrollableContainer(firstNode);\n            scrollIntoView(firstNode, c, _extends({\n              onlyScrollIfNeeded: true\n            }, options.scroll));\n          }\n        }\n\n        if (typeof callback === 'function') {\n          callback(error, values);\n        }\n      };\n\n      return this.validateFields(names, options, newCb);\n    }\n  }\n};\n\nfunction createDOMForm(option) {\n  return createBaseForm(_extends({}, option), [mixin]);\n}\n\nexport default createDOMForm;"]},"metadata":{},"sourceType":"module"}