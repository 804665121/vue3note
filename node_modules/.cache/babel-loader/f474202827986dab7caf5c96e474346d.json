{"ast":null,"code":"import { getComponentFromProp } from '../_util/props-util';\nimport PropTypes from '../_util/vue-types';\nimport arrayTreeFilter from 'array-tree-filter';\nimport BaseMixin from '../_util/BaseMixin';\nexport default {\n  name: 'CascaderMenus',\n  mixins: [BaseMixin],\n  props: {\n    value: PropTypes.array.def([]),\n    activeValue: PropTypes.array.def([]),\n    options: PropTypes.array,\n    prefixCls: PropTypes.string.def('rc-cascader-menus'),\n    expandTrigger: PropTypes.string.def('click'),\n    // onSelect: PropTypes.func,\n    visible: PropTypes.bool.def(false),\n    dropdownMenuColumnStyle: PropTypes.object,\n    defaultFieldNames: PropTypes.object,\n    fieldNames: PropTypes.object,\n    expandIcon: PropTypes.any,\n    loadingIcon: PropTypes.any\n  },\n  data: function data() {\n    this.menuItems = {};\n    return {};\n  },\n  watch: {\n    visible: function visible(val) {\n      var _this = this;\n\n      if (val) {\n        this.$nextTick(function () {\n          _this.scrollActiveItemToView();\n        });\n      }\n    }\n  },\n  mounted: function mounted() {\n    var _this2 = this;\n\n    this.$nextTick(function () {\n      _this2.scrollActiveItemToView();\n    });\n  },\n  methods: {\n    getFieldName: function getFieldName(name) {\n      var _$props = this.$props,\n          fieldNames = _$props.fieldNames,\n          defaultFieldNames = _$props.defaultFieldNames; // 防止只设置单个属性的名字\n\n      return fieldNames[name] || defaultFieldNames[name];\n    },\n    getOption: function getOption(option, menuIndex) {\n      var _this3 = this;\n\n      var h = this.$createElement;\n      var prefixCls = this.prefixCls,\n          expandTrigger = this.expandTrigger;\n      var loadingIcon = getComponentFromProp(this, 'loadingIcon');\n      var expandIcon = getComponentFromProp(this, 'expandIcon');\n\n      var onSelect = function onSelect(e) {\n        _this3.__emit('select', option, menuIndex, e);\n      };\n\n      var onItemDoubleClick = function onItemDoubleClick(e) {\n        _this3.__emit('itemDoubleClick', option, menuIndex, e);\n      };\n\n      var key = option[this.getFieldName('value')];\n      var expandProps = {\n        attrs: {\n          role: 'menuitem'\n        },\n        on: {\n          click: onSelect,\n          dblclick: onItemDoubleClick,\n          mousedown: function mousedown(e) {\n            return e.preventDefault();\n          }\n        },\n        key: Array.isArray(key) ? key.join('__ant__') : key\n      };\n      var menuItemCls = prefixCls + '-menu-item';\n      var expandIconNode = null;\n      var hasChildren = option[this.getFieldName('children')] && option[this.getFieldName('children')].length > 0;\n\n      if (hasChildren || option.isLeaf === false) {\n        menuItemCls += ' ' + prefixCls + '-menu-item-expand';\n\n        if (!option.loading) {\n          expandIconNode = h('span', {\n            'class': prefixCls + '-menu-item-expand-icon'\n          }, [expandIcon]);\n        }\n      }\n\n      if (expandTrigger === 'hover' && (hasChildren || option.isLeaf === false)) {\n        expandProps.on = {\n          mouseenter: this.delayOnSelect.bind(this, onSelect),\n          mouseleave: this.delayOnSelect.bind(this),\n          click: onSelect\n        };\n      }\n\n      if (this.isActiveOption(option, menuIndex)) {\n        menuItemCls += ' ' + prefixCls + '-menu-item-active';\n        expandProps.ref = this.getMenuItemRef(menuIndex);\n      }\n\n      if (option.disabled) {\n        menuItemCls += ' ' + prefixCls + '-menu-item-disabled';\n      }\n\n      var loadingIconNode = null;\n\n      if (option.loading) {\n        menuItemCls += ' ' + prefixCls + '-menu-item-loading';\n        loadingIconNode = loadingIcon || null;\n      }\n\n      var title = '';\n\n      if (option.title) {\n        title = option.title;\n      } else if (typeof option[this.getFieldName('label')] === 'string') {\n        title = option[this.getFieldName('label')];\n      }\n\n      expandProps.attrs.title = title;\n      expandProps['class'] = menuItemCls;\n      return h('li', expandProps, [option[this.getFieldName('label')], expandIconNode, loadingIconNode]);\n    },\n    getActiveOptions: function getActiveOptions(values) {\n      var _this4 = this;\n\n      var activeValue = values || this.activeValue;\n      var options = this.options;\n      return arrayTreeFilter(options, function (o, level) {\n        return o[_this4.getFieldName('value')] === activeValue[level];\n      }, {\n        childrenKeyName: this.getFieldName('children')\n      });\n    },\n    getShowOptions: function getShowOptions() {\n      var _this5 = this;\n\n      var options = this.options;\n      var result = this.getActiveOptions().map(function (activeOption) {\n        return activeOption[_this5.getFieldName('children')];\n      }).filter(function (activeOption) {\n        return !!activeOption;\n      });\n      result.unshift(options);\n      return result;\n    },\n    delayOnSelect: function delayOnSelect(onSelect) {\n      var _this6 = this;\n\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      if (this.delayTimer) {\n        clearTimeout(this.delayTimer);\n        this.delayTimer = null;\n      }\n\n      if (typeof onSelect === 'function') {\n        this.delayTimer = setTimeout(function () {\n          onSelect(args);\n          _this6.delayTimer = null;\n        }, 150);\n      }\n    },\n    scrollActiveItemToView: function scrollActiveItemToView() {\n      // scroll into view\n      var optionsLength = this.getShowOptions().length;\n\n      for (var i = 0; i < optionsLength; i++) {\n        var itemComponent = this.$refs['menuItems_' + i];\n\n        if (itemComponent) {\n          var target = itemComponent;\n          target.parentNode.scrollTop = target.offsetTop;\n        }\n      }\n    },\n    isActiveOption: function isActiveOption(option, menuIndex) {\n      var _activeValue = this.activeValue,\n          activeValue = _activeValue === undefined ? [] : _activeValue;\n      return activeValue[menuIndex] === option[this.getFieldName('value')];\n    },\n    getMenuItemRef: function getMenuItemRef(index) {\n      return 'menuItems_' + index;\n    }\n  },\n  render: function render() {\n    var _this7 = this;\n\n    var h = arguments[0];\n    var prefixCls = this.prefixCls,\n        dropdownMenuColumnStyle = this.dropdownMenuColumnStyle;\n    return h('div', [this.getShowOptions().map(function (options, menuIndex) {\n      return h('ul', {\n        'class': prefixCls + '-menu',\n        key: menuIndex,\n        style: dropdownMenuColumnStyle\n      }, [options.map(function (option) {\n        return _this7.getOption(option, menuIndex);\n      })]);\n    })]);\n  }\n};","map":{"version":3,"sources":["/Users/liulu/刘璐/vue3/hello-vue3/node_modules/ant-design-vue/es/vc-cascader/Menus.js"],"names":["getComponentFromProp","PropTypes","arrayTreeFilter","BaseMixin","name","mixins","props","value","array","def","activeValue","options","prefixCls","string","expandTrigger","visible","bool","dropdownMenuColumnStyle","object","defaultFieldNames","fieldNames","expandIcon","any","loadingIcon","data","menuItems","watch","val","_this","$nextTick","scrollActiveItemToView","mounted","_this2","methods","getFieldName","_$props","$props","getOption","option","menuIndex","_this3","h","$createElement","onSelect","e","__emit","onItemDoubleClick","key","expandProps","attrs","role","on","click","dblclick","mousedown","preventDefault","Array","isArray","join","menuItemCls","expandIconNode","hasChildren","length","isLeaf","loading","mouseenter","delayOnSelect","bind","mouseleave","isActiveOption","ref","getMenuItemRef","disabled","loadingIconNode","title","getActiveOptions","values","_this4","o","level","childrenKeyName","getShowOptions","_this5","result","map","activeOption","filter","unshift","_this6","_len","arguments","args","_key","delayTimer","clearTimeout","setTimeout","optionsLength","i","itemComponent","$refs","target","parentNode","scrollTop","offsetTop","_activeValue","undefined","index","render","_this7","style"],"mappings":"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","sourcesContent":["import { getComponentFromProp } from '../_util/props-util';\nimport PropTypes from '../_util/vue-types';\nimport arrayTreeFilter from 'array-tree-filter';\nimport BaseMixin from '../_util/BaseMixin';\n\nexport default {\n  name: 'CascaderMenus',\n  mixins: [BaseMixin],\n  props: {\n    value: PropTypes.array.def([]),\n    activeValue: PropTypes.array.def([]),\n    options: PropTypes.array,\n    prefixCls: PropTypes.string.def('rc-cascader-menus'),\n    expandTrigger: PropTypes.string.def('click'),\n    // onSelect: PropTypes.func,\n    visible: PropTypes.bool.def(false),\n    dropdownMenuColumnStyle: PropTypes.object,\n    defaultFieldNames: PropTypes.object,\n    fieldNames: PropTypes.object,\n    expandIcon: PropTypes.any,\n    loadingIcon: PropTypes.any\n  },\n  data: function data() {\n    this.menuItems = {};\n    return {};\n  },\n\n  watch: {\n    visible: function visible(val) {\n      var _this = this;\n\n      if (val) {\n        this.$nextTick(function () {\n          _this.scrollActiveItemToView();\n        });\n      }\n    }\n  },\n  mounted: function mounted() {\n    var _this2 = this;\n\n    this.$nextTick(function () {\n      _this2.scrollActiveItemToView();\n    });\n  },\n\n  methods: {\n    getFieldName: function getFieldName(name) {\n      var _$props = this.$props,\n          fieldNames = _$props.fieldNames,\n          defaultFieldNames = _$props.defaultFieldNames;\n      // 防止只设置单个属性的名字\n\n      return fieldNames[name] || defaultFieldNames[name];\n    },\n    getOption: function getOption(option, menuIndex) {\n      var _this3 = this;\n\n      var h = this.$createElement;\n      var prefixCls = this.prefixCls,\n          expandTrigger = this.expandTrigger;\n\n      var loadingIcon = getComponentFromProp(this, 'loadingIcon');\n      var expandIcon = getComponentFromProp(this, 'expandIcon');\n      var onSelect = function onSelect(e) {\n        _this3.__emit('select', option, menuIndex, e);\n      };\n      var onItemDoubleClick = function onItemDoubleClick(e) {\n        _this3.__emit('itemDoubleClick', option, menuIndex, e);\n      };\n      var key = option[this.getFieldName('value')];\n      var expandProps = {\n        attrs: {\n          role: 'menuitem'\n        },\n        on: {\n          click: onSelect,\n          dblclick: onItemDoubleClick,\n          mousedown: function mousedown(e) {\n            return e.preventDefault();\n          }\n        },\n        key: Array.isArray(key) ? key.join('__ant__') : key\n      };\n      var menuItemCls = prefixCls + '-menu-item';\n      var expandIconNode = null;\n      var hasChildren = option[this.getFieldName('children')] && option[this.getFieldName('children')].length > 0;\n      if (hasChildren || option.isLeaf === false) {\n        menuItemCls += ' ' + prefixCls + '-menu-item-expand';\n        if (!option.loading) {\n          expandIconNode = h(\n            'span',\n            { 'class': prefixCls + '-menu-item-expand-icon' },\n            [expandIcon]\n          );\n        }\n      }\n      if (expandTrigger === 'hover' && (hasChildren || option.isLeaf === false)) {\n        expandProps.on = {\n          mouseenter: this.delayOnSelect.bind(this, onSelect),\n          mouseleave: this.delayOnSelect.bind(this),\n          click: onSelect\n        };\n      }\n      if (this.isActiveOption(option, menuIndex)) {\n        menuItemCls += ' ' + prefixCls + '-menu-item-active';\n        expandProps.ref = this.getMenuItemRef(menuIndex);\n      }\n      if (option.disabled) {\n        menuItemCls += ' ' + prefixCls + '-menu-item-disabled';\n      }\n      var loadingIconNode = null;\n      if (option.loading) {\n        menuItemCls += ' ' + prefixCls + '-menu-item-loading';\n        loadingIconNode = loadingIcon || null;\n      }\n      var title = '';\n      if (option.title) {\n        title = option.title;\n      } else if (typeof option[this.getFieldName('label')] === 'string') {\n        title = option[this.getFieldName('label')];\n      }\n      expandProps.attrs.title = title;\n      expandProps['class'] = menuItemCls;\n      return h(\n        'li',\n        expandProps,\n        [option[this.getFieldName('label')], expandIconNode, loadingIconNode]\n      );\n    },\n    getActiveOptions: function getActiveOptions(values) {\n      var _this4 = this;\n\n      var activeValue = values || this.activeValue;\n      var options = this.options;\n      return arrayTreeFilter(options, function (o, level) {\n        return o[_this4.getFieldName('value')] === activeValue[level];\n      }, { childrenKeyName: this.getFieldName('children') });\n    },\n    getShowOptions: function getShowOptions() {\n      var _this5 = this;\n\n      var options = this.options;\n\n      var result = this.getActiveOptions().map(function (activeOption) {\n        return activeOption[_this5.getFieldName('children')];\n      }).filter(function (activeOption) {\n        return !!activeOption;\n      });\n      result.unshift(options);\n      return result;\n    },\n    delayOnSelect: function delayOnSelect(onSelect) {\n      var _this6 = this;\n\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      if (this.delayTimer) {\n        clearTimeout(this.delayTimer);\n        this.delayTimer = null;\n      }\n      if (typeof onSelect === 'function') {\n        this.delayTimer = setTimeout(function () {\n          onSelect(args);\n          _this6.delayTimer = null;\n        }, 150);\n      }\n    },\n    scrollActiveItemToView: function scrollActiveItemToView() {\n      // scroll into view\n      var optionsLength = this.getShowOptions().length;\n      for (var i = 0; i < optionsLength; i++) {\n        var itemComponent = this.$refs['menuItems_' + i];\n        if (itemComponent) {\n          var target = itemComponent;\n          target.parentNode.scrollTop = target.offsetTop;\n        }\n      }\n    },\n    isActiveOption: function isActiveOption(option, menuIndex) {\n      var _activeValue = this.activeValue,\n          activeValue = _activeValue === undefined ? [] : _activeValue;\n\n      return activeValue[menuIndex] === option[this.getFieldName('value')];\n    },\n    getMenuItemRef: function getMenuItemRef(index) {\n      return 'menuItems_' + index;\n    }\n  },\n\n  render: function render() {\n    var _this7 = this;\n\n    var h = arguments[0];\n    var prefixCls = this.prefixCls,\n        dropdownMenuColumnStyle = this.dropdownMenuColumnStyle;\n\n    return h('div', [this.getShowOptions().map(function (options, menuIndex) {\n      return h(\n        'ul',\n        { 'class': prefixCls + '-menu', key: menuIndex, style: dropdownMenuColumnStyle },\n        [options.map(function (option) {\n          return _this7.getOption(option, menuIndex);\n        })]\n      );\n    })]);\n  }\n};"]},"metadata":{},"sourceType":"module"}