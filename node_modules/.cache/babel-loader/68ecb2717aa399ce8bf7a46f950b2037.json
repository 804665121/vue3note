{"ast":null,"code":"import _mergeJSXProps from 'babel-helper-vue-jsx-merge-props';\nimport _extends from 'babel-runtime/helpers/extends';\nimport * as moment from 'moment';\nimport interopDefault from '../_util/interopDefault';\nimport { initDefaultProps, getListeners } from '../_util/props-util';\nimport Statistic, { StatisticProps } from './Statistic';\nimport { formatCountdown as _formatCountdown } from './utils';\nvar REFRESH_INTERVAL = 1000 / 30;\n\nfunction getTime(value) {\n  return interopDefault(moment)(value).valueOf();\n}\n\nexport default {\n  name: 'AStatisticCountdown',\n  props: initDefaultProps(StatisticProps, {\n    format: 'HH:mm:ss'\n  }),\n  created: function created() {\n    this.countdownId = undefined;\n  },\n  mounted: function mounted() {\n    this.syncTimer();\n  },\n  updated: function updated() {\n    this.syncTimer();\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.stopTimer();\n  },\n  methods: {\n    syncTimer: function syncTimer() {\n      var value = this.$props.value;\n      var timestamp = getTime(value);\n\n      if (timestamp >= Date.now()) {\n        this.startTimer();\n      } else {\n        this.stopTimer();\n      }\n    },\n    startTimer: function startTimer() {\n      var _this = this;\n\n      if (this.countdownId) return;\n      this.countdownId = window.setInterval(function () {\n        _this.$refs.statistic.$forceUpdate();\n\n        _this.syncTimer();\n      }, REFRESH_INTERVAL);\n    },\n    stopTimer: function stopTimer() {\n      var value = this.$props.value;\n\n      if (this.countdownId) {\n        clearInterval(this.countdownId);\n        this.countdownId = undefined;\n        var timestamp = getTime(value);\n\n        if (timestamp < Date.now()) {\n          this.$emit('finish');\n        }\n      }\n    },\n    formatCountdown: function formatCountdown(_ref) {\n      var value = _ref.value,\n          config = _ref.config;\n      var format = this.$props.format;\n      return _formatCountdown(value, _extends({}, config, {\n        format: format\n      }));\n    },\n    valueRenderHtml: function valueRenderHtml(node) {\n      return node;\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    return h(Statistic, _mergeJSXProps([{\n      ref: 'statistic'\n    }, {\n      props: _extends({}, this.$props, {\n        valueRender: this.valueRenderHtml,\n        formatter: this.formatCountdown\n      }),\n      on: getListeners(this)\n    }]));\n  }\n};","map":{"version":3,"sources":["/Users/liulu/刘璐/vue3/hello-vue3/node_modules/ant-design-vue/es/statistic/Countdown.js"],"names":["_mergeJSXProps","_extends","moment","interopDefault","initDefaultProps","getListeners","Statistic","StatisticProps","formatCountdown","_formatCountdown","REFRESH_INTERVAL","getTime","value","valueOf","name","props","format","created","countdownId","undefined","mounted","syncTimer","updated","beforeDestroy","stopTimer","methods","$props","timestamp","Date","now","startTimer","_this","window","setInterval","$refs","statistic","$forceUpdate","clearInterval","$emit","_ref","config","valueRenderHtml","node","render","h","arguments","ref","valueRender","formatter","on"],"mappings":"AAAA,OAAOA,cAAP,MAA2B,kCAA3B;AACA,OAAOC,QAAP,MAAqB,+BAArB;AACA,OAAO,KAAKC,MAAZ,MAAwB,QAAxB;AACA,OAAOC,cAAP,MAA2B,yBAA3B;AACA,SAASC,gBAAT,EAA2BC,YAA3B,QAA+C,qBAA/C;AACA,OAAOC,SAAP,IAAoBC,cAApB,QAA0C,aAA1C;AACA,SAASC,eAAe,IAAIC,gBAA5B,QAAoD,SAApD;AAEA,IAAIC,gBAAgB,GAAG,OAAO,EAA9B;;AAEA,SAASC,OAAT,CAAiBC,KAAjB,EAAwB;AACtB,SAAOT,cAAc,CAACD,MAAD,CAAd,CAAuBU,KAAvB,EAA8BC,OAA9B,EAAP;AACD;;AAED,eAAe;AACbC,EAAAA,IAAI,EAAE,qBADO;AAEbC,EAAAA,KAAK,EAAEX,gBAAgB,CAACG,cAAD,EAAiB;AACtCS,IAAAA,MAAM,EAAE;AAD8B,GAAjB,CAFV;AAMbC,EAAAA,OAAO,EAAE,SAASA,OAAT,GAAmB;AAC1B,SAAKC,WAAL,GAAmBC,SAAnB;AACD,GARY;AASbC,EAAAA,OAAO,EAAE,SAASA,OAAT,GAAmB;AAC1B,SAAKC,SAAL;AACD,GAXY;AAYbC,EAAAA,OAAO,EAAE,SAASA,OAAT,GAAmB;AAC1B,SAAKD,SAAL;AACD,GAdY;AAebE,EAAAA,aAAa,EAAE,SAASA,aAAT,GAAyB;AACtC,SAAKC,SAAL;AACD,GAjBY;AAoBbC,EAAAA,OAAO,EAAE;AACPJ,IAAAA,SAAS,EAAE,SAASA,SAAT,GAAqB;AAC9B,UAAIT,KAAK,GAAG,KAAKc,MAAL,CAAYd,KAAxB;AAEA,UAAIe,SAAS,GAAGhB,OAAO,CAACC,KAAD,CAAvB;;AACA,UAAIe,SAAS,IAAIC,IAAI,CAACC,GAAL,EAAjB,EAA6B;AAC3B,aAAKC,UAAL;AACD,OAFD,MAEO;AACL,aAAKN,SAAL;AACD;AACF,KAVM;AAWPM,IAAAA,UAAU,EAAE,SAASA,UAAT,GAAsB;AAChC,UAAIC,KAAK,GAAG,IAAZ;;AAEA,UAAI,KAAKb,WAAT,EAAsB;AACtB,WAAKA,WAAL,GAAmBc,MAAM,CAACC,WAAP,CAAmB,YAAY;AAChDF,QAAAA,KAAK,CAACG,KAAN,CAAYC,SAAZ,CAAsBC,YAAtB;;AACAL,QAAAA,KAAK,CAACV,SAAN;AACD,OAHkB,EAGhBX,gBAHgB,CAAnB;AAID,KAnBM;AAoBPc,IAAAA,SAAS,EAAE,SAASA,SAAT,GAAqB;AAC9B,UAAIZ,KAAK,GAAG,KAAKc,MAAL,CAAYd,KAAxB;;AAEA,UAAI,KAAKM,WAAT,EAAsB;AACpBmB,QAAAA,aAAa,CAAC,KAAKnB,WAAN,CAAb;AACA,aAAKA,WAAL,GAAmBC,SAAnB;AAEA,YAAIQ,SAAS,GAAGhB,OAAO,CAACC,KAAD,CAAvB;;AACA,YAAIe,SAAS,GAAGC,IAAI,CAACC,GAAL,EAAhB,EAA4B;AAC1B,eAAKS,KAAL,CAAW,QAAX;AACD;AACF;AACF,KAhCM;AAiCP9B,IAAAA,eAAe,EAAE,SAASA,eAAT,CAAyB+B,IAAzB,EAA+B;AAC9C,UAAI3B,KAAK,GAAG2B,IAAI,CAAC3B,KAAjB;AAAA,UACI4B,MAAM,GAAGD,IAAI,CAACC,MADlB;AAEA,UAAIxB,MAAM,GAAG,KAAKU,MAAL,CAAYV,MAAzB;AAEA,aAAOP,gBAAgB,CAACG,KAAD,EAAQX,QAAQ,CAAC,EAAD,EAAKuC,MAAL,EAAa;AAAExB,QAAAA,MAAM,EAAEA;AAAV,OAAb,CAAhB,CAAvB;AACD,KAvCM;AA0CPyB,IAAAA,eAAe,EAAE,SAASA,eAAT,CAAyBC,IAAzB,EAA+B;AAC9C,aAAOA,IAAP;AACD;AA5CM,GApBI;AAmEbC,EAAAA,MAAM,EAAE,SAASA,MAAT,GAAkB;AACxB,QAAIC,CAAC,GAAGC,SAAS,CAAC,CAAD,CAAjB;AAEA,WAAOD,CAAC,CAACtC,SAAD,EAAYN,cAAc,CAAC,CAAC;AAClC8C,MAAAA,GAAG,EAAE;AAD6B,KAAD,EAEhC;AACD/B,MAAAA,KAAK,EAAEd,QAAQ,CAAC,EAAD,EAAK,KAAKyB,MAAV,EAAkB;AAC/BqB,QAAAA,WAAW,EAAE,KAAKN,eADa;AAE/BO,QAAAA,SAAS,EAAE,KAAKxC;AAFe,OAAlB,CADd;AAKDyC,MAAAA,EAAE,EAAE5C,YAAY,CAAC,IAAD;AALf,KAFgC,CAAD,CAA1B,CAAR;AASD;AA/EY,CAAf","sourcesContent":["import _mergeJSXProps from 'babel-helper-vue-jsx-merge-props';\nimport _extends from 'babel-runtime/helpers/extends';\nimport * as moment from 'moment';\nimport interopDefault from '../_util/interopDefault';\nimport { initDefaultProps, getListeners } from '../_util/props-util';\nimport Statistic, { StatisticProps } from './Statistic';\nimport { formatCountdown as _formatCountdown } from './utils';\n\nvar REFRESH_INTERVAL = 1000 / 30;\n\nfunction getTime(value) {\n  return interopDefault(moment)(value).valueOf();\n}\n\nexport default {\n  name: 'AStatisticCountdown',\n  props: initDefaultProps(StatisticProps, {\n    format: 'HH:mm:ss'\n  }),\n\n  created: function created() {\n    this.countdownId = undefined;\n  },\n  mounted: function mounted() {\n    this.syncTimer();\n  },\n  updated: function updated() {\n    this.syncTimer();\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.stopTimer();\n  },\n\n\n  methods: {\n    syncTimer: function syncTimer() {\n      var value = this.$props.value;\n\n      var timestamp = getTime(value);\n      if (timestamp >= Date.now()) {\n        this.startTimer();\n      } else {\n        this.stopTimer();\n      }\n    },\n    startTimer: function startTimer() {\n      var _this = this;\n\n      if (this.countdownId) return;\n      this.countdownId = window.setInterval(function () {\n        _this.$refs.statistic.$forceUpdate();\n        _this.syncTimer();\n      }, REFRESH_INTERVAL);\n    },\n    stopTimer: function stopTimer() {\n      var value = this.$props.value;\n\n      if (this.countdownId) {\n        clearInterval(this.countdownId);\n        this.countdownId = undefined;\n\n        var timestamp = getTime(value);\n        if (timestamp < Date.now()) {\n          this.$emit('finish');\n        }\n      }\n    },\n    formatCountdown: function formatCountdown(_ref) {\n      var value = _ref.value,\n          config = _ref.config;\n      var format = this.$props.format;\n\n      return _formatCountdown(value, _extends({}, config, { format: format }));\n    },\n\n\n    valueRenderHtml: function valueRenderHtml(node) {\n      return node;\n    }\n  },\n\n  render: function render() {\n    var h = arguments[0];\n\n    return h(Statistic, _mergeJSXProps([{\n      ref: 'statistic'\n    }, {\n      props: _extends({}, this.$props, {\n        valueRender: this.valueRenderHtml,\n        formatter: this.formatCountdown\n      }),\n      on: getListeners(this)\n    }]));\n  }\n};"]},"metadata":{},"sourceType":"module"}