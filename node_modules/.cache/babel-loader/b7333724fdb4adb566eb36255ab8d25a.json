{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport _typeof from 'babel-runtime/helpers/typeof';\nimport _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _extends from 'babel-runtime/helpers/extends';\nimport _toConsumableArray from 'babel-runtime/helpers/toConsumableArray';\nimport AsyncValidator from 'async-validator';\nimport warning from 'warning';\nimport get from 'lodash/get';\nimport set from 'lodash/set';\nimport eq from 'lodash/eq';\nimport omit from 'lodash/omit';\nimport createFieldsStore from './createFieldsStore';\nimport { cloneElement } from '../../_util/vnode';\nimport BaseMixin from '../../_util/BaseMixin';\nimport { getOptionProps, getEvents, slotHasProp, getComponentName, getListeners } from '../../_util/props-util';\nimport PropTypes from '../../_util/vue-types';\nimport { argumentContainer, identity, normalizeValidateRules, getValidateTriggers, getValueFromEvent, hasRules, getParams, isEmptyObject, flattenArray } from './utils';\nvar DEFAULT_TRIGGER = 'change';\n\nfunction createBaseForm() {\n  var option = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var mixins = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var validateMessages = option.validateMessages,\n      onFieldsChange = option.onFieldsChange,\n      onValuesChange = option.onValuesChange,\n      _option$mapProps = option.mapProps,\n      mapProps = _option$mapProps === undefined ? identity : _option$mapProps,\n      mapPropsToFields = option.mapPropsToFields,\n      fieldNameProp = option.fieldNameProp,\n      fieldMetaProp = option.fieldMetaProp,\n      fieldDataProp = option.fieldDataProp,\n      _option$formPropName = option.formPropName,\n      formPropName = _option$formPropName === undefined ? 'form' : _option$formPropName,\n      formName = option.name,\n      _option$props = option.props,\n      props = _option$props === undefined ? {} : _option$props,\n      templateContext = option.templateContext;\n  return function decorate(WrappedComponent) {\n    var formProps = {};\n\n    if (Array.isArray(props)) {\n      props.forEach(function (prop) {\n        formProps[prop] = PropTypes.any;\n      });\n    } else {\n      formProps = props;\n    }\n\n    var Form = {\n      mixins: [BaseMixin].concat(_toConsumableArray(mixins)),\n      props: _extends({}, formProps, {\n        wrappedComponentRef: PropTypes.func.def(function () {})\n      }),\n      data: function data() {\n        var _this = this;\n\n        var fields = mapPropsToFields && mapPropsToFields(this.$props);\n        this.fieldsStore = createFieldsStore(fields || {});\n        this.templateContext = templateContext;\n        this.instances = {};\n        this.cachedBind = {};\n        this.clearedFieldMetaCache = {};\n        this.formItems = {};\n        this.renderFields = {};\n        this.domFields = {}; // HACK: https://github.com/ant-design/ant-design/issues/6406\n\n        ['getFieldsValue', 'getFieldValue', 'setFieldsInitialValue', 'getFieldsError', 'getFieldError', 'isFieldValidating', 'isFieldsValidating', 'isFieldsTouched', 'isFieldTouched'].forEach(function (key) {\n          _this[key] = function () {\n            var _fieldsStore;\n\n            return (_fieldsStore = _this.fieldsStore)[key].apply(_fieldsStore, arguments);\n          };\n        });\n        return {\n          submitting: false\n        };\n      },\n      watch: templateContext ? {} : {\n        $props: {\n          handler: function handler(nextProps) {\n            if (mapPropsToFields) {\n              this.fieldsStore.updateFields(mapPropsToFields(nextProps));\n            }\n          },\n          deep: true\n        }\n      },\n      mounted: function mounted() {\n        this.cleanUpUselessFields();\n      },\n      updated: function updated() {\n        // form updated add for template v-decorator\n        this.cleanUpUselessFields();\n      },\n      methods: {\n        updateFields: function updateFields() {\n          var fields = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n          this.fieldsStore.updateFields(mapPropsToFields(fields));\n\n          if (templateContext) {\n            templateContext.$forceUpdate();\n          }\n        },\n        onCollectCommon: function onCollectCommon(name, action, args) {\n          var fieldMeta = this.fieldsStore.getFieldMeta(name);\n\n          if (fieldMeta[action]) {\n            fieldMeta[action].apply(fieldMeta, _toConsumableArray(args));\n          } else if (fieldMeta.originalProps && fieldMeta.originalProps[action]) {\n            var _fieldMeta$originalPr;\n\n            (_fieldMeta$originalPr = fieldMeta.originalProps)[action].apply(_fieldMeta$originalPr, _toConsumableArray(args));\n          }\n\n          var value = fieldMeta.getValueFromEvent ? fieldMeta.getValueFromEvent.apply(fieldMeta, _toConsumableArray(args)) : getValueFromEvent.apply(undefined, _toConsumableArray(args));\n\n          if (onValuesChange && value !== this.fieldsStore.getFieldValue(name)) {\n            var valuesAll = this.fieldsStore.getAllValues();\n            var valuesAllSet = {};\n            valuesAll[name] = value;\n            Object.keys(valuesAll).forEach(function (key) {\n              return set(valuesAllSet, key, valuesAll[key]);\n            });\n            onValuesChange(_extends(_defineProperty({}, formPropName, this.getForm()), this.$props), set({}, name, value), valuesAllSet);\n          }\n\n          var field = this.fieldsStore.getField(name);\n          return {\n            name: name,\n            field: _extends({}, field, {\n              value: value,\n              touched: true\n            }),\n            fieldMeta: fieldMeta\n          };\n        },\n        onCollect: function onCollect(name_, action) {\n          for (var _len = arguments.length, args = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n            args[_key - 2] = arguments[_key];\n          }\n\n          var _onCollectCommon = this.onCollectCommon(name_, action, args),\n              name = _onCollectCommon.name,\n              field = _onCollectCommon.field,\n              fieldMeta = _onCollectCommon.fieldMeta;\n\n          var validate = fieldMeta.validate;\n          this.fieldsStore.setFieldsAsDirty();\n\n          var newField = _extends({}, field, {\n            dirty: hasRules(validate)\n          });\n\n          this.setFields(_defineProperty({}, name, newField));\n        },\n        onCollectValidate: function onCollectValidate(name_, action) {\n          for (var _len2 = arguments.length, args = Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n            args[_key2 - 2] = arguments[_key2];\n          }\n\n          var _onCollectCommon2 = this.onCollectCommon(name_, action, args),\n              field = _onCollectCommon2.field,\n              fieldMeta = _onCollectCommon2.fieldMeta;\n\n          var newField = _extends({}, field, {\n            dirty: true\n          });\n\n          this.fieldsStore.setFieldsAsDirty();\n          this.validateFieldsInternal([newField], {\n            action: action,\n            options: {\n              firstFields: !!fieldMeta.validateFirst\n            }\n          });\n        },\n        getCacheBind: function getCacheBind(name, action, fn) {\n          if (!this.cachedBind[name]) {\n            this.cachedBind[name] = {};\n          }\n\n          var cache = this.cachedBind[name];\n\n          if (!cache[action] || cache[action].oriFn !== fn) {\n            cache[action] = {\n              fn: fn.bind(this, name, action),\n              oriFn: fn\n            };\n          }\n\n          return cache[action].fn;\n        },\n        getFieldDecorator: function getFieldDecorator(name, fieldOption, formItem) {\n          var _this2 = this;\n\n          var _getFieldProps = this.getFieldProps(name, fieldOption),\n              props = _getFieldProps.props,\n              restProps = _objectWithoutProperties(_getFieldProps, ['props']);\n\n          this.formItems[name] = formItem;\n          return function (fieldElem) {\n            // We should put field in record if it is rendered\n            _this2.renderFields[name] = true;\n\n            var fieldMeta = _this2.fieldsStore.getFieldMeta(name);\n\n            var originalProps = getOptionProps(fieldElem);\n            var originalEvents = getEvents(fieldElem);\n\n            if (process.env.NODE_ENV !== 'production') {\n              var valuePropName = fieldMeta.valuePropName;\n              warning(!slotHasProp(fieldElem, valuePropName), '`getFieldDecorator` will override `' + valuePropName + '`, ' + ('so please don\\'t set `' + valuePropName + ' and v-model` directly ') + 'and use `setFieldsValue` to set it.');\n              warning(!(!slotHasProp(fieldElem, valuePropName) && valuePropName in originalProps && !(fieldOption && 'initialValue' in fieldOption)), getComponentName(fieldElem.componentOptions) + ' `default value` can not collect, ' + ' please use `option.initialValue` to set default value.');\n              var defaultValuePropName = 'default' + valuePropName[0].toUpperCase() + valuePropName.slice(1);\n              warning(!slotHasProp(fieldElem, defaultValuePropName), '`' + defaultValuePropName + '` is invalid ' + ('for `getFieldDecorator` will set `' + valuePropName + '`,') + ' please use `option.initialValue` instead.');\n            }\n\n            fieldMeta.originalProps = originalProps; // fieldMeta.ref = fieldElem.data && fieldElem.data.ref\n\n            var newProps = _extends({\n              props: _extends({}, props, _this2.fieldsStore.getFieldValuePropValue(fieldMeta))\n            }, restProps);\n\n            newProps.domProps.value = newProps.props.value;\n            var newEvents = {};\n            Object.keys(newProps.on).forEach(function (key) {\n              if (originalEvents[key]) {\n                var triggerEvents = newProps.on[key];\n\n                newEvents[key] = function () {\n                  originalEvents[key].apply(originalEvents, arguments);\n                  triggerEvents.apply(undefined, arguments);\n                };\n              } else {\n                newEvents[key] = newProps.on[key];\n              }\n            });\n            return cloneElement(fieldElem, _extends({}, newProps, {\n              on: newEvents\n            }));\n          };\n        },\n        getFieldProps: function getFieldProps(name) {\n          var _this3 = this;\n\n          var usersFieldOption = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n          if (!name) {\n            throw new Error('Must call `getFieldProps` with valid name string!');\n          }\n\n          if (process.env.NODE_ENV !== 'production') {\n            warning(this.fieldsStore.isValidNestedFieldName(name), 'One field name cannot be part of another, e.g. `a` and `a.b`. Check field: ' + name);\n            warning(!('exclusive' in usersFieldOption), '`option.exclusive` of `getFieldProps`|`getFieldDecorator` had been remove.');\n          }\n\n          delete this.clearedFieldMetaCache[name];\n\n          var fieldOption = _extends({\n            name: name,\n            trigger: DEFAULT_TRIGGER,\n            valuePropName: 'value',\n            validate: []\n          }, usersFieldOption);\n\n          var rules = fieldOption.rules,\n              trigger = fieldOption.trigger,\n              _fieldOption$validate = fieldOption.validateTrigger,\n              validateTrigger = _fieldOption$validate === undefined ? trigger : _fieldOption$validate,\n              validate = fieldOption.validate;\n          var fieldMeta = this.fieldsStore.getFieldMeta(name);\n\n          if ('initialValue' in fieldOption) {\n            fieldMeta.initialValue = fieldOption.initialValue;\n          }\n\n          var inputProps = _extends({}, this.fieldsStore.getFieldValuePropValue(fieldOption));\n\n          var inputListeners = {};\n          var inputAttrs = {};\n\n          if (fieldNameProp) {\n            inputProps[fieldNameProp] = formName ? formName + '_' + name : name;\n          }\n\n          var validateRules = normalizeValidateRules(validate, rules, validateTrigger);\n          var validateTriggers = getValidateTriggers(validateRules);\n          validateTriggers.forEach(function (action) {\n            if (inputListeners[action]) return;\n            inputListeners[action] = _this3.getCacheBind(name, action, _this3.onCollectValidate);\n          }); // make sure that the value will be collect\n\n          if (trigger && validateTriggers.indexOf(trigger) === -1) {\n            inputListeners[trigger] = this.getCacheBind(name, trigger, this.onCollect);\n          }\n\n          var meta = _extends({}, fieldMeta, fieldOption, {\n            validate: validateRules\n          });\n\n          this.fieldsStore.setFieldMeta(name, meta);\n\n          if (fieldMetaProp) {\n            inputAttrs[fieldMetaProp] = meta;\n          }\n\n          if (fieldDataProp) {\n            inputAttrs[fieldDataProp] = this.fieldsStore.getField(name);\n          } // This field is rendered, record it\n\n\n          this.renderFields[name] = true;\n          return {\n            props: omit(inputProps, ['id']),\n            // id: inputProps.id,\n            domProps: {\n              value: inputProps.value\n            },\n            attrs: _extends({}, inputAttrs, {\n              id: inputProps.id\n            }),\n            directives: [{\n              name: 'ant-ref',\n              value: this.getCacheBind(name, name + '__ref', this.saveRef)\n            }],\n            on: inputListeners\n          };\n        },\n        getFieldInstance: function getFieldInstance(name) {\n          return this.instances[name];\n        },\n        getRules: function getRules(fieldMeta, action) {\n          var actionRules = fieldMeta.validate.filter(function (item) {\n            return !action || item.trigger.indexOf(action) >= 0;\n          }).map(function (item) {\n            return item.rules;\n          });\n          return flattenArray(actionRules);\n        },\n        setFields: function setFields(maybeNestedFields, callback) {\n          var _this4 = this;\n\n          var fields = this.fieldsStore.flattenRegisteredFields(maybeNestedFields);\n          this.fieldsStore.setFields(fields);\n          var changedFields = Object.keys(fields).reduce(function (acc, name) {\n            return set(acc, name, _this4.fieldsStore.getField(name));\n          }, {});\n\n          if (onFieldsChange) {\n            var _changedFields = Object.keys(fields).reduce(function (acc, name) {\n              return set(acc, name, _this4.fieldsStore.getField(name));\n            }, {});\n\n            onFieldsChange(this, _changedFields, this.fieldsStore.getNestedAllFields());\n          }\n\n          var formContext = templateContext || this;\n          var allUpdate = false;\n          Object.keys(changedFields).forEach(function (key) {\n            var formItem = _this4.formItems[key];\n            formItem = typeof formItem === 'function' ? formItem() : formItem;\n\n            if (formItem && formItem.itemSelfUpdate) {\n              formItem.$forceUpdate();\n            } else {\n              allUpdate = true;\n            }\n          });\n\n          if (allUpdate) {\n            formContext.$forceUpdate();\n          }\n\n          this.$nextTick(function () {\n            callback && callback();\n          });\n        },\n        setFieldsValue: function setFieldsValue(changedValues, callback) {\n          var fieldsMeta = this.fieldsStore.fieldsMeta;\n          var values = this.fieldsStore.flattenRegisteredFields(changedValues);\n          var newFields = Object.keys(values).reduce(function (acc, name) {\n            var isRegistered = fieldsMeta[name];\n\n            if (process.env.NODE_ENV !== 'production') {\n              warning(isRegistered, 'Cannot use `setFieldsValue` until ' + 'you use `getFieldDecorator` or `getFieldProps` to register it.');\n            }\n\n            if (isRegistered) {\n              var value = values[name];\n              acc[name] = {\n                value: value\n              };\n            }\n\n            return acc;\n          }, {});\n          this.setFields(newFields, callback);\n\n          if (onValuesChange) {\n            var allValues = this.fieldsStore.getAllValues();\n            onValuesChange(_extends(_defineProperty({}, formPropName, this.getForm()), this.$props), changedValues, allValues);\n          }\n        },\n        saveRef: function saveRef(name, _, component) {\n          if (!component) {\n            var fieldMeta = this.fieldsStore.getFieldMeta(name);\n\n            if (!fieldMeta.preserve) {\n              // after destroy, delete data\n              this.clearedFieldMetaCache[name] = {\n                field: this.fieldsStore.getField(name),\n                meta: fieldMeta\n              };\n              this.clearField(name);\n            }\n\n            delete this.domFields[name];\n            return;\n          }\n\n          this.domFields[name] = true;\n          this.recoverClearedField(name); // const fieldMeta = this.fieldsStore.getFieldMeta(name)\n          // if (fieldMeta) {\n          //   const ref = fieldMeta.ref\n          //   if (ref) {\n          //     if (typeof ref === 'string') {\n          //       throw new Error(`can not set ref string for ${name}`)\n          //     }\n          //     ref(component)\n          //   }\n          // }\n\n          this.instances[name] = component;\n        },\n        cleanUpUselessFields: function cleanUpUselessFields() {\n          var _this5 = this;\n\n          var fieldList = this.fieldsStore.getAllFieldsName();\n          var removedList = fieldList.filter(function (field) {\n            var fieldMeta = _this5.fieldsStore.getFieldMeta(field);\n\n            return !_this5.renderFields[field] && !_this5.domFields[field] && !fieldMeta.preserve;\n          });\n\n          if (removedList.length) {\n            removedList.forEach(this.clearField);\n          }\n\n          this.renderFields = {};\n        },\n        clearField: function clearField(name) {\n          this.fieldsStore.clearField(name);\n          delete this.instances[name];\n          delete this.cachedBind[name];\n        },\n        resetFields: function resetFields(ns) {\n          var _this6 = this;\n\n          var newFields = this.fieldsStore.resetFields(ns);\n\n          if (Object.keys(newFields).length > 0) {\n            this.setFields(newFields);\n          }\n\n          if (ns) {\n            var names = Array.isArray(ns) ? ns : [ns];\n            names.forEach(function (name) {\n              return delete _this6.clearedFieldMetaCache[name];\n            });\n          } else {\n            this.clearedFieldMetaCache = {};\n          }\n        },\n        recoverClearedField: function recoverClearedField(name) {\n          if (this.clearedFieldMetaCache[name]) {\n            this.fieldsStore.setFields(_defineProperty({}, name, this.clearedFieldMetaCache[name].field));\n            this.fieldsStore.setFieldMeta(name, this.clearedFieldMetaCache[name].meta);\n            delete this.clearedFieldMetaCache[name];\n          }\n        },\n        validateFieldsInternal: function validateFieldsInternal(fields, _ref, callback) {\n          var _this7 = this;\n\n          var fieldNames = _ref.fieldNames,\n              action = _ref.action,\n              _ref$options = _ref.options,\n              options = _ref$options === undefined ? {} : _ref$options;\n          var allRules = {};\n          var allValues = {};\n          var allFields = {};\n          var alreadyErrors = {};\n          fields.forEach(function (field) {\n            var name = field.name;\n\n            if (options.force !== true && field.dirty === false) {\n              if (field.errors) {\n                set(alreadyErrors, name, {\n                  errors: field.errors\n                });\n              }\n\n              return;\n            }\n\n            var fieldMeta = _this7.fieldsStore.getFieldMeta(name);\n\n            var newField = _extends({}, field);\n\n            newField.errors = undefined;\n            newField.validating = true;\n            newField.dirty = true;\n            allRules[name] = _this7.getRules(fieldMeta, action);\n            allValues[name] = newField.value;\n            allFields[name] = newField;\n          });\n          this.setFields(allFields); // in case normalize\n\n          Object.keys(allValues).forEach(function (f) {\n            allValues[f] = _this7.fieldsStore.getFieldValue(f);\n          });\n\n          if (callback && isEmptyObject(allFields)) {\n            callback(isEmptyObject(alreadyErrors) ? null : alreadyErrors, this.fieldsStore.getFieldsValue(fieldNames));\n            return;\n          }\n\n          var validator = new AsyncValidator(allRules);\n\n          if (validateMessages) {\n            validator.messages(validateMessages);\n          }\n\n          validator.validate(allValues, options, function (errors) {\n            var errorsGroup = _extends({}, alreadyErrors);\n\n            if (errors && errors.length) {\n              errors.forEach(function (e) {\n                var errorFieldName = e.field;\n                var fieldName = errorFieldName; // Handle using array validation rule.\n                // ref: https://github.com/ant-design/ant-design/issues/14275\n\n                Object.keys(allRules).some(function (ruleFieldName) {\n                  var rules = allRules[ruleFieldName] || []; // Exist if match rule\n\n                  if (ruleFieldName === errorFieldName) {\n                    fieldName = ruleFieldName;\n                    return true;\n                  } // Skip if not match array type\n\n\n                  if (rules.every(function (_ref2) {\n                    var type = _ref2.type;\n                    return type !== 'array';\n                  }) && errorFieldName.indexOf(ruleFieldName) !== 0) {\n                    return false;\n                  } // Exist if match the field name\n\n\n                  var restPath = errorFieldName.slice(ruleFieldName.length + 1);\n\n                  if (/^\\d+$/.test(restPath)) {\n                    fieldName = ruleFieldName;\n                    return true;\n                  }\n\n                  return false;\n                });\n                var field = get(errorsGroup, fieldName);\n\n                if ((typeof field === 'undefined' ? 'undefined' : _typeof(field)) !== 'object' || Array.isArray(field)) {\n                  set(errorsGroup, fieldName, {\n                    errors: []\n                  });\n                }\n\n                var fieldErrors = get(errorsGroup, fieldName.concat('.errors'));\n                fieldErrors.push(e);\n              });\n            }\n\n            var expired = [];\n            var nowAllFields = {};\n            Object.keys(allRules).forEach(function (name) {\n              var fieldErrors = get(errorsGroup, name);\n\n              var nowField = _this7.fieldsStore.getField(name); // avoid concurrency problems\n\n\n              if (!eq(nowField.value, allValues[name])) {\n                expired.push({\n                  name: name\n                });\n              } else {\n                nowField.errors = fieldErrors && fieldErrors.errors;\n                nowField.value = allValues[name];\n                nowField.validating = false;\n                nowField.dirty = false;\n                nowAllFields[name] = nowField;\n              }\n            });\n\n            _this7.setFields(nowAllFields);\n\n            if (callback) {\n              if (expired.length) {\n                expired.forEach(function (_ref3) {\n                  var name = _ref3.name;\n                  var fieldErrors = [{\n                    message: name + ' need to revalidate',\n                    field: name\n                  }];\n                  set(errorsGroup, name, {\n                    expired: true,\n                    errors: fieldErrors\n                  });\n                });\n              }\n\n              callback(isEmptyObject(errorsGroup) ? null : errorsGroup, _this7.fieldsStore.getFieldsValue(fieldNames));\n            }\n          });\n        },\n        validateFields: function validateFields(ns, opt, cb) {\n          var _this8 = this;\n\n          var pending = new Promise(function (resolve, reject) {\n            var _getParams = getParams(ns, opt, cb),\n                names = _getParams.names,\n                options = _getParams.options;\n\n            var _getParams2 = getParams(ns, opt, cb),\n                callback = _getParams2.callback;\n\n            if (!callback || typeof callback === 'function') {\n              var oldCb = callback;\n\n              callback = function callback(errors, values) {\n                if (oldCb) {\n                  oldCb(errors, values);\n                } else if (errors) {\n                  reject({\n                    errors: errors,\n                    values: values\n                  });\n                } else {\n                  resolve(values);\n                }\n              };\n            }\n\n            var fieldNames = names ? _this8.fieldsStore.getValidFieldsFullName(names) : _this8.fieldsStore.getValidFieldsName();\n            var fields = fieldNames.filter(function (name) {\n              var fieldMeta = _this8.fieldsStore.getFieldMeta(name);\n\n              return hasRules(fieldMeta.validate);\n            }).map(function (name) {\n              var field = _this8.fieldsStore.getField(name);\n\n              field.value = _this8.fieldsStore.getFieldValue(name);\n              return field;\n            });\n\n            if (!fields.length) {\n              callback(null, _this8.fieldsStore.getFieldsValue(fieldNames));\n              return;\n            }\n\n            if (!('firstFields' in options)) {\n              options.firstFields = fieldNames.filter(function (name) {\n                var fieldMeta = _this8.fieldsStore.getFieldMeta(name);\n\n                return !!fieldMeta.validateFirst;\n              });\n            }\n\n            _this8.validateFieldsInternal(fields, {\n              fieldNames: fieldNames,\n              options: options\n            }, callback);\n          });\n          pending['catch'](function (e) {\n            if (console.error && process.env.NODE_ENV !== 'production') {\n              console.error(e);\n            }\n\n            return e;\n          });\n          return pending;\n        },\n        isSubmitting: function isSubmitting() {\n          if (process.env.NODE_ENV !== 'production' && process.env.NODE_ENV !== 'test') {\n            warning(false, '`isSubmitting` is deprecated. ' + \"Actually, it's more convenient to handle submitting status by yourself.\");\n          }\n\n          return this.submitting;\n        },\n        submit: function submit(callback) {\n          var _this9 = this;\n\n          if (process.env.NODE_ENV !== 'production' && process.env.NODE_ENV !== 'test') {\n            warning(false, '`submit` is deprecated. ' + \"Actually, it's more convenient to handle submitting status by yourself.\");\n          }\n\n          var fn = function fn() {\n            _this9.setState({\n              submitting: false\n            });\n          };\n\n          this.setState({\n            submitting: true\n          });\n          callback(fn);\n        }\n      },\n      render: function render() {\n        var h = arguments[0];\n        var $slots = this.$slots,\n            $scopedSlots = this.$scopedSlots;\n\n        var formProps = _defineProperty({}, formPropName, this.getForm());\n\n        var _getOptionProps = getOptionProps(this),\n            wrappedComponentRef = _getOptionProps.wrappedComponentRef,\n            restProps = _objectWithoutProperties(_getOptionProps, ['wrappedComponentRef']);\n\n        var wrappedComponentProps = {\n          props: mapProps.call(this, _extends({}, formProps, restProps)),\n          on: getListeners(this),\n          ref: 'WrappedComponent',\n          directives: [{\n            name: 'ant-ref',\n            value: wrappedComponentRef\n          }]\n        };\n\n        if (Object.keys($scopedSlots).length) {\n          wrappedComponentProps.scopedSlots = $scopedSlots;\n        }\n\n        var slotsKey = Object.keys($slots);\n        return WrappedComponent ? h(WrappedComponent, wrappedComponentProps, [slotsKey.length ? slotsKey.map(function (name) {\n          return h('template', {\n            slot: name\n          }, [$slots[name]]);\n        }) : null]) : null;\n      }\n    };\n    if (!WrappedComponent) return Form;\n\n    if (Array.isArray(WrappedComponent.props)) {\n      var newProps = {};\n      WrappedComponent.props.forEach(function (prop) {\n        newProps[prop] = PropTypes.any;\n      });\n      newProps[formPropName] = Object;\n      WrappedComponent.props = newProps;\n    } else {\n      WrappedComponent.props = WrappedComponent.props || {};\n\n      if (!(formPropName in WrappedComponent.props)) {\n        WrappedComponent.props[formPropName] = Object;\n      }\n    }\n\n    return argumentContainer(Form, WrappedComponent);\n  };\n}\n\nexport default createBaseForm;","map":{"version":3,"sources":["/Users/liulu/刘璐/vue3/hello-vue3/node_modules/ant-design-vue/es/vc-form/src/createBaseForm.js"],"names":["_typeof","_objectWithoutProperties","_defineProperty","_extends","_toConsumableArray","AsyncValidator","warning","get","set","eq","omit","createFieldsStore","cloneElement","BaseMixin","getOptionProps","getEvents","slotHasProp","getComponentName","getListeners","PropTypes","argumentContainer","identity","normalizeValidateRules","getValidateTriggers","getValueFromEvent","hasRules","getParams","isEmptyObject","flattenArray","DEFAULT_TRIGGER","createBaseForm","option","arguments","length","undefined","mixins","validateMessages","onFieldsChange","onValuesChange","_option$mapProps","mapProps","mapPropsToFields","fieldNameProp","fieldMetaProp","fieldDataProp","_option$formPropName","formPropName","formName","name","_option$props","props","templateContext","decorate","WrappedComponent","formProps","Array","isArray","forEach","prop","any","Form","concat","wrappedComponentRef","func","def","data","_this","fields","$props","fieldsStore","instances","cachedBind","clearedFieldMetaCache","formItems","renderFields","domFields","key","_fieldsStore","apply","submitting","watch","handler","nextProps","updateFields","deep","mounted","cleanUpUselessFields","updated","methods","$forceUpdate","onCollectCommon","action","args","fieldMeta","getFieldMeta","originalProps","_fieldMeta$originalPr","value","getFieldValue","valuesAll","getAllValues","valuesAllSet","Object","keys","getForm","field","getField","touched","onCollect","name_","_len","_key","_onCollectCommon","validate","setFieldsAsDirty","newField","dirty","setFields","onCollectValidate","_len2","_key2","_onCollectCommon2","validateFieldsInternal","options","firstFields","validateFirst","getCacheBind","fn","cache","oriFn","bind","getFieldDecorator","fieldOption","formItem","_this2","_getFieldProps","getFieldProps","restProps","fieldElem","originalEvents","process","env","NODE_ENV","valuePropName","componentOptions","defaultValuePropName","toUpperCase","slice","newProps","getFieldValuePropValue","domProps","newEvents","on","triggerEvents","_this3","usersFieldOption","Error","isValidNestedFieldName","trigger","rules","_fieldOption$validate","validateTrigger","initialValue","inputProps","inputListeners","inputAttrs","validateRules","validateTriggers","indexOf","meta","setFieldMeta","attrs","id","directives","saveRef","getFieldInstance","getRules","actionRules","filter","item","map","maybeNestedFields","callback","_this4","flattenRegisteredFields","changedFields","reduce","acc","_changedFields","getNestedAllFields","formContext","allUpdate","itemSelfUpdate","$nextTick","setFieldsValue","changedValues","fieldsMeta","values","newFields","isRegistered","allValues","_","component","preserve","clearField","recoverClearedField","_this5","fieldList","getAllFieldsName","removedList","resetFields","ns","_this6","names","_ref","_this7","fieldNames","_ref$options","allRules","allFields","alreadyErrors","force","errors","validating","f","getFieldsValue","validator","messages","errorsGroup","e","errorFieldName","fieldName","some","ruleFieldName","every","_ref2","type","restPath","test","fieldErrors","push","expired","nowAllFields","nowField","_ref3","message","validateFields","opt","cb","_this8","pending","Promise","resolve","reject","_getParams","_getParams2","oldCb","getValidFieldsFullName","getValidFieldsName","console","error","isSubmitting","submit","_this9","setState","render","h","$slots","$scopedSlots","_getOptionProps","wrappedComponentProps","call","ref","scopedSlots","slotsKey","slot"],"mappings":"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","sourcesContent":["import _typeof from 'babel-runtime/helpers/typeof';\nimport _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _extends from 'babel-runtime/helpers/extends';\nimport _toConsumableArray from 'babel-runtime/helpers/toConsumableArray';\nimport AsyncValidator from 'async-validator';\nimport warning from 'warning';\nimport get from 'lodash/get';\nimport set from 'lodash/set';\nimport eq from 'lodash/eq';\nimport omit from 'lodash/omit';\nimport createFieldsStore from './createFieldsStore';\nimport { cloneElement } from '../../_util/vnode';\nimport BaseMixin from '../../_util/BaseMixin';\nimport { getOptionProps, getEvents, slotHasProp, getComponentName, getListeners } from '../../_util/props-util';\nimport PropTypes from '../../_util/vue-types';\n\nimport { argumentContainer, identity, normalizeValidateRules, getValidateTriggers, getValueFromEvent, hasRules, getParams, isEmptyObject, flattenArray } from './utils';\n\nvar DEFAULT_TRIGGER = 'change';\n\nfunction createBaseForm() {\n  var option = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var mixins = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var validateMessages = option.validateMessages,\n      onFieldsChange = option.onFieldsChange,\n      onValuesChange = option.onValuesChange,\n      _option$mapProps = option.mapProps,\n      mapProps = _option$mapProps === undefined ? identity : _option$mapProps,\n      mapPropsToFields = option.mapPropsToFields,\n      fieldNameProp = option.fieldNameProp,\n      fieldMetaProp = option.fieldMetaProp,\n      fieldDataProp = option.fieldDataProp,\n      _option$formPropName = option.formPropName,\n      formPropName = _option$formPropName === undefined ? 'form' : _option$formPropName,\n      formName = option.name,\n      _option$props = option.props,\n      props = _option$props === undefined ? {} : _option$props,\n      templateContext = option.templateContext;\n\n  return function decorate(WrappedComponent) {\n    var formProps = {};\n    if (Array.isArray(props)) {\n      props.forEach(function (prop) {\n        formProps[prop] = PropTypes.any;\n      });\n    } else {\n      formProps = props;\n    }\n    var Form = {\n      mixins: [BaseMixin].concat(_toConsumableArray(mixins)),\n      props: _extends({}, formProps, {\n        wrappedComponentRef: PropTypes.func.def(function () {})\n      }),\n      data: function data() {\n        var _this = this;\n\n        var fields = mapPropsToFields && mapPropsToFields(this.$props);\n        this.fieldsStore = createFieldsStore(fields || {});\n        this.templateContext = templateContext;\n        this.instances = {};\n        this.cachedBind = {};\n        this.clearedFieldMetaCache = {};\n        this.formItems = {};\n        this.renderFields = {};\n        this.domFields = {};\n\n        // HACK: https://github.com/ant-design/ant-design/issues/6406\n        ['getFieldsValue', 'getFieldValue', 'setFieldsInitialValue', 'getFieldsError', 'getFieldError', 'isFieldValidating', 'isFieldsValidating', 'isFieldsTouched', 'isFieldTouched'].forEach(function (key) {\n          _this[key] = function () {\n            var _fieldsStore;\n\n            return (_fieldsStore = _this.fieldsStore)[key].apply(_fieldsStore, arguments);\n          };\n        });\n\n        return {\n          submitting: false\n        };\n      },\n\n      watch: templateContext ? {} : {\n        $props: {\n          handler: function handler(nextProps) {\n            if (mapPropsToFields) {\n              this.fieldsStore.updateFields(mapPropsToFields(nextProps));\n            }\n          },\n\n          deep: true\n        }\n      },\n      mounted: function mounted() {\n        this.cleanUpUselessFields();\n      },\n      updated: function updated() {\n        // form updated add for template v-decorator\n        this.cleanUpUselessFields();\n      },\n\n      methods: {\n        updateFields: function updateFields() {\n          var fields = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n          this.fieldsStore.updateFields(mapPropsToFields(fields));\n          if (templateContext) {\n            templateContext.$forceUpdate();\n          }\n        },\n        onCollectCommon: function onCollectCommon(name, action, args) {\n          var fieldMeta = this.fieldsStore.getFieldMeta(name);\n          if (fieldMeta[action]) {\n            fieldMeta[action].apply(fieldMeta, _toConsumableArray(args));\n          } else if (fieldMeta.originalProps && fieldMeta.originalProps[action]) {\n            var _fieldMeta$originalPr;\n\n            (_fieldMeta$originalPr = fieldMeta.originalProps)[action].apply(_fieldMeta$originalPr, _toConsumableArray(args));\n          }\n          var value = fieldMeta.getValueFromEvent ? fieldMeta.getValueFromEvent.apply(fieldMeta, _toConsumableArray(args)) : getValueFromEvent.apply(undefined, _toConsumableArray(args));\n          if (onValuesChange && value !== this.fieldsStore.getFieldValue(name)) {\n            var valuesAll = this.fieldsStore.getAllValues();\n            var valuesAllSet = {};\n            valuesAll[name] = value;\n            Object.keys(valuesAll).forEach(function (key) {\n              return set(valuesAllSet, key, valuesAll[key]);\n            });\n            onValuesChange(_extends(_defineProperty({}, formPropName, this.getForm()), this.$props), set({}, name, value), valuesAllSet);\n          }\n          var field = this.fieldsStore.getField(name);\n          return { name: name, field: _extends({}, field, { value: value, touched: true }), fieldMeta: fieldMeta };\n        },\n        onCollect: function onCollect(name_, action) {\n          for (var _len = arguments.length, args = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n            args[_key - 2] = arguments[_key];\n          }\n\n          var _onCollectCommon = this.onCollectCommon(name_, action, args),\n              name = _onCollectCommon.name,\n              field = _onCollectCommon.field,\n              fieldMeta = _onCollectCommon.fieldMeta;\n\n          var validate = fieldMeta.validate;\n\n          this.fieldsStore.setFieldsAsDirty();\n          var newField = _extends({}, field, {\n            dirty: hasRules(validate)\n          });\n          this.setFields(_defineProperty({}, name, newField));\n        },\n        onCollectValidate: function onCollectValidate(name_, action) {\n          for (var _len2 = arguments.length, args = Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n            args[_key2 - 2] = arguments[_key2];\n          }\n\n          var _onCollectCommon2 = this.onCollectCommon(name_, action, args),\n              field = _onCollectCommon2.field,\n              fieldMeta = _onCollectCommon2.fieldMeta;\n\n          var newField = _extends({}, field, {\n            dirty: true\n          });\n          this.fieldsStore.setFieldsAsDirty();\n          this.validateFieldsInternal([newField], {\n            action: action,\n            options: {\n              firstFields: !!fieldMeta.validateFirst\n            }\n          });\n        },\n        getCacheBind: function getCacheBind(name, action, fn) {\n          if (!this.cachedBind[name]) {\n            this.cachedBind[name] = {};\n          }\n          var cache = this.cachedBind[name];\n          if (!cache[action] || cache[action].oriFn !== fn) {\n            cache[action] = {\n              fn: fn.bind(this, name, action),\n              oriFn: fn\n            };\n          }\n          return cache[action].fn;\n        },\n        getFieldDecorator: function getFieldDecorator(name, fieldOption, formItem) {\n          var _this2 = this;\n\n          var _getFieldProps = this.getFieldProps(name, fieldOption),\n              props = _getFieldProps.props,\n              restProps = _objectWithoutProperties(_getFieldProps, ['props']);\n\n          this.formItems[name] = formItem;\n          return function (fieldElem) {\n            // We should put field in record if it is rendered\n            _this2.renderFields[name] = true;\n\n            var fieldMeta = _this2.fieldsStore.getFieldMeta(name);\n            var originalProps = getOptionProps(fieldElem);\n            var originalEvents = getEvents(fieldElem);\n            if (process.env.NODE_ENV !== 'production') {\n              var valuePropName = fieldMeta.valuePropName;\n              warning(!slotHasProp(fieldElem, valuePropName), '`getFieldDecorator` will override `' + valuePropName + '`, ' + ('so please don\\'t set `' + valuePropName + ' and v-model` directly ') + 'and use `setFieldsValue` to set it.');\n              warning(!(!slotHasProp(fieldElem, valuePropName) && valuePropName in originalProps && !(fieldOption && 'initialValue' in fieldOption)), getComponentName(fieldElem.componentOptions) + ' `default value` can not collect, ' + ' please use `option.initialValue` to set default value.');\n              var defaultValuePropName = 'default' + valuePropName[0].toUpperCase() + valuePropName.slice(1);\n              warning(!slotHasProp(fieldElem, defaultValuePropName), '`' + defaultValuePropName + '` is invalid ' + ('for `getFieldDecorator` will set `' + valuePropName + '`,') + ' please use `option.initialValue` instead.');\n            }\n            fieldMeta.originalProps = originalProps;\n            // fieldMeta.ref = fieldElem.data && fieldElem.data.ref\n            var newProps = _extends({\n              props: _extends({}, props, _this2.fieldsStore.getFieldValuePropValue(fieldMeta))\n            }, restProps);\n            newProps.domProps.value = newProps.props.value;\n            var newEvents = {};\n            Object.keys(newProps.on).forEach(function (key) {\n              if (originalEvents[key]) {\n                var triggerEvents = newProps.on[key];\n                newEvents[key] = function () {\n                  originalEvents[key].apply(originalEvents, arguments);\n                  triggerEvents.apply(undefined, arguments);\n                };\n              } else {\n                newEvents[key] = newProps.on[key];\n              }\n            });\n            return cloneElement(fieldElem, _extends({}, newProps, { on: newEvents }));\n          };\n        },\n        getFieldProps: function getFieldProps(name) {\n          var _this3 = this;\n\n          var usersFieldOption = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n          if (!name) {\n            throw new Error('Must call `getFieldProps` with valid name string!');\n          }\n          if (process.env.NODE_ENV !== 'production') {\n            warning(this.fieldsStore.isValidNestedFieldName(name), 'One field name cannot be part of another, e.g. `a` and `a.b`. Check field: ' + name);\n            warning(!('exclusive' in usersFieldOption), '`option.exclusive` of `getFieldProps`|`getFieldDecorator` had been remove.');\n          }\n\n          delete this.clearedFieldMetaCache[name];\n\n          var fieldOption = _extends({\n            name: name,\n            trigger: DEFAULT_TRIGGER,\n            valuePropName: 'value',\n            validate: []\n          }, usersFieldOption);\n\n          var rules = fieldOption.rules,\n              trigger = fieldOption.trigger,\n              _fieldOption$validate = fieldOption.validateTrigger,\n              validateTrigger = _fieldOption$validate === undefined ? trigger : _fieldOption$validate,\n              validate = fieldOption.validate;\n\n\n          var fieldMeta = this.fieldsStore.getFieldMeta(name);\n          if ('initialValue' in fieldOption) {\n            fieldMeta.initialValue = fieldOption.initialValue;\n          }\n\n          var inputProps = _extends({}, this.fieldsStore.getFieldValuePropValue(fieldOption));\n          var inputListeners = {};\n          var inputAttrs = {};\n          if (fieldNameProp) {\n            inputProps[fieldNameProp] = formName ? formName + '_' + name : name;\n          }\n\n          var validateRules = normalizeValidateRules(validate, rules, validateTrigger);\n          var validateTriggers = getValidateTriggers(validateRules);\n          validateTriggers.forEach(function (action) {\n            if (inputListeners[action]) return;\n            inputListeners[action] = _this3.getCacheBind(name, action, _this3.onCollectValidate);\n          });\n\n          // make sure that the value will be collect\n          if (trigger && validateTriggers.indexOf(trigger) === -1) {\n            inputListeners[trigger] = this.getCacheBind(name, trigger, this.onCollect);\n          }\n\n          var meta = _extends({}, fieldMeta, fieldOption, {\n            validate: validateRules\n          });\n          this.fieldsStore.setFieldMeta(name, meta);\n          if (fieldMetaProp) {\n            inputAttrs[fieldMetaProp] = meta;\n          }\n\n          if (fieldDataProp) {\n            inputAttrs[fieldDataProp] = this.fieldsStore.getField(name);\n          }\n          // This field is rendered, record it\n          this.renderFields[name] = true;\n          return {\n            props: omit(inputProps, ['id']),\n            // id: inputProps.id,\n            domProps: {\n              value: inputProps.value\n            },\n            attrs: _extends({}, inputAttrs, {\n              id: inputProps.id\n            }),\n            directives: [{\n              name: 'ant-ref',\n              value: this.getCacheBind(name, name + '__ref', this.saveRef)\n            }],\n            on: inputListeners\n          };\n        },\n        getFieldInstance: function getFieldInstance(name) {\n          return this.instances[name];\n        },\n        getRules: function getRules(fieldMeta, action) {\n          var actionRules = fieldMeta.validate.filter(function (item) {\n            return !action || item.trigger.indexOf(action) >= 0;\n          }).map(function (item) {\n            return item.rules;\n          });\n          return flattenArray(actionRules);\n        },\n        setFields: function setFields(maybeNestedFields, callback) {\n          var _this4 = this;\n\n          var fields = this.fieldsStore.flattenRegisteredFields(maybeNestedFields);\n          this.fieldsStore.setFields(fields);\n          var changedFields = Object.keys(fields).reduce(function (acc, name) {\n            return set(acc, name, _this4.fieldsStore.getField(name));\n          }, {});\n          if (onFieldsChange) {\n            var _changedFields = Object.keys(fields).reduce(function (acc, name) {\n              return set(acc, name, _this4.fieldsStore.getField(name));\n            }, {});\n            onFieldsChange(this, _changedFields, this.fieldsStore.getNestedAllFields());\n          }\n          var formContext = templateContext || this;\n          var allUpdate = false;\n          Object.keys(changedFields).forEach(function (key) {\n            var formItem = _this4.formItems[key];\n            formItem = typeof formItem === 'function' ? formItem() : formItem;\n            if (formItem && formItem.itemSelfUpdate) {\n              formItem.$forceUpdate();\n            } else {\n              allUpdate = true;\n            }\n          });\n          if (allUpdate) {\n            formContext.$forceUpdate();\n          }\n          this.$nextTick(function () {\n            callback && callback();\n          });\n        },\n        setFieldsValue: function setFieldsValue(changedValues, callback) {\n          var fieldsMeta = this.fieldsStore.fieldsMeta;\n\n          var values = this.fieldsStore.flattenRegisteredFields(changedValues);\n          var newFields = Object.keys(values).reduce(function (acc, name) {\n            var isRegistered = fieldsMeta[name];\n            if (process.env.NODE_ENV !== 'production') {\n              warning(isRegistered, 'Cannot use `setFieldsValue` until ' + 'you use `getFieldDecorator` or `getFieldProps` to register it.');\n            }\n            if (isRegistered) {\n              var value = values[name];\n              acc[name] = {\n                value: value\n              };\n            }\n            return acc;\n          }, {});\n          this.setFields(newFields, callback);\n          if (onValuesChange) {\n            var allValues = this.fieldsStore.getAllValues();\n            onValuesChange(_extends(_defineProperty({}, formPropName, this.getForm()), this.$props), changedValues, allValues);\n          }\n        },\n        saveRef: function saveRef(name, _, component) {\n          if (!component) {\n            var fieldMeta = this.fieldsStore.getFieldMeta(name);\n            if (!fieldMeta.preserve) {\n              // after destroy, delete data\n              this.clearedFieldMetaCache[name] = {\n                field: this.fieldsStore.getField(name),\n                meta: fieldMeta\n              };\n              this.clearField(name);\n            }\n            delete this.domFields[name];\n            return;\n          }\n          this.domFields[name] = true;\n          this.recoverClearedField(name);\n          // const fieldMeta = this.fieldsStore.getFieldMeta(name)\n          // if (fieldMeta) {\n          //   const ref = fieldMeta.ref\n          //   if (ref) {\n          //     if (typeof ref === 'string') {\n          //       throw new Error(`can not set ref string for ${name}`)\n          //     }\n          //     ref(component)\n          //   }\n          // }\n          this.instances[name] = component;\n        },\n        cleanUpUselessFields: function cleanUpUselessFields() {\n          var _this5 = this;\n\n          var fieldList = this.fieldsStore.getAllFieldsName();\n          var removedList = fieldList.filter(function (field) {\n            var fieldMeta = _this5.fieldsStore.getFieldMeta(field);\n            return !_this5.renderFields[field] && !_this5.domFields[field] && !fieldMeta.preserve;\n          });\n          if (removedList.length) {\n            removedList.forEach(this.clearField);\n          }\n          this.renderFields = {};\n        },\n        clearField: function clearField(name) {\n          this.fieldsStore.clearField(name);\n          delete this.instances[name];\n          delete this.cachedBind[name];\n        },\n        resetFields: function resetFields(ns) {\n          var _this6 = this;\n\n          var newFields = this.fieldsStore.resetFields(ns);\n          if (Object.keys(newFields).length > 0) {\n            this.setFields(newFields);\n          }\n          if (ns) {\n            var names = Array.isArray(ns) ? ns : [ns];\n            names.forEach(function (name) {\n              return delete _this6.clearedFieldMetaCache[name];\n            });\n          } else {\n            this.clearedFieldMetaCache = {};\n          }\n        },\n        recoverClearedField: function recoverClearedField(name) {\n          if (this.clearedFieldMetaCache[name]) {\n            this.fieldsStore.setFields(_defineProperty({}, name, this.clearedFieldMetaCache[name].field));\n            this.fieldsStore.setFieldMeta(name, this.clearedFieldMetaCache[name].meta);\n            delete this.clearedFieldMetaCache[name];\n          }\n        },\n        validateFieldsInternal: function validateFieldsInternal(fields, _ref, callback) {\n          var _this7 = this;\n\n          var fieldNames = _ref.fieldNames,\n              action = _ref.action,\n              _ref$options = _ref.options,\n              options = _ref$options === undefined ? {} : _ref$options;\n\n          var allRules = {};\n          var allValues = {};\n          var allFields = {};\n          var alreadyErrors = {};\n          fields.forEach(function (field) {\n            var name = field.name;\n            if (options.force !== true && field.dirty === false) {\n              if (field.errors) {\n                set(alreadyErrors, name, { errors: field.errors });\n              }\n              return;\n            }\n            var fieldMeta = _this7.fieldsStore.getFieldMeta(name);\n            var newField = _extends({}, field);\n            newField.errors = undefined;\n            newField.validating = true;\n            newField.dirty = true;\n            allRules[name] = _this7.getRules(fieldMeta, action);\n            allValues[name] = newField.value;\n            allFields[name] = newField;\n          });\n          this.setFields(allFields);\n          // in case normalize\n          Object.keys(allValues).forEach(function (f) {\n            allValues[f] = _this7.fieldsStore.getFieldValue(f);\n          });\n          if (callback && isEmptyObject(allFields)) {\n            callback(isEmptyObject(alreadyErrors) ? null : alreadyErrors, this.fieldsStore.getFieldsValue(fieldNames));\n            return;\n          }\n          var validator = new AsyncValidator(allRules);\n          if (validateMessages) {\n            validator.messages(validateMessages);\n          }\n          validator.validate(allValues, options, function (errors) {\n            var errorsGroup = _extends({}, alreadyErrors);\n            if (errors && errors.length) {\n              errors.forEach(function (e) {\n                var errorFieldName = e.field;\n                var fieldName = errorFieldName;\n\n                // Handle using array validation rule.\n                // ref: https://github.com/ant-design/ant-design/issues/14275\n                Object.keys(allRules).some(function (ruleFieldName) {\n                  var rules = allRules[ruleFieldName] || [];\n\n                  // Exist if match rule\n                  if (ruleFieldName === errorFieldName) {\n                    fieldName = ruleFieldName;\n                    return true;\n                  }\n\n                  // Skip if not match array type\n                  if (rules.every(function (_ref2) {\n                    var type = _ref2.type;\n                    return type !== 'array';\n                  }) && errorFieldName.indexOf(ruleFieldName) !== 0) {\n                    return false;\n                  }\n\n                  // Exist if match the field name\n                  var restPath = errorFieldName.slice(ruleFieldName.length + 1);\n                  if (/^\\d+$/.test(restPath)) {\n                    fieldName = ruleFieldName;\n                    return true;\n                  }\n\n                  return false;\n                });\n\n                var field = get(errorsGroup, fieldName);\n                if ((typeof field === 'undefined' ? 'undefined' : _typeof(field)) !== 'object' || Array.isArray(field)) {\n                  set(errorsGroup, fieldName, { errors: [] });\n                }\n                var fieldErrors = get(errorsGroup, fieldName.concat('.errors'));\n                fieldErrors.push(e);\n              });\n            }\n            var expired = [];\n            var nowAllFields = {};\n            Object.keys(allRules).forEach(function (name) {\n              var fieldErrors = get(errorsGroup, name);\n              var nowField = _this7.fieldsStore.getField(name);\n              // avoid concurrency problems\n              if (!eq(nowField.value, allValues[name])) {\n                expired.push({\n                  name: name\n                });\n              } else {\n                nowField.errors = fieldErrors && fieldErrors.errors;\n                nowField.value = allValues[name];\n                nowField.validating = false;\n                nowField.dirty = false;\n                nowAllFields[name] = nowField;\n              }\n            });\n            _this7.setFields(nowAllFields);\n            if (callback) {\n              if (expired.length) {\n                expired.forEach(function (_ref3) {\n                  var name = _ref3.name;\n\n                  var fieldErrors = [{\n                    message: name + ' need to revalidate',\n                    field: name\n                  }];\n                  set(errorsGroup, name, {\n                    expired: true,\n                    errors: fieldErrors\n                  });\n                });\n              }\n\n              callback(isEmptyObject(errorsGroup) ? null : errorsGroup, _this7.fieldsStore.getFieldsValue(fieldNames));\n            }\n          });\n        },\n        validateFields: function validateFields(ns, opt, cb) {\n          var _this8 = this;\n\n          var pending = new Promise(function (resolve, reject) {\n            var _getParams = getParams(ns, opt, cb),\n                names = _getParams.names,\n                options = _getParams.options;\n\n            var _getParams2 = getParams(ns, opt, cb),\n                callback = _getParams2.callback;\n\n            if (!callback || typeof callback === 'function') {\n              var oldCb = callback;\n              callback = function callback(errors, values) {\n                if (oldCb) {\n                  oldCb(errors, values);\n                } else if (errors) {\n                  reject({ errors: errors, values: values });\n                } else {\n                  resolve(values);\n                }\n              };\n            }\n            var fieldNames = names ? _this8.fieldsStore.getValidFieldsFullName(names) : _this8.fieldsStore.getValidFieldsName();\n            var fields = fieldNames.filter(function (name) {\n              var fieldMeta = _this8.fieldsStore.getFieldMeta(name);\n              return hasRules(fieldMeta.validate);\n            }).map(function (name) {\n              var field = _this8.fieldsStore.getField(name);\n              field.value = _this8.fieldsStore.getFieldValue(name);\n              return field;\n            });\n            if (!fields.length) {\n              callback(null, _this8.fieldsStore.getFieldsValue(fieldNames));\n              return;\n            }\n            if (!('firstFields' in options)) {\n              options.firstFields = fieldNames.filter(function (name) {\n                var fieldMeta = _this8.fieldsStore.getFieldMeta(name);\n                return !!fieldMeta.validateFirst;\n              });\n            }\n            _this8.validateFieldsInternal(fields, {\n              fieldNames: fieldNames,\n              options: options\n            }, callback);\n          });\n          pending['catch'](function (e) {\n            if (console.error && process.env.NODE_ENV !== 'production') {\n              console.error(e);\n            }\n            return e;\n          });\n          return pending;\n        },\n        isSubmitting: function isSubmitting() {\n          if (process.env.NODE_ENV !== 'production' && process.env.NODE_ENV !== 'test') {\n            warning(false, '`isSubmitting` is deprecated. ' + \"Actually, it's more convenient to handle submitting status by yourself.\");\n          }\n          return this.submitting;\n        },\n        submit: function submit(callback) {\n          var _this9 = this;\n\n          if (process.env.NODE_ENV !== 'production' && process.env.NODE_ENV !== 'test') {\n            warning(false, '`submit` is deprecated. ' + \"Actually, it's more convenient to handle submitting status by yourself.\");\n          }\n          var fn = function fn() {\n            _this9.setState({\n              submitting: false\n            });\n          };\n          this.setState({\n            submitting: true\n          });\n          callback(fn);\n        }\n      },\n\n      render: function render() {\n        var h = arguments[0];\n        var $slots = this.$slots,\n            $scopedSlots = this.$scopedSlots;\n\n        var formProps = _defineProperty({}, formPropName, this.getForm());\n\n        var _getOptionProps = getOptionProps(this),\n            wrappedComponentRef = _getOptionProps.wrappedComponentRef,\n            restProps = _objectWithoutProperties(_getOptionProps, ['wrappedComponentRef']);\n\n        var wrappedComponentProps = {\n          props: mapProps.call(this, _extends({}, formProps, restProps)),\n          on: getListeners(this),\n          ref: 'WrappedComponent',\n          directives: [{\n            name: 'ant-ref',\n            value: wrappedComponentRef\n          }]\n        };\n        if (Object.keys($scopedSlots).length) {\n          wrappedComponentProps.scopedSlots = $scopedSlots;\n        }\n        var slotsKey = Object.keys($slots);\n        return WrappedComponent ? h(\n          WrappedComponent,\n          wrappedComponentProps,\n          [slotsKey.length ? slotsKey.map(function (name) {\n            return h(\n              'template',\n              { slot: name },\n              [$slots[name]]\n            );\n          }) : null]\n        ) : null;\n      }\n    };\n    if (!WrappedComponent) return Form;\n    if (Array.isArray(WrappedComponent.props)) {\n      var newProps = {};\n      WrappedComponent.props.forEach(function (prop) {\n        newProps[prop] = PropTypes.any;\n      });\n      newProps[formPropName] = Object;\n      WrappedComponent.props = newProps;\n    } else {\n      WrappedComponent.props = WrappedComponent.props || {};\n      if (!(formPropName in WrappedComponent.props)) {\n        WrappedComponent.props[formPropName] = Object;\n      }\n    }\n    return argumentContainer(Form, WrappedComponent);\n  };\n}\n\nexport default createBaseForm;"]},"metadata":{},"sourceType":"module"}