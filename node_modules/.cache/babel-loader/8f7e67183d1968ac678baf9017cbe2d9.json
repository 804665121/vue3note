{"ast":null,"code":"import { customRef } from \"@vue/reactivity\";\nexport default {\n  setup() {\n    // 防抖函数的实现\n    function useCustomRef(value, delay = 2000) {\n      return customRef((track, trigger) => {\n        let timer;\n        return {\n          get() {\n            console.log(value, \"get\");\n            track();\n            return value;\n          },\n\n          set(newVal) {\n            console.log(newVal, \"值被修改l1111\");\n            clearTimeout(timer);\n            timer = setTimeout(() => {\n              //默认等待2s之后再执行\n              value = newVal;\n              trigger();\n            }, delay);\n          }\n\n        };\n      });\n    }\n\n    let keyword = useCustomRef(\"hello\", 1000);\n    return {\n      keyword\n    };\n  }\n\n};","map":{"version":3,"mappings":"AASA,SAASA,SAAT,QAA0B,iBAA1B;AACA,eAAe;AACbC,OAAK,GAAG;AACN;AACA,aAASC,YAAT,CAAsBC,KAAtB,EAA6BC,KAAI,GAAI,IAArC,EAA2C;AACzC,aAAOJ,SAAS,CAAC,CAACK,KAAD,EAAQC,OAAR,KAAoB;AACnC,YAAIC,KAAJ;AACA,eAAO;AACLC,aAAG,GAAG;AACJC,mBAAO,CAACC,GAAR,CAAYP,KAAZ,EAAmB,KAAnB;AACAE,iBAAK;AACL,mBAAOF,KAAP;AACD,WALI;;AAMLQ,aAAG,CAACC,MAAD,EAAS;AACVH,mBAAO,CAACC,GAAR,CAAYE,MAAZ,EAAoB,WAApB;AACAC,wBAAY,CAACN,KAAD,CAAZ;AACAA,iBAAI,GAAIO,UAAU,CAAC,MAAM;AAAG;AAC1BX,mBAAI,GAAIS,MAAR;AACAN,qBAAO;AACR,aAHiB,EAGfF,KAHe,CAAlB;AAID;;AAbI,SAAP;AAeD,OAjBe,CAAhB;AAkBF;;AACA,QAAIW,OAAM,GAAIb,YAAY,CAAC,OAAD,EAAU,IAAV,CAA1B;AACA,WAAO;AACLa;AADK,KAAP;AAGD;;AA3BY,CAAf","names":["customRef","setup","useCustomRef","value","delay","track","trigger","timer","get","console","log","set","newVal","clearTimeout","setTimeout","keyword"],"sourceRoot":"","sources":["/Users/liulu/刘璐/vue3/hello-vue3/src/components/CustomRef.vue"],"sourcesContent":["<template>\n  <h1>自定义ref</h1>\n  <div>\n    <input type=\"text\" v-model=\"keyword\" />\n    <span>{{ keyword }}</span>\n  </div>\n</template>\n\n<script>\nimport { customRef } from \"@vue/reactivity\";\nexport default {\n  setup() {\n    // 防抖函数的实现\n    function useCustomRef(value, delay = 2000) {\n      return customRef((track, trigger) => {\n        let timer;\n        return {\n          get() {\n            console.log(value, \"get\");\n            track();\n            return value;\n          },\n          set(newVal) {\n            console.log(newVal, \"值被修改l1111\");\n            clearTimeout(timer);\n            timer = setTimeout(() => {  //默认等待2s之后再执行\n              value = newVal;\n              trigger();\n            }, delay);\n          },\n        };\n      });\n    }\n    let keyword = useCustomRef(\"hello\", 1000);\n    return {\n      keyword,\n    };\n  },\n};\n</script>\n\n<style>\n</style>"]},"metadata":{},"sourceType":"module"}