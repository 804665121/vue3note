{"ast":null,"code":"import _mergeJSXProps from 'babel-helper-vue-jsx-merge-props';\nimport _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _extends from 'babel-runtime/helpers/extends';\nimport ResizeObserver from '../vc-resize-observer';\nimport omit from 'omit.js';\nimport classNames from 'classnames';\nimport calculateNodeHeight from './calculateNodeHeight';\nimport raf from '../_util/raf';\nimport warning from '../_util/warning';\nimport BaseMixin from '../_util/BaseMixin';\nimport inputProps from './inputProps';\nimport PropTypes from '../_util/vue-types';\nimport { getOptionProps, getListeners } from '../_util/props-util';\nvar RESIZE_STATUS_NONE = 0;\nvar RESIZE_STATUS_RESIZING = 1;\nvar RESIZE_STATUS_RESIZED = 2;\n\nvar TextAreaProps = _extends({}, inputProps, {\n  autosize: PropTypes.oneOfType([Object, Boolean]),\n  autoSize: PropTypes.oneOfType([Object, Boolean])\n});\n\nvar ResizableTextArea = {\n  name: 'ResizableTextArea',\n  props: TextAreaProps,\n  data: function data() {\n    return {\n      textareaStyles: {},\n      resizeStatus: RESIZE_STATUS_NONE\n    };\n  },\n  mixins: [BaseMixin],\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      _this.resizeTextarea();\n    });\n  },\n  beforeDestroy: function beforeDestroy() {\n    raf.cancel(this.nextFrameActionId);\n    raf.cancel(this.resizeFrameId);\n  },\n  watch: {\n    value: function value() {\n      var _this2 = this;\n\n      this.$nextTick(function () {\n        _this2.resizeTextarea();\n      });\n    }\n  },\n  methods: {\n    handleResize: function handleResize(size) {\n      var resizeStatus = this.$data.resizeStatus;\n      var autoSize = this.$props.autoSize;\n\n      if (resizeStatus !== RESIZE_STATUS_NONE) {\n        return;\n      }\n\n      this.$emit('resize', size);\n\n      if (autoSize) {\n        this.resizeOnNextFrame();\n      }\n    },\n    resizeOnNextFrame: function resizeOnNextFrame() {\n      raf.cancel(this.nextFrameActionId);\n      this.nextFrameActionId = raf(this.resizeTextarea);\n    },\n    resizeTextarea: function resizeTextarea() {\n      var _this3 = this;\n\n      var autoSize = this.$props.autoSize || this.$props.autosize;\n\n      if (!autoSize || !this.$refs.textArea) {\n        return;\n      }\n\n      var minRows = autoSize.minRows,\n          maxRows = autoSize.maxRows;\n      var textareaStyles = calculateNodeHeight(this.$refs.textArea, false, minRows, maxRows);\n      this.setState({\n        textareaStyles: textareaStyles,\n        resizeStatus: RESIZE_STATUS_RESIZING\n      }, function () {\n        raf.cancel(_this3.resizeFrameId);\n        _this3.resizeFrameId = raf(function () {\n          _this3.setState({\n            resizeStatus: RESIZE_STATUS_RESIZED\n          }, function () {\n            _this3.resizeFrameId = raf(function () {\n              _this3.setState({\n                resizeStatus: RESIZE_STATUS_NONE\n              });\n\n              _this3.fixFirefoxAutoScroll();\n            });\n          });\n        });\n      });\n    },\n    // https://github.com/ant-design/ant-design/issues/21870\n    fixFirefoxAutoScroll: function fixFirefoxAutoScroll() {\n      try {\n        if (document.activeElement === this.$refs.textArea) {\n          var currentStart = this.$refs.textArea.selectionStart;\n          var currentEnd = this.$refs.textArea.selectionEnd;\n          this.$refs.textArea.setSelectionRange(currentStart, currentEnd);\n        }\n      } catch (e) {// Fix error in Chrome:\n        // Failed to read the 'selectionStart' property from 'HTMLInputElement'\n        // http://stackoverflow.com/q/21177489/3040605\n      }\n    },\n    renderTextArea: function renderTextArea() {\n      var h = this.$createElement;\n      var props = getOptionProps(this);\n      var prefixCls = props.prefixCls,\n          autoSize = props.autoSize,\n          autosize = props.autosize,\n          disabled = props.disabled;\n      var _$data = this.$data,\n          textareaStyles = _$data.textareaStyles,\n          resizeStatus = _$data.resizeStatus;\n      warning(autosize === undefined, 'Input.TextArea', 'autosize is deprecated, please use autoSize instead.');\n      var otherProps = omit(props, ['prefixCls', 'autoSize', 'autosize', 'defaultValue', 'allowClear', 'type', 'lazy', 'value']);\n      var cls = classNames(prefixCls, _defineProperty({}, prefixCls + '-disabled', disabled));\n      var domProps = {}; // Fix https://github.com/ant-design/ant-design/issues/6776\n      // Make sure it could be reset when using form.getFieldDecorator\n\n      if ('value' in props) {\n        domProps.value = props.value || '';\n      }\n\n      var style = _extends({}, textareaStyles, resizeStatus === RESIZE_STATUS_RESIZING ? {\n        overflowX: 'hidden',\n        overflowY: 'hidden'\n      } : null);\n\n      var textareaProps = {\n        attrs: otherProps,\n        domProps: domProps,\n        style: style,\n        'class': cls,\n        on: omit(getListeners(this), 'pressEnter'),\n        directives: [{\n          name: 'ant-input'\n        }]\n      };\n      return h(ResizeObserver, {\n        on: {\n          'resize': this.handleResize\n        },\n        attrs: {\n          disabled: !(autoSize || autosize)\n        }\n      }, [h('textarea', _mergeJSXProps([textareaProps, {\n        ref: 'textArea'\n      }]))]);\n    }\n  },\n  render: function render() {\n    return this.renderTextArea();\n  }\n};\nexport default ResizableTextArea;","map":{"version":3,"sources":["/Users/liulu/刘璐/vue3/hello-vue3/node_modules/ant-design-vue/es/input/ResizableTextArea.js"],"names":["_mergeJSXProps","_defineProperty","_extends","ResizeObserver","omit","classNames","calculateNodeHeight","raf","warning","BaseMixin","inputProps","PropTypes","getOptionProps","getListeners","RESIZE_STATUS_NONE","RESIZE_STATUS_RESIZING","RESIZE_STATUS_RESIZED","TextAreaProps","autosize","oneOfType","Object","Boolean","autoSize","ResizableTextArea","name","props","data","textareaStyles","resizeStatus","mixins","mounted","_this","$nextTick","resizeTextarea","beforeDestroy","cancel","nextFrameActionId","resizeFrameId","watch","value","_this2","methods","handleResize","size","$data","$props","$emit","resizeOnNextFrame","_this3","$refs","textArea","minRows","maxRows","setState","fixFirefoxAutoScroll","document","activeElement","currentStart","selectionStart","currentEnd","selectionEnd","setSelectionRange","e","renderTextArea","h","$createElement","prefixCls","disabled","_$data","undefined","otherProps","cls","domProps","style","overflowX","overflowY","textareaProps","attrs","on","directives","ref","render"],"mappings":"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","sourcesContent":["import _mergeJSXProps from 'babel-helper-vue-jsx-merge-props';\nimport _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _extends from 'babel-runtime/helpers/extends';\nimport ResizeObserver from '../vc-resize-observer';\nimport omit from 'omit.js';\nimport classNames from 'classnames';\nimport calculateNodeHeight from './calculateNodeHeight';\nimport raf from '../_util/raf';\nimport warning from '../_util/warning';\nimport BaseMixin from '../_util/BaseMixin';\nimport inputProps from './inputProps';\nimport PropTypes from '../_util/vue-types';\nimport { getOptionProps, getListeners } from '../_util/props-util';\n\nvar RESIZE_STATUS_NONE = 0;\nvar RESIZE_STATUS_RESIZING = 1;\nvar RESIZE_STATUS_RESIZED = 2;\n\nvar TextAreaProps = _extends({}, inputProps, {\n  autosize: PropTypes.oneOfType([Object, Boolean]),\n  autoSize: PropTypes.oneOfType([Object, Boolean])\n});\nvar ResizableTextArea = {\n  name: 'ResizableTextArea',\n  props: TextAreaProps,\n  data: function data() {\n    return {\n      textareaStyles: {},\n      resizeStatus: RESIZE_STATUS_NONE\n    };\n  },\n\n  mixins: [BaseMixin],\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      _this.resizeTextarea();\n    });\n  },\n  beforeDestroy: function beforeDestroy() {\n    raf.cancel(this.nextFrameActionId);\n    raf.cancel(this.resizeFrameId);\n  },\n\n  watch: {\n    value: function value() {\n      var _this2 = this;\n\n      this.$nextTick(function () {\n        _this2.resizeTextarea();\n      });\n    }\n  },\n  methods: {\n    handleResize: function handleResize(size) {\n      var resizeStatus = this.$data.resizeStatus;\n      var autoSize = this.$props.autoSize;\n\n\n      if (resizeStatus !== RESIZE_STATUS_NONE) {\n        return;\n      }\n      this.$emit('resize', size);\n      if (autoSize) {\n        this.resizeOnNextFrame();\n      }\n    },\n    resizeOnNextFrame: function resizeOnNextFrame() {\n      raf.cancel(this.nextFrameActionId);\n      this.nextFrameActionId = raf(this.resizeTextarea);\n    },\n    resizeTextarea: function resizeTextarea() {\n      var _this3 = this;\n\n      var autoSize = this.$props.autoSize || this.$props.autosize;\n      if (!autoSize || !this.$refs.textArea) {\n        return;\n      }\n      var minRows = autoSize.minRows,\n          maxRows = autoSize.maxRows;\n\n      var textareaStyles = calculateNodeHeight(this.$refs.textArea, false, minRows, maxRows);\n      this.setState({ textareaStyles: textareaStyles, resizeStatus: RESIZE_STATUS_RESIZING }, function () {\n        raf.cancel(_this3.resizeFrameId);\n        _this3.resizeFrameId = raf(function () {\n          _this3.setState({ resizeStatus: RESIZE_STATUS_RESIZED }, function () {\n            _this3.resizeFrameId = raf(function () {\n              _this3.setState({ resizeStatus: RESIZE_STATUS_NONE });\n              _this3.fixFirefoxAutoScroll();\n            });\n          });\n        });\n      });\n    },\n\n    // https://github.com/ant-design/ant-design/issues/21870\n    fixFirefoxAutoScroll: function fixFirefoxAutoScroll() {\n      try {\n        if (document.activeElement === this.$refs.textArea) {\n          var currentStart = this.$refs.textArea.selectionStart;\n          var currentEnd = this.$refs.textArea.selectionEnd;\n          this.$refs.textArea.setSelectionRange(currentStart, currentEnd);\n        }\n      } catch (e) {\n        // Fix error in Chrome:\n        // Failed to read the 'selectionStart' property from 'HTMLInputElement'\n        // http://stackoverflow.com/q/21177489/3040605\n      }\n    },\n    renderTextArea: function renderTextArea() {\n      var h = this.$createElement;\n\n      var props = getOptionProps(this);\n      var prefixCls = props.prefixCls,\n          autoSize = props.autoSize,\n          autosize = props.autosize,\n          disabled = props.disabled;\n      var _$data = this.$data,\n          textareaStyles = _$data.textareaStyles,\n          resizeStatus = _$data.resizeStatus;\n\n      warning(autosize === undefined, 'Input.TextArea', 'autosize is deprecated, please use autoSize instead.');\n      var otherProps = omit(props, ['prefixCls', 'autoSize', 'autosize', 'defaultValue', 'allowClear', 'type', 'lazy', 'value']);\n      var cls = classNames(prefixCls, _defineProperty({}, prefixCls + '-disabled', disabled));\n      var domProps = {};\n      // Fix https://github.com/ant-design/ant-design/issues/6776\n      // Make sure it could be reset when using form.getFieldDecorator\n      if ('value' in props) {\n        domProps.value = props.value || '';\n      }\n      var style = _extends({}, textareaStyles, resizeStatus === RESIZE_STATUS_RESIZING ? { overflowX: 'hidden', overflowY: 'hidden' } : null);\n      var textareaProps = {\n        attrs: otherProps,\n        domProps: domProps,\n        style: style,\n        'class': cls,\n        on: omit(getListeners(this), 'pressEnter'),\n        directives: [{\n          name: 'ant-input'\n        }]\n      };\n      return h(\n        ResizeObserver,\n        {\n          on: {\n            'resize': this.handleResize\n          },\n          attrs: { disabled: !(autoSize || autosize) }\n        },\n        [h('textarea', _mergeJSXProps([textareaProps, { ref: 'textArea' }]))]\n      );\n    }\n  },\n\n  render: function render() {\n    return this.renderTextArea();\n  }\n};\n\nexport default ResizableTextArea;"]},"metadata":{},"sourceType":"module"}