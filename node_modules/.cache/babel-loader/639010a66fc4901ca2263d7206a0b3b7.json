{"ast":null,"code":"import _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _toConsumableArray from 'babel-runtime/helpers/toConsumableArray';\nimport _extends from 'babel-runtime/helpers/extends';\nimport PropTypes from '../../_util/vue-types';\nimport classNames from 'classnames';\nimport warning from 'warning';\nimport { hasProp, initDefaultProps, getOptionProps, getSlots } from '../../_util/props-util';\nimport { cloneElement } from '../../_util/vnode';\nimport BaseMixin from '../../_util/BaseMixin';\nimport proxyComponent from '../../_util/proxyComponent';\nimport { convertTreeToEntities, convertDataToTree, getPosition, getDragNodesKeys, parseCheckedKeys, conductExpandParent, calcSelectedKeys, calcDropPosition, arrAdd, arrDel, posToArr, mapChildren, conductCheck, warnOnlyTreeNode } from './util';\n/**\n * Thought we still use `cloneElement` to pass `key`,\n * other props can pass with context for future refactor.\n */\n\nfunction getWatch() {\n  var keys = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var watch = {};\n  keys.forEach(function (k) {\n    watch[k] = function () {\n      this.needSyncKeys[k] = true;\n    };\n  });\n  return watch;\n}\n\nvar Tree = {\n  name: 'Tree',\n  mixins: [BaseMixin],\n  props: initDefaultProps({\n    prefixCls: PropTypes.string,\n    tabIndex: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    children: PropTypes.any,\n    treeData: PropTypes.array,\n    // Generate treeNode by children\n    showLine: PropTypes.bool,\n    showIcon: PropTypes.bool,\n    icon: PropTypes.oneOfType([PropTypes.object, PropTypes.func]),\n    focusable: PropTypes.bool,\n    selectable: PropTypes.bool,\n    disabled: PropTypes.bool,\n    multiple: PropTypes.bool,\n    checkable: PropTypes.oneOfType([PropTypes.object, PropTypes.bool]),\n    checkStrictly: PropTypes.bool,\n    draggable: PropTypes.bool,\n    defaultExpandParent: PropTypes.bool,\n    autoExpandParent: PropTypes.bool,\n    defaultExpandAll: PropTypes.bool,\n    defaultExpandedKeys: PropTypes.array,\n    expandedKeys: PropTypes.array,\n    defaultCheckedKeys: PropTypes.array,\n    checkedKeys: PropTypes.oneOfType([PropTypes.array, PropTypes.object]),\n    defaultSelectedKeys: PropTypes.array,\n    selectedKeys: PropTypes.array,\n    // onClick: PropTypes.func,\n    // onDoubleClick: PropTypes.func,\n    // onExpand: PropTypes.func,\n    // onCheck: PropTypes.func,\n    // onSelect: PropTypes.func,\n    loadData: PropTypes.func,\n    loadedKeys: PropTypes.array,\n    // onMouseEnter: PropTypes.func,\n    // onMouseLeave: PropTypes.func,\n    // onRightClick: PropTypes.func,\n    // onDragStart: PropTypes.func,\n    // onDragEnter: PropTypes.func,\n    // onDragOver: PropTypes.func,\n    // onDragLeave: PropTypes.func,\n    // onDragEnd: PropTypes.func,\n    // onDrop: PropTypes.func,\n    filterTreeNode: PropTypes.func,\n    openTransitionName: PropTypes.string,\n    openAnimation: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n    switcherIcon: PropTypes.any,\n    _propsSymbol: PropTypes.any\n  }, {\n    prefixCls: 'rc-tree',\n    showLine: false,\n    showIcon: true,\n    selectable: true,\n    multiple: false,\n    checkable: false,\n    disabled: false,\n    checkStrictly: false,\n    draggable: false,\n    defaultExpandParent: true,\n    autoExpandParent: false,\n    defaultExpandAll: false,\n    defaultExpandedKeys: [],\n    defaultCheckedKeys: [],\n    defaultSelectedKeys: []\n  }),\n  data: function data() {\n    warning(this.$props.__propsSymbol__, 'must pass __propsSymbol__');\n    warning(this.$props.children, 'please use children prop replace slots.default');\n    this.needSyncKeys = {};\n    this.domTreeNodes = {};\n    var state = {\n      _posEntities: new Map(),\n      _keyEntities: new Map(),\n      _expandedKeys: [],\n      _selectedKeys: [],\n      _checkedKeys: [],\n      _halfCheckedKeys: [],\n      _loadedKeys: [],\n      _loadingKeys: [],\n      _treeNode: [],\n      _prevProps: null,\n      _dragOverNodeKey: '',\n      _dropPosition: null,\n      _dragNodesKeys: []\n    };\n    return _extends({}, state, this.getDerivedState(getOptionProps(this), state));\n  },\n  provide: function provide() {\n    return {\n      vcTree: this\n    };\n  },\n  watch: _extends({}, getWatch(['treeData', 'children', 'expandedKeys', 'autoExpandParent', 'selectedKeys', 'checkedKeys', 'loadedKeys']), {\n    __propsSymbol__: function __propsSymbol__() {\n      this.setState(this.getDerivedState(getOptionProps(this), this.$data));\n      this.needSyncKeys = {};\n    }\n  }),\n  methods: {\n    getDerivedState: function getDerivedState(props, prevState) {\n      var _prevProps = prevState._prevProps;\n      var newState = {\n        _prevProps: _extends({}, props)\n      };\n      var self = this;\n\n      function needSync(name) {\n        return !_prevProps && name in props || _prevProps && self.needSyncKeys[name];\n      } // ================== Tree Node ==================\n\n\n      var treeNode = null; // Check if `treeData` or `children` changed and save into the state.\n\n      if (needSync('treeData')) {\n        treeNode = convertDataToTree(this.$createElement, props.treeData);\n      } else if (needSync('children')) {\n        treeNode = props.children;\n      } // Tree support filter function which will break the tree structure in the vdm.\n      // We cache the treeNodes in state so that we can return the treeNode in event trigger.\n\n\n      if (treeNode) {\n        newState._treeNode = treeNode; // Calculate the entities data for quick match\n\n        var entitiesMap = convertTreeToEntities(treeNode);\n        newState._keyEntities = entitiesMap.keyEntities;\n      }\n\n      var keyEntities = newState._keyEntities || prevState._keyEntities; // ================ expandedKeys =================\n\n      if (needSync('expandedKeys') || _prevProps && needSync('autoExpandParent')) {\n        newState._expandedKeys = props.autoExpandParent || !_prevProps && props.defaultExpandParent ? conductExpandParent(props.expandedKeys, keyEntities) : props.expandedKeys;\n      } else if (!_prevProps && props.defaultExpandAll) {\n        newState._expandedKeys = [].concat(_toConsumableArray(keyEntities.keys()));\n      } else if (!_prevProps && props.defaultExpandedKeys) {\n        newState._expandedKeys = props.autoExpandParent || props.defaultExpandParent ? conductExpandParent(props.defaultExpandedKeys, keyEntities) : props.defaultExpandedKeys;\n      } // ================ selectedKeys =================\n\n\n      if (props.selectable) {\n        if (needSync('selectedKeys')) {\n          newState._selectedKeys = calcSelectedKeys(props.selectedKeys, props);\n        } else if (!_prevProps && props.defaultSelectedKeys) {\n          newState._selectedKeys = calcSelectedKeys(props.defaultSelectedKeys, props);\n        }\n      } // ================= checkedKeys =================\n\n\n      if (props.checkable) {\n        var checkedKeyEntity = void 0;\n\n        if (needSync('checkedKeys')) {\n          checkedKeyEntity = parseCheckedKeys(props.checkedKeys) || {};\n        } else if (!_prevProps && props.defaultCheckedKeys) {\n          checkedKeyEntity = parseCheckedKeys(props.defaultCheckedKeys) || {};\n        } else if (treeNode) {\n          // If treeNode changed, we also need check it\n          checkedKeyEntity = parseCheckedKeys(props.checkedKeys) || {\n            checkedKeys: prevState._checkedKeys,\n            halfCheckedKeys: prevState._halfCheckedKeys\n          };\n        }\n\n        if (checkedKeyEntity) {\n          var _checkedKeyEntity = checkedKeyEntity,\n              _checkedKeyEntity$che = _checkedKeyEntity.checkedKeys,\n              checkedKeys = _checkedKeyEntity$che === undefined ? [] : _checkedKeyEntity$che,\n              _checkedKeyEntity$hal = _checkedKeyEntity.halfCheckedKeys,\n              halfCheckedKeys = _checkedKeyEntity$hal === undefined ? [] : _checkedKeyEntity$hal;\n\n          if (!props.checkStrictly) {\n            var conductKeys = conductCheck(checkedKeys, true, keyEntities);\n            checkedKeys = conductKeys.checkedKeys;\n            halfCheckedKeys = conductKeys.halfCheckedKeys;\n          }\n\n          newState._checkedKeys = checkedKeys;\n          newState._halfCheckedKeys = halfCheckedKeys;\n        }\n      } // ================= loadedKeys ==================\n\n\n      if (needSync('loadedKeys')) {\n        newState._loadedKeys = props.loadedKeys;\n      }\n\n      return newState;\n    },\n    onNodeDragStart: function onNodeDragStart(event, node) {\n      var _expandedKeys = this.$data._expandedKeys;\n      var eventKey = node.eventKey;\n      var children = getSlots(node)['default'];\n      this.dragNode = node;\n      this.setState({\n        _dragNodesKeys: getDragNodesKeys(typeof children === 'function' ? children() : children, node),\n        _expandedKeys: arrDel(_expandedKeys, eventKey)\n      });\n\n      this.__emit('dragstart', {\n        event: event,\n        node: node\n      });\n    },\n\n    /**\n     * [Legacy] Select handler is less small than node,\n     * so that this will trigger when drag enter node or select handler.\n     * This is a little tricky if customize css without padding.\n     * Better for use mouse move event to refresh drag state.\n     * But let's just keep it to avoid event trigger logic change.\n     */\n    onNodeDragEnter: function onNodeDragEnter(event, node) {\n      var _this = this;\n\n      var expandedKeys = this.$data._expandedKeys;\n      var pos = node.pos,\n          eventKey = node.eventKey;\n      if (!this.dragNode || !node.$refs.selectHandle) return;\n      var dropPosition = calcDropPosition(event, node); // Skip if drag node is self\n\n      if (this.dragNode.eventKey === eventKey && dropPosition === 0) {\n        this.setState({\n          _dragOverNodeKey: '',\n          _dropPosition: null\n        });\n        return;\n      } // Ref: https://github.com/react-component/tree/issues/132\n      // Add timeout to let onDragLevel fire before onDragEnter,\n      // so that we can clean drag props for onDragLeave node.\n      // Macro task for this:\n      // https://html.spec.whatwg.org/multipage/webappapis.html#clean-up-after-running-script\n\n\n      setTimeout(function () {\n        // Update drag over node\n        _this.setState({\n          _dragOverNodeKey: eventKey,\n          _dropPosition: dropPosition\n        }); // Side effect for delay drag\n\n\n        if (!_this.delayedDragEnterLogic) {\n          _this.delayedDragEnterLogic = {};\n        }\n\n        Object.keys(_this.delayedDragEnterLogic).forEach(function (key) {\n          clearTimeout(_this.delayedDragEnterLogic[key]);\n        });\n        _this.delayedDragEnterLogic[pos] = setTimeout(function () {\n          var newExpandedKeys = arrAdd(expandedKeys, eventKey);\n\n          if (!hasProp(_this, 'expandedKeys')) {\n            _this.setState({\n              _expandedKeys: newExpandedKeys\n            });\n          }\n\n          _this.__emit('dragenter', {\n            event: event,\n            node: node,\n            expandedKeys: newExpandedKeys\n          });\n        }, 400);\n      }, 0);\n    },\n    onNodeDragOver: function onNodeDragOver(event, node) {\n      var eventKey = node.eventKey;\n      var _$data = this.$data,\n          _dragOverNodeKey = _$data._dragOverNodeKey,\n          _dropPosition = _$data._dropPosition; // Update drag position\n\n      if (this.dragNode && eventKey === _dragOverNodeKey && node.$refs.selectHandle) {\n        var dropPosition = calcDropPosition(event, node);\n        if (dropPosition === _dropPosition) return;\n        this.setState({\n          _dropPosition: dropPosition\n        });\n      }\n\n      this.__emit('dragover', {\n        event: event,\n        node: node\n      });\n    },\n    onNodeDragLeave: function onNodeDragLeave(event, node) {\n      this.setState({\n        _dragOverNodeKey: ''\n      });\n\n      this.__emit('dragleave', {\n        event: event,\n        node: node\n      });\n    },\n    onNodeDragEnd: function onNodeDragEnd(event, node) {\n      this.setState({\n        _dragOverNodeKey: ''\n      });\n\n      this.__emit('dragend', {\n        event: event,\n        node: node\n      });\n\n      this.dragNode = null;\n    },\n    onNodeDrop: function onNodeDrop(event, node) {\n      var _$data2 = this.$data,\n          _$data2$_dragNodesKey = _$data2._dragNodesKeys,\n          _dragNodesKeys = _$data2$_dragNodesKey === undefined ? [] : _$data2$_dragNodesKey,\n          _dropPosition = _$data2._dropPosition;\n\n      var eventKey = node.eventKey,\n          pos = node.pos;\n      this.setState({\n        _dragOverNodeKey: ''\n      });\n\n      if (_dragNodesKeys.indexOf(eventKey) !== -1) {\n        warning(false, \"Can not drop to dragNode(include it's children node)\");\n        return;\n      }\n\n      var posArr = posToArr(pos);\n      var dropResult = {\n        event: event,\n        node: node,\n        dragNode: this.dragNode,\n        dragNodesKeys: _dragNodesKeys.slice(),\n        dropPosition: _dropPosition + Number(posArr[posArr.length - 1]),\n        dropToGap: false\n      };\n\n      if (_dropPosition !== 0) {\n        dropResult.dropToGap = true;\n      }\n\n      this.__emit('drop', dropResult);\n\n      this.dragNode = null;\n    },\n    onNodeClick: function onNodeClick(e, treeNode) {\n      this.__emit('click', e, treeNode);\n    },\n    onNodeDoubleClick: function onNodeDoubleClick(e, treeNode) {\n      this.__emit('dblclick', e, treeNode);\n    },\n    onNodeSelect: function onNodeSelect(e, treeNode) {\n      var selectedKeys = this.$data._selectedKeys;\n      var keyEntities = this.$data._keyEntities;\n      var multiple = this.$props.multiple;\n\n      var _getOptionProps = getOptionProps(treeNode),\n          selected = _getOptionProps.selected,\n          eventKey = _getOptionProps.eventKey;\n\n      var targetSelected = !selected; // Update selected keys\n\n      if (!targetSelected) {\n        selectedKeys = arrDel(selectedKeys, eventKey);\n      } else if (!multiple) {\n        selectedKeys = [eventKey];\n      } else {\n        selectedKeys = arrAdd(selectedKeys, eventKey);\n      } // [Legacy] Not found related usage in doc or upper libs\n\n\n      var selectedNodes = selectedKeys.map(function (key) {\n        var entity = keyEntities.get(key);\n        if (!entity) return null;\n        return entity.node;\n      }).filter(function (node) {\n        return node;\n      });\n      this.setUncontrolledState({\n        _selectedKeys: selectedKeys\n      });\n      var eventObj = {\n        event: 'select',\n        selected: targetSelected,\n        node: treeNode,\n        selectedNodes: selectedNodes,\n        nativeEvent: e\n      };\n\n      this.__emit('update:selectedKeys', selectedKeys);\n\n      this.__emit('select', selectedKeys, eventObj);\n    },\n    onNodeCheck: function onNodeCheck(e, treeNode, checked) {\n      var _$data3 = this.$data,\n          keyEntities = _$data3._keyEntities,\n          oriCheckedKeys = _$data3._checkedKeys,\n          oriHalfCheckedKeys = _$data3._halfCheckedKeys;\n      var checkStrictly = this.$props.checkStrictly;\n\n      var _getOptionProps2 = getOptionProps(treeNode),\n          eventKey = _getOptionProps2.eventKey; // Prepare trigger arguments\n\n\n      var checkedObj = void 0;\n      var eventObj = {\n        event: 'check',\n        node: treeNode,\n        checked: checked,\n        nativeEvent: e\n      };\n\n      if (checkStrictly) {\n        var checkedKeys = checked ? arrAdd(oriCheckedKeys, eventKey) : arrDel(oriCheckedKeys, eventKey);\n        var halfCheckedKeys = arrDel(oriHalfCheckedKeys, eventKey);\n        checkedObj = {\n          checked: checkedKeys,\n          halfChecked: halfCheckedKeys\n        };\n        eventObj.checkedNodes = checkedKeys.map(function (key) {\n          return keyEntities.get(key);\n        }).filter(function (entity) {\n          return entity;\n        }).map(function (entity) {\n          return entity.node;\n        });\n        this.setUncontrolledState({\n          _checkedKeys: checkedKeys\n        });\n      } else {\n        var _conductCheck = conductCheck([eventKey], checked, keyEntities, {\n          checkedKeys: oriCheckedKeys,\n          halfCheckedKeys: oriHalfCheckedKeys\n        }),\n            _checkedKeys = _conductCheck.checkedKeys,\n            _halfCheckedKeys = _conductCheck.halfCheckedKeys;\n\n        checkedObj = _checkedKeys; // [Legacy] This is used for `rc-tree-select`\n\n        eventObj.checkedNodes = [];\n        eventObj.checkedNodesPositions = [];\n        eventObj.halfCheckedKeys = _halfCheckedKeys;\n\n        _checkedKeys.forEach(function (key) {\n          var entity = keyEntities.get(key);\n          if (!entity) return;\n          var node = entity.node,\n              pos = entity.pos;\n          eventObj.checkedNodes.push(node);\n          eventObj.checkedNodesPositions.push({\n            node: node,\n            pos: pos\n          });\n        });\n\n        this.setUncontrolledState({\n          _checkedKeys: _checkedKeys,\n          _halfCheckedKeys: _halfCheckedKeys\n        });\n      }\n\n      this.__emit('check', checkedObj, eventObj);\n    },\n    onNodeLoad: function onNodeLoad(treeNode) {\n      var _this2 = this;\n\n      return new Promise(function (resolve) {\n        // We need to get the latest state of loading/loaded keys\n        _this2.setState(function (_ref) {\n          var _ref$_loadedKeys = _ref._loadedKeys,\n              loadedKeys = _ref$_loadedKeys === undefined ? [] : _ref$_loadedKeys,\n              _ref$_loadingKeys = _ref._loadingKeys,\n              loadingKeys = _ref$_loadingKeys === undefined ? [] : _ref$_loadingKeys;\n          var loadData = _this2.$props.loadData;\n\n          var _getOptionProps3 = getOptionProps(treeNode),\n              eventKey = _getOptionProps3.eventKey;\n\n          if (!loadData || loadedKeys.indexOf(eventKey) !== -1 || loadingKeys.indexOf(eventKey) !== -1) {\n            return {};\n          } // Process load data\n\n\n          var promise = loadData(treeNode);\n          promise.then(function () {\n            var _$data4 = _this2.$data,\n                currentLoadedKeys = _$data4._loadedKeys,\n                currentLoadingKeys = _$data4._loadingKeys;\n            var newLoadedKeys = arrAdd(currentLoadedKeys, eventKey);\n            var newLoadingKeys = arrDel(currentLoadingKeys, eventKey); // onLoad should trigger before internal setState to avoid `loadData` trigger twice.\n            // https://github.com/ant-design/ant-design/issues/12464\n\n            _this2.__emit('load', newLoadedKeys, {\n              event: 'load',\n              node: treeNode\n            });\n\n            _this2.setUncontrolledState({\n              _loadedKeys: newLoadedKeys\n            });\n\n            _this2.setState({\n              _loadingKeys: newLoadingKeys\n            });\n\n            resolve();\n          });\n          return {\n            _loadingKeys: arrAdd(loadingKeys, eventKey)\n          };\n        });\n      });\n    },\n    onNodeExpand: function onNodeExpand(e, treeNode) {\n      var _this3 = this;\n\n      var expandedKeys = this.$data._expandedKeys;\n      var loadData = this.$props.loadData;\n\n      var _getOptionProps4 = getOptionProps(treeNode),\n          eventKey = _getOptionProps4.eventKey,\n          expanded = _getOptionProps4.expanded; // Update selected keys\n\n\n      var index = expandedKeys.indexOf(eventKey);\n      var targetExpanded = !expanded;\n      warning(expanded && index !== -1 || !expanded && index === -1, 'Expand state not sync with index check');\n\n      if (targetExpanded) {\n        expandedKeys = arrAdd(expandedKeys, eventKey);\n      } else {\n        expandedKeys = arrDel(expandedKeys, eventKey);\n      }\n\n      this.setUncontrolledState({\n        _expandedKeys: expandedKeys\n      });\n\n      this.__emit('expand', expandedKeys, {\n        node: treeNode,\n        expanded: targetExpanded,\n        nativeEvent: e\n      });\n\n      this.__emit('update:expandedKeys', expandedKeys); // Async Load data\n\n\n      if (targetExpanded && loadData) {\n        var loadPromise = this.onNodeLoad(treeNode);\n        return loadPromise ? loadPromise.then(function () {\n          // [Legacy] Refresh logic\n          _this3.setUncontrolledState({\n            _expandedKeys: expandedKeys\n          });\n        }) : null;\n      }\n\n      return null;\n    },\n    onNodeMouseEnter: function onNodeMouseEnter(event, node) {\n      this.__emit('mouseenter', {\n        event: event,\n        node: node\n      });\n    },\n    onNodeMouseLeave: function onNodeMouseLeave(event, node) {\n      this.__emit('mouseleave', {\n        event: event,\n        node: node\n      });\n    },\n    onNodeContextMenu: function onNodeContextMenu(event, node) {\n      event.preventDefault();\n\n      this.__emit('rightClick', {\n        event: event,\n        node: node\n      });\n    },\n\n    /**\n     * Only update the value which is not in props\n     */\n    setUncontrolledState: function setUncontrolledState(state) {\n      var needSync = false;\n      var newState = {};\n      var props = getOptionProps(this);\n      Object.keys(state).forEach(function (name) {\n        if (name.replace('_', '') in props) return;\n        needSync = true;\n        newState[name] = state[name];\n      });\n\n      if (needSync) {\n        this.setState(newState);\n      }\n    },\n    registerTreeNode: function registerTreeNode(key, node) {\n      if (node) {\n        this.domTreeNodes[key] = node;\n      } else {\n        delete this.domTreeNodes[key];\n      }\n    },\n    isKeyChecked: function isKeyChecked(key) {\n      var _$data$_checkedKeys = this.$data._checkedKeys,\n          checkedKeys = _$data$_checkedKeys === undefined ? [] : _$data$_checkedKeys;\n      return checkedKeys.indexOf(key) !== -1;\n    },\n\n    /**\n     * [Legacy] Original logic use `key` as tracking clue.\n     * We have to use `cloneElement` to pass `key`.\n     */\n    renderTreeNode: function renderTreeNode(child, index) {\n      var level = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var _$data5 = this.$data,\n          keyEntities = _$data5._keyEntities,\n          _$data5$_expandedKeys = _$data5._expandedKeys,\n          expandedKeys = _$data5$_expandedKeys === undefined ? [] : _$data5$_expandedKeys,\n          _$data5$_selectedKeys = _$data5._selectedKeys,\n          selectedKeys = _$data5$_selectedKeys === undefined ? [] : _$data5$_selectedKeys,\n          _$data5$_halfCheckedK = _$data5._halfCheckedKeys,\n          halfCheckedKeys = _$data5$_halfCheckedK === undefined ? [] : _$data5$_halfCheckedK,\n          _$data5$_loadedKeys = _$data5._loadedKeys,\n          loadedKeys = _$data5$_loadedKeys === undefined ? [] : _$data5$_loadedKeys,\n          _$data5$_loadingKeys = _$data5._loadingKeys,\n          loadingKeys = _$data5$_loadingKeys === undefined ? [] : _$data5$_loadingKeys,\n          dragOverNodeKey = _$data5._dragOverNodeKey,\n          dropPosition = _$data5._dropPosition;\n      var pos = getPosition(level, index);\n      var key = child.key;\n\n      if (!key && (key === undefined || key === null)) {\n        key = pos;\n      }\n\n      if (!keyEntities.get(key)) {\n        warnOnlyTreeNode();\n        return null;\n      }\n\n      return cloneElement(child, {\n        props: {\n          eventKey: key,\n          expanded: expandedKeys.indexOf(key) !== -1,\n          selected: selectedKeys.indexOf(key) !== -1,\n          loaded: loadedKeys.indexOf(key) !== -1,\n          loading: loadingKeys.indexOf(key) !== -1,\n          checked: this.isKeyChecked(key),\n          halfChecked: halfCheckedKeys.indexOf(key) !== -1,\n          pos: pos,\n          // [Legacy] Drag props\n          dragOver: dragOverNodeKey === key && dropPosition === 0,\n          dragOverGapTop: dragOverNodeKey === key && dropPosition === -1,\n          dragOverGapBottom: dragOverNodeKey === key && dropPosition === 1\n        },\n        key: key\n      });\n    }\n  },\n  render: function render() {\n    var _this4 = this;\n\n    var h = arguments[0];\n    var treeNode = this.$data._treeNode;\n    var _$props = this.$props,\n        prefixCls = _$props.prefixCls,\n        focusable = _$props.focusable,\n        showLine = _$props.showLine,\n        _$props$tabIndex = _$props.tabIndex,\n        tabIndex = _$props$tabIndex === undefined ? 0 : _$props$tabIndex;\n    return h('ul', {\n      'class': classNames(prefixCls, _defineProperty({}, prefixCls + '-show-line', showLine)),\n      attrs: {\n        role: 'tree',\n        unselectable: 'on',\n        tabIndex: focusable ? tabIndex : null\n      }\n    }, [mapChildren(treeNode, function (node, index) {\n      return _this4.renderTreeNode(node, index);\n    })]);\n  }\n};\nexport { Tree };\nexport default proxyComponent(Tree);","map":{"version":3,"sources":["/Users/liulu/刘璐/vue3/hello-vue3/node_modules/ant-design-vue/es/vc-tree/src/Tree.js"],"names":["_defineProperty","_toConsumableArray","_extends","PropTypes","classNames","warning","hasProp","initDefaultProps","getOptionProps","getSlots","cloneElement","BaseMixin","proxyComponent","convertTreeToEntities","convertDataToTree","getPosition","getDragNodesKeys","parseCheckedKeys","conductExpandParent","calcSelectedKeys","calcDropPosition","arrAdd","arrDel","posToArr","mapChildren","conductCheck","warnOnlyTreeNode","getWatch","keys","arguments","length","undefined","watch","forEach","k","needSyncKeys","Tree","name","mixins","props","prefixCls","string","tabIndex","oneOfType","number","children","any","treeData","array","showLine","bool","showIcon","icon","object","func","focusable","selectable","disabled","multiple","checkable","checkStrictly","draggable","defaultExpandParent","autoExpandParent","defaultExpandAll","defaultExpandedKeys","expandedKeys","defaultCheckedKeys","checkedKeys","defaultSelectedKeys","selectedKeys","loadData","loadedKeys","filterTreeNode","openTransitionName","openAnimation","switcherIcon","_propsSymbol","data","$props","__propsSymbol__","domTreeNodes","state","_posEntities","Map","_keyEntities","_expandedKeys","_selectedKeys","_checkedKeys","_halfCheckedKeys","_loadedKeys","_loadingKeys","_treeNode","_prevProps","_dragOverNodeKey","_dropPosition","_dragNodesKeys","getDerivedState","provide","vcTree","setState","$data","methods","prevState","newState","self","needSync","treeNode","$createElement","entitiesMap","keyEntities","concat","checkedKeyEntity","halfCheckedKeys","_checkedKeyEntity","_checkedKeyEntity$che","_checkedKeyEntity$hal","conductKeys","onNodeDragStart","event","node","eventKey","dragNode","__emit","onNodeDragEnter","_this","pos","$refs","selectHandle","dropPosition","setTimeout","delayedDragEnterLogic","Object","key","clearTimeout","newExpandedKeys","onNodeDragOver","_$data","onNodeDragLeave","onNodeDragEnd","onNodeDrop","_$data2","_$data2$_dragNodesKey","indexOf","posArr","dropResult","dragNodesKeys","slice","Number","dropToGap","onNodeClick","e","onNodeDoubleClick","onNodeSelect","_getOptionProps","selected","targetSelected","selectedNodes","map","entity","get","filter","setUncontrolledState","eventObj","nativeEvent","onNodeCheck","checked","_$data3","oriCheckedKeys","oriHalfCheckedKeys","_getOptionProps2","checkedObj","halfChecked","checkedNodes","_conductCheck","checkedNodesPositions","push","onNodeLoad","_this2","Promise","resolve","_ref","_ref$_loadedKeys","_ref$_loadingKeys","loadingKeys","_getOptionProps3","promise","then","_$data4","currentLoadedKeys","currentLoadingKeys","newLoadedKeys","newLoadingKeys","onNodeExpand","_this3","_getOptionProps4","expanded","index","targetExpanded","loadPromise","onNodeMouseEnter","onNodeMouseLeave","onNodeContextMenu","preventDefault","replace","registerTreeNode","isKeyChecked","_$data$_checkedKeys","renderTreeNode","child","level","_$data5","_$data5$_expandedKeys","_$data5$_selectedKeys","_$data5$_halfCheckedK","_$data5$_loadedKeys","_$data5$_loadingKeys","dragOverNodeKey","loaded","loading","dragOver","dragOverGapTop","dragOverGapBottom","render","_this4","h","_$props","_$props$tabIndex","attrs","role","unselectable"],"mappings":"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","sourcesContent":["import _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _toConsumableArray from 'babel-runtime/helpers/toConsumableArray';\nimport _extends from 'babel-runtime/helpers/extends';\nimport PropTypes from '../../_util/vue-types';\nimport classNames from 'classnames';\nimport warning from 'warning';\nimport { hasProp, initDefaultProps, getOptionProps, getSlots } from '../../_util/props-util';\nimport { cloneElement } from '../../_util/vnode';\nimport BaseMixin from '../../_util/BaseMixin';\nimport proxyComponent from '../../_util/proxyComponent';\nimport { convertTreeToEntities, convertDataToTree, getPosition, getDragNodesKeys, parseCheckedKeys, conductExpandParent, calcSelectedKeys, calcDropPosition, arrAdd, arrDel, posToArr, mapChildren, conductCheck, warnOnlyTreeNode } from './util';\n\n/**\n * Thought we still use `cloneElement` to pass `key`,\n * other props can pass with context for future refactor.\n */\n\nfunction getWatch() {\n  var keys = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n  var watch = {};\n  keys.forEach(function (k) {\n    watch[k] = function () {\n      this.needSyncKeys[k] = true;\n    };\n  });\n  return watch;\n}\n\nvar Tree = {\n  name: 'Tree',\n  mixins: [BaseMixin],\n  props: initDefaultProps({\n    prefixCls: PropTypes.string,\n    tabIndex: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    children: PropTypes.any,\n    treeData: PropTypes.array, // Generate treeNode by children\n    showLine: PropTypes.bool,\n    showIcon: PropTypes.bool,\n    icon: PropTypes.oneOfType([PropTypes.object, PropTypes.func]),\n    focusable: PropTypes.bool,\n    selectable: PropTypes.bool,\n    disabled: PropTypes.bool,\n    multiple: PropTypes.bool,\n    checkable: PropTypes.oneOfType([PropTypes.object, PropTypes.bool]),\n    checkStrictly: PropTypes.bool,\n    draggable: PropTypes.bool,\n    defaultExpandParent: PropTypes.bool,\n    autoExpandParent: PropTypes.bool,\n    defaultExpandAll: PropTypes.bool,\n    defaultExpandedKeys: PropTypes.array,\n    expandedKeys: PropTypes.array,\n    defaultCheckedKeys: PropTypes.array,\n    checkedKeys: PropTypes.oneOfType([PropTypes.array, PropTypes.object]),\n    defaultSelectedKeys: PropTypes.array,\n    selectedKeys: PropTypes.array,\n    // onClick: PropTypes.func,\n    // onDoubleClick: PropTypes.func,\n    // onExpand: PropTypes.func,\n    // onCheck: PropTypes.func,\n    // onSelect: PropTypes.func,\n    loadData: PropTypes.func,\n    loadedKeys: PropTypes.array,\n    // onMouseEnter: PropTypes.func,\n    // onMouseLeave: PropTypes.func,\n    // onRightClick: PropTypes.func,\n    // onDragStart: PropTypes.func,\n    // onDragEnter: PropTypes.func,\n    // onDragOver: PropTypes.func,\n    // onDragLeave: PropTypes.func,\n    // onDragEnd: PropTypes.func,\n    // onDrop: PropTypes.func,\n    filterTreeNode: PropTypes.func,\n    openTransitionName: PropTypes.string,\n    openAnimation: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n    switcherIcon: PropTypes.any,\n    _propsSymbol: PropTypes.any\n  }, {\n    prefixCls: 'rc-tree',\n    showLine: false,\n    showIcon: true,\n    selectable: true,\n    multiple: false,\n    checkable: false,\n    disabled: false,\n    checkStrictly: false,\n    draggable: false,\n    defaultExpandParent: true,\n    autoExpandParent: false,\n    defaultExpandAll: false,\n    defaultExpandedKeys: [],\n    defaultCheckedKeys: [],\n    defaultSelectedKeys: []\n  }),\n\n  data: function data() {\n    warning(this.$props.__propsSymbol__, 'must pass __propsSymbol__');\n    warning(this.$props.children, 'please use children prop replace slots.default');\n    this.needSyncKeys = {};\n    this.domTreeNodes = {};\n    var state = {\n      _posEntities: new Map(),\n      _keyEntities: new Map(),\n      _expandedKeys: [],\n      _selectedKeys: [],\n      _checkedKeys: [],\n      _halfCheckedKeys: [],\n      _loadedKeys: [],\n      _loadingKeys: [],\n      _treeNode: [],\n      _prevProps: null,\n      _dragOverNodeKey: '',\n      _dropPosition: null,\n      _dragNodesKeys: []\n    };\n    return _extends({}, state, this.getDerivedState(getOptionProps(this), state));\n  },\n  provide: function provide() {\n    return {\n      vcTree: this\n    };\n  },\n\n\n  watch: _extends({}, getWatch(['treeData', 'children', 'expandedKeys', 'autoExpandParent', 'selectedKeys', 'checkedKeys', 'loadedKeys']), {\n    __propsSymbol__: function __propsSymbol__() {\n      this.setState(this.getDerivedState(getOptionProps(this), this.$data));\n      this.needSyncKeys = {};\n    }\n  }),\n\n  methods: {\n    getDerivedState: function getDerivedState(props, prevState) {\n      var _prevProps = prevState._prevProps;\n\n      var newState = {\n        _prevProps: _extends({}, props)\n      };\n      var self = this;\n      function needSync(name) {\n        return !_prevProps && name in props || _prevProps && self.needSyncKeys[name];\n      }\n\n      // ================== Tree Node ==================\n      var treeNode = null;\n\n      // Check if `treeData` or `children` changed and save into the state.\n      if (needSync('treeData')) {\n        treeNode = convertDataToTree(this.$createElement, props.treeData);\n      } else if (needSync('children')) {\n        treeNode = props.children;\n      }\n\n      // Tree support filter function which will break the tree structure in the vdm.\n      // We cache the treeNodes in state so that we can return the treeNode in event trigger.\n      if (treeNode) {\n        newState._treeNode = treeNode;\n\n        // Calculate the entities data for quick match\n        var entitiesMap = convertTreeToEntities(treeNode);\n        newState._keyEntities = entitiesMap.keyEntities;\n      }\n\n      var keyEntities = newState._keyEntities || prevState._keyEntities;\n\n      // ================ expandedKeys =================\n      if (needSync('expandedKeys') || _prevProps && needSync('autoExpandParent')) {\n        newState._expandedKeys = props.autoExpandParent || !_prevProps && props.defaultExpandParent ? conductExpandParent(props.expandedKeys, keyEntities) : props.expandedKeys;\n      } else if (!_prevProps && props.defaultExpandAll) {\n        newState._expandedKeys = [].concat(_toConsumableArray(keyEntities.keys()));\n      } else if (!_prevProps && props.defaultExpandedKeys) {\n        newState._expandedKeys = props.autoExpandParent || props.defaultExpandParent ? conductExpandParent(props.defaultExpandedKeys, keyEntities) : props.defaultExpandedKeys;\n      }\n\n      // ================ selectedKeys =================\n      if (props.selectable) {\n        if (needSync('selectedKeys')) {\n          newState._selectedKeys = calcSelectedKeys(props.selectedKeys, props);\n        } else if (!_prevProps && props.defaultSelectedKeys) {\n          newState._selectedKeys = calcSelectedKeys(props.defaultSelectedKeys, props);\n        }\n      }\n\n      // ================= checkedKeys =================\n      if (props.checkable) {\n        var checkedKeyEntity = void 0;\n\n        if (needSync('checkedKeys')) {\n          checkedKeyEntity = parseCheckedKeys(props.checkedKeys) || {};\n        } else if (!_prevProps && props.defaultCheckedKeys) {\n          checkedKeyEntity = parseCheckedKeys(props.defaultCheckedKeys) || {};\n        } else if (treeNode) {\n          // If treeNode changed, we also need check it\n          checkedKeyEntity = parseCheckedKeys(props.checkedKeys) || {\n            checkedKeys: prevState._checkedKeys,\n            halfCheckedKeys: prevState._halfCheckedKeys\n          };\n        }\n\n        if (checkedKeyEntity) {\n          var _checkedKeyEntity = checkedKeyEntity,\n              _checkedKeyEntity$che = _checkedKeyEntity.checkedKeys,\n              checkedKeys = _checkedKeyEntity$che === undefined ? [] : _checkedKeyEntity$che,\n              _checkedKeyEntity$hal = _checkedKeyEntity.halfCheckedKeys,\n              halfCheckedKeys = _checkedKeyEntity$hal === undefined ? [] : _checkedKeyEntity$hal;\n\n\n          if (!props.checkStrictly) {\n            var conductKeys = conductCheck(checkedKeys, true, keyEntities);\n            checkedKeys = conductKeys.checkedKeys;\n            halfCheckedKeys = conductKeys.halfCheckedKeys;\n          }\n\n          newState._checkedKeys = checkedKeys;\n          newState._halfCheckedKeys = halfCheckedKeys;\n        }\n      }\n      // ================= loadedKeys ==================\n      if (needSync('loadedKeys')) {\n        newState._loadedKeys = props.loadedKeys;\n      }\n\n      return newState;\n    },\n    onNodeDragStart: function onNodeDragStart(event, node) {\n      var _expandedKeys = this.$data._expandedKeys;\n      var eventKey = node.eventKey;\n\n      var children = getSlots(node)['default'];\n      this.dragNode = node;\n\n      this.setState({\n        _dragNodesKeys: getDragNodesKeys(typeof children === 'function' ? children() : children, node),\n        _expandedKeys: arrDel(_expandedKeys, eventKey)\n      });\n      this.__emit('dragstart', { event: event, node: node });\n    },\n\n\n    /**\n     * [Legacy] Select handler is less small than node,\n     * so that this will trigger when drag enter node or select handler.\n     * This is a little tricky if customize css without padding.\n     * Better for use mouse move event to refresh drag state.\n     * But let's just keep it to avoid event trigger logic change.\n     */\n    onNodeDragEnter: function onNodeDragEnter(event, node) {\n      var _this = this;\n\n      var expandedKeys = this.$data._expandedKeys;\n      var pos = node.pos,\n          eventKey = node.eventKey;\n\n\n      if (!this.dragNode || !node.$refs.selectHandle) return;\n\n      var dropPosition = calcDropPosition(event, node);\n\n      // Skip if drag node is self\n      if (this.dragNode.eventKey === eventKey && dropPosition === 0) {\n        this.setState({\n          _dragOverNodeKey: '',\n          _dropPosition: null\n        });\n        return;\n      }\n\n      // Ref: https://github.com/react-component/tree/issues/132\n      // Add timeout to let onDragLevel fire before onDragEnter,\n      // so that we can clean drag props for onDragLeave node.\n      // Macro task for this:\n      // https://html.spec.whatwg.org/multipage/webappapis.html#clean-up-after-running-script\n      setTimeout(function () {\n        // Update drag over node\n        _this.setState({\n          _dragOverNodeKey: eventKey,\n          _dropPosition: dropPosition\n        });\n\n        // Side effect for delay drag\n        if (!_this.delayedDragEnterLogic) {\n          _this.delayedDragEnterLogic = {};\n        }\n        Object.keys(_this.delayedDragEnterLogic).forEach(function (key) {\n          clearTimeout(_this.delayedDragEnterLogic[key]);\n        });\n        _this.delayedDragEnterLogic[pos] = setTimeout(function () {\n          var newExpandedKeys = arrAdd(expandedKeys, eventKey);\n          if (!hasProp(_this, 'expandedKeys')) {\n            _this.setState({\n              _expandedKeys: newExpandedKeys\n            });\n          }\n          _this.__emit('dragenter', { event: event, node: node, expandedKeys: newExpandedKeys });\n        }, 400);\n      }, 0);\n    },\n    onNodeDragOver: function onNodeDragOver(event, node) {\n      var eventKey = node.eventKey;\n      var _$data = this.$data,\n          _dragOverNodeKey = _$data._dragOverNodeKey,\n          _dropPosition = _$data._dropPosition;\n      // Update drag position\n\n      if (this.dragNode && eventKey === _dragOverNodeKey && node.$refs.selectHandle) {\n        var dropPosition = calcDropPosition(event, node);\n\n        if (dropPosition === _dropPosition) return;\n\n        this.setState({\n          _dropPosition: dropPosition\n        });\n      }\n      this.__emit('dragover', { event: event, node: node });\n    },\n    onNodeDragLeave: function onNodeDragLeave(event, node) {\n      this.setState({\n        _dragOverNodeKey: ''\n      });\n      this.__emit('dragleave', { event: event, node: node });\n    },\n    onNodeDragEnd: function onNodeDragEnd(event, node) {\n      this.setState({\n        _dragOverNodeKey: ''\n      });\n      this.__emit('dragend', { event: event, node: node });\n      this.dragNode = null;\n    },\n    onNodeDrop: function onNodeDrop(event, node) {\n      var _$data2 = this.$data,\n          _$data2$_dragNodesKey = _$data2._dragNodesKeys,\n          _dragNodesKeys = _$data2$_dragNodesKey === undefined ? [] : _$data2$_dragNodesKey,\n          _dropPosition = _$data2._dropPosition;\n\n      var eventKey = node.eventKey,\n          pos = node.pos;\n\n\n      this.setState({\n        _dragOverNodeKey: ''\n      });\n\n      if (_dragNodesKeys.indexOf(eventKey) !== -1) {\n        warning(false, \"Can not drop to dragNode(include it's children node)\");\n        return;\n      }\n\n      var posArr = posToArr(pos);\n\n      var dropResult = {\n        event: event,\n        node: node,\n        dragNode: this.dragNode,\n        dragNodesKeys: _dragNodesKeys.slice(),\n        dropPosition: _dropPosition + Number(posArr[posArr.length - 1]),\n        dropToGap: false\n      };\n\n      if (_dropPosition !== 0) {\n        dropResult.dropToGap = true;\n      }\n      this.__emit('drop', dropResult);\n      this.dragNode = null;\n    },\n    onNodeClick: function onNodeClick(e, treeNode) {\n      this.__emit('click', e, treeNode);\n    },\n    onNodeDoubleClick: function onNodeDoubleClick(e, treeNode) {\n      this.__emit('dblclick', e, treeNode);\n    },\n    onNodeSelect: function onNodeSelect(e, treeNode) {\n      var selectedKeys = this.$data._selectedKeys;\n      var keyEntities = this.$data._keyEntities;\n      var multiple = this.$props.multiple;\n\n      var _getOptionProps = getOptionProps(treeNode),\n          selected = _getOptionProps.selected,\n          eventKey = _getOptionProps.eventKey;\n\n      var targetSelected = !selected;\n      // Update selected keys\n      if (!targetSelected) {\n        selectedKeys = arrDel(selectedKeys, eventKey);\n      } else if (!multiple) {\n        selectedKeys = [eventKey];\n      } else {\n        selectedKeys = arrAdd(selectedKeys, eventKey);\n      }\n\n      // [Legacy] Not found related usage in doc or upper libs\n      var selectedNodes = selectedKeys.map(function (key) {\n        var entity = keyEntities.get(key);\n        if (!entity) return null;\n\n        return entity.node;\n      }).filter(function (node) {\n        return node;\n      });\n\n      this.setUncontrolledState({ _selectedKeys: selectedKeys });\n\n      var eventObj = {\n        event: 'select',\n        selected: targetSelected,\n        node: treeNode,\n        selectedNodes: selectedNodes,\n        nativeEvent: e\n      };\n      this.__emit('update:selectedKeys', selectedKeys);\n      this.__emit('select', selectedKeys, eventObj);\n    },\n    onNodeCheck: function onNodeCheck(e, treeNode, checked) {\n      var _$data3 = this.$data,\n          keyEntities = _$data3._keyEntities,\n          oriCheckedKeys = _$data3._checkedKeys,\n          oriHalfCheckedKeys = _$data3._halfCheckedKeys;\n      var checkStrictly = this.$props.checkStrictly;\n\n      var _getOptionProps2 = getOptionProps(treeNode),\n          eventKey = _getOptionProps2.eventKey;\n\n      // Prepare trigger arguments\n\n\n      var checkedObj = void 0;\n      var eventObj = {\n        event: 'check',\n        node: treeNode,\n        checked: checked,\n        nativeEvent: e\n      };\n\n      if (checkStrictly) {\n        var checkedKeys = checked ? arrAdd(oriCheckedKeys, eventKey) : arrDel(oriCheckedKeys, eventKey);\n        var halfCheckedKeys = arrDel(oriHalfCheckedKeys, eventKey);\n        checkedObj = { checked: checkedKeys, halfChecked: halfCheckedKeys };\n\n        eventObj.checkedNodes = checkedKeys.map(function (key) {\n          return keyEntities.get(key);\n        }).filter(function (entity) {\n          return entity;\n        }).map(function (entity) {\n          return entity.node;\n        });\n\n        this.setUncontrolledState({ _checkedKeys: checkedKeys });\n      } else {\n        var _conductCheck = conductCheck([eventKey], checked, keyEntities, {\n          checkedKeys: oriCheckedKeys,\n          halfCheckedKeys: oriHalfCheckedKeys\n        }),\n            _checkedKeys = _conductCheck.checkedKeys,\n            _halfCheckedKeys = _conductCheck.halfCheckedKeys;\n\n        checkedObj = _checkedKeys;\n\n        // [Legacy] This is used for `rc-tree-select`\n        eventObj.checkedNodes = [];\n        eventObj.checkedNodesPositions = [];\n        eventObj.halfCheckedKeys = _halfCheckedKeys;\n\n        _checkedKeys.forEach(function (key) {\n          var entity = keyEntities.get(key);\n          if (!entity) return;\n\n          var node = entity.node,\n              pos = entity.pos;\n\n\n          eventObj.checkedNodes.push(node);\n          eventObj.checkedNodesPositions.push({ node: node, pos: pos });\n        });\n\n        this.setUncontrolledState({\n          _checkedKeys: _checkedKeys,\n          _halfCheckedKeys: _halfCheckedKeys\n        });\n      }\n      this.__emit('check', checkedObj, eventObj);\n    },\n    onNodeLoad: function onNodeLoad(treeNode) {\n      var _this2 = this;\n\n      return new Promise(function (resolve) {\n        // We need to get the latest state of loading/loaded keys\n        _this2.setState(function (_ref) {\n          var _ref$_loadedKeys = _ref._loadedKeys,\n              loadedKeys = _ref$_loadedKeys === undefined ? [] : _ref$_loadedKeys,\n              _ref$_loadingKeys = _ref._loadingKeys,\n              loadingKeys = _ref$_loadingKeys === undefined ? [] : _ref$_loadingKeys;\n          var loadData = _this2.$props.loadData;\n\n          var _getOptionProps3 = getOptionProps(treeNode),\n              eventKey = _getOptionProps3.eventKey;\n\n          if (!loadData || loadedKeys.indexOf(eventKey) !== -1 || loadingKeys.indexOf(eventKey) !== -1) {\n            return {};\n          }\n\n          // Process load data\n          var promise = loadData(treeNode);\n          promise.then(function () {\n            var _$data4 = _this2.$data,\n                currentLoadedKeys = _$data4._loadedKeys,\n                currentLoadingKeys = _$data4._loadingKeys;\n\n            var newLoadedKeys = arrAdd(currentLoadedKeys, eventKey);\n            var newLoadingKeys = arrDel(currentLoadingKeys, eventKey);\n\n            // onLoad should trigger before internal setState to avoid `loadData` trigger twice.\n            // https://github.com/ant-design/ant-design/issues/12464\n            _this2.__emit('load', newLoadedKeys, {\n              event: 'load',\n              node: treeNode\n            });\n            _this2.setUncontrolledState({\n              _loadedKeys: newLoadedKeys\n            });\n            _this2.setState({\n              _loadingKeys: newLoadingKeys\n            });\n            resolve();\n          });\n\n          return {\n            _loadingKeys: arrAdd(loadingKeys, eventKey)\n          };\n        });\n      });\n    },\n    onNodeExpand: function onNodeExpand(e, treeNode) {\n      var _this3 = this;\n\n      var expandedKeys = this.$data._expandedKeys;\n      var loadData = this.$props.loadData;\n\n      var _getOptionProps4 = getOptionProps(treeNode),\n          eventKey = _getOptionProps4.eventKey,\n          expanded = _getOptionProps4.expanded;\n\n      // Update selected keys\n\n\n      var index = expandedKeys.indexOf(eventKey);\n      var targetExpanded = !expanded;\n\n      warning(expanded && index !== -1 || !expanded && index === -1, 'Expand state not sync with index check');\n\n      if (targetExpanded) {\n        expandedKeys = arrAdd(expandedKeys, eventKey);\n      } else {\n        expandedKeys = arrDel(expandedKeys, eventKey);\n      }\n\n      this.setUncontrolledState({ _expandedKeys: expandedKeys });\n      this.__emit('expand', expandedKeys, {\n        node: treeNode,\n        expanded: targetExpanded,\n        nativeEvent: e\n      });\n      this.__emit('update:expandedKeys', expandedKeys);\n\n      // Async Load data\n      if (targetExpanded && loadData) {\n        var loadPromise = this.onNodeLoad(treeNode);\n        return loadPromise ? loadPromise.then(function () {\n          // [Legacy] Refresh logic\n          _this3.setUncontrolledState({ _expandedKeys: expandedKeys });\n        }) : null;\n      }\n\n      return null;\n    },\n    onNodeMouseEnter: function onNodeMouseEnter(event, node) {\n      this.__emit('mouseenter', { event: event, node: node });\n    },\n    onNodeMouseLeave: function onNodeMouseLeave(event, node) {\n      this.__emit('mouseleave', { event: event, node: node });\n    },\n    onNodeContextMenu: function onNodeContextMenu(event, node) {\n      event.preventDefault();\n      this.__emit('rightClick', { event: event, node: node });\n    },\n\n\n    /**\n     * Only update the value which is not in props\n     */\n    setUncontrolledState: function setUncontrolledState(state) {\n      var needSync = false;\n      var newState = {};\n      var props = getOptionProps(this);\n      Object.keys(state).forEach(function (name) {\n        if (name.replace('_', '') in props) return;\n        needSync = true;\n        newState[name] = state[name];\n      });\n\n      if (needSync) {\n        this.setState(newState);\n      }\n    },\n    registerTreeNode: function registerTreeNode(key, node) {\n      if (node) {\n        this.domTreeNodes[key] = node;\n      } else {\n        delete this.domTreeNodes[key];\n      }\n    },\n    isKeyChecked: function isKeyChecked(key) {\n      var _$data$_checkedKeys = this.$data._checkedKeys,\n          checkedKeys = _$data$_checkedKeys === undefined ? [] : _$data$_checkedKeys;\n\n      return checkedKeys.indexOf(key) !== -1;\n    },\n\n\n    /**\n     * [Legacy] Original logic use `key` as tracking clue.\n     * We have to use `cloneElement` to pass `key`.\n     */\n    renderTreeNode: function renderTreeNode(child, index) {\n      var level = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var _$data5 = this.$data,\n          keyEntities = _$data5._keyEntities,\n          _$data5$_expandedKeys = _$data5._expandedKeys,\n          expandedKeys = _$data5$_expandedKeys === undefined ? [] : _$data5$_expandedKeys,\n          _$data5$_selectedKeys = _$data5._selectedKeys,\n          selectedKeys = _$data5$_selectedKeys === undefined ? [] : _$data5$_selectedKeys,\n          _$data5$_halfCheckedK = _$data5._halfCheckedKeys,\n          halfCheckedKeys = _$data5$_halfCheckedK === undefined ? [] : _$data5$_halfCheckedK,\n          _$data5$_loadedKeys = _$data5._loadedKeys,\n          loadedKeys = _$data5$_loadedKeys === undefined ? [] : _$data5$_loadedKeys,\n          _$data5$_loadingKeys = _$data5._loadingKeys,\n          loadingKeys = _$data5$_loadingKeys === undefined ? [] : _$data5$_loadingKeys,\n          dragOverNodeKey = _$data5._dragOverNodeKey,\n          dropPosition = _$data5._dropPosition;\n\n      var pos = getPosition(level, index);\n      var key = child.key;\n      if (!key && (key === undefined || key === null)) {\n        key = pos;\n      }\n      if (!keyEntities.get(key)) {\n        warnOnlyTreeNode();\n        return null;\n      }\n\n      return cloneElement(child, {\n        props: {\n          eventKey: key,\n          expanded: expandedKeys.indexOf(key) !== -1,\n          selected: selectedKeys.indexOf(key) !== -1,\n          loaded: loadedKeys.indexOf(key) !== -1,\n          loading: loadingKeys.indexOf(key) !== -1,\n          checked: this.isKeyChecked(key),\n          halfChecked: halfCheckedKeys.indexOf(key) !== -1,\n          pos: pos,\n\n          // [Legacy] Drag props\n          dragOver: dragOverNodeKey === key && dropPosition === 0,\n          dragOverGapTop: dragOverNodeKey === key && dropPosition === -1,\n          dragOverGapBottom: dragOverNodeKey === key && dropPosition === 1\n        },\n        key: key\n      });\n    }\n  },\n\n  render: function render() {\n    var _this4 = this;\n\n    var h = arguments[0];\n    var treeNode = this.$data._treeNode;\n    var _$props = this.$props,\n        prefixCls = _$props.prefixCls,\n        focusable = _$props.focusable,\n        showLine = _$props.showLine,\n        _$props$tabIndex = _$props.tabIndex,\n        tabIndex = _$props$tabIndex === undefined ? 0 : _$props$tabIndex;\n\n\n    return h(\n      'ul',\n      {\n        'class': classNames(prefixCls, _defineProperty({}, prefixCls + '-show-line', showLine)),\n        attrs: { role: 'tree',\n          unselectable: 'on',\n          tabIndex: focusable ? tabIndex : null\n        }\n      },\n      [mapChildren(treeNode, function (node, index) {\n        return _this4.renderTreeNode(node, index);\n      })]\n    );\n  }\n};\n\nexport { Tree };\n\nexport default proxyComponent(Tree);"]},"metadata":{},"sourceType":"module"}