{"ast":null,"code":"import _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _extends from 'babel-runtime/helpers/extends';\nimport PropTypes from '../_util/vue-types';\nimport classNames from 'classnames';\nimport { ColProps } from '../grid/Col';\nimport isRegExp from 'lodash/isRegExp';\nimport warning from '../_util/warning';\nimport FormItem from './FormItem';\nimport { initDefaultProps, getListeners } from '../_util/props-util';\nimport { ConfigConsumerProps } from '../config-provider/configConsumerProps';\nexport var FormProps = {\n  layout: PropTypes.oneOf(['horizontal', 'inline', 'vertical']),\n  labelCol: PropTypes.shape(ColProps).loose,\n  wrapperCol: PropTypes.shape(ColProps).loose,\n  colon: PropTypes.bool,\n  labelAlign: PropTypes.oneOf(['left', 'right']),\n  prefixCls: PropTypes.string,\n  hideRequiredMark: PropTypes.bool,\n  model: PropTypes.object,\n  rules: PropTypes.object,\n  validateMessages: PropTypes.any,\n  validateOnRuleChange: PropTypes.bool\n};\nexport var ValidationRule = {\n  /** validation error message */\n  message: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n\n  /** built-in validation type, available options: https://github.com/yiminghe/async-validator#type */\n  type: PropTypes.string,\n\n  /** indicates whether field is required */\n  required: PropTypes.boolean,\n\n  /** treat required fields that only contain whitespace as errors */\n  whitespace: PropTypes.boolean,\n\n  /** validate the exact length of a field */\n  len: PropTypes.number,\n\n  /** validate the min length of a field */\n  min: PropTypes.number,\n\n  /** validate the max length of a field */\n  max: PropTypes.number,\n\n  /** validate the value from a list of possible values */\n  'enum': PropTypes.oneOfType([String, PropTypes.arrayOf(String)]),\n\n  /** validate from a regular expression */\n  pattern: PropTypes.custom(isRegExp),\n\n  /** transform a value before validation */\n  transform: PropTypes.func,\n\n  /** custom validate function (Note: callback must be called) */\n  validator: PropTypes.func\n};\nvar Form = {\n  name: 'AFormModel',\n  props: initDefaultProps(FormProps, {\n    layout: 'horizontal',\n    hideRequiredMark: false,\n    colon: true,\n    validateOnRuleChange: false\n  }),\n  Item: FormItem,\n  created: function created() {\n    this.fields = [];\n  },\n  provide: function provide() {\n    return {\n      FormContext: this\n    };\n  },\n  inject: {\n    configProvider: {\n      'default': function _default() {\n        return ConfigConsumerProps;\n      }\n    }\n  },\n  watch: {\n    rules: function rules() {\n      if (this.validateOnRuleChange) {\n        this.validate(function () {});\n      }\n    }\n  },\n  computed: {\n    vertical: function vertical() {\n      return this.layout === 'vertical';\n    }\n  },\n  methods: {\n    addField: function addField(field) {\n      if (field) {\n        this.fields.push(field);\n      }\n    },\n    removeField: function removeField(field) {\n      if (field.prop) {\n        this.fields.splice(this.fields.indexOf(field), 1);\n      }\n    },\n    onSubmit: function onSubmit(e) {\n      if (!getListeners(this).submit) {\n        e.preventDefault();\n      } else {\n        this.$emit('submit', e);\n      }\n    },\n    resetFields: function resetFields() {\n      if (!this.model) {\n        warning(false, 'FormModel', 'model is required for resetFields to work.');\n        return;\n      }\n\n      this.fields.forEach(function (field) {\n        field.resetField();\n      });\n    },\n    clearValidate: function clearValidate() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var fields = props.length ? typeof props === 'string' ? this.fields.filter(function (field) {\n        return props === field.prop;\n      }) : this.fields.filter(function (field) {\n        return props.indexOf(field.prop) > -1;\n      }) : this.fields;\n      fields.forEach(function (field) {\n        field.clearValidate();\n      });\n    },\n    validate: function validate(callback) {\n      var _this = this;\n\n      if (!this.model) {\n        warning(false, 'FormModel', 'model is required for resetFields to work.');\n        return;\n      }\n\n      var promise = void 0; // if no callback, return promise\n\n      if (typeof callback !== 'function' && window.Promise) {\n        promise = new window.Promise(function (resolve, reject) {\n          callback = function callback(valid) {\n            valid ? resolve(valid) : reject(valid);\n          };\n        });\n      }\n\n      var valid = true;\n      var count = 0; // 如果需要验证的fields为空，调用验证时立刻返回callback\n\n      if (this.fields.length === 0 && callback) {\n        callback(true);\n      }\n\n      var invalidFields = {};\n      this.fields.forEach(function (field) {\n        field.validate('', function (message, field) {\n          if (message) {\n            valid = false;\n          }\n\n          invalidFields = _extends({}, invalidFields, field);\n\n          if (typeof callback === 'function' && ++count === _this.fields.length) {\n            callback(valid, invalidFields);\n          }\n        });\n      });\n\n      if (promise) {\n        return promise;\n      }\n    },\n    validateField: function validateField(props, cb) {\n      props = [].concat(props);\n      var fields = this.fields.filter(function (field) {\n        return props.indexOf(field.prop) !== -1;\n      });\n\n      if (!fields.length) {\n        warning(false, 'FormModel', 'please pass correct props!');\n        return;\n      }\n\n      fields.forEach(function (field) {\n        field.validate('', cb);\n      });\n    }\n  },\n  render: function render() {\n    var _classNames;\n\n    var h = arguments[0];\n    var customizePrefixCls = this.prefixCls,\n        hideRequiredMark = this.hideRequiredMark,\n        layout = this.layout,\n        onSubmit = this.onSubmit,\n        $slots = this.$slots;\n    var getPrefixCls = this.configProvider.getPrefixCls;\n    var prefixCls = getPrefixCls('form', customizePrefixCls);\n    var formClassName = classNames(prefixCls, (_classNames = {}, _defineProperty(_classNames, prefixCls + '-horizontal', layout === 'horizontal'), _defineProperty(_classNames, prefixCls + '-vertical', layout === 'vertical'), _defineProperty(_classNames, prefixCls + '-inline', layout === 'inline'), _defineProperty(_classNames, prefixCls + '-hide-required-mark', hideRequiredMark), _classNames));\n    return h('form', {\n      on: {\n        'submit': onSubmit\n      },\n      'class': formClassName\n    }, [$slots['default']]);\n  }\n};\nexport default Form;","map":{"version":3,"sources":["/Users/liulu/刘璐/vue3/hello-vue3/node_modules/ant-design-vue/es/form-model/Form.js"],"names":["_defineProperty","_extends","PropTypes","classNames","ColProps","isRegExp","warning","FormItem","initDefaultProps","getListeners","ConfigConsumerProps","FormProps","layout","oneOf","labelCol","shape","loose","wrapperCol","colon","bool","labelAlign","prefixCls","string","hideRequiredMark","model","object","rules","validateMessages","any","validateOnRuleChange","ValidationRule","message","oneOfType","func","type","required","boolean","whitespace","len","number","min","max","String","arrayOf","pattern","custom","transform","validator","Form","name","props","Item","created","fields","provide","FormContext","inject","configProvider","_default","watch","validate","computed","vertical","methods","addField","field","push","removeField","prop","splice","indexOf","onSubmit","e","submit","preventDefault","$emit","resetFields","forEach","resetField","clearValidate","arguments","length","undefined","filter","callback","_this","promise","window","Promise","resolve","reject","valid","count","invalidFields","validateField","cb","concat","render","_classNames","h","customizePrefixCls","$slots","getPrefixCls","formClassName","on"],"mappings":"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","sourcesContent":["import _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _extends from 'babel-runtime/helpers/extends';\nimport PropTypes from '../_util/vue-types';\nimport classNames from 'classnames';\nimport { ColProps } from '../grid/Col';\nimport isRegExp from 'lodash/isRegExp';\nimport warning from '../_util/warning';\nimport FormItem from './FormItem';\nimport { initDefaultProps, getListeners } from '../_util/props-util';\nimport { ConfigConsumerProps } from '../config-provider/configConsumerProps';\n\nexport var FormProps = {\n  layout: PropTypes.oneOf(['horizontal', 'inline', 'vertical']),\n  labelCol: PropTypes.shape(ColProps).loose,\n  wrapperCol: PropTypes.shape(ColProps).loose,\n  colon: PropTypes.bool,\n  labelAlign: PropTypes.oneOf(['left', 'right']),\n  prefixCls: PropTypes.string,\n  hideRequiredMark: PropTypes.bool,\n  model: PropTypes.object,\n  rules: PropTypes.object,\n  validateMessages: PropTypes.any,\n  validateOnRuleChange: PropTypes.bool\n};\n\nexport var ValidationRule = {\n  /** validation error message */\n  message: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  /** built-in validation type, available options: https://github.com/yiminghe/async-validator#type */\n  type: PropTypes.string,\n  /** indicates whether field is required */\n  required: PropTypes.boolean,\n  /** treat required fields that only contain whitespace as errors */\n  whitespace: PropTypes.boolean,\n  /** validate the exact length of a field */\n  len: PropTypes.number,\n  /** validate the min length of a field */\n  min: PropTypes.number,\n  /** validate the max length of a field */\n  max: PropTypes.number,\n  /** validate the value from a list of possible values */\n  'enum': PropTypes.oneOfType([String, PropTypes.arrayOf(String)]),\n  /** validate from a regular expression */\n  pattern: PropTypes.custom(isRegExp),\n  /** transform a value before validation */\n  transform: PropTypes.func,\n  /** custom validate function (Note: callback must be called) */\n  validator: PropTypes.func\n};\n\nvar Form = {\n  name: 'AFormModel',\n  props: initDefaultProps(FormProps, {\n    layout: 'horizontal',\n    hideRequiredMark: false,\n    colon: true,\n    validateOnRuleChange: false\n  }),\n  Item: FormItem,\n  created: function created() {\n    this.fields = [];\n  },\n  provide: function provide() {\n    return {\n      FormContext: this\n    };\n  },\n\n  inject: {\n    configProvider: { 'default': function _default() {\n        return ConfigConsumerProps;\n      } }\n  },\n  watch: {\n    rules: function rules() {\n      if (this.validateOnRuleChange) {\n        this.validate(function () {});\n      }\n    }\n  },\n  computed: {\n    vertical: function vertical() {\n      return this.layout === 'vertical';\n    }\n  },\n  methods: {\n    addField: function addField(field) {\n      if (field) {\n        this.fields.push(field);\n      }\n    },\n    removeField: function removeField(field) {\n      if (field.prop) {\n        this.fields.splice(this.fields.indexOf(field), 1);\n      }\n    },\n    onSubmit: function onSubmit(e) {\n      if (!getListeners(this).submit) {\n        e.preventDefault();\n      } else {\n        this.$emit('submit', e);\n      }\n    },\n    resetFields: function resetFields() {\n      if (!this.model) {\n        warning(false, 'FormModel', 'model is required for resetFields to work.');\n        return;\n      }\n      this.fields.forEach(function (field) {\n        field.resetField();\n      });\n    },\n    clearValidate: function clearValidate() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      var fields = props.length ? typeof props === 'string' ? this.fields.filter(function (field) {\n        return props === field.prop;\n      }) : this.fields.filter(function (field) {\n        return props.indexOf(field.prop) > -1;\n      }) : this.fields;\n      fields.forEach(function (field) {\n        field.clearValidate();\n      });\n    },\n    validate: function validate(callback) {\n      var _this = this;\n\n      if (!this.model) {\n        warning(false, 'FormModel', 'model is required for resetFields to work.');\n        return;\n      }\n      var promise = void 0;\n      // if no callback, return promise\n      if (typeof callback !== 'function' && window.Promise) {\n        promise = new window.Promise(function (resolve, reject) {\n          callback = function callback(valid) {\n            valid ? resolve(valid) : reject(valid);\n          };\n        });\n      }\n      var valid = true;\n      var count = 0;\n      // 如果需要验证的fields为空，调用验证时立刻返回callback\n      if (this.fields.length === 0 && callback) {\n        callback(true);\n      }\n      var invalidFields = {};\n      this.fields.forEach(function (field) {\n        field.validate('', function (message, field) {\n          if (message) {\n            valid = false;\n          }\n          invalidFields = _extends({}, invalidFields, field);\n          if (typeof callback === 'function' && ++count === _this.fields.length) {\n            callback(valid, invalidFields);\n          }\n        });\n      });\n      if (promise) {\n        return promise;\n      }\n    },\n    validateField: function validateField(props, cb) {\n      props = [].concat(props);\n      var fields = this.fields.filter(function (field) {\n        return props.indexOf(field.prop) !== -1;\n      });\n      if (!fields.length) {\n        warning(false, 'FormModel', 'please pass correct props!');\n        return;\n      }\n      fields.forEach(function (field) {\n        field.validate('', cb);\n      });\n    }\n  },\n\n  render: function render() {\n    var _classNames;\n\n    var h = arguments[0];\n    var customizePrefixCls = this.prefixCls,\n        hideRequiredMark = this.hideRequiredMark,\n        layout = this.layout,\n        onSubmit = this.onSubmit,\n        $slots = this.$slots;\n\n    var getPrefixCls = this.configProvider.getPrefixCls;\n    var prefixCls = getPrefixCls('form', customizePrefixCls);\n\n    var formClassName = classNames(prefixCls, (_classNames = {}, _defineProperty(_classNames, prefixCls + '-horizontal', layout === 'horizontal'), _defineProperty(_classNames, prefixCls + '-vertical', layout === 'vertical'), _defineProperty(_classNames, prefixCls + '-inline', layout === 'inline'), _defineProperty(_classNames, prefixCls + '-hide-required-mark', hideRequiredMark), _classNames));\n    return h(\n      'form',\n      {\n        on: {\n          'submit': onSubmit\n        },\n        'class': formClassName },\n      [$slots['default']]\n    );\n  }\n};\n\nexport default Form;"]},"metadata":{},"sourceType":"module"}