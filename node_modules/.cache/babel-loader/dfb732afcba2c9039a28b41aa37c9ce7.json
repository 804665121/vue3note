{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\n\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"h1\", null, \"vue3中Watch监视的使用\", -1\n/* HOISTED */\n);\n\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1\n/* HOISTED */\n);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_hoisted_1, _createElementVNode(\"h2\", null, \"求和:\" + _toDisplayString($setup.sum), 1\n  /* TEXT */\n  ), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = $event => $setup.sum++)\n  }, \"点为+1\"), _hoisted_2, _createElementVNode(\"h2\", null, _toDisplayString($setup.msg), 1\n  /* TEXT */\n  ), _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = $event => $setup.msg += 1)\n  }, \"点为+1\"), _hoisted_3, _createElementVNode(\"h2\", null, _toDisplayString($setup.person.name), 1\n  /* TEXT */\n  ), _createElementVNode(\"h2\", null, _toDisplayString($setup.person.age), 1\n  /* TEXT */\n  ), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = $event => $setup.person.age++)\n  }, \"点为+1\"), _hoisted_4, _createElementVNode(\"h2\", null, \"监听深层数据:\" + _toDisplayString($setup.person1.job.j1), 1\n  /* TEXT */\n  ), _createElementVNode(\"button\", {\n    onClick: _cache[3] || (_cache[3] = $event => $setup.person1.job.j1++)\n  }, \"点为+1\")]);\n}","map":{"version":3,"mappings":";;gCAEIA,oBAAwB,IAAxB,EAAwB,IAAxB,EAAI,iBAAJ,EAAmB;AAAA;AAAnB;;gCAKAA,oBAAM,IAAN,EAAM,IAAN,EAAM,IAAN,EAAM;AAAA;AAAN;;gCAIAA,oBAAM,IAAN,EAAM,IAAN,EAAM,IAAN,EAAM;AAAA;AAAN;;gCAMAA,oBAAM,IAAN,EAAM,IAAN,EAAM,IAAN,EAAM;AAAA;AAAN;;;uBAhBFC,oBAoBM,KApBN,EAoBM,IApBN,EAoBM,CAnBJC,UAmBI,EAjBJF,oBAAqB,IAArB,EAAqB,IAArB,EAAI,QAAGG,iBAAGC,UAAH,CAAP,EAAa;AAAA;AAAb,GAiBI,EAhBJJ,oBAAoC,QAApC,EAAoC;AAA3BK,WAAK,sCAAED,YAAF;AAAsB,GAApC,EAAuB,MAAvB,CAgBI,EAdJE,UAcI,EAbJN,oBAAkB,IAAlB,EAAkB,IAAlB,EAAkBG,iBAAXC,UAAW,CAAlB,EAAU;AAAA;AAAV,GAaI,EAZJJ,oBAAuC,QAAvC,EAAuC;AAA9BK,WAAK,sCAAED,cAAG,CAAL;AAAyB,GAAvC,EAA0B,MAA1B,CAYI,EAVJG,UAUI,EARJP,oBAA0B,IAA1B,EAA0B,IAA1B,EAA0BG,iBAAnBC,cAAOI,IAAY,CAA1B,EAAkB;AAAA;AAAlB,GAQI,EAPJR,oBAAyB,IAAzB,EAAyB,IAAzB,EAAyBG,iBAAlBC,cAAOK,GAAW,CAAzB,EAAiB;AAAA;AAAjB,GAOI,EANJT,oBAA2C,QAA3C,EAA2C;AAAlCK,WAAK,sCAAED,cAAOK,GAAP,EAAF;AAA6B,GAA3C,EAA8B,MAA9B,CAMI,EAJJC,UAII,EAFJV,oBAAoC,IAApC,EAAoC,IAApC,EAAI,YAAOG,iBAAGC,eAAQO,GAAR,CAAYC,EAAf,CAAX,EAA4B;AAAA;AAA5B,GAEI,EADJZ,oBAA+C,QAA/C,EAA+C;AAAtCK,WAAK,sCAAED,eAAQO,GAAR,CAAYC,EAAZ,EAAF;AAAiC,GAA/C,EAAkC,MAAlC,CACI,CApBN","names":["_createElementVNode","_createElementBlock","_hoisted_1","_toDisplayString","$setup","onClick","_hoisted_2","_hoisted_3","name","age","_hoisted_4","job","j1"],"sourceRoot":"","sources":["/Users/liulu/刘璐/vue3/hello-vue3/src/components/Watch.vue"],"sourcesContent":["<template>\n  <div>\n    <h1>vue3中Watch监视的使用</h1>\n\n    <h2>求和:{{ sum }}</h2>\n    <button @click=\"sum++\">点为+1</button>\n\n    <hr />\n    <h2>{{ msg }}</h2>\n    <button @click=\"msg += 1\">点为+1</button>\n\n    <hr />\n\n    <h2>{{ person.name }}</h2>\n    <h2>{{ person.age }}</h2>\n    <button @click=\"person.age++\">点为+1</button>\n\n    <hr />\n\n    <h2>监听深层数据:{{ person1.job.j1 }}</h2>\n    <button @click=\"person1.job.j1++\">点为+1</button>\n  </div>\n</template>\n\n<script>\nimport { reactive, ref, watch } from \"vue\";\nexport default {\n  name: \"watch\",\n\n  watch: {\n    //vue2 简写使用方式\n    // sum(newVal, oldVal) {\n    //   console.log(oldVal, newVal);\n    // },\n    // sum: {  //完整写法\n    //   deep: true, //是否开启深度监测\n    //   handler(newVal, oldVal) {\n    //     console.log(oldVal, newVal);\n    //   },\n    // },\n  },\n  setup() {\n    let sum = ref(1);\n\n    let msg = ref(\"hello\");\n\n    let person = reactive({\n      name: \"zangsan\",\n      age: 19,\n      job: {\n        j1: 20,\n      },\n    });\n\n    let person1 = ref({\n      name: \"zangsan\",\n      age: 19,\n      job: {\n        j1: 20,\n      },\n    });\n\n    // watch(person1.value, (newVal, oldVal) => {\n    //   console.log(newVal, oldVal, \"oldVal\");\n    // });\n\n     watch(person1, (newVal, oldVal) => {\n      console.log(newVal, oldVal, \"oldVal\");\n    },{deep:true});\n\n    // 情况1:监视 ref 定义的一个响应式数据 immediate 初始化的时候执行一次\n    watch(\n      sum,\n      (newVal, oldVal) => {\n        console.log(newVal, oldVal, \"sum修改了\");\n      },\n      { immediate: true }\n    );\n\n    // 情况2: 监视多个值的情况\n    // watch([sum, msg], (newVal, oldVal) => {\n    //   console.log(newVal, oldVal, \"sum修改了\");\n    // });\n    /**\n     *情况3: 注意点1:监视reactive 定义的响应式数据的全部属性  使用watch监测的时候无法定义到旧的值\n     *      注意点2:强制开启了deep深度监视(deep无法关闭)\n     *  */\n    // watch(person, (newVal, oldVal) => {\n    //   console.log(newVal, oldVal, \"person 监视的值\");\n    // });\n\n    /** 情况4\n     *监视reactive 定义的响应式数据的某个属性\n     */\n    // watch(\n    //   () => person.age,\n    //   (newVal, oldVal) => {\n    //     console.log(newVal, oldVal, \"person.age 监视的值\");\n    //   }\n    // );\n    /**\n     * 情况5\n     * 监视reactive 定义的响应式数据的某些属性\n     */\n\n    // watch([() => person.age, () => person.name], (newVal, oldVal) => {\n    //   console.log(newVal, oldVal, \"person.age 监视的值\");\n    // });\n\n    // 特殊情况\n\n    watch(\n      () => person.job,\n      (newVal, oldVal) => {\n        console.log(newVal, oldVal, \"person.job 监视的值\");\n      },\n      { deep: true }\n    ); //此处由于监视的是reactive定义的对象中的某个属性,所有deep配置有效果\n\n    return {\n        person1,\n      sum,\n      msg,\n      person,\n    };\n  },\n};\n</script>\n\n<style>\n</style>"]},"metadata":{},"sourceType":"module"}