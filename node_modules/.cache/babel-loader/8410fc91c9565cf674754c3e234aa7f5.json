{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport _extends from 'babel-runtime/helpers/extends';\nimport _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport * as moment from 'moment';\nimport omit from 'lodash/omit';\nimport MonthCalendar from '../vc-calendar/src/MonthCalendar';\nimport VcDatePicker from '../vc-calendar/src/Picker';\nimport classNames from 'classnames';\nimport Icon from '../icon';\nimport { ConfigConsumerProps } from '../config-provider/configConsumerProps';\nimport interopDefault from '../_util/interopDefault';\nimport BaseMixin from '../_util/BaseMixin';\nimport { hasProp, getOptionProps, initDefaultProps, mergeProps, getComponentFromProp, isValidElement, getListeners } from '../_util/props-util';\nimport { cloneElement } from '../_util/vnode';\nimport { formatDate } from './utils'; // export const PickerProps = {\n//   value?: moment.Moment;\n//   prefixCls: string;\n// }\n\nfunction noop() {}\n\nexport default function createPicker(TheCalendar, props) {\n  return {\n    props: initDefaultProps(props, {\n      allowClear: true,\n      showToday: true\n    }),\n    mixins: [BaseMixin],\n    model: {\n      prop: 'value',\n      event: 'change'\n    },\n    inject: {\n      configProvider: {\n        'default': function _default() {\n          return ConfigConsumerProps;\n        }\n      }\n    },\n    data: function data() {\n      var value = this.value || this.defaultValue;\n\n      if (value && !interopDefault(moment).isMoment(value)) {\n        throw new Error('The value/defaultValue of DatePicker or MonthPicker must be ' + 'a moment object');\n      }\n\n      return {\n        sValue: value,\n        showDate: value,\n        _open: !!this.open\n      };\n    },\n    watch: {\n      open: function open(val) {\n        var props = getOptionProps(this);\n        var state = {};\n        state._open = val;\n\n        if ('value' in props && !val && props.value !== this.showDate) {\n          state.showDate = props.value;\n        }\n\n        this.setState(state);\n      },\n      value: function value(val) {\n        var state = {};\n        state.sValue = val;\n\n        if (val !== this.sValue) {\n          state.showDate = val;\n        }\n\n        this.setState(state);\n      },\n      _open: function _open(val, oldVal) {\n        var _this = this;\n\n        this.$nextTick(function () {\n          if (!hasProp(_this, 'open') && oldVal && !val) {\n            _this.focus();\n          }\n        });\n      }\n    },\n    methods: {\n      clearSelection: function clearSelection(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.handleChange(null);\n      },\n      handleChange: function handleChange(value) {\n        if (!hasProp(this, 'value')) {\n          this.setState({\n            sValue: value,\n            showDate: value\n          });\n        }\n\n        this.$emit('change', value, formatDate(value, this.format));\n      },\n      handleCalendarChange: function handleCalendarChange(value) {\n        this.setState({\n          showDate: value\n        });\n      },\n      handleOpenChange: function handleOpenChange(open) {\n        var props = getOptionProps(this);\n\n        if (!('open' in props)) {\n          this.setState({\n            _open: open\n          });\n        }\n\n        this.$emit('openChange', open);\n      },\n      focus: function focus() {\n        this.$refs.input.focus();\n      },\n      blur: function blur() {\n        this.$refs.input.blur();\n      },\n      renderFooter: function renderFooter() {\n        var h = this.$createElement;\n        var $scopedSlots = this.$scopedSlots,\n            $slots = this.$slots,\n            prefixCls = this._prefixCls;\n        var renderExtraFooter = this.renderExtraFooter || $scopedSlots.renderExtraFooter || $slots.renderExtraFooter;\n        return renderExtraFooter ? h('div', {\n          'class': prefixCls + '-footer-extra'\n        }, [typeof renderExtraFooter === 'function' ? renderExtraFooter.apply(undefined, arguments) : renderExtraFooter]) : null;\n      },\n      onMouseEnter: function onMouseEnter(e) {\n        this.$emit('mouseenter', e);\n      },\n      onMouseLeave: function onMouseLeave(e) {\n        this.$emit('mouseleave', e);\n      }\n    },\n    render: function render() {\n      var _classNames,\n          _this2 = this;\n\n      var h = arguments[0];\n      var $scopedSlots = this.$scopedSlots;\n      var _$data = this.$data,\n          value = _$data.sValue,\n          showDate = _$data.showDate,\n          open = _$data._open;\n      var suffixIcon = getComponentFromProp(this, 'suffixIcon');\n      suffixIcon = Array.isArray(suffixIcon) ? suffixIcon[0] : suffixIcon;\n      var listeners = getListeners(this);\n      var _listeners$panelChang = listeners.panelChange,\n          panelChange = _listeners$panelChang === undefined ? noop : _listeners$panelChang,\n          _listeners$focus = listeners.focus,\n          focus = _listeners$focus === undefined ? noop : _listeners$focus,\n          _listeners$blur = listeners.blur,\n          blur = _listeners$blur === undefined ? noop : _listeners$blur,\n          _listeners$ok = listeners.ok,\n          ok = _listeners$ok === undefined ? noop : _listeners$ok;\n      var props = getOptionProps(this);\n      var customizePrefixCls = props.prefixCls,\n          locale = props.locale,\n          localeCode = props.localeCode,\n          inputReadOnly = props.inputReadOnly;\n      var getPrefixCls = this.configProvider.getPrefixCls;\n      var prefixCls = getPrefixCls('calendar', customizePrefixCls);\n      this._prefixCls = prefixCls;\n      var dateRender = props.dateRender || $scopedSlots.dateRender;\n      var monthCellContentRender = props.monthCellContentRender || $scopedSlots.monthCellContentRender;\n      var placeholder = 'placeholder' in props ? props.placeholder : locale.lang.placeholder;\n      var disabledTime = props.showTime ? props.disabledTime : null;\n      var calendarClassName = classNames((_classNames = {}, _defineProperty(_classNames, prefixCls + '-time', props.showTime), _defineProperty(_classNames, prefixCls + '-month', MonthCalendar === TheCalendar), _classNames));\n\n      if (value && localeCode) {\n        value.locale(localeCode);\n      }\n\n      var pickerProps = {\n        props: {},\n        on: {}\n      };\n      var calendarProps = {\n        props: {},\n        on: {}\n      };\n      var pickerStyle = {};\n\n      if (props.showTime) {\n        // fix https://github.com/ant-design/ant-design/issues/1902\n        calendarProps.on.select = this.handleChange;\n        pickerStyle.minWidth = '195px';\n      } else {\n        pickerProps.on.change = this.handleChange;\n      }\n\n      if ('mode' in props) {\n        calendarProps.props.mode = props.mode;\n      }\n\n      var theCalendarProps = mergeProps(calendarProps, {\n        props: {\n          disabledDate: props.disabledDate,\n          disabledTime: disabledTime,\n          locale: locale.lang,\n          timePicker: props.timePicker,\n          defaultValue: props.defaultPickerValue || interopDefault(moment)(),\n          dateInputPlaceholder: placeholder,\n          prefixCls: prefixCls,\n          dateRender: dateRender,\n          format: props.format,\n          showToday: props.showToday,\n          monthCellContentRender: monthCellContentRender,\n          renderFooter: this.renderFooter,\n          value: showDate,\n          inputReadOnly: inputReadOnly\n        },\n        on: {\n          ok: ok,\n          panelChange: panelChange,\n          change: this.handleCalendarChange\n        },\n        'class': calendarClassName,\n        scopedSlots: $scopedSlots\n      });\n      var calendar = h(TheCalendar, theCalendarProps);\n      var clearIcon = !props.disabled && props.allowClear && value ? h(Icon, {\n        attrs: {\n          type: 'close-circle',\n          theme: 'filled'\n        },\n        'class': prefixCls + '-picker-clear',\n        on: {\n          'click': this.clearSelection\n        }\n      }) : null;\n      var inputIcon = suffixIcon && (isValidElement(suffixIcon) ? cloneElement(suffixIcon, {\n        'class': prefixCls + '-picker-icon'\n      }) : h('span', {\n        'class': prefixCls + '-picker-icon'\n      }, [suffixIcon])) || h(Icon, {\n        attrs: {\n          type: 'calendar'\n        },\n        'class': prefixCls + '-picker-icon'\n      });\n\n      var input = function input(_ref) {\n        var inputValue = _ref.value;\n        return h('div', [h('input', {\n          ref: 'input',\n          attrs: {\n            disabled: props.disabled,\n            readOnly: true,\n            placeholder: placeholder,\n            tabIndex: props.tabIndex,\n            name: _this2.name\n          },\n          on: {\n            'focus': focus,\n            'blur': blur\n          },\n          domProps: {\n            'value': formatDate(inputValue, _this2.format)\n          },\n          'class': props.pickerInputClass\n        }), clearIcon, inputIcon]);\n      };\n\n      var vcDatePickerProps = {\n        props: _extends({}, props, pickerProps.props, {\n          calendar: calendar,\n          value: value,\n          prefixCls: prefixCls + '-picker-container'\n        }),\n        on: _extends({}, omit(listeners, 'change'), pickerProps.on, {\n          open: open,\n          onOpenChange: this.handleOpenChange\n        }),\n        style: props.popupStyle,\n        scopedSlots: _extends({\n          'default': input\n        }, $scopedSlots)\n      };\n      return h('span', {\n        'class': props.pickerClass,\n        style: pickerStyle // tabIndex={props.disabled ? -1 : 0}\n        // onFocus={focus}\n        // onBlur={blur}\n        ,\n        on: {\n          'mouseenter': this.onMouseEnter,\n          'mouseleave': this.onMouseLeave\n        }\n      }, [h(VcDatePicker, vcDatePickerProps)]);\n    }\n  };\n}","map":{"version":3,"sources":["/Users/liulu/刘璐/vue3/hello-vue3/node_modules/ant-design-vue/es/date-picker/createPicker.js"],"names":["_extends","_defineProperty","moment","omit","MonthCalendar","VcDatePicker","classNames","Icon","ConfigConsumerProps","interopDefault","BaseMixin","hasProp","getOptionProps","initDefaultProps","mergeProps","getComponentFromProp","isValidElement","getListeners","cloneElement","formatDate","noop","createPicker","TheCalendar","props","allowClear","showToday","mixins","model","prop","event","inject","configProvider","_default","data","value","defaultValue","isMoment","Error","sValue","showDate","_open","open","watch","val","state","setState","oldVal","_this","$nextTick","focus","methods","clearSelection","e","preventDefault","stopPropagation","handleChange","$emit","format","handleCalendarChange","handleOpenChange","$refs","input","blur","renderFooter","h","$createElement","$scopedSlots","$slots","prefixCls","_prefixCls","renderExtraFooter","apply","undefined","arguments","onMouseEnter","onMouseLeave","render","_classNames","_this2","_$data","$data","suffixIcon","Array","isArray","listeners","_listeners$panelChang","panelChange","_listeners$focus","_listeners$blur","_listeners$ok","ok","customizePrefixCls","locale","localeCode","inputReadOnly","getPrefixCls","dateRender","monthCellContentRender","placeholder","lang","disabledTime","showTime","calendarClassName","pickerProps","on","calendarProps","pickerStyle","select","minWidth","change","mode","theCalendarProps","disabledDate","timePicker","defaultPickerValue","dateInputPlaceholder","scopedSlots","calendar","clearIcon","disabled","attrs","type","theme","inputIcon","_ref","inputValue","ref","readOnly","tabIndex","name","domProps","pickerInputClass","vcDatePickerProps","onOpenChange","style","popupStyle","pickerClass"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport * as moment from 'moment';\nimport omit from 'lodash/omit';\nimport MonthCalendar from '../vc-calendar/src/MonthCalendar';\nimport VcDatePicker from '../vc-calendar/src/Picker';\nimport classNames from 'classnames';\nimport Icon from '../icon';\nimport { ConfigConsumerProps } from '../config-provider/configConsumerProps';\nimport interopDefault from '../_util/interopDefault';\nimport BaseMixin from '../_util/BaseMixin';\nimport { hasProp, getOptionProps, initDefaultProps, mergeProps, getComponentFromProp, isValidElement, getListeners } from '../_util/props-util';\nimport { cloneElement } from '../_util/vnode';\nimport { formatDate } from './utils';\n\n// export const PickerProps = {\n//   value?: moment.Moment;\n//   prefixCls: string;\n// }\nfunction noop() {}\nexport default function createPicker(TheCalendar, props) {\n  return {\n    props: initDefaultProps(props, {\n      allowClear: true,\n      showToday: true\n    }),\n    mixins: [BaseMixin],\n    model: {\n      prop: 'value',\n      event: 'change'\n    },\n    inject: {\n      configProvider: { 'default': function _default() {\n          return ConfigConsumerProps;\n        } }\n    },\n    data: function data() {\n      var value = this.value || this.defaultValue;\n      if (value && !interopDefault(moment).isMoment(value)) {\n        throw new Error('The value/defaultValue of DatePicker or MonthPicker must be ' + 'a moment object');\n      }\n      return {\n        sValue: value,\n        showDate: value,\n        _open: !!this.open\n      };\n    },\n\n    watch: {\n      open: function open(val) {\n        var props = getOptionProps(this);\n        var state = {};\n        state._open = val;\n        if ('value' in props && !val && props.value !== this.showDate) {\n          state.showDate = props.value;\n        }\n        this.setState(state);\n      },\n      value: function value(val) {\n        var state = {};\n        state.sValue = val;\n        if (val !== this.sValue) {\n          state.showDate = val;\n        }\n        this.setState(state);\n      },\n      _open: function _open(val, oldVal) {\n        var _this = this;\n\n        this.$nextTick(function () {\n          if (!hasProp(_this, 'open') && oldVal && !val) {\n            _this.focus();\n          }\n        });\n      }\n    },\n    methods: {\n      clearSelection: function clearSelection(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.handleChange(null);\n      },\n      handleChange: function handleChange(value) {\n        if (!hasProp(this, 'value')) {\n          this.setState({\n            sValue: value,\n            showDate: value\n          });\n        }\n        this.$emit('change', value, formatDate(value, this.format));\n      },\n      handleCalendarChange: function handleCalendarChange(value) {\n        this.setState({ showDate: value });\n      },\n      handleOpenChange: function handleOpenChange(open) {\n        var props = getOptionProps(this);\n        if (!('open' in props)) {\n          this.setState({ _open: open });\n        }\n        this.$emit('openChange', open);\n      },\n      focus: function focus() {\n        this.$refs.input.focus();\n      },\n      blur: function blur() {\n        this.$refs.input.blur();\n      },\n      renderFooter: function renderFooter() {\n        var h = this.$createElement;\n        var $scopedSlots = this.$scopedSlots,\n            $slots = this.$slots,\n            prefixCls = this._prefixCls;\n\n        var renderExtraFooter = this.renderExtraFooter || $scopedSlots.renderExtraFooter || $slots.renderExtraFooter;\n        return renderExtraFooter ? h(\n          'div',\n          { 'class': prefixCls + '-footer-extra' },\n          [typeof renderExtraFooter === 'function' ? renderExtraFooter.apply(undefined, arguments) : renderExtraFooter]\n        ) : null;\n      },\n      onMouseEnter: function onMouseEnter(e) {\n        this.$emit('mouseenter', e);\n      },\n      onMouseLeave: function onMouseLeave(e) {\n        this.$emit('mouseleave', e);\n      }\n    },\n\n    render: function render() {\n      var _classNames,\n          _this2 = this;\n\n      var h = arguments[0];\n      var $scopedSlots = this.$scopedSlots;\n      var _$data = this.$data,\n          value = _$data.sValue,\n          showDate = _$data.showDate,\n          open = _$data._open;\n\n      var suffixIcon = getComponentFromProp(this, 'suffixIcon');\n      suffixIcon = Array.isArray(suffixIcon) ? suffixIcon[0] : suffixIcon;\n      var listeners = getListeners(this);\n      var _listeners$panelChang = listeners.panelChange,\n          panelChange = _listeners$panelChang === undefined ? noop : _listeners$panelChang,\n          _listeners$focus = listeners.focus,\n          focus = _listeners$focus === undefined ? noop : _listeners$focus,\n          _listeners$blur = listeners.blur,\n          blur = _listeners$blur === undefined ? noop : _listeners$blur,\n          _listeners$ok = listeners.ok,\n          ok = _listeners$ok === undefined ? noop : _listeners$ok;\n\n      var props = getOptionProps(this);\n\n      var customizePrefixCls = props.prefixCls,\n          locale = props.locale,\n          localeCode = props.localeCode,\n          inputReadOnly = props.inputReadOnly;\n\n      var getPrefixCls = this.configProvider.getPrefixCls;\n      var prefixCls = getPrefixCls('calendar', customizePrefixCls);\n      this._prefixCls = prefixCls;\n\n      var dateRender = props.dateRender || $scopedSlots.dateRender;\n      var monthCellContentRender = props.monthCellContentRender || $scopedSlots.monthCellContentRender;\n      var placeholder = 'placeholder' in props ? props.placeholder : locale.lang.placeholder;\n\n      var disabledTime = props.showTime ? props.disabledTime : null;\n\n      var calendarClassName = classNames((_classNames = {}, _defineProperty(_classNames, prefixCls + '-time', props.showTime), _defineProperty(_classNames, prefixCls + '-month', MonthCalendar === TheCalendar), _classNames));\n\n      if (value && localeCode) {\n        value.locale(localeCode);\n      }\n\n      var pickerProps = { props: {}, on: {} };\n      var calendarProps = { props: {}, on: {} };\n      var pickerStyle = {};\n      if (props.showTime) {\n        // fix https://github.com/ant-design/ant-design/issues/1902\n        calendarProps.on.select = this.handleChange;\n        pickerStyle.minWidth = '195px';\n      } else {\n        pickerProps.on.change = this.handleChange;\n      }\n      if ('mode' in props) {\n        calendarProps.props.mode = props.mode;\n      }\n      var theCalendarProps = mergeProps(calendarProps, {\n        props: {\n          disabledDate: props.disabledDate,\n          disabledTime: disabledTime,\n          locale: locale.lang,\n          timePicker: props.timePicker,\n          defaultValue: props.defaultPickerValue || interopDefault(moment)(),\n          dateInputPlaceholder: placeholder,\n          prefixCls: prefixCls,\n          dateRender: dateRender,\n          format: props.format,\n          showToday: props.showToday,\n          monthCellContentRender: monthCellContentRender,\n          renderFooter: this.renderFooter,\n          value: showDate,\n          inputReadOnly: inputReadOnly\n        },\n        on: {\n          ok: ok,\n          panelChange: panelChange,\n          change: this.handleCalendarChange\n        },\n        'class': calendarClassName,\n        scopedSlots: $scopedSlots\n      });\n      var calendar = h(TheCalendar, theCalendarProps);\n\n      var clearIcon = !props.disabled && props.allowClear && value ? h(Icon, {\n        attrs: {\n          type: 'close-circle',\n\n          theme: 'filled'\n        },\n        'class': prefixCls + '-picker-clear',\n        on: {\n          'click': this.clearSelection\n        }\n      }) : null;\n\n      var inputIcon = suffixIcon && (isValidElement(suffixIcon) ? cloneElement(suffixIcon, {\n        'class': prefixCls + '-picker-icon'\n      }) : h(\n        'span',\n        { 'class': prefixCls + '-picker-icon' },\n        [suffixIcon]\n      )) || h(Icon, {\n        attrs: { type: 'calendar' },\n        'class': prefixCls + '-picker-icon' });\n\n      var input = function input(_ref) {\n        var inputValue = _ref.value;\n        return h('div', [h('input', {\n          ref: 'input',\n          attrs: { disabled: props.disabled,\n\n            readOnly: true,\n\n            placeholder: placeholder,\n\n            tabIndex: props.tabIndex,\n            name: _this2.name\n          },\n          on: {\n            'focus': focus,\n            'blur': blur\n          },\n          domProps: {\n            'value': formatDate(inputValue, _this2.format)\n          },\n          'class': props.pickerInputClass }), clearIcon, inputIcon]);\n      };\n      var vcDatePickerProps = {\n        props: _extends({}, props, pickerProps.props, {\n          calendar: calendar,\n          value: value,\n          prefixCls: prefixCls + '-picker-container'\n        }),\n        on: _extends({}, omit(listeners, 'change'), pickerProps.on, {\n          open: open,\n          onOpenChange: this.handleOpenChange\n        }),\n        style: props.popupStyle,\n        scopedSlots: _extends({ 'default': input }, $scopedSlots)\n      };\n      return h(\n        'span',\n        {\n          'class': props.pickerClass,\n          style: pickerStyle\n          // tabIndex={props.disabled ? -1 : 0}\n          // onFocus={focus}\n          // onBlur={blur}\n          , on: {\n            'mouseenter': this.onMouseEnter,\n            'mouseleave': this.onMouseLeave\n          }\n        },\n        [h(VcDatePicker, vcDatePickerProps)]\n      );\n    }\n  };\n}"]},"metadata":{},"sourceType":"module"}