{"ast":null,"code":"import PropTypes from '../../_util/vue-types';\nimport BaseMixin from '../../_util/BaseMixin';\nimport { getOptionProps, hasProp, getEvents, getStyle } from '../../_util/props-util';\nimport { cloneElement } from '../../_util/vnode';\nimport createChainedFunction from '../../_util/createChainedFunction';\nimport KeyCode from '../../_util/KeyCode';\nimport placements from './picker/placements';\nimport Trigger from '../../vc-trigger';\nimport moment from 'moment';\nimport isNil from 'lodash/isNil';\nvar TimeType = {\n  validator: function validator(value) {\n    if (Array.isArray(value)) {\n      return value.length === 0 || value.findIndex(function (val) {\n        return !isNil(val) && !moment.isMoment(val);\n      }) === -1;\n    } else {\n      return isNil(value) || moment.isMoment(value);\n    }\n  }\n};\nvar Picker = {\n  name: 'Picker',\n  props: {\n    animation: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n    disabled: PropTypes.bool,\n    transitionName: PropTypes.string,\n    format: PropTypes.oneOfType([PropTypes.string, PropTypes.array, PropTypes.func]),\n    // onChange: PropTypes.func,\n    // onOpenChange: PropTypes.func,\n    children: PropTypes.func,\n    getCalendarContainer: PropTypes.func,\n    calendar: PropTypes.any,\n    open: PropTypes.bool,\n    defaultOpen: PropTypes.bool.def(false),\n    prefixCls: PropTypes.string.def('rc-calendar-picker'),\n    placement: PropTypes.any.def('bottomLeft'),\n    value: TimeType,\n    defaultValue: TimeType,\n    align: PropTypes.object.def(function () {\n      return {};\n    }),\n    dropdownClassName: PropTypes.string,\n    dateRender: PropTypes.func\n  },\n  mixins: [BaseMixin],\n  data: function data() {\n    var props = this.$props;\n    var open = void 0;\n\n    if (hasProp(this, 'open')) {\n      open = props.open;\n    } else {\n      open = props.defaultOpen;\n    }\n\n    var value = props.value || props.defaultValue;\n    return {\n      sOpen: open,\n      sValue: value\n    };\n  },\n  watch: {\n    value: function value(val) {\n      this.setState({\n        sValue: val\n      });\n    },\n    open: function open(val) {\n      this.setState({\n        sOpen: val\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.preSOpen = this.sOpen;\n  },\n  updated: function updated() {\n    if (!this.preSOpen && this.sOpen) {\n      // setTimeout is for making sure saveCalendarRef happen before focusCalendar\n      this.focusTimeout = setTimeout(this.focusCalendar, 0);\n    }\n\n    this.preSOpen = this.sOpen;\n  },\n  beforeDestroy: function beforeDestroy() {\n    clearTimeout(this.focusTimeout);\n  },\n  methods: {\n    onCalendarKeyDown: function onCalendarKeyDown(event) {\n      if (event.keyCode === KeyCode.ESC) {\n        event.stopPropagation();\n        this.closeCalendar(this.focus);\n      }\n    },\n    onCalendarSelect: function onCalendarSelect(value) {\n      var cause = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var props = this.$props;\n\n      if (!hasProp(this, 'value')) {\n        this.setState({\n          sValue: value\n        });\n      }\n\n      var calendarProps = getOptionProps(props.calendar);\n\n      if (cause.source === 'keyboard' || cause.source === 'dateInputSelect' || !calendarProps.timePicker && cause.source !== 'dateInput' || cause.source === 'todayButton') {\n        this.closeCalendar(this.focus);\n      }\n\n      this.__emit('change', value);\n    },\n    onKeyDown: function onKeyDown(event) {\n      if (!this.sOpen && (event.keyCode === KeyCode.DOWN || event.keyCode === KeyCode.ENTER)) {\n        this.openCalendar();\n        event.preventDefault();\n      }\n    },\n    onCalendarOk: function onCalendarOk() {\n      this.closeCalendar(this.focus);\n    },\n    onCalendarClear: function onCalendarClear() {\n      this.closeCalendar(this.focus);\n    },\n    onCalendarBlur: function onCalendarBlur() {\n      this.setOpen(false);\n    },\n    onVisibleChange: function onVisibleChange(open) {\n      this.setOpen(open);\n    },\n    getCalendarElement: function getCalendarElement() {\n      var props = this.$props;\n      var calendarProps = getOptionProps(props.calendar);\n      var calendarEvents = getEvents(props.calendar);\n      var value = this.sValue;\n      var defaultValue = value;\n      var extraProps = {\n        ref: 'calendarInstance',\n        props: {\n          defaultValue: defaultValue || calendarProps.defaultValue,\n          selectedValue: value\n        },\n        on: {\n          keydown: this.onCalendarKeyDown,\n          ok: createChainedFunction(calendarEvents.ok, this.onCalendarOk),\n          select: createChainedFunction(calendarEvents.select, this.onCalendarSelect),\n          clear: createChainedFunction(calendarEvents.clear, this.onCalendarClear),\n          blur: createChainedFunction(calendarEvents.blur, this.onCalendarBlur)\n        }\n      };\n      return cloneElement(props.calendar, extraProps);\n    },\n    setOpen: function setOpen(open, callback) {\n      if (this.sOpen !== open) {\n        if (!hasProp(this, 'open')) {\n          this.setState({\n            sOpen: open\n          }, callback);\n        }\n\n        this.__emit('openChange', open);\n      }\n    },\n    openCalendar: function openCalendar(callback) {\n      this.setOpen(true, callback);\n    },\n    closeCalendar: function closeCalendar(callback) {\n      this.setOpen(false, callback);\n    },\n    focus: function focus() {\n      if (!this.sOpen) {\n        this.$el.focus();\n      }\n    },\n    focusCalendar: function focusCalendar() {\n      if (this.sOpen && this.calendarInstance && this.calendarInstance.componentInstance) {\n        this.calendarInstance.componentInstance.focus();\n      }\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    var props = getOptionProps(this);\n    var style = getStyle(this);\n    var prefixCls = props.prefixCls,\n        placement = props.placement,\n        getCalendarContainer = props.getCalendarContainer,\n        align = props.align,\n        animation = props.animation,\n        disabled = props.disabled,\n        dropdownClassName = props.dropdownClassName,\n        transitionName = props.transitionName;\n    var sValue = this.sValue,\n        sOpen = this.sOpen;\n    var children = this.$scopedSlots['default'];\n    var childrenState = {\n      value: sValue,\n      open: sOpen\n    };\n\n    if (this.sOpen || !this.calendarInstance) {\n      this.calendarInstance = this.getCalendarElement();\n    }\n\n    return h(Trigger, {\n      attrs: {\n        popupAlign: align,\n        builtinPlacements: placements,\n        popupPlacement: placement,\n        action: disabled && !sOpen ? [] : ['click'],\n        destroyPopupOnHide: true,\n        getPopupContainer: getCalendarContainer,\n        popupStyle: style,\n        popupAnimation: animation,\n        popupTransitionName: transitionName,\n        popupVisible: sOpen,\n        prefixCls: prefixCls,\n        popupClassName: dropdownClassName\n      },\n      on: {\n        'popupVisibleChange': this.onVisibleChange\n      }\n    }, [h('template', {\n      slot: 'popup'\n    }, [this.calendarInstance]), cloneElement(children(childrenState, props), {\n      on: {\n        keydown: this.onKeyDown\n      }\n    })]);\n  }\n};\nexport default Picker;","map":{"version":3,"sources":["/Users/liulu/刘璐/vue3/hello-vue3/node_modules/ant-design-vue/es/vc-calendar/src/Picker.js"],"names":["PropTypes","BaseMixin","getOptionProps","hasProp","getEvents","getStyle","cloneElement","createChainedFunction","KeyCode","placements","Trigger","moment","isNil","TimeType","validator","value","Array","isArray","length","findIndex","val","isMoment","Picker","name","props","animation","oneOfType","func","string","disabled","bool","transitionName","format","array","children","getCalendarContainer","calendar","any","open","defaultOpen","def","prefixCls","placement","defaultValue","align","object","dropdownClassName","dateRender","mixins","data","$props","sOpen","sValue","watch","setState","mounted","preSOpen","updated","focusTimeout","setTimeout","focusCalendar","beforeDestroy","clearTimeout","methods","onCalendarKeyDown","event","keyCode","ESC","stopPropagation","closeCalendar","focus","onCalendarSelect","cause","arguments","undefined","calendarProps","source","timePicker","__emit","onKeyDown","DOWN","ENTER","openCalendar","preventDefault","onCalendarOk","onCalendarClear","onCalendarBlur","setOpen","onVisibleChange","getCalendarElement","calendarEvents","extraProps","ref","selectedValue","on","keydown","ok","select","clear","blur","callback","$el","calendarInstance","componentInstance","render","h","style","$scopedSlots","childrenState","attrs","popupAlign","builtinPlacements","popupPlacement","action","destroyPopupOnHide","getPopupContainer","popupStyle","popupAnimation","popupTransitionName","popupVisible","popupClassName","slot"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,uBAAtB;AACA,OAAOC,SAAP,MAAsB,uBAAtB;AACA,SAASC,cAAT,EAAyBC,OAAzB,EAAkCC,SAAlC,EAA6CC,QAA7C,QAA6D,wBAA7D;AACA,SAASC,YAAT,QAA6B,mBAA7B;AACA,OAAOC,qBAAP,MAAkC,mCAAlC;AACA,OAAOC,OAAP,MAAoB,qBAApB;AACA,OAAOC,UAAP,MAAuB,qBAAvB;AACA,OAAOC,OAAP,MAAoB,kBAApB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,KAAP,MAAkB,cAAlB;AACA,IAAIC,QAAQ,GAAG;AACbC,EAAAA,SAAS,EAAE,SAASA,SAAT,CAAmBC,KAAnB,EAA0B;AACnC,QAAIC,KAAK,CAACC,OAAN,CAAcF,KAAd,CAAJ,EAA0B;AACxB,aAAOA,KAAK,CAACG,MAAN,KAAiB,CAAjB,IAAsBH,KAAK,CAACI,SAAN,CAAgB,UAAUC,GAAV,EAAe;AAC1D,eAAO,CAACR,KAAK,CAACQ,GAAD,CAAN,IAAe,CAACT,MAAM,CAACU,QAAP,CAAgBD,GAAhB,CAAvB;AACD,OAF4B,MAEtB,CAAC,CAFR;AAGD,KAJD,MAIO;AACL,aAAOR,KAAK,CAACG,KAAD,CAAL,IAAgBJ,MAAM,CAACU,QAAP,CAAgBN,KAAhB,CAAvB;AACD;AACF;AATY,CAAf;AAWA,IAAIO,MAAM,GAAG;AACXC,EAAAA,IAAI,EAAE,QADK;AAEXC,EAAAA,KAAK,EAAE;AACLC,IAAAA,SAAS,EAAEzB,SAAS,CAAC0B,SAAV,CAAoB,CAAC1B,SAAS,CAAC2B,IAAX,EAAiB3B,SAAS,CAAC4B,MAA3B,CAApB,CADN;AAELC,IAAAA,QAAQ,EAAE7B,SAAS,CAAC8B,IAFf;AAGLC,IAAAA,cAAc,EAAE/B,SAAS,CAAC4B,MAHrB;AAILI,IAAAA,MAAM,EAAEhC,SAAS,CAAC0B,SAAV,CAAoB,CAAC1B,SAAS,CAAC4B,MAAX,EAAmB5B,SAAS,CAACiC,KAA7B,EAAoCjC,SAAS,CAAC2B,IAA9C,CAApB,CAJH;AAKL;AACA;AACAO,IAAAA,QAAQ,EAAElC,SAAS,CAAC2B,IAPf;AAQLQ,IAAAA,oBAAoB,EAAEnC,SAAS,CAAC2B,IAR3B;AASLS,IAAAA,QAAQ,EAAEpC,SAAS,CAACqC,GATf;AAULC,IAAAA,IAAI,EAAEtC,SAAS,CAAC8B,IAVX;AAWLS,IAAAA,WAAW,EAAEvC,SAAS,CAAC8B,IAAV,CAAeU,GAAf,CAAmB,KAAnB,CAXR;AAYLC,IAAAA,SAAS,EAAEzC,SAAS,CAAC4B,MAAV,CAAiBY,GAAjB,CAAqB,oBAArB,CAZN;AAaLE,IAAAA,SAAS,EAAE1C,SAAS,CAACqC,GAAV,CAAcG,GAAd,CAAkB,YAAlB,CAbN;AAcLzB,IAAAA,KAAK,EAAEF,QAdF;AAeL8B,IAAAA,YAAY,EAAE9B,QAfT;AAgBL+B,IAAAA,KAAK,EAAE5C,SAAS,CAAC6C,MAAV,CAAiBL,GAAjB,CAAqB,YAAY;AACtC,aAAO,EAAP;AACD,KAFM,CAhBF;AAmBLM,IAAAA,iBAAiB,EAAE9C,SAAS,CAAC4B,MAnBxB;AAoBLmB,IAAAA,UAAU,EAAE/C,SAAS,CAAC2B;AApBjB,GAFI;AAwBXqB,EAAAA,MAAM,EAAE,CAAC/C,SAAD,CAxBG;AA0BXgD,EAAAA,IAAI,EAAE,SAASA,IAAT,GAAgB;AACpB,QAAIzB,KAAK,GAAG,KAAK0B,MAAjB;AACA,QAAIZ,IAAI,GAAG,KAAK,CAAhB;;AACA,QAAInC,OAAO,CAAC,IAAD,EAAO,MAAP,CAAX,EAA2B;AACzBmC,MAAAA,IAAI,GAAGd,KAAK,CAACc,IAAb;AACD,KAFD,MAEO;AACLA,MAAAA,IAAI,GAAGd,KAAK,CAACe,WAAb;AACD;;AACD,QAAIxB,KAAK,GAAGS,KAAK,CAACT,KAAN,IAAeS,KAAK,CAACmB,YAAjC;AACA,WAAO;AACLQ,MAAAA,KAAK,EAAEb,IADF;AAELc,MAAAA,MAAM,EAAErC;AAFH,KAAP;AAID,GAvCU;AAyCXsC,EAAAA,KAAK,EAAE;AACLtC,IAAAA,KAAK,EAAE,SAASA,KAAT,CAAeK,GAAf,EAAoB;AACzB,WAAKkC,QAAL,CAAc;AACZF,QAAAA,MAAM,EAAEhC;AADI,OAAd;AAGD,KALI;AAMLkB,IAAAA,IAAI,EAAE,SAASA,IAAT,CAAclB,GAAd,EAAmB;AACvB,WAAKkC,QAAL,CAAc;AACZH,QAAAA,KAAK,EAAE/B;AADK,OAAd;AAGD;AAVI,GAzCI;AAqDXmC,EAAAA,OAAO,EAAE,SAASA,OAAT,GAAmB;AAC1B,SAAKC,QAAL,GAAgB,KAAKL,KAArB;AACD,GAvDU;AAwDXM,EAAAA,OAAO,EAAE,SAASA,OAAT,GAAmB;AAC1B,QAAI,CAAC,KAAKD,QAAN,IAAkB,KAAKL,KAA3B,EAAkC;AAChC;AACA,WAAKO,YAAL,GAAoBC,UAAU,CAAC,KAAKC,aAAN,EAAqB,CAArB,CAA9B;AACD;;AACD,SAAKJ,QAAL,GAAgB,KAAKL,KAArB;AACD,GA9DU;AA+DXU,EAAAA,aAAa,EAAE,SAASA,aAAT,GAAyB;AACtCC,IAAAA,YAAY,CAAC,KAAKJ,YAAN,CAAZ;AACD,GAjEU;AAmEXK,EAAAA,OAAO,EAAE;AACPC,IAAAA,iBAAiB,EAAE,SAASA,iBAAT,CAA2BC,KAA3B,EAAkC;AACnD,UAAIA,KAAK,CAACC,OAAN,KAAkB1D,OAAO,CAAC2D,GAA9B,EAAmC;AACjCF,QAAAA,KAAK,CAACG,eAAN;AACA,aAAKC,aAAL,CAAmB,KAAKC,KAAxB;AACD;AACF,KANM;AAOPC,IAAAA,gBAAgB,EAAE,SAASA,gBAAT,CAA0BxD,KAA1B,EAAiC;AACjD,UAAIyD,KAAK,GAAGC,SAAS,CAACvD,MAAV,GAAmB,CAAnB,IAAwBuD,SAAS,CAAC,CAAD,CAAT,KAAiBC,SAAzC,GAAqDD,SAAS,CAAC,CAAD,CAA9D,GAAoE,EAAhF;AAEA,UAAIjD,KAAK,GAAG,KAAK0B,MAAjB;;AACA,UAAI,CAAC/C,OAAO,CAAC,IAAD,EAAO,OAAP,CAAZ,EAA6B;AAC3B,aAAKmD,QAAL,CAAc;AACZF,UAAAA,MAAM,EAAErC;AADI,SAAd;AAGD;;AACD,UAAI4D,aAAa,GAAGzE,cAAc,CAACsB,KAAK,CAACY,QAAP,CAAlC;;AACA,UAAIoC,KAAK,CAACI,MAAN,KAAiB,UAAjB,IAA+BJ,KAAK,CAACI,MAAN,KAAiB,iBAAhD,IAAqE,CAACD,aAAa,CAACE,UAAf,IAA6BL,KAAK,CAACI,MAAN,KAAiB,WAAnH,IAAkIJ,KAAK,CAACI,MAAN,KAAiB,aAAvJ,EAAsK;AACpK,aAAKP,aAAL,CAAmB,KAAKC,KAAxB;AACD;;AACD,WAAKQ,MAAL,CAAY,QAAZ,EAAsB/D,KAAtB;AACD,KArBM;AAsBPgE,IAAAA,SAAS,EAAE,SAASA,SAAT,CAAmBd,KAAnB,EAA0B;AACnC,UAAI,CAAC,KAAKd,KAAN,KAAgBc,KAAK,CAACC,OAAN,KAAkB1D,OAAO,CAACwE,IAA1B,IAAkCf,KAAK,CAACC,OAAN,KAAkB1D,OAAO,CAACyE,KAA5E,CAAJ,EAAwF;AACtF,aAAKC,YAAL;AACAjB,QAAAA,KAAK,CAACkB,cAAN;AACD;AACF,KA3BM;AA4BPC,IAAAA,YAAY,EAAE,SAASA,YAAT,GAAwB;AACpC,WAAKf,aAAL,CAAmB,KAAKC,KAAxB;AACD,KA9BM;AA+BPe,IAAAA,eAAe,EAAE,SAASA,eAAT,GAA2B;AAC1C,WAAKhB,aAAL,CAAmB,KAAKC,KAAxB;AACD,KAjCM;AAkCPgB,IAAAA,cAAc,EAAE,SAASA,cAAT,GAA0B;AACxC,WAAKC,OAAL,CAAa,KAAb;AACD,KApCM;AAqCPC,IAAAA,eAAe,EAAE,SAASA,eAAT,CAAyBlD,IAAzB,EAA+B;AAC9C,WAAKiD,OAAL,CAAajD,IAAb;AACD,KAvCM;AAwCPmD,IAAAA,kBAAkB,EAAE,SAASA,kBAAT,GAA8B;AAChD,UAAIjE,KAAK,GAAG,KAAK0B,MAAjB;AACA,UAAIyB,aAAa,GAAGzE,cAAc,CAACsB,KAAK,CAACY,QAAP,CAAlC;AACA,UAAIsD,cAAc,GAAGtF,SAAS,CAACoB,KAAK,CAACY,QAAP,CAA9B;AACA,UAAIrB,KAAK,GAAG,KAAKqC,MAAjB;AAEA,UAAIT,YAAY,GAAG5B,KAAnB;AACA,UAAI4E,UAAU,GAAG;AACfC,QAAAA,GAAG,EAAE,kBADU;AAEfpE,QAAAA,KAAK,EAAE;AACLmB,UAAAA,YAAY,EAAEA,YAAY,IAAIgC,aAAa,CAAChC,YADvC;AAELkD,UAAAA,aAAa,EAAE9E;AAFV,SAFQ;AAMf+E,QAAAA,EAAE,EAAE;AACFC,UAAAA,OAAO,EAAE,KAAK/B,iBADZ;AAEFgC,UAAAA,EAAE,EAAEzF,qBAAqB,CAACmF,cAAc,CAACM,EAAhB,EAAoB,KAAKZ,YAAzB,CAFvB;AAGFa,UAAAA,MAAM,EAAE1F,qBAAqB,CAACmF,cAAc,CAACO,MAAhB,EAAwB,KAAK1B,gBAA7B,CAH3B;AAIF2B,UAAAA,KAAK,EAAE3F,qBAAqB,CAACmF,cAAc,CAACQ,KAAhB,EAAuB,KAAKb,eAA5B,CAJ1B;AAKFc,UAAAA,IAAI,EAAE5F,qBAAqB,CAACmF,cAAc,CAACS,IAAhB,EAAsB,KAAKb,cAA3B;AALzB;AANW,OAAjB;AAeA,aAAOhF,YAAY,CAACkB,KAAK,CAACY,QAAP,EAAiBuD,UAAjB,CAAnB;AACD,KA/DM;AAgEPJ,IAAAA,OAAO,EAAE,SAASA,OAAT,CAAiBjD,IAAjB,EAAuB8D,QAAvB,EAAiC;AACxC,UAAI,KAAKjD,KAAL,KAAeb,IAAnB,EAAyB;AACvB,YAAI,CAACnC,OAAO,CAAC,IAAD,EAAO,MAAP,CAAZ,EAA4B;AAC1B,eAAKmD,QAAL,CAAc;AACZH,YAAAA,KAAK,EAAEb;AADK,WAAd,EAEG8D,QAFH;AAGD;;AACD,aAAKtB,MAAL,CAAY,YAAZ,EAA0BxC,IAA1B;AACD;AACF,KAzEM;AA0EP4C,IAAAA,YAAY,EAAE,SAASA,YAAT,CAAsBkB,QAAtB,EAAgC;AAC5C,WAAKb,OAAL,CAAa,IAAb,EAAmBa,QAAnB;AACD,KA5EM;AA6EP/B,IAAAA,aAAa,EAAE,SAASA,aAAT,CAAuB+B,QAAvB,EAAiC;AAC9C,WAAKb,OAAL,CAAa,KAAb,EAAoBa,QAApB;AACD,KA/EM;AAgFP9B,IAAAA,KAAK,EAAE,SAASA,KAAT,GAAiB;AACtB,UAAI,CAAC,KAAKnB,KAAV,EAAiB;AACf,aAAKkD,GAAL,CAAS/B,KAAT;AACD;AACF,KApFM;AAqFPV,IAAAA,aAAa,EAAE,SAASA,aAAT,GAAyB;AACtC,UAAI,KAAKT,KAAL,IAAc,KAAKmD,gBAAnB,IAAuC,KAAKA,gBAAL,CAAsBC,iBAAjE,EAAoF;AAClF,aAAKD,gBAAL,CAAsBC,iBAAtB,CAAwCjC,KAAxC;AACD;AACF;AAzFM,GAnEE;AA+JXkC,EAAAA,MAAM,EAAE,SAASA,MAAT,GAAkB;AACxB,QAAIC,CAAC,GAAGhC,SAAS,CAAC,CAAD,CAAjB;AAEA,QAAIjD,KAAK,GAAGtB,cAAc,CAAC,IAAD,CAA1B;AACA,QAAIwG,KAAK,GAAGrG,QAAQ,CAAC,IAAD,CAApB;AACA,QAAIoC,SAAS,GAAGjB,KAAK,CAACiB,SAAtB;AAAA,QACIC,SAAS,GAAGlB,KAAK,CAACkB,SADtB;AAAA,QAEIP,oBAAoB,GAAGX,KAAK,CAACW,oBAFjC;AAAA,QAGIS,KAAK,GAAGpB,KAAK,CAACoB,KAHlB;AAAA,QAIInB,SAAS,GAAGD,KAAK,CAACC,SAJtB;AAAA,QAKII,QAAQ,GAAGL,KAAK,CAACK,QALrB;AAAA,QAMIiB,iBAAiB,GAAGtB,KAAK,CAACsB,iBAN9B;AAAA,QAOIf,cAAc,GAAGP,KAAK,CAACO,cAP3B;AAQA,QAAIqB,MAAM,GAAG,KAAKA,MAAlB;AAAA,QACID,KAAK,GAAG,KAAKA,KADjB;AAGA,QAAIjB,QAAQ,GAAG,KAAKyE,YAAL,CAAkB,SAAlB,CAAf;AACA,QAAIC,aAAa,GAAG;AAClB7F,MAAAA,KAAK,EAAEqC,MADW;AAElBd,MAAAA,IAAI,EAAEa;AAFY,KAApB;;AAIA,QAAI,KAAKA,KAAL,IAAc,CAAC,KAAKmD,gBAAxB,EAA0C;AACxC,WAAKA,gBAAL,GAAwB,KAAKb,kBAAL,EAAxB;AACD;;AAED,WAAOgB,CAAC,CACN/F,OADM,EAEN;AACEmG,MAAAA,KAAK,EAAE;AACLC,QAAAA,UAAU,EAAElE,KADP;AAELmE,QAAAA,iBAAiB,EAAEtG,UAFd;AAGLuG,QAAAA,cAAc,EAAEtE,SAHX;AAILuE,QAAAA,MAAM,EAAEpF,QAAQ,IAAI,CAACsB,KAAb,GAAqB,EAArB,GAA0B,CAAC,OAAD,CAJ7B;AAKL+D,QAAAA,kBAAkB,EAAE,IALf;AAMLC,QAAAA,iBAAiB,EAAEhF,oBANd;AAOLiF,QAAAA,UAAU,EAAEV,KAPP;AAQLW,QAAAA,cAAc,EAAE5F,SARX;AASL6F,QAAAA,mBAAmB,EAAEvF,cAThB;AAULwF,QAAAA,YAAY,EAAEpE,KAVT;AAYLV,QAAAA,SAAS,EAAEA,SAZN;AAaL+E,QAAAA,cAAc,EAAE1E;AAbX,OADT;AAgBEgD,MAAAA,EAAE,EAAE;AACF,8BAAsB,KAAKN;AADzB;AAhBN,KAFM,EAsBN,CAACiB,CAAC,CACA,UADA,EAEA;AAAEgB,MAAAA,IAAI,EAAE;AAAR,KAFA,EAGA,CAAC,KAAKnB,gBAAN,CAHA,CAAF,EAIGhG,YAAY,CAAC4B,QAAQ,CAAC0E,aAAD,EAAgBpF,KAAhB,CAAT,EAAiC;AAAEsE,MAAAA,EAAE,EAAE;AAAEC,QAAAA,OAAO,EAAE,KAAKhB;AAAhB;AAAN,KAAjC,CAJf,CAtBM,CAAR;AA4BD;AApNU,CAAb;AAuNA,eAAezD,MAAf","sourcesContent":["import PropTypes from '../../_util/vue-types';\nimport BaseMixin from '../../_util/BaseMixin';\nimport { getOptionProps, hasProp, getEvents, getStyle } from '../../_util/props-util';\nimport { cloneElement } from '../../_util/vnode';\nimport createChainedFunction from '../../_util/createChainedFunction';\nimport KeyCode from '../../_util/KeyCode';\nimport placements from './picker/placements';\nimport Trigger from '../../vc-trigger';\nimport moment from 'moment';\nimport isNil from 'lodash/isNil';\nvar TimeType = {\n  validator: function validator(value) {\n    if (Array.isArray(value)) {\n      return value.length === 0 || value.findIndex(function (val) {\n        return !isNil(val) && !moment.isMoment(val);\n      }) === -1;\n    } else {\n      return isNil(value) || moment.isMoment(value);\n    }\n  }\n};\nvar Picker = {\n  name: 'Picker',\n  props: {\n    animation: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n    disabled: PropTypes.bool,\n    transitionName: PropTypes.string,\n    format: PropTypes.oneOfType([PropTypes.string, PropTypes.array, PropTypes.func]),\n    // onChange: PropTypes.func,\n    // onOpenChange: PropTypes.func,\n    children: PropTypes.func,\n    getCalendarContainer: PropTypes.func,\n    calendar: PropTypes.any,\n    open: PropTypes.bool,\n    defaultOpen: PropTypes.bool.def(false),\n    prefixCls: PropTypes.string.def('rc-calendar-picker'),\n    placement: PropTypes.any.def('bottomLeft'),\n    value: TimeType,\n    defaultValue: TimeType,\n    align: PropTypes.object.def(function () {\n      return {};\n    }),\n    dropdownClassName: PropTypes.string,\n    dateRender: PropTypes.func\n  },\n  mixins: [BaseMixin],\n\n  data: function data() {\n    var props = this.$props;\n    var open = void 0;\n    if (hasProp(this, 'open')) {\n      open = props.open;\n    } else {\n      open = props.defaultOpen;\n    }\n    var value = props.value || props.defaultValue;\n    return {\n      sOpen: open,\n      sValue: value\n    };\n  },\n\n  watch: {\n    value: function value(val) {\n      this.setState({\n        sValue: val\n      });\n    },\n    open: function open(val) {\n      this.setState({\n        sOpen: val\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.preSOpen = this.sOpen;\n  },\n  updated: function updated() {\n    if (!this.preSOpen && this.sOpen) {\n      // setTimeout is for making sure saveCalendarRef happen before focusCalendar\n      this.focusTimeout = setTimeout(this.focusCalendar, 0);\n    }\n    this.preSOpen = this.sOpen;\n  },\n  beforeDestroy: function beforeDestroy() {\n    clearTimeout(this.focusTimeout);\n  },\n\n  methods: {\n    onCalendarKeyDown: function onCalendarKeyDown(event) {\n      if (event.keyCode === KeyCode.ESC) {\n        event.stopPropagation();\n        this.closeCalendar(this.focus);\n      }\n    },\n    onCalendarSelect: function onCalendarSelect(value) {\n      var cause = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      var props = this.$props;\n      if (!hasProp(this, 'value')) {\n        this.setState({\n          sValue: value\n        });\n      }\n      var calendarProps = getOptionProps(props.calendar);\n      if (cause.source === 'keyboard' || cause.source === 'dateInputSelect' || !calendarProps.timePicker && cause.source !== 'dateInput' || cause.source === 'todayButton') {\n        this.closeCalendar(this.focus);\n      }\n      this.__emit('change', value);\n    },\n    onKeyDown: function onKeyDown(event) {\n      if (!this.sOpen && (event.keyCode === KeyCode.DOWN || event.keyCode === KeyCode.ENTER)) {\n        this.openCalendar();\n        event.preventDefault();\n      }\n    },\n    onCalendarOk: function onCalendarOk() {\n      this.closeCalendar(this.focus);\n    },\n    onCalendarClear: function onCalendarClear() {\n      this.closeCalendar(this.focus);\n    },\n    onCalendarBlur: function onCalendarBlur() {\n      this.setOpen(false);\n    },\n    onVisibleChange: function onVisibleChange(open) {\n      this.setOpen(open);\n    },\n    getCalendarElement: function getCalendarElement() {\n      var props = this.$props;\n      var calendarProps = getOptionProps(props.calendar);\n      var calendarEvents = getEvents(props.calendar);\n      var value = this.sValue;\n\n      var defaultValue = value;\n      var extraProps = {\n        ref: 'calendarInstance',\n        props: {\n          defaultValue: defaultValue || calendarProps.defaultValue,\n          selectedValue: value\n        },\n        on: {\n          keydown: this.onCalendarKeyDown,\n          ok: createChainedFunction(calendarEvents.ok, this.onCalendarOk),\n          select: createChainedFunction(calendarEvents.select, this.onCalendarSelect),\n          clear: createChainedFunction(calendarEvents.clear, this.onCalendarClear),\n          blur: createChainedFunction(calendarEvents.blur, this.onCalendarBlur)\n        }\n      };\n\n      return cloneElement(props.calendar, extraProps);\n    },\n    setOpen: function setOpen(open, callback) {\n      if (this.sOpen !== open) {\n        if (!hasProp(this, 'open')) {\n          this.setState({\n            sOpen: open\n          }, callback);\n        }\n        this.__emit('openChange', open);\n      }\n    },\n    openCalendar: function openCalendar(callback) {\n      this.setOpen(true, callback);\n    },\n    closeCalendar: function closeCalendar(callback) {\n      this.setOpen(false, callback);\n    },\n    focus: function focus() {\n      if (!this.sOpen) {\n        this.$el.focus();\n      }\n    },\n    focusCalendar: function focusCalendar() {\n      if (this.sOpen && this.calendarInstance && this.calendarInstance.componentInstance) {\n        this.calendarInstance.componentInstance.focus();\n      }\n    }\n  },\n\n  render: function render() {\n    var h = arguments[0];\n\n    var props = getOptionProps(this);\n    var style = getStyle(this);\n    var prefixCls = props.prefixCls,\n        placement = props.placement,\n        getCalendarContainer = props.getCalendarContainer,\n        align = props.align,\n        animation = props.animation,\n        disabled = props.disabled,\n        dropdownClassName = props.dropdownClassName,\n        transitionName = props.transitionName;\n    var sValue = this.sValue,\n        sOpen = this.sOpen;\n\n    var children = this.$scopedSlots['default'];\n    var childrenState = {\n      value: sValue,\n      open: sOpen\n    };\n    if (this.sOpen || !this.calendarInstance) {\n      this.calendarInstance = this.getCalendarElement();\n    }\n\n    return h(\n      Trigger,\n      {\n        attrs: {\n          popupAlign: align,\n          builtinPlacements: placements,\n          popupPlacement: placement,\n          action: disabled && !sOpen ? [] : ['click'],\n          destroyPopupOnHide: true,\n          getPopupContainer: getCalendarContainer,\n          popupStyle: style,\n          popupAnimation: animation,\n          popupTransitionName: transitionName,\n          popupVisible: sOpen,\n\n          prefixCls: prefixCls,\n          popupClassName: dropdownClassName\n        },\n        on: {\n          'popupVisibleChange': this.onVisibleChange\n        }\n      },\n      [h(\n        'template',\n        { slot: 'popup' },\n        [this.calendarInstance]\n      ), cloneElement(children(childrenState, props), { on: { keydown: this.onKeyDown } })]\n    );\n  }\n};\n\nexport default Picker;"]},"metadata":{},"sourceType":"module"}