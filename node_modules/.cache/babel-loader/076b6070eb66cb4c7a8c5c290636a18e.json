{"ast":null,"code":"import _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _toConsumableArray from 'babel-runtime/helpers/toConsumableArray';\nimport _extends from 'babel-runtime/helpers/extends';\nimport omit from 'omit.js';\nimport debounce from 'lodash/debounce';\nimport PropTypes from '../_util/vue-types';\nimport warning from '../_util/warning';\nimport { conductExpandParent, convertTreeToEntities } from '../vc-tree/src/util';\nimport Tree, { TreeProps } from './Tree';\nimport { calcRangeKeys, getFullKeyList, convertDirectoryKeysToNodes, getFullKeyListByTreeData } from './util';\nimport Icon from '../icon';\nimport BaseMixin from '../_util/BaseMixin';\nimport { initDefaultProps, getOptionProps, getListeners, getComponentFromProp } from '../_util/props-util';\nimport { ConfigConsumerProps } from '../config-provider/configConsumerProps'; // export type ExpandAction = false | 'click' | 'dblclick'; export interface\n// DirectoryTreeProps extends TreeProps {   expandAction?: ExpandAction; }\n// export interface DirectoryTreeState {   expandedKeys?: string[];\n// selectedKeys?: string[]; }\n\nfunction getIcon(props, h) {\n  var isLeaf = props.isLeaf,\n      expanded = props.expanded;\n\n  if (isLeaf) {\n    return h(Icon, {\n      attrs: {\n        type: 'file'\n      }\n    });\n  }\n\n  return h(Icon, {\n    attrs: {\n      type: expanded ? 'folder-open' : 'folder'\n    }\n  });\n}\n\nexport default {\n  name: 'ADirectoryTree',\n  mixins: [BaseMixin],\n  model: {\n    prop: 'checkedKeys',\n    event: 'check'\n  },\n  props: initDefaultProps(_extends({}, TreeProps(), {\n    expandAction: PropTypes.oneOf([false, 'click', 'doubleclick', 'dblclick'])\n  }), {\n    showIcon: true,\n    expandAction: 'click'\n  }),\n  // state: DirectoryTreeState; onDebounceExpand: (event, node: AntTreeNode) =>\n  // void; // Shift click usage lastSelectedKey?: string; cachedSelectedKeys?:\n  // string[];\n  inject: {\n    configProvider: {\n      'default': function _default() {\n        return ConfigConsumerProps;\n      }\n    }\n  },\n  data: function data() {\n    var props = getOptionProps(this);\n    var defaultExpandAll = props.defaultExpandAll,\n        defaultExpandParent = props.defaultExpandParent,\n        expandedKeys = props.expandedKeys,\n        defaultExpandedKeys = props.defaultExpandedKeys;\n\n    var _convertTreeToEntitie = convertTreeToEntities(this.$slots['default']),\n        keyEntities = _convertTreeToEntitie.keyEntities;\n\n    var state = {}; // Selected keys\n\n    state._selectedKeys = props.selectedKeys || props.defaultSelectedKeys || []; // Expanded keys\n\n    if (defaultExpandAll) {\n      if (props.treeData) {\n        state._expandedKeys = getFullKeyListByTreeData(props.treeData);\n      } else {\n        state._expandedKeys = getFullKeyList(this.$slots['default']);\n      }\n    } else if (defaultExpandParent) {\n      state._expandedKeys = conductExpandParent(expandedKeys || defaultExpandedKeys, keyEntities);\n    } else {\n      state._expandedKeys = expandedKeys || defaultExpandedKeys;\n    }\n\n    this.onDebounceExpand = debounce(this.expandFolderNode, 200, {\n      leading: true\n    });\n    return _extends({\n      _selectedKeys: [],\n      _expandedKeys: []\n    }, state);\n  },\n  watch: {\n    expandedKeys: function expandedKeys(val) {\n      this.setState({\n        _expandedKeys: val\n      });\n    },\n    selectedKeys: function selectedKeys(val) {\n      this.setState({\n        _selectedKeys: val\n      });\n    }\n  },\n  methods: {\n    onExpand: function onExpand(expandedKeys, info) {\n      this.setUncontrolledState({\n        _expandedKeys: expandedKeys\n      });\n      this.$emit('expand', expandedKeys, info);\n      return undefined;\n    },\n    onClick: function onClick(event, node) {\n      var expandAction = this.$props.expandAction; // Expand the tree\n\n      if (expandAction === 'click') {\n        this.onDebounceExpand(event, node);\n      }\n\n      this.$emit('click', event, node);\n    },\n    onDoubleClick: function onDoubleClick(event, node) {\n      var expandAction = this.$props.expandAction; // Expand the tree\n\n      if (expandAction === 'dblclick' || expandAction === 'doubleclick') {\n        this.onDebounceExpand(event, node);\n      }\n\n      this.$emit('doubleclick', event, node);\n      this.$emit('dblclick', event, node);\n    },\n    onSelect: function onSelect(keys, event) {\n      var multiple = this.$props.multiple;\n      var children = this.$slots['default'] || [];\n      var _$data$_expandedKeys = this.$data._expandedKeys,\n          expandedKeys = _$data$_expandedKeys === undefined ? [] : _$data$_expandedKeys;\n      var node = event.node,\n          nativeEvent = event.nativeEvent;\n      var _node$eventKey = node.eventKey,\n          eventKey = _node$eventKey === undefined ? '' : _node$eventKey;\n      var newState = {}; // We need wrap this event since some value is not same\n\n      var newEvent = _extends({}, event, {\n        selected: true // Directory selected always true\n\n      }); // Windows / Mac single pick\n\n\n      var ctrlPick = nativeEvent.ctrlKey || nativeEvent.metaKey;\n      var shiftPick = nativeEvent.shiftKey; // Generate new selected keys\n\n      var newSelectedKeys = void 0;\n\n      if (multiple && ctrlPick) {\n        // Control click\n        newSelectedKeys = keys;\n        this.lastSelectedKey = eventKey;\n        this.cachedSelectedKeys = newSelectedKeys;\n        newEvent.selectedNodes = convertDirectoryKeysToNodes(children, newSelectedKeys);\n      } else if (multiple && shiftPick) {\n        // Shift click\n        newSelectedKeys = Array.from(new Set([].concat(_toConsumableArray(this.cachedSelectedKeys || []), _toConsumableArray(calcRangeKeys(children, expandedKeys, eventKey, this.lastSelectedKey)))));\n        newEvent.selectedNodes = convertDirectoryKeysToNodes(children, newSelectedKeys);\n      } else {\n        // Single click\n        newSelectedKeys = [eventKey];\n        this.lastSelectedKey = eventKey;\n        this.cachedSelectedKeys = newSelectedKeys;\n        newEvent.selectedNodes = [event.node];\n      }\n\n      newState._selectedKeys = newSelectedKeys;\n      this.$emit('update:selectedKeys', newSelectedKeys);\n      this.$emit('select', newSelectedKeys, newEvent);\n      this.setUncontrolledState(newState);\n    },\n    expandFolderNode: function expandFolderNode(event, node) {\n      var isLeaf = node.isLeaf;\n\n      if (isLeaf || event.shiftKey || event.metaKey || event.ctrlKey) {\n        return;\n      }\n\n      if (this.$refs.tree.$refs.tree) {\n        // Get internal vc-tree\n        var internalTree = this.$refs.tree.$refs.tree; // Call internal rc-tree expand function\n        // https://github.com/ant-design/ant-design/issues/12567\n\n        internalTree.onNodeExpand(event, node);\n      }\n    },\n    setUncontrolledState: function setUncontrolledState(state) {\n      var newState = omit(state, Object.keys(getOptionProps(this)).map(function (p) {\n        return '_' + p;\n      }));\n\n      if (Object.keys(newState).length) {\n        this.setState(newState);\n      }\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n\n    var _getOptionProps = getOptionProps(this),\n        customizePrefixCls = _getOptionProps.prefixCls,\n        props = _objectWithoutProperties(_getOptionProps, ['prefixCls']);\n\n    var getPrefixCls = this.configProvider.getPrefixCls;\n    var prefixCls = getPrefixCls('tree', customizePrefixCls);\n    var _$data = this.$data,\n        expandedKeys = _$data._expandedKeys,\n        selectedKeys = _$data._selectedKeys;\n    var listeners = getListeners(this);\n    warning(!listeners.doubleclick, '`doubleclick` is deprecated. please use `dblclick` instead.');\n    var treeProps = {\n      props: _extends({\n        icon: getIcon\n      }, props, {\n        prefixCls: prefixCls,\n        expandedKeys: expandedKeys,\n        selectedKeys: selectedKeys,\n        switcherIcon: getComponentFromProp(this, 'switcherIcon')\n      }),\n      ref: 'tree',\n      'class': prefixCls + '-directory',\n      on: _extends({}, omit(listeners, ['update:selectedKeys']), {\n        select: this.onSelect,\n        click: this.onClick,\n        dblclick: this.onDoubleClick,\n        expand: this.onExpand\n      })\n    };\n    return h(Tree, treeProps, [this.$slots['default']]);\n  }\n};","map":{"version":3,"sources":["/Users/liulu/刘璐/vue3/hello-vue3/node_modules/ant-design-vue/es/tree/DirectoryTree.js"],"names":["_objectWithoutProperties","_toConsumableArray","_extends","omit","debounce","PropTypes","warning","conductExpandParent","convertTreeToEntities","Tree","TreeProps","calcRangeKeys","getFullKeyList","convertDirectoryKeysToNodes","getFullKeyListByTreeData","Icon","BaseMixin","initDefaultProps","getOptionProps","getListeners","getComponentFromProp","ConfigConsumerProps","getIcon","props","h","isLeaf","expanded","attrs","type","name","mixins","model","prop","event","expandAction","oneOf","showIcon","inject","configProvider","_default","data","defaultExpandAll","defaultExpandParent","expandedKeys","defaultExpandedKeys","_convertTreeToEntitie","$slots","keyEntities","state","_selectedKeys","selectedKeys","defaultSelectedKeys","treeData","_expandedKeys","onDebounceExpand","expandFolderNode","leading","watch","val","setState","methods","onExpand","info","setUncontrolledState","$emit","undefined","onClick","node","$props","onDoubleClick","onSelect","keys","multiple","children","_$data$_expandedKeys","$data","nativeEvent","_node$eventKey","eventKey","newState","newEvent","selected","ctrlPick","ctrlKey","metaKey","shiftPick","shiftKey","newSelectedKeys","lastSelectedKey","cachedSelectedKeys","selectedNodes","Array","from","Set","concat","$refs","tree","internalTree","onNodeExpand","Object","map","p","length","render","arguments","_getOptionProps","customizePrefixCls","prefixCls","getPrefixCls","_$data","listeners","doubleclick","treeProps","icon","switcherIcon","ref","on","select","click","dblclick","expand"],"mappings":"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","sourcesContent":["import _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _toConsumableArray from 'babel-runtime/helpers/toConsumableArray';\nimport _extends from 'babel-runtime/helpers/extends';\nimport omit from 'omit.js';\nimport debounce from 'lodash/debounce';\nimport PropTypes from '../_util/vue-types';\nimport warning from '../_util/warning';\nimport { conductExpandParent, convertTreeToEntities } from '../vc-tree/src/util';\nimport Tree, { TreeProps } from './Tree';\nimport { calcRangeKeys, getFullKeyList, convertDirectoryKeysToNodes, getFullKeyListByTreeData } from './util';\nimport Icon from '../icon';\nimport BaseMixin from '../_util/BaseMixin';\nimport { initDefaultProps, getOptionProps, getListeners, getComponentFromProp } from '../_util/props-util';\nimport { ConfigConsumerProps } from '../config-provider/configConsumerProps';\n\n// export type ExpandAction = false | 'click' | 'dblclick'; export interface\n// DirectoryTreeProps extends TreeProps {   expandAction?: ExpandAction; }\n// export interface DirectoryTreeState {   expandedKeys?: string[];\n// selectedKeys?: string[]; }\n\nfunction getIcon(props, h) {\n  var isLeaf = props.isLeaf,\n      expanded = props.expanded;\n\n  if (isLeaf) {\n    return h(Icon, {\n      attrs: { type: 'file' }\n    });\n  }\n  return h(Icon, {\n    attrs: { type: expanded ? 'folder-open' : 'folder' }\n  });\n}\n\nexport default {\n  name: 'ADirectoryTree',\n  mixins: [BaseMixin],\n  model: {\n    prop: 'checkedKeys',\n    event: 'check'\n  },\n  props: initDefaultProps(_extends({}, TreeProps(), {\n    expandAction: PropTypes.oneOf([false, 'click', 'doubleclick', 'dblclick'])\n  }), {\n    showIcon: true,\n    expandAction: 'click'\n  }),\n\n  // state: DirectoryTreeState; onDebounceExpand: (event, node: AntTreeNode) =>\n  // void; // Shift click usage lastSelectedKey?: string; cachedSelectedKeys?:\n  // string[];\n  inject: {\n    configProvider: {\n      'default': function _default() {\n        return ConfigConsumerProps;\n      }\n    }\n  },\n  data: function data() {\n    var props = getOptionProps(this);\n    var defaultExpandAll = props.defaultExpandAll,\n        defaultExpandParent = props.defaultExpandParent,\n        expandedKeys = props.expandedKeys,\n        defaultExpandedKeys = props.defaultExpandedKeys;\n\n    var _convertTreeToEntitie = convertTreeToEntities(this.$slots['default']),\n        keyEntities = _convertTreeToEntitie.keyEntities;\n\n    var state = {};\n    // Selected keys\n    state._selectedKeys = props.selectedKeys || props.defaultSelectedKeys || [];\n\n    // Expanded keys\n    if (defaultExpandAll) {\n      if (props.treeData) {\n        state._expandedKeys = getFullKeyListByTreeData(props.treeData);\n      } else {\n        state._expandedKeys = getFullKeyList(this.$slots['default']);\n      }\n    } else if (defaultExpandParent) {\n      state._expandedKeys = conductExpandParent(expandedKeys || defaultExpandedKeys, keyEntities);\n    } else {\n      state._expandedKeys = expandedKeys || defaultExpandedKeys;\n    }\n\n    this.onDebounceExpand = debounce(this.expandFolderNode, 200, { leading: true });\n    return _extends({\n      _selectedKeys: [],\n      _expandedKeys: []\n    }, state);\n  },\n\n  watch: {\n    expandedKeys: function expandedKeys(val) {\n      this.setState({ _expandedKeys: val });\n    },\n    selectedKeys: function selectedKeys(val) {\n      this.setState({ _selectedKeys: val });\n    }\n  },\n  methods: {\n    onExpand: function onExpand(expandedKeys, info) {\n      this.setUncontrolledState({ _expandedKeys: expandedKeys });\n\n      this.$emit('expand', expandedKeys, info);\n\n      return undefined;\n    },\n    onClick: function onClick(event, node) {\n      var expandAction = this.$props.expandAction;\n\n      // Expand the tree\n\n      if (expandAction === 'click') {\n        this.onDebounceExpand(event, node);\n      }\n      this.$emit('click', event, node);\n    },\n    onDoubleClick: function onDoubleClick(event, node) {\n      var expandAction = this.$props.expandAction;\n\n      // Expand the tree\n\n      if (expandAction === 'dblclick' || expandAction === 'doubleclick') {\n        this.onDebounceExpand(event, node);\n      }\n\n      this.$emit('doubleclick', event, node);\n      this.$emit('dblclick', event, node);\n    },\n    onSelect: function onSelect(keys, event) {\n      var multiple = this.$props.multiple;\n\n      var children = this.$slots['default'] || [];\n      var _$data$_expandedKeys = this.$data._expandedKeys,\n          expandedKeys = _$data$_expandedKeys === undefined ? [] : _$data$_expandedKeys;\n      var node = event.node,\n          nativeEvent = event.nativeEvent;\n      var _node$eventKey = node.eventKey,\n          eventKey = _node$eventKey === undefined ? '' : _node$eventKey;\n\n\n      var newState = {};\n\n      // We need wrap this event since some value is not same\n      var newEvent = _extends({}, event, {\n        selected: true // Directory selected always true\n      });\n\n      // Windows / Mac single pick\n      var ctrlPick = nativeEvent.ctrlKey || nativeEvent.metaKey;\n      var shiftPick = nativeEvent.shiftKey;\n\n      // Generate new selected keys\n      var newSelectedKeys = void 0;\n      if (multiple && ctrlPick) {\n        // Control click\n        newSelectedKeys = keys;\n        this.lastSelectedKey = eventKey;\n        this.cachedSelectedKeys = newSelectedKeys;\n        newEvent.selectedNodes = convertDirectoryKeysToNodes(children, newSelectedKeys);\n      } else if (multiple && shiftPick) {\n        // Shift click\n        newSelectedKeys = Array.from(new Set([].concat(_toConsumableArray(this.cachedSelectedKeys || []), _toConsumableArray(calcRangeKeys(children, expandedKeys, eventKey, this.lastSelectedKey)))));\n        newEvent.selectedNodes = convertDirectoryKeysToNodes(children, newSelectedKeys);\n      } else {\n        // Single click\n        newSelectedKeys = [eventKey];\n        this.lastSelectedKey = eventKey;\n        this.cachedSelectedKeys = newSelectedKeys;\n        newEvent.selectedNodes = [event.node];\n      }\n      newState._selectedKeys = newSelectedKeys;\n\n      this.$emit('update:selectedKeys', newSelectedKeys);\n      this.$emit('select', newSelectedKeys, newEvent);\n\n      this.setUncontrolledState(newState);\n    },\n    expandFolderNode: function expandFolderNode(event, node) {\n      var isLeaf = node.isLeaf;\n\n\n      if (isLeaf || event.shiftKey || event.metaKey || event.ctrlKey) {\n        return;\n      }\n\n      if (this.$refs.tree.$refs.tree) {\n        // Get internal vc-tree\n        var internalTree = this.$refs.tree.$refs.tree;\n\n        // Call internal rc-tree expand function\n        // https://github.com/ant-design/ant-design/issues/12567\n        internalTree.onNodeExpand(event, node);\n      }\n    },\n    setUncontrolledState: function setUncontrolledState(state) {\n      var newState = omit(state, Object.keys(getOptionProps(this)).map(function (p) {\n        return '_' + p;\n      }));\n      if (Object.keys(newState).length) {\n        this.setState(newState);\n      }\n    }\n  },\n\n  render: function render() {\n    var h = arguments[0];\n\n    var _getOptionProps = getOptionProps(this),\n        customizePrefixCls = _getOptionProps.prefixCls,\n        props = _objectWithoutProperties(_getOptionProps, ['prefixCls']);\n\n    var getPrefixCls = this.configProvider.getPrefixCls;\n    var prefixCls = getPrefixCls('tree', customizePrefixCls);\n    var _$data = this.$data,\n        expandedKeys = _$data._expandedKeys,\n        selectedKeys = _$data._selectedKeys;\n\n    var listeners = getListeners(this);\n    warning(!listeners.doubleclick, '`doubleclick` is deprecated. please use `dblclick` instead.');\n    var treeProps = {\n      props: _extends({\n        icon: getIcon\n      }, props, {\n        prefixCls: prefixCls,\n        expandedKeys: expandedKeys,\n        selectedKeys: selectedKeys,\n        switcherIcon: getComponentFromProp(this, 'switcherIcon')\n      }),\n      ref: 'tree',\n      'class': prefixCls + '-directory',\n      on: _extends({}, omit(listeners, ['update:selectedKeys']), {\n        select: this.onSelect,\n        click: this.onClick,\n        dblclick: this.onDoubleClick,\n        expand: this.onExpand\n      })\n    };\n    return h(\n      Tree,\n      treeProps,\n      [this.$slots['default']]\n    );\n  }\n};"]},"metadata":{},"sourceType":"module"}